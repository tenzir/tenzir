<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">VAST v2.1 | Tenzir</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.tenzir.com/releases/vast-v2.1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="VAST v2.1 | Tenzir"><meta data-rh="true" name="description" content="VAST v2.1 - Tune VAST Databases"><meta data-rh="true" property="og:description" content="VAST v2.1 - Tune VAST Databases"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-07-07T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/dominiklohmann"><meta data-rh="true" property="article:tag" content="release,performance"><link data-rh="true" rel="icon" href="/img/tenzir-logo-adaptive.svg"><link data-rh="true" rel="canonical" href="https://docs.tenzir.com/releases/vast-v2.1"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/releases/vast-v2.1" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/releases/vast-v2.1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BVB58VRBDH-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/releases/rss.xml" title="Tenzir RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/releases/atom.xml" title="Tenzir Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Tenzir" href="/opensearch.xml">



<link rel="alternate" type="application/rss+xml" href="/archive/rss.xml" title="Tenzir RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/archive/atom.xml" title="Tenzir Atom Feed">

<script src="https://plausible.io/js/script.js" aysnc defer="defer" data-domain="docs.tenzir.com"></script><link rel="stylesheet" href="/assets/css/styles.8411515e.css">
<link rel="preload" href="/assets/js/runtime~main.62d46a68.js" as="script">
<link rel="preload" href="/assets/js/main.ad8f699c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/tenzir-black.svg" alt="Tenzir" class="themedImage_ToTc themedImage--light_HNdA" width="120"><img src="/img/tenzir-white.svg" alt="Tenzir" class="themedImage_ToTc themedImage--dark_i4oU" width="120"></div></a><a class="navbar__item navbar__link" href="/overview">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/releases">Releases</a><a class="navbar__item navbar__link" href="/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link header-discord-link" aria-label="Discord" href="/discord"></a><a href="https://github.com/tenzir/tenzir" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/overview">v4.32</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/overview">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/overview">v4.32</a></li><li><a class="dropdown__link" href="/v4.31/overview">v4.31</a></li><li><a class="dropdown__link" href="/v4.30/overview">v4.30</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Release Notes</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.32">Tenzir Node v4.32: Google SecOps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.31">Tenzir Node v4.31: OpenSearch Ingestion and if-expressions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.30">Tenzir Node v4.30: ClickHouse Integration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.9">Tenzir Platform v1.9: Accelerated Data Exploration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.29">Tenzir Node v4.29: Nested Printing</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.28">Tenzir Node v4.28: Nested Parsing</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.27">Tenzir Node v4.27: Amazon MSK IAM Integration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.8">Tenzir Platform v1.8: Charting the Unknown</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.26">Tenzir Node v4.26: Amazon Security Lake Integration</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.25">Tenzir Node v4.25: Sinks Galore!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.7">Tenzir Platform v1.7: Explorer Drag&#x27;n&#x27;Drop</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.6">Tenzir Platform v1.6: Example Pipelines</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.5">Tenzir Platform v1.5: Revamped Dashboards</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.24">Tenzir Node v4.24: List Manipulation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.4">Tenzir Platform v1.4: Platform Alerts</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.23">Tenzir Node v4.23</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.3">Tenzir Platform v1.3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.2">Tenzir Platform v1.2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.22">Tenzir Node v4.22</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.21">Tenzir Node v4.21</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-platform-v1.1">Tenzir Platform v1.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-node-v4.20">Tenzir Node v4.20</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.19">Tenzir v4.19</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.18">Tenzir v4.18</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.17">Tenzir v4.17</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.16">Tenzir v4.16</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.15">Tenzir v4.15</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.14">Tenzir v4.14</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.13">Tenzir v4.13</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.12">Tenzir v4.12</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.11">Tenzir v4.11</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.10">Tenzir v4.10</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.9">Tenzir v4.9</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.8">Tenzir v4.8</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.7">Tenzir v4.7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.6">Tenzir v4.6</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.5">Tenzir v4.5</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.4">Tenzir v4.4</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.3">Tenzir v4.3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.2">Tenzir v4.2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/tenzir-v4.1">Tenzir v4.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v3.1">VAST v3.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v3.0">VAST v3.0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v2.4.1">VAST v2.4.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v2.4">VAST v2.4</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v2.3.1">VAST v2.3.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v2.3">VAST v2.3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v2.2">VAST v2.2</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/releases/vast-v2.1">VAST v2.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v2.0">VAST v2.0</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v1.1.2">VAST v1.1.2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v1.1.1">VAST v1.1.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v1.1">VAST v1.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/releases/vast-v1.0">VAST v1.0</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">VAST v2.1</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-07-07T00:00:00.000Z" itemprop="datePublished">July 7, 2022</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/dominiklohmann" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/dominiklohmann.png" alt="Dominik Lohmann"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dominiklohmann" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dominik Lohmann</span></a></div><small class="avatar__subtitle" itemprop="description">VP Engineering</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p><a href="https://github.com/tenzir/vast/releases/tag/v2.1.0" target="_blank" rel="noopener noreferrer">VAST v2.1</a> is out! This release comes with a particular
focus on performance and reducing the size of VAST databases. It brings a new
utility for optimizing databases in production, allowing existing deployments to
take full advantage of the improvements after upgrading.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-project-site">New Project Site<a href="#new-project-site" class="hash-link" aria-label="Direct link to New Project Site" title="Direct link to New Project Site">​</a></h2><p>VAST has new project site: <a href="https://vast.io" target="_blank" rel="noopener noreferrer">vast.io</a>. We ported all
documentation from <code>https://docs.tenzir.com</code>, added a lot of new content, and
restructured the reading experience along the user journey.</p><p>You can find the Threat Bus documentation in Use VAST → Integrate → Threat
Bus. Threat Bus is now officially in
maintainance mode: we are only supporting existing features with bugfixes. That
said, Threat Bus will resurface in a new shape with its existing functionality
integrated into VAST itself. Stay tuned.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance-improvements">Performance Improvements<a href="#performance-improvements" class="hash-link" aria-label="Direct link to Performance Improvements" title="Direct link to Performance Improvements">​</a></h2><p>VAST now compresses data with <a href="http://www.zstd.net" target="_blank" rel="noopener noreferrer">Zstd</a>. The default
configuration achieves over 2x space savings. When transferring data between
client and server processes, compression reduces the amount of transferred data
by up to 5x.</p><p>Additionally, VAST now compresses on-disk indexes with Zstd, resulting in a
50-80% size reduction depending on the type of indexes used.</p><p>This allowed us to increase the default partition size from 1,048,576 to
4,194,304 events<sup id="fnref-1-2fe921"><a href="#fn-1-2fe921" class="footnote-ref">1</a></sup>, and the default number of events in a single batch from 1,024
to 65,536, resulting in a massive performance increase at the cost of a ~20%
larger memory footprint at peak loads. Use the option <code>vast.max-partition-size</code>
to tune this space-time tradeoff.</p><p>To benchmark this, we used <a href="https://github.com/satta/speeve" target="_blank" rel="noopener noreferrer"><code>speeve</code></a> to generate 20 EVE JSON files
containing 8,388,608 events each<sup id="fnref-2-2fe921"><a href="#fn-2-2fe921" class="footnote-ref">2</a></sup>. We spawned a VAST server process and ran
20 VAST client processes in parallel, with one process per file.</p><p>We observed a reduction of <strong>up to 73%</strong> of disk space utilization:</p><p><img loading="lazy" alt="Database Size" src="/assets/images/storage-light-cdbfe9d3c7df930476bfdabb5e5f4df8.png#gh-light-mode-only" width="3000" height="2100" class="img_ev3q">
<img loading="lazy" alt="Database Size" src="/assets/images/storage-dark-701aea7c53efb6a69eeb91d2903dbe29.png#gh-dark-mode-only" width="3000" height="2100" class="img_ev3q"></p><p>In addition, we were able to scale the ingest rate by almost <strong>6x</strong> due to the
higher batch size and the reduced memory usage per batch:</p><p><img loading="lazy" alt="Ingest Rate" src="/assets/images/rate-light-0c19006b81ccac4f390f70ba73d0072a.png#gh-light-mode-only" width="3000" height="2100" class="img_ev3q">
<img loading="lazy" alt="Ingest Rate" src="/assets/images/rate-dark-026fc75f7f0a93ae2734813a1c870feb.png#gh-dark-mode-only" width="3000" height="2100" class="img_ev3q"></p><p>The table below summaries the benchmarks:</p><table><thead><tr><th align="right"></th><th align="left">VAST v2.0</th><th align="left">VAST v2.1</th><th align="left">Change</th></tr></thead><tbody><tr><td align="right">Ingest Duration</td><td align="left">1,650 s</td><td align="left">242 s</td><td align="left">-85.3%</td></tr><tr><td align="right">Ingest Rate</td><td align="left">101,680 events/s</td><td align="left">693,273 events/s</td><td align="left">+581.8%</td></tr><tr><td align="right">Index Size</td><td align="left">14,791 MiB</td><td align="left">5,721 MiB</td><td align="left">-61.3%</td></tr><tr><td align="right">Store Size</td><td align="left">37,656 MiB</td><td align="left">8,491 MiB</td><td align="left">-77.5%</td></tr><tr><td align="right">Database Size</td><td align="left">52,446 MiB</td><td align="left">14,212 MiB</td><td align="left">-72.9%</td></tr></tbody></table><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Compressed Filesystems</div><div class="admonitionContent_S0QG"><p>The above benchmarks ran on filesystems without compression. We expect the gain
from compression to be smaller when using compressed filesystems like
<a href="https://btrfs.wiki.kernel.org/index.php/Main_Page" target="_blank" rel="noopener noreferrer"><code>btrfs</code></a>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rebuild-vast-databases">Rebuild VAST Databases<a href="#rebuild-vast-databases" class="hash-link" aria-label="Direct link to Rebuild VAST Databases" title="Direct link to Rebuild VAST Databases">​</a></h2><p>The new changes to VAST&#x27;s internal data format only apply to newly ingested
data. To retrofit changes, we introduce a new <code>rebuild</code> command with this
release. A rebuild effectively re-ingests events from existing partitions and
atomically replaces them with partitions of the new format.</p><p>This makes it possible to upgrade persistent state to a newer version, or
recreate persistent state after changing configuration parameters, e.g.,
switching from the Feather to the Parquet store backend (that will land in
v2.2). Rebuilding partitions also recreates their sparse indexes that
accellerate query execution. The process takes place asynchronously in the
background.</p><p>We recommend running <code>vast rebuild</code> to upgrade your VAST v1.x partitions to VAST
v2.x partitions to take advantage of the new compression and an improved
internal representation.</p><p>This is how you run it:</p><figure data-rehype-pretty-code-figure=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><code data-language="bash" data-theme="github-dark-default" style="display:grid"><span data-line=""><span style="color:#FFA657">vast</span><span style="color:#A5D6FF"> rebuild</span><span style="color:#E6EDF3"> [--all] [--undersized] [--parallel</span><span style="color:#FF7B72">=&lt;</span><span style="color:#E6EDF3">number</span><span style="color:#FF7B72">&gt;</span><span style="color:#E6EDF3">] [</span><span style="color:#FF7B72">&lt;</span><span style="color:#E6EDF3">expression</span><span style="color:#FF7B72">&gt;</span><span style="color:#E6EDF3">]</span></span></code><button type="button" data="vast rebuild [--all] [--undersized] [--parallel=&lt;number&gt;] [&lt;expression&gt;]" title="Copy code" aria-label="Copy code" class="rehype-pretty-copy" data-feedback-duration="3000" data-name="rehype-pretty-copy-button"><span class="ready"></span><span class="success"></span></button><style>
    :root {
      --copy-icon: url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+&quot;);
      --success-icon: url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+&quot;);
    }

    pre:has(code) {
      position: relative;
    }

    button[data=&#x27;&lt;span&gt;&#x27;] {
      width: 0;
      height: 0;
      display: none;
      visibility: hidden;
    }

    pre button.rehype-pretty-copy {
      top: 1px;
      right: 1px;
      padding: 0;
      width: 24px;
      height: 24px;
      display: flex;
      cursor: pointer;
      margin-top: 8px;
      margin-right: 8px;
      position: absolute;
      border-radius: 25%;
      &amp; span {
        width: 100%;
        aspect-ratio: 1 / 1;
        background-repeat: no-repeat;
      }
      &amp; .ready {
        background-image: var(--copy-icon);
      }
      &amp; .success {
        display: none;
        background-image: var(--success-icon);
      }
    }

    &amp;.rehype-pretty-copied { 
      &amp; .success { 
        display: block;
      } &amp; .ready {
        display: none;
      }
    }

    pre button.rehype-pretty-copy.rehype-pretty-copied {
      opacity: 1;
      cursor: default;
      &amp; .ready { display: none; }
      &amp; .success { display: block; }
    }

      pre button.rehype-pretty-copy { opacity: 0; }
      button[data-name=&quot;rehype-pretty-copy-button&quot;]:hover {
        opacity: 1;
      }
    </style></code></pre></figure><p>A rebuild is not only useful when upgrading outdated partitions, but also when
changing parameters of up-to-date partitions. Use the <code>--all</code> flag to extend a
rebuild operation to <em>all</em> partitions. (Internally, VAST versions the partition
state via FlatBuffers. An outdated partition is one whose version number is not
the newest.)</p><p>The <code>--undersized</code> flag causes VAST to only rebuild partitions that are under
the configured partition size limit <code>vast.max-partition-size</code>.</p><p>The <code>--parallel</code> options is a performance tuning knob. The parallelism level
controls how many sets of partitions to rebuild in parallel. This value defaults
to 1 to limit the CPU and memory requirements of the rebuilding process, which
grow linearly with the selected parallelism level.</p><p>An optional expression allows for restricting the set of partitions to rebuild.
VAST performs a catalog lookup with the expression to identify the set of
candidate partitions. This process may yield false positives, as with regular
queries, which may cause unaffected partitions to undergo a rebuild. For
example, to rebuild outdated partitions containing <code>suricata.flow</code> events
older than 2 weeks, run the following command:</p><figure data-rehype-pretty-code-figure=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><code data-language="bash" data-theme="github-dark-default" style="display:grid"><span data-line=""><span style="color:#FFA657">vast</span><span style="color:#A5D6FF"> rebuild</span><span style="color:#A5D6FF"> &#x27;#type == &quot;suricata.flow&quot; &amp;&amp; #import_time &lt; 2 weeks ago&#x27;</span></span></code><button type="button" data="vast rebuild &#x27;#type == &quot;suricata.flow&quot; &amp;&amp; #import_time &lt; 2 weeks ago&#x27;" title="Copy code" aria-label="Copy code" class="rehype-pretty-copy" data-feedback-duration="3000" data-name="rehype-pretty-copy-button"><span class="ready"></span><span class="success"></span></button><style>
    :root {
      --copy-icon: url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+&quot;);
      --success-icon: url(&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+&quot;);
    }

    pre:has(code) {
      position: relative;
    }

    button[data=&#x27;&lt;span&gt;&#x27;] {
      width: 0;
      height: 0;
      display: none;
      visibility: hidden;
    }

    pre button.rehype-pretty-copy {
      top: 1px;
      right: 1px;
      padding: 0;
      width: 24px;
      height: 24px;
      display: flex;
      cursor: pointer;
      margin-top: 8px;
      margin-right: 8px;
      position: absolute;
      border-radius: 25%;
      &amp; span {
        width: 100%;
        aspect-ratio: 1 / 1;
        background-repeat: no-repeat;
      }
      &amp; .ready {
        background-image: var(--copy-icon);
      }
      &amp; .success {
        display: none;
        background-image: var(--success-icon);
      }
    }

    &amp;.rehype-pretty-copied { 
      &amp; .success { 
        display: block;
      } &amp; .ready {
        display: none;
      }
    }

    pre button.rehype-pretty-copy.rehype-pretty-copied {
      opacity: 1;
      cursor: default;
      &amp; .ready { display: none; }
      &amp; .success { display: block; }
    }

      pre button.rehype-pretty-copy { opacity: 0; }
      button[data-name=&quot;rehype-pretty-copy-button&quot;]:hover {
        opacity: 1;
      }
    </style></code></pre></figure><div class="footnotes"><hr><ol><li id="fn-1-2fe921">VAST v2.0 failed to write its partitions to disk with the defaults for
v2.1 because the on-disk size exceeded the maximum possible size of a
FlatBuffers table, which VAST internally uses to have an open standard for its
persistent state.<a href="#fnref-1-2fe921" class="footnote-backref">↩</a></li><li id="fn-2-2fe921">This resulted in 167,772,160 events, with a total of 200&#x27;917&#x27;930 unique
values with a schema distribution of 80.74% <code>suricata.flow</code>, 7.85%
<code>suricata.dns</code>, 5.35% <code>suricata.http</code>, 4.57% <code>suricata.fileinfo</code>, 1.04%
<code>suricata.tls</code>, 0.41% <code>suricata.ftp</code>, and 0.04% <code>suricata.smtp</code>.<a href="#fnref-2-2fe921" class="footnote-backref">↩</a></li></ol></div></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/releases/tags/release">release</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/releases/tags/performance">performance</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/releases/vast-v2.2"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">VAST v2.2</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/releases/vast-v2.0"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">VAST v2.0</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#new-project-site" class="table-of-contents__link toc-highlight">New Project Site</a></li><li><a href="#performance-improvements" class="table-of-contents__link toc-highlight">Performance Improvements</a></li><li><a href="#rebuild-vast-databases" class="table-of-contents__link toc-highlight">Rebuild VAST Databases</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li><li class="footer__item"><a href="https://docs.google.com/presentation/d/1R59T2nuGJg43g6PVKogZbb6DjcJXRYBx3Bih8W-A-oM/present" target="_blank" rel="noopener noreferrer" class="footer__link-item">Release Slides<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/tenzir-vs-cribl">Tenzir vs. Cribl</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/discord">Discord</a></li><li class="footer__item"><a href="https://github.com/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/tenzir_company" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tenzir</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tenzir.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Blog Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/newsletter">Newsletter</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-statement">Privacy Statement</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Tenzir GmbH.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.62d46a68.js"></script>
<script src="/assets/js/main.ad8f699c.js"></script>
</body>
</html>