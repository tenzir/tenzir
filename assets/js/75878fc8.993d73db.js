"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7990],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>c});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),o=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},m=function(e){var t=o(e.components);return n.createElement(s.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),h=o(a),d=i,c=h["".concat(s,".").concat(d)]||h[d]||u[d]||r;return a?n.createElement(c,p(p({ref:t},m),{},{components:a})):n.createElement(c,p({ref:t},m))}));function c(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,p=new Array(r);p[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:i,p[1]=l;for(var o=2;o<r;o++)p[o]=a[o];return n.createElement.apply(null,p)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3851:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>k,default:()=>b,frontMatter:()=>c,metadata:()=>N,toc:()=>g});var n=a(3905),i=Object.defineProperty,r=Object.defineProperties,p=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,m=(e,t,a)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,h=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&m(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&m(e,a,t[a]);return e},u=(e,t)=>r(e,p(t)),d=(e,t)=>{var a={};for(var n in e)s.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&o.call(e,n)&&(a[n]=e[n]);return a};const c={},k=void 0,N={type:"mdx",permalink:"/changelog",source:"@site/src/pages/changelog.md",description:"\x3c!--",frontMatter:{}},g=[{value:"Next",id:"next",level:2},{value:"Changes",id:"changes",level:3},{value:"Features",id:"features",level:3},{value:"Bug Fixes",id:"bug-fixes",level:3},{value:"v3.0.3",id:"v303",level:2},{value:"Changes",id:"changes-1",level:3},{value:"Features",id:"features-1",level:3},{value:"v3.0.2",id:"v302",level:2},{value:"Bug Fixes",id:"bug-fixes-1",level:3},{value:"v3.0.1",id:"v301",level:2},{value:"Features",id:"features-2",level:3},{value:"Bug Fixes",id:"bug-fixes-2",level:3},{value:"v3.0.0",id:"v300",level:2},{value:"Breaking Changes",id:"breaking-changes",level:3},{value:"Changes",id:"changes-2",level:3},{value:"Features",id:"features-3",level:3},{value:"Bug Fixes",id:"bug-fixes-3",level:3},{value:"v2.4.2",id:"v242",level:2},{value:"Changes",id:"changes-3",level:3},{value:"v2.4.1",id:"v241",level:2},{value:"Features",id:"features-4",level:3},{value:"v2.4.0",id:"v240",level:2},{value:"Changes",id:"changes-4",level:3},{value:"Features",id:"features-5",level:3},{value:"Bug Fixes",id:"bug-fixes-4",level:3},{value:"v2.3.1",id:"v231",level:2},{value:"Bug Fixes",id:"bug-fixes-5",level:3},{value:"v2.3.0",id:"v230",level:2},{value:"Changes",id:"changes-5",level:3},{value:"Features",id:"features-6",level:3},{value:"Bug Fixes",id:"bug-fixes-6",level:3},{value:"v2.2.0",id:"v220",level:2},{value:"Changes",id:"changes-6",level:3},{value:"Features",id:"features-7",level:3},{value:"Bug Fixes",id:"bug-fixes-7",level:3},{value:"v2.1.0",id:"v210",level:2},{value:"Changes",id:"changes-7",level:3},{value:"Features",id:"features-8",level:3},{value:"Bug Fixes",id:"bug-fixes-8",level:3},{value:"v2.0.0",id:"v200",level:2},{value:"Breaking Changes",id:"breaking-changes-1",level:3},{value:"Changes",id:"changes-8",level:3},{value:"Features",id:"features-9",level:3},{value:"Bug Fixes",id:"bug-fixes-9",level:3},{value:"v1.1.2",id:"v112",level:2},{value:"Bug Fixes",id:"bug-fixes-10",level:3},{value:"v1.1.1",id:"v111",level:2},{value:"Bug Fixes",id:"bug-fixes-11",level:3},{value:"v1.1.0",id:"v110",level:2},{value:"Changes",id:"changes-9",level:3},{value:"Features",id:"features-10",level:3},{value:"Bug Fixes",id:"bug-fixes-12",level:3},{value:"v1.0.0",id:"v100",level:2},{value:"Changes",id:"changes-10",level:3},{value:"Features",id:"features-11",level:3},{value:"Bug Fixes",id:"bug-fixes-13",level:3},{value:"2021.12.16",id:"20211216",level:2},{value:"Changes",id:"changes-11",level:3},{value:"Features",id:"features-12",level:3},{value:"Bug Fixes",id:"bug-fixes-14",level:3},{value:"2021.11.18",id:"20211118",level:2},{value:"Changes",id:"changes-12",level:3},{value:"Features",id:"features-13",level:3},{value:"Bug Fixes",id:"bug-fixes-15",level:3},{value:"2021.09.30",id:"20210930",level:2},{value:"Changes",id:"changes-13",level:3},{value:"Features",id:"features-14",level:3},{value:"Bug Fixes",id:"bug-fixes-16",level:3},{value:"2021.08.26",id:"20210826",level:2},{value:"Changes",id:"changes-14",level:3},{value:"Features",id:"features-15",level:3},{value:"Bug Fixes",id:"bug-fixes-17",level:3},{value:"2021.07.29",id:"20210729",level:2},{value:"Changes",id:"changes-15",level:3},{value:"Features",id:"features-16",level:3},{value:"Bug Fixes",id:"bug-fixes-18",level:3},{value:"2021.06.24",id:"20210624",level:2},{value:"Breaking Changes",id:"breaking-changes-2",level:3},{value:"Changes",id:"changes-16",level:3},{value:"Features",id:"features-17",level:3},{value:"Bug Fixes",id:"bug-fixes-19",level:3},{value:"2021.05.27",id:"20210527",level:2},{value:"Breaking Changes",id:"breaking-changes-3",level:3},{value:"Changes",id:"changes-17",level:3},{value:"Features",id:"features-18",level:3},{value:"Bug Fixes",id:"bug-fixes-20",level:3},{value:"2021.04.29",id:"20210429",level:2},{value:"Breaking Changes",id:"breaking-changes-4",level:3},{value:"Changes",id:"changes-18",level:3},{value:"Features",id:"features-19",level:3},{value:"Bug Fixes",id:"bug-fixes-21",level:3},{value:"2021.03.25",id:"20210325",level:2},{value:"Breaking Changes",id:"breaking-changes-5",level:3},{value:"Changes",id:"changes-19",level:3},{value:"Features",id:"features-20",level:3},{value:"Bug Fixes",id:"bug-fixes-22",level:3},{value:"2021.02.24",id:"20210224",level:2},{value:"Breaking Changes",id:"breaking-changes-6",level:3},{value:"Changes",id:"changes-20",level:3},{value:"Experimental Features",id:"experimental-features",level:3},{value:"Features",id:"features-21",level:3},{value:"Bug Fixes",id:"bug-fixes-23",level:3},{value:"2021.01.28",id:"20210128",level:2},{value:"Breaking Changes",id:"breaking-changes-7",level:3},{value:"Changes",id:"changes-21",level:3},{value:"Experimental Features",id:"experimental-features-1",level:3},{value:"Features",id:"features-22",level:3},{value:"Bug Fixes",id:"bug-fixes-24",level:3},{value:"2020.12.16",id:"20201216",level:2},{value:"Breaking Changes",id:"breaking-changes-8",level:3},{value:"Changes",id:"changes-22",level:3},{value:"Experimental Features",id:"experimental-features-2",level:3},{value:"Features",id:"features-23",level:3},{value:"Bug Fixes",id:"bug-fixes-25",level:3},{value:"2020.10.29",id:"20201029",level:2},{value:"Changes",id:"changes-23",level:3},{value:"Experimental Features",id:"experimental-features-3",level:3},{value:"Features",id:"features-24",level:3},{value:"Bug Fixes",id:"bug-fixes-26",level:3},{value:"2020.09.30",id:"20200930",level:2},{value:"Breaking Changes",id:"breaking-changes-9",level:3},{value:"Changes",id:"changes-24",level:3},{value:"Experimental Features",id:"experimental-features-4",level:3},{value:"Features",id:"features-25",level:3},{value:"Bug Fixes",id:"bug-fixes-27",level:3},{value:"2020.08.28",id:"20200828",level:2},{value:"Breaking Changes",id:"breaking-changes-10",level:3},{value:"Changes",id:"changes-25",level:3},{value:"Features",id:"features-26",level:3},{value:"Bug Fixes",id:"bug-fixes-28",level:3},{value:"2020.07.28",id:"20200728",level:2},{value:"Breaking Changes",id:"breaking-changes-11",level:3},{value:"Changes",id:"changes-26",level:3},{value:"Features",id:"features-27",level:3},{value:"Bug Fixes",id:"bug-fixes-29",level:3},{value:"2020.06.25",id:"20200625",level:2},{value:"Changes",id:"changes-27",level:3},{value:"Experimental Features",id:"experimental-features-5",level:3},{value:"Features",id:"features-28",level:3},{value:"Bug Fixes",id:"bug-fixes-30",level:3},{value:"2020.05.28",id:"20200528",level:2},{value:"Changes",id:"changes-28",level:3},{value:"Experimental Features",id:"experimental-features-6",level:3},{value:"Features",id:"features-29",level:3},{value:"Bug Fixes",id:"bug-fixes-31",level:3},{value:"2020.04.29",id:"20200429",level:2},{value:"Changes",id:"changes-29",level:3},{value:"Features",id:"features-30",level:3},{value:"Bug Fixes",id:"bug-fixes-32",level:3},{value:"2020.03.26",id:"20200326",level:2},{value:"Changes",id:"changes-30",level:3},{value:"Features",id:"features-31",level:3},{value:"2020.02.27",id:"20200227",level:2},{value:"Changes",id:"changes-31",level:3},{value:"Features",id:"features-32",level:3},{value:"Bug Fixes",id:"bug-fixes-33",level:3},{value:"2020.01.31",id:"20200131",level:2},{value:"Changes",id:"changes-32",level:3},{value:"Features",id:"features-33",level:3},{value:"Bug Fixes",id:"bug-fixes-34",level:3},{value:"0.2 - 2019.10.30",id:"02---20191030",level:2},{value:"Changes",id:"changes-33",level:3},{value:"Features",id:"features-34",level:3},{value:"Bug Fixes",id:"bug-fixes-35",level:3},{value:"0.1 - 2019.02.28",id:"01---20190228",level:2}],f={toc:g},v="wrapper";function b(e){var t=e,{components:a}=t,i=d(t,["components"]);return(0,n.kt)(v,u(h(h({},f),i),{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",h({},{id:"changelog"}),"Changelog"),(0,n.kt)("p",null,"This changelog documents all notable changes to VAST and is updated on every release."),(0,n.kt)("h2",h({},{id:"next"}),"Next"),(0,n.kt)("h3",h({},{id:"changes"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"As already announced with the VAST v3.0 release, the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.pipeline-triggers")," option now no longer functions. The feature will be replaced with node ingress/egress pipelines that fit better into a multi-node model than the previous feature that was built under the assumption of a client/server model with a single server.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3052"}),"#3052"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The bundled systemd service is now configured to restart VAST in case of a failure.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3058"}),"#3058"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.operators")," section in the configuration file supersedes the now deprecated ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.pipelines")," section and more generally enables user-defined operators. Defined operators now must use the new, textual format introduced with VAST v3.0, and are available for use in all places where pipelines are supported.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3067"}),"#3067")))),(0,n.kt)("h3",h({},{id:"features"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"/query")," REST endpoint no longer accepts an expression at the start of the query. Instead, use ",(0,n.kt)("inlineCode",{parentName:"p"},"where <expr> | ..."),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3015"}),"#3015"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"put")," operator succeeeds the ",(0,n.kt)("inlineCode",{parentName:"p"},"extend")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"replace")," operators. It updates values in-place when the assigned-to extractor exists in the input events, and adds a new field with the given value at the end otherwise.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3036"}),"#3036"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"tail")," pipeline operator limits all latest events to a specified number. The operator takes the limit as an optional argument, with the default value being 10.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3050"}),"#3050"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The newly-added ",(0,n.kt)("inlineCode",{parentName:"p"},"unique")," operator removes adjacent duplicates.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3051"}),"#3051"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"count_distinct")," aggregation function returns the number of distinct, non-null values.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3068"}),"#3068")))),(0,n.kt)("h3",h({},{id:"bug-fixes"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST incorrectly handled subnets using IPv6 addresses for which an equivalent IPv4 address existed. This is now done correctly. For example, the query ",(0,n.kt)("inlineCode",{parentName:"p"},"where :ip !in ::ffff:0:0/96")," now returns all events containing an IP address that cannot be represented as an IPv4 address. As an additional safeguard, the VAST language no longer allows for constructing subnets for IPv4 addresses with lengths greater than 32.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3060"}),"#3060"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"distinct")," function silently performed a different operation on lists, returning the distinct non-null elements in the list rather than operating on the list itself. This special-casing no longer exists, and instead the function now operates on the lists itself. This feature will return in the future as unnesting on the extractor level via ",(0,n.kt)("inlineCode",{parentName:"p"},"distinct(field[])"),", but for now it has to go to make the ",(0,n.kt)("inlineCode",{parentName:"p"},"distinct")," aggregation function work consistently.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3068"}),"#3068")))),(0,n.kt)("h2",h({},{id:"v303"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v3.0.3"}),"v3.0.3")),(0,n.kt)("h3",h({},{id:"changes-1"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now depends on the Boost C++ libraries.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3043"}),"#3043"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST's rebuilding and compaction features now interfere less with queries. This patch was also backported as ",(0,n.kt)("a",h({parentName:"p"},{href:"https://vast.io/changelog#v242"}),"VAST v2.4.2")," to enable a smoother upgrade from to VAST v3.x.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3047"}),"#3047")))),(0,n.kt)("h3",h({},{id:"features-1"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The new ",(0,n.kt)("inlineCode",{parentName:"li"},"vast exec")," command executes a pipeline locally. It takes a single argument representing a closed pipeline, and immediately executes it. This is the foundation for a new, pipeline-first VAST, in which most operations are expressed as pipelines.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/3004"}),"#3004"),(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/3010"}),"#3010"))),(0,n.kt)("h2",h({},{id:"v302"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v3.0.2"}),"v3.0.2")),(0,n.kt)("h3",h({},{id:"bug-fixes-1"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"VAST no longer miscalculates the ",(0,n.kt)("inlineCode",{parentName:"li"},"rebuild")," metrics.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/3026"}),"#3026"))),(0,n.kt)("h2",h({},{id:"v301"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v3.0.1"}),"v3.0.1")),(0,n.kt)("h3",h({},{id:"features-2"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The VAST language now supports comments using the familiar ",(0,n.kt)("inlineCode",{parentName:"li"},"/* comment */")," notation. This makes it easy to document multi-line pipelines inline.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/3011"}),"#3011"))),(0,n.kt)("h3",h({},{id:"bug-fixes-2"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer crashes when reading an unsupported partition from VAST v1.x. Instead, the partition is ignored correctly. Since v2.2 VAST automatically rebuilds partitions in the background to ensure compatibility.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3018"}),"#3018"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Automatic partition rebuilding both updates partitions with an outdated storage format and merges undersized partitions continuously in the background. This now also works as expected for outdated but not undersized partitions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3020"}),"#3020")))),(0,n.kt)("h2",h({},{id:"v300"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v3.0.0"}),"v3.0.0")),(0,n.kt)("h3",h({},{id:"breaking-changes"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The match operator ",(0,n.kt)("inlineCode",{parentName:"p"},"~"),", its negation ",(0,n.kt)("inlineCode",{parentName:"p"},"!~"),", and the ",(0,n.kt)("inlineCode",{parentName:"p"},"pattern")," type no longer exist. Use queries of the forms ",(0,n.kt)("inlineCode",{parentName:"p"},"lhs == /rhs/")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"lhs != /rhs/")," instead for queries using regular expressions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2769"}),"#2769"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2873"}),"#2873"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," does not work anymore with an embedded node (i.e., spawned with the ",(0,n.kt)("inlineCode",{parentName:"p"},"-N")," parameter).\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2771"}),"#2771"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"#field")," meta extractor no longer exists. Use ",(0,n.kt)("inlineCode",{parentName:"p"},"X != null")," over ",(0,n.kt)("inlineCode",{parentName:"p"},'#field == "X"')," to check for existence for the field ",(0,n.kt)("inlineCode",{parentName:"p"},"X"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2776"}),"#2776"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer supports reading partitions created with VAST versions older than VAST v2.2. Since VAST v2.2, VAST continuously upgrades old partitions to the most recent internal format while running.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2778"}),"#2778"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2797"}),"#2797"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2798"}),"#2798"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We removed the broker plugin that enabled direct Zeek 3.x log transfer to VAST. The plugin will return in the future rewritten for Zeek 5+.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2796"}),"#2796"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ignores the previously deprecated options ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.meta-index-fp-rate"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.catalog-fp-rate"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.transforms")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.transform-triggers"),". Similarly, setting ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.store-backend")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store")," now results in an error rather than a graceful fallback to the default store.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2832"}),"#2832"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Boolean literals in expressions have a new syntax: ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"false")," replace the old representations ",(0,n.kt)("inlineCode",{parentName:"p"},"T")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"F"),". For example, the query ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.alert.alerted == T")," is no longer valid; use ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.alert.alerted == true")," instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2844"}),"#2844"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The builtin types ",(0,n.kt)("inlineCode",{parentName:"p"},"count"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"real"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"addr")," were renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"uint64"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"int64"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"double"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"ip")," respectively. For backwards-compatibility, VAST still supports parsing the old type tokens in schema files.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2864"}),"#2864"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"explore")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"pivot")," commands are now unavailable. They will be reintroduced as pipeline operators in the future.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2898"}),"#2898"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For the experimental REST API, the result format of the ",(0,n.kt)("inlineCode",{parentName:"p"},"/export")," endpoint was modified: The ",(0,n.kt)("inlineCode",{parentName:"p"},"num_events")," key was renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"num-events"),", and the ",(0,n.kt)("inlineCode",{parentName:"p"},"version")," key was removed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2899"}),"#2899"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"map")," type no longer exists: instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"map<T, U>"),", use the equivalent ",(0,n.kt)("inlineCode",{parentName:"p"},"list<record{ key: T, value: U }>"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2976"}),"#2976"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We renamed the ",(0,n.kt)("inlineCode",{parentName:"p"},"identity")," operator to ",(0,n.kt)("inlineCode",{parentName:"p"},"pass"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2980"}),"#2980"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The REST API does not contain the ",(0,n.kt)("inlineCode",{parentName:"p"},"/export")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"/export/with-schemas")," endpoints anymore. Any previous queries using those endpoints have to be sent to the ",(0,n.kt)("inlineCode",{parentName:"p"},"/query")," endpoint now.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2990"}),"#2990"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"From now on VAST will use TCP port 5158 for its native inter process communication. This change avoids collisions from dynamic port allocation on Linux systems.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2998"}),"#2998"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The non-value literal in expressions has a new syntax: ",(0,n.kt)("inlineCode",{parentName:"p"},"null")," replaces its old representation ",(0,n.kt)("inlineCode",{parentName:"p"},"nil"),". For example, the query ",(0,n.kt)("inlineCode",{parentName:"p"},"x != nil")," is no longer valid; use ",(0,n.kt)("inlineCode",{parentName:"p"},"x != null")," instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2999"}),"#2999"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.pipeline-triggers")," option is deprecated; while it continues to work as-is, support for it will be removed in the next release. Use the new inline import and export pipelines instead. They will return as more generally applicable node ingress and egress pipelines in the future.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3008"}),"#3008")))),(0,n.kt)("h3",h({},{id:"changes-2"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now comes with a role definition for Ansible. You can find it directly in the ",(0,n.kt)("inlineCode",{parentName:"p"},"ansible")," subdirectory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2604"}),"#2604"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Building VAST now requires CAF 0.18.7. VAST supports setting advanced options for CAF directly in its configuration file under the ",(0,n.kt)("inlineCode",{parentName:"p"},"caf")," section. If you were using any of these, compare them against the bundled ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yaml.example")," file to see if you need to make any changes. The change has (mostly positive) ",(0,n.kt)("a",h({parentName:"p"},{href:"https://www.actor-framework.org/blog/2021-01/benchmarking-0.18/"}),"performance and stability implications")," throughout VAST, especially in high-load scenarios.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2693"}),"#2693"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2923"}),"#2923"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"OpenSSL is now a required dependency.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2719"}),"#2719"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," no longer shows type registry-related information. Instead, refer to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast show")," for detailed type metadata information.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2745"}),"#2745"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Blocking imports now imply that ingested data gets persisted to disk before the the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import")," process exits.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2807"}),"#2807"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2848"}),"#2848"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugin names are now case-insensitive.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2832"}),"#2832"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The per-schema event distribution moved from ",(0,n.kt)("inlineCode",{parentName:"p"},"index.statistics.layouts")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog.schemas"),", and additionally includes information about the import time range and the number of partitions VAST knows for the schema. The number of events per schema no longer includes events that are yet unpersisted.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2852"}),"#2852"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The bundled Zeek schema no longer includes the ",(0,n.kt)("inlineCode",{parentName:"p"},"_path")," field included in Zeek JSON. Use ",(0,n.kt)("inlineCode",{parentName:"p"},'#type == "zeek.foo"')," over ",(0,n.kt)("inlineCode",{parentName:"p"},'_path == "foo"')," for querying data ingested using ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import zeek-json"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2887"}),"#2887"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We removed the frontend prototype bundled with the web plugin Some parts of the frontend that we have in development are designed to be closed-source, and it is easier to develop at the current development stage in a single repository that is not bound to the release process of VAST itself. An open-source version of the frontend may return in the future.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2922"}),"#2922"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2927"}),"#2927")))),(0,n.kt)("h3",h({},{id:"features-3"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"cef")," import format allows for reading events in the Common Event Format (CEF) via ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import cef < cef.log"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2216"}),"#2216"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST installations and packages now include Python bindings in a site-package under ",(0,n.kt)("inlineCode",{parentName:"p"},"<install-prefix>/lib/python*/site-packages/vast"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2636"}),"#2636"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now imports Arrow IPC data, which is the same format it already supports for export.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2707"}),"#2707"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"pseudonymize")," pipeline operator pseudonymizes IP addresses in user-specified fields.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2719"}),"#2719"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We now offer a ",(0,n.kt)("inlineCode",{parentName:"p"},"tenzir/vast-slim")," image as an alternative to the ",(0,n.kt)("inlineCode",{parentName:"p"},"tenzir/vast")," image. The image is minimal in size and supports the same features as the regular image, but does not support building additional plugins against it and mounting in additional plugins.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2742"}),"#2742"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"/query")," endpoint for the experimental REST API allows users to receive query data in multiple steps, as opposed to a oneshot export.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2766"}),"#2766"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Queries of the forms ",(0,n.kt)("inlineCode",{parentName:"p"},":string == /pattern/"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"field == /pattern/"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"#type == /pattern/"),", and their respective negations now work as expected.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2769"}),"#2769"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"/export")," family of endpoints now accepts an optional ",(0,n.kt)("inlineCode",{parentName:"p"},"pipeline")," parameter to specify an ad-hoc pipeline that should be applied to the exported data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2773"}),"#2773"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We changed VAST client processes to attempt connecting to a VAST server multiple times until the configured connection timeout (",(0,n.kt)("inlineCode",{parentName:"p"},"vast.connection-timeout"),", defaults to 5 minutes) runs out. A fixed delay between connection attempts (",(0,n.kt)("inlineCode",{parentName:"p"},"vast.connection-retry-delay"),", defaults to 3 seconds) ensures that clients to not stress the server too much. Set the connection timeout to zero to let VAST client attempt connecting indefinitely, and the delay to zero to disable the retry mechanism.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2835"}),"#2835"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON export format gained the options ",(0,n.kt)("inlineCode",{parentName:"p"},"--omit-empty-records"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"--omit-empty-lists"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"--omit-empty-maps"),", which cause empty records, lists, and maps not to be rendered respectively. The options may be combined together with the existing ",(0,n.kt)("inlineCode",{parentName:"p"},"--omit-nulls")," option. Use ",(0,n.kt)("inlineCode",{parentName:"p"},"--omit-empty")," to set all four flags at once.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2856"}),"#2856"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"export")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," commands now support an optional pipeline string that allows for chaining pipeline operators together and executing such a pipeline on outgoing and incoming data. This feature is experimental and the syntax is subject to change without notice. New operators are only available in the new pipeline syntax, and the old YAML syntax is deprecated.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2877"}),"#2877"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2904"}),"#2904"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2907"}),"#2907"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"head")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"taste")," operators limit results to the specified number of events. The ",(0,n.kt)("inlineCode",{parentName:"p"},"head")," operator applies this limit for all events, and the ",(0,n.kt)("inlineCode",{parentName:"p"},"taste")," operator applies it per schema. Both operators take the limit as an optional argument, with the default value being 10.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2891"}),"#2891"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The experimental web frontend now correctly responds to CORS preflight requests. To configure CORS behavior, the new ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.web.cors-allowed-origin")," config option can be used.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2944"}),"#2944"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Patterns now support case insensitivity by adding ",(0,n.kt)("inlineCode",{parentName:"p"},"i")," to the pattern string, e.g. ",(0,n.kt)("inlineCode",{parentName:"p"},"/^\\w{3}$/i"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2951"}),"#2951"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"sigma")," plugin now treats Sigma strings as case-insensitive patterns during the transpilation process.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2974"}),"#2974"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The experimental web plugin now serves its own API specification at the new '/openapi.json' endpoint.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2981"}),"#2981"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Extractors such as ",(0,n.kt)("inlineCode",{parentName:"p"},"x")," and ",(0,n.kt)("inlineCode",{parentName:"p"},":T")," can now expand to the predicates ",(0,n.kt)("inlineCode",{parentName:"p"},"x != null")," and ",(0,n.kt)("inlineCode",{parentName:"p"},":T != null"),", respectively.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2984"}),"#2984")))),(0,n.kt)("h3",h({},{id:"bug-fixes-3"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Attempting to connect with thousands of clients around the same time sometimes crashed the VAST server. This no longer occurs.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2693"}),"#2693"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"replace")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"extend")," pipeline operators wrongly inferred IP address, subnet, pattern, and map values as strings. They are now inferred correctly. To force a value to be inferred as a string, wrap it inside double quotes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2768"}),"#2768"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now shuts down instantly when metrics are enabled instead of being held alive for up to the duration of the telemetry interval (10 seconds).\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2832"}),"#2832"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The web plugin now reacts correctly to CTRL-C by stopping itself.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2860"}),"#2860"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer ignores existing PID lock files on Linux.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2861"}),"#2861"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The start commands specified with the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.start.commands")," option are now run aynchronously. This means that commands that block indefinitely will no longer prevent execution of subsequent commands, and allow for correct signal handling.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2868"}),"#2868"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The Zeek TSV reader now respects the schema files in the bundled ",(0,n.kt)("inlineCode",{parentName:"p"},"zeek.schema")," file, and produces data of the same schema as the Zeek JSON reader. E.g., instead of producing a top-level ip field ",(0,n.kt)("inlineCode",{parentName:"p"},"id.orig_h"),", the reader now produces a top-level record field ",(0,n.kt)("inlineCode",{parentName:"p"},"id")," that contains the ip field ",(0,n.kt)("inlineCode",{parentName:"p"},"orig_h"),", effectively unflattening the data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2887"}),"#2887"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Pipelines that reduce the number of events do not prevent ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export")," processes that have a ",(0,n.kt)("inlineCode",{parentName:"p"},"max-events")," limit from terminating any more.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2896"}),"#2896"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We fixed incorrect printing of human-readable durations in some edge cases. E.g., the value 1.999s was rendered as 1.1s instead of the expected 2.0s. This bug affected the JSON and CSV export formats, and all durations printed in log messages or the status command.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2906"}),"#2906"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Options passed in the ",(0,n.kt)("inlineCode",{parentName:"p"},"caf.openssl")," section in the configuration file or as ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_CAF__OPENSSL__*")," environment variables are no longer ignored.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2908"}),"#2908"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The VAST client will now terminate properly when using the ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," command with a query which delivers zero results.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2924"}),"#2924"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer crashes when it encounters an invalid type expression in a schema.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2977"}),"#2977"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compaction now retries immediately on failure instead of waiting for the configured scan interval to expire again.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3006"}),"#3006")))),(0,n.kt)("h2",h({},{id:"v242"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.4.2"}),"v2.4.2")),(0,n.kt)("h3",h({},{id:"changes-3"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"VAST's rebuilding and compaction features now interfere less with queries.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/3047"}),"#3047"))),(0,n.kt)("h2",h({},{id:"v241"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.4.1"}),"v2.4.1")),(0,n.kt)("h3",h({},{id:"features-4"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"VAST's Feather store now yields initial results much faster and performs better when running queries affecting a large number of partitions by doing smaller incremental disk reads as needed rather than one large disk read upfront.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/2805"}),"#2805"))),(0,n.kt)("h2",h({},{id:"v240"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.4.0"}),"v2.4.0")),(0,n.kt)("h3",h({},{id:"changes-4"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now emits per-component memory usage metrics under the keys ",(0,n.kt)("inlineCode",{parentName:"p"},"index.memory-usage")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog.memory-usage"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2471"}),"#2471"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We changed the default VAST endpoint from ",(0,n.kt)("inlineCode",{parentName:"p"},"localhost")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"127.0.0.1"),". This ensures the listening address is deterministic and not dependent on the host-specific IPv4 and IPv6 resolution. For example, resolving ",(0,n.kt)("inlineCode",{parentName:"p"},"localhost")," yields a list of addresses, and if VAST fails to bind on the first (e.g., to due to a lingering socket) it would silently go to the next. Taking name resolution out of the equation fixes such issues. Set the option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.endpoint")," to override the default endpoint.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2512"}),"#2512"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Building VAST from source now requires CMake 3.19 or greater.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2582"}),"#2582"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default store backend of VAST is now ",(0,n.kt)("inlineCode",{parentName:"p"},"feather"),". Reading from VAST's custom ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store")," backend is still transparently supported, but new partitions automatically write to the Apache Feather V2 backend instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2587"}),"#2587"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We removed PyVAST from the code base in favor of the new Python bindings. PyVAST continues to work as a thin wrapper around the VAST binary, but will no longer be released alongside VAST.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2674"}),"#2674"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Building VAST from source now requires ",(0,n.kt)("a",h({parentName:"p"},{href:"https://arrow.apache.org/blog/2022/10/31/10.0.0-release/"}),"Apache Arrow 10.0")," or newer.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2685"}),"#2685"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast dump")," command is now called ",(0,n.kt)("inlineCode",{parentName:"p"},"vast show"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2686"}),"#2686"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now loads all plugins by default. To revert to the old behavior, explicitly set the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins")," option to have no value.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2689"}),"#2689")))),(0,n.kt)("h3",h({},{id:"features-5"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We now distribute VAST also as Debian Package with every new release. The Debian package automatically installs a systemd service and creates a ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," user for the VAST process.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2513"}),"#2513"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2738"}),"#2738"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST Cloud has now a MISP plugin that enables to add a MISP instance to the cloud stack.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2548"}),"#2548"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new experimental web plugin offers a RESTful API to VAST and a bundled web user interface in Svelte.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2567"}),"#2567"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2614"}),"#2614"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2638"}),"#2638"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/3681"}),"#3681"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now emits metrics for filesystem access under the keys ",(0,n.kt)("inlineCode",{parentName:"p"},"posix-filesystem.{checks,writes,reads,mmaps,erases,moves}.{successful,failed,bytes}"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2572"}),"#2572"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ships a Docker Compose file. In particular, the Docker Compose stack now has a TheHive integration that can run VAST queries as a Cortex Analyzer.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2574"}),"#2574"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2652"}),"#2652"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST Cloud can now expose HTTP services using Cloudflare Access.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2578"}),"#2578"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Rebuilding partitions now additionally rebatches the contained events to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.import.batch-size")," events per batch, which accelerates queries against partitions that previously had undersized batches.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2583"}),"#2583"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST has a new configuration setting, ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.zstd-compression-level"),", to control the compression level of the Zstd algorithm used in both the Feather and Parquet store backends. The default level is set by the Apache Arrow library, and for Parquet is no longer explicitly defaulted to ",(0,n.kt)("inlineCode",{parentName:"p"},"9"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2623"}),"#2623"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST has three new metrics: ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog.num-partitions-total"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog.num-events-total"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"ingest-total")," that sum up all schema-based metrics by their respective schema-based metric counterparts.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2682"}),"#2682"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Queries without acceleration from a dense index run significantly faster, e.g., initial tests show a 2x performance improvement for substring queries.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2730"}),"#2730")))),(0,n.kt)("h3",h({},{id:"bug-fixes-4"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now skips unreadable partitions while starting up, instead of aborting the initialization routine.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2515"}),"#2515"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Rebuilding of heterogeneous partition no longer freezes the entire rebuilder on pipeline failures.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2530"}),"#2530"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer attempts to hard-kill itself if the shutdown did not finish within the configured grace period. The option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.shutdown-grace-period")," no longer exists. We recommend setting ",(0,n.kt)("inlineCode",{parentName:"p"},"TimeoutStopSec=180")," in the VAST systemd service definition to restore the previous behavior.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2568"}),"#2568"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The error message on connection failure now contains a correctly formatted target endpoint.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2609"}),"#2609"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The UDS metrics sink no longer deadlocks due to suspended listeners.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2635"}),"#2635"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ejects partitions from the LRU cache if they fail to load with an I/O error.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2642"}),"#2642"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The systemd service no longer fails if the home directory of the vast user is not in ",(0,n.kt)("inlineCode",{parentName:"p"},"/var/lib/vast"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2734"}),"#2734")))),(0,n.kt)("h2",h({},{id:"v231"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.3.1"}),"v2.3.1")),(0,n.kt)("h3",h({},{id:"bug-fixes-5"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We fixed an indefinite hang that occurred when attempting to apply a pipeline to a partition that is not a valid flatbuffer.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2624"}),"#2624"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now properly regenerates any corrupted, oversized partitions it encounters during startup, provided that the corresponding store files are available. These files could be produced by versions up to and including VAST v2.2, when using configurations with an increased maximum partition size.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2631"}),"#2631")))),(0,n.kt)("h2",h({},{id:"v230"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.3.0"}),"v2.3.0")),(0,n.kt)("h3",h({},{id:"changes-5"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We improved the operability of VAST servers under high load from automated low-priority queries. VAST now considers queries issued with ",(0,n.kt)("inlineCode",{parentName:"p"},"--low-priority"),", such as automated retro-match queries, with even less priority compared to regular queries (down from 33.3% to 4%) and internal high-priority queries used for rebuilding and compaction (down from 12.5% to 1%).\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2484"}),"#2484"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default value for ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.active-partition-timeout")," is now 5 minutes (down from 1 hour), causing VAST to persist underful partitions earlier.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2493"}),"#2493"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We split the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast rebuild")," command into two: ",(0,n.kt)("inlineCode",{parentName:"p"},"vast rebuild start")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast rebuild stop"),". Rebuild orchestration now runs server-side, and only a single rebuild may run at a given time. We also made it more intuitive to use: ",(0,n.kt)("inlineCode",{parentName:"p"},"--undersized")," now implies ",(0,n.kt)("inlineCode",{parentName:"p"},"--all"),", and a new ",(0,n.kt)("inlineCode",{parentName:"p"},"--detached")," option allows for running rebuilds in the background.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2493"}),"#2493")))),(0,n.kt)("h3",h({},{id:"features-6"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST's partition indexes are now optional, allowing operators to control the trade-off between disk-usage and query performance for every field.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2430"}),"#2430"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We can now use matchers in AWS using the vast-cloud CLI matcher plugin.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2473"}),"#2473"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now continuously rebuilds outdated and merges undersized partitions in the background. The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.automatic-rebuild")," controls how many resources to spend on this. To disable this behavior, set the option to 0; the default is 1.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2493"}),"#2493"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Rebuilding now emits metrics under the keys ",(0,n.kt)("inlineCode",{parentName:"p"},"rebuilder.partitions.{remaining,rebuilding,completed}"),". The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status rebuild")," command additionally shows information about the ongoing rebuild.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2493"}),"#2493"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.connection-timeout")," option allows for configuring the timeout VAST clients use when connecting to a VAST server. The value defaults to 10s; setting it to a zero duration causes produces an infinite timeout.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2499"}),"#2499")))),(0,n.kt)("h3",h({},{id:"bug-fixes-6"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST properly processes queries for fields with ",(0,n.kt)("inlineCode",{parentName:"p"},"skip")," attribute.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2430"}),"#2430"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST can now store data in segments bigger than 2GiB in size each.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2449"}),"#2449"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST can now store column indexes that are bigger than 2GiB.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2449"}),"#2449"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer occasionally prints warnings about no longer available partitions when queries run concurrently to imports.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2500"}),"#2500"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Configuration options representing durations with an associated command-line option like ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.connection-timeout")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"--connection-timeout")," were not picked up from configuration files or environment variables. This now works as expected.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2503"}),"#2503"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Partitions now fail early when their stores fail to load from disk, detailing what went wrong in an error message.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2507"}),"#2507"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We changed the way ",(0,n.kt)("inlineCode",{parentName:"p"},"vast-cloud")," is loading its cloud plugins to make it more explicit. This avoids inconsitent defaults assigned to variables when using core commands on specific plugins.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2510"}),"#2510"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"rebuild")," command, automatic rebuilds, and compaction are now much faster, and match the performance of the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command for building indexes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2515"}),"#2515"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Fixed a race condition where the output of a partition transform could be reused before it was fully written to disk, for example when running ",(0,n.kt)("inlineCode",{parentName:"p"},"vast rebuild"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2543"}),"#2543")))),(0,n.kt)("h2",h({},{id:"v220"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.2.0"}),"v2.2.0")),(0,n.kt)("h3",h({},{id:"changes-6"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Metrics for VAST's store lookups now use the keys ",(0,n.kt)("inlineCode",{parentName:"p"},"{active,passive}-store.lookup.{runtime,hits}"),". The store type metadata field now distinguishes between the various supported store types, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"parquet"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"feather"),", or ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store"),", rather than containing ",(0,n.kt)("inlineCode",{parentName:"p"},"active")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"passive"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2413"}),"#2413"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"summarize")," pipeline operator is now a builtin; the previously bundled ",(0,n.kt)("inlineCode",{parentName:"p"},"summarize")," plugin no longer exists. Aggregation functions in the ",(0,n.kt)("inlineCode",{parentName:"p"},"summarize")," operator are now plugins, which makes them easily extensible. The syntax of ",(0,n.kt)("inlineCode",{parentName:"p"},"summarize")," now supports specification of output field names, similar to SQL's ",(0,n.kt)("inlineCode",{parentName:"p"},"AS")," in ",(0,n.kt)("inlineCode",{parentName:"p"},"SELECT f(x) AS name"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2417"}),"#2417"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The undocumented ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," pipeline operator no longer exists.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2417"}),"#2417"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"put")," pipeline operator is now called ",(0,n.kt)("inlineCode",{parentName:"p"},"select"),", as we've abandoned plans to integrate the functionality of ",(0,n.kt)("inlineCode",{parentName:"p"},"replace")," into it.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2423"}),"#2423"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"replace")," pipeline operator now supports multiple replacements in one configuration, which aligns the behavior with other operators.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2423"}),"#2423"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Transforms are now called pipelines. In your configuration, replace ",(0,n.kt)("inlineCode",{parentName:"p"},"transform")," with ",(0,n.kt)("inlineCode",{parentName:"p"},"pipeline")," in all keys.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2429"}),"#2429"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"An ",(0,n.kt)("inlineCode",{parentName:"p"},"init")," command was added to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast-cloud")," to help getting out of inconsistent Terraform states.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2435"}),"#2435")))),(0,n.kt)("h3",h({},{id:"features-7"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"flush")," command causes VAST to decommission all currently active partitions, i.e., write all active partitions to disk immediately regardless of their size or the active partition timeout. This is particularly useful for testing, or when needing to guarantee in automated scripts that input is available for operations that only work on persisted passive partitions. The ",(0,n.kt)("inlineCode",{parentName:"p"},"flush")," command returns only after all active partitions were flushed to disk.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2396"}),"#2396"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"summarize")," operator supports three new aggregation functions: ",(0,n.kt)("inlineCode",{parentName:"p"},"sample")," takes the first value in every group, ",(0,n.kt)("inlineCode",{parentName:"p"},"distinct")," filters out duplicate values, and ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," yields the number of values.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2417"}),"#2417"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"drop")," pipeline operator now drops entire schemas spcefied by name in the ",(0,n.kt)("inlineCode",{parentName:"p"},"schemas")," configuration key in addition to dropping fields by extractors in the ",(0,n.kt)("inlineCode",{parentName:"p"},"fields")," configuration key.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2419"}),"#2419"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"extend")," pipeline operator allows for adding new fields with fixed values to data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2423"}),"#2423"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The cloud execution commands (",(0,n.kt)("inlineCode",{parentName:"p"},"run-lambda")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"execute-command"),") now accept scripts from file-like handles. To improve the usability of this feature, the whole host file system is now mounted into the CLI container.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2446"}),"#2446")))),(0,n.kt)("h3",h({},{id:"bug-fixes-7"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST will export ",(0,n.kt)("inlineCode",{parentName:"p"},"real")," values in JSON consistently with at least one decimal place.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2393"}),"#2393"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST is now able to detect corrupt index files and will attempt to repair them on startup.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2431"}),"#2431"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON export with ",(0,n.kt)("inlineCode",{parentName:"p"},"--omit-nulls")," now correctly handles nested records whose first field is ",(0,n.kt)("inlineCode",{parentName:"p"},"null")," instead of dropping them entirely.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2447"}),"#2447"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We fixed a race condition when VAST crashed while applying a partition transform, leading to data duplication.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2465"}),"#2465"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The rebuild command no longer crashes on failure, and displays the encountered error instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2466"}),"#2466"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Missing arguments for the ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugins"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin-dirs"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"--schema-dirs")," command line options no longer cause VAST to crash occasionally.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2470"}),"#2470")))),(0,n.kt)("h2",h({},{id:"v210"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.1.0"}),"v2.1.0")),(0,n.kt)("h3",h({},{id:"changes-7"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"mdx-regenerate")," tool is no longer part of VAST binary releases.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2260"}),"#2260"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Partition transforms now always emit homogenous partitions, i.e., one schema per partition. This makes compaction and aging more efficient.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2277"}),"#2277"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now requires Arrow >= v8.0.0.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2284"}),"#2284"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.store-backend")," configuration option no longer supports ",(0,n.kt)("inlineCode",{parentName:"p"},"archive"),", and instead always uses the superior ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store")," instead. Events stored in the archive will continue to be available in queries.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2290"}),"#2290"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.use-legacy-query-scheduler")," option is now ignored because the legacy query scheduler has been removed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2312"}),"#2312"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST will from now on always format ",(0,n.kt)("inlineCode",{parentName:"p"},"time")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"timestamp")," values with six decimal places (microsecond precision). The old behavior used a precision that depended on the actual value. This may require action for downstream tooling like metrics collectors that expect nanosecond granularity.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2380"}),"#2380")))),(0,n.kt)("h3",h({},{id:"features-8"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"lsvast")," tool can now print contents of individual ",(0,n.kt)("inlineCode",{parentName:"p"},".mdx")," files. It now has an option to print raw Bloom filter contents of string and IP address synopses.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2260"}),"#2260"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"mdx-regenerate")," tool was renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast-regenerate")," and can now also regenerate an index file from a list of partition UUIDs.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2260"}),"#2260"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now compresses data with Zstd. When persisting data to the segment store, the default configuration achieves over 2x space savings. When transferring data between client and server processes, compression reduces the amount of transferred data by up to 5x. This allowed us to increase the default partition size from 1,048,576 to 4,194,304 events, and the default number of events in a single batch from 1,024 to 65,536. The performance increase comes at the cost of a ~20% memory footprint increase at peak load. Use the option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.max-partition-size")," to tune this space-time tradeoff.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2268"}),"#2268"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now produces additional metrics under the keys ",(0,n.kt)("inlineCode",{parentName:"p"},"ingest.events"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"ingest.duration")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"ingest.rate"),". Each of those gets issued once for every schema that VAST ingested during the measurement period. Use the ",(0,n.kt)("inlineCode",{parentName:"p"},"metadata_schema")," key to disambiguate the metrics.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2274"}),"#2274"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A new parquet store plugin allows VAST to store its data as parquet files, increasing storage efficiency at the expense of higher deserialization costs. Storage requirements for the VAST database is reduced by another 15-20% compared to the existing segment store with Zstd compression enabled. CPU usage for suricata import is up ~ 10%,  mostly related to the more expensive serialization. Deserialization (reading) of a partition is significantly more expensive, increasing CPU utilization by about 100%, and should be carefully considered and compared to the potential reduction in storage cost and I/O operations.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2284"}),"#2284"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," command now supports filtering by component name. E.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status importer index")," only shows the status of the importer and index components.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2288"}),"#2288"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST emits the new metric ",(0,n.kt)("inlineCode",{parentName:"p"},"partition.events-written")," when writing a partition to disk. The metric's value is the number of events written, and the ",(0,n.kt)("inlineCode",{parentName:"p"},"metadata_schema")," field contains the name of the partition's schema.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2302"}),"#2302"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"rebuild")," command rebuilds old partitions to take advantage of improvements in newer VAST versions. Rebuilding takes place in the VAST server in the background. This process merges partitions up to the configured ",(0,n.kt)("inlineCode",{parentName:"p"},"max-partition-size"),", turns VAST v1.x's heterogeneous into VAST v2.x's homogenous partitions, migrates all data to the currently configured ",(0,n.kt)("inlineCode",{parentName:"p"},"store-backend"),", and upgrades to the most recent internal batch encoding and indexes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2321"}),"#2321"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"PyVAST now supports running client commands for VAST servers running in a container environment, if no local VAST binary is available. Specify the ",(0,n.kt)("inlineCode",{parentName:"p"},"container")," keyword to customize this behavior. It defaults to ",(0,n.kt)("inlineCode",{parentName:"p"},'{"runtime": "docker", "name": "vast"}'),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2334"}),"#2334"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/KaanSK"}),"@KaanSK"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"csv")," import gained a new ",(0,n.kt)("inlineCode",{parentName:"p"},"--seperator='x'")," option that defaults to ",(0,n.kt)("inlineCode",{parentName:"p"},"','"),". Set it to ",(0,n.kt)("inlineCode",{parentName:"p"},"'\\t'")," to import tab-separated values, or ",(0,n.kt)("inlineCode",{parentName:"p"},"' '")," to import space-separated values.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2336"}),"#2336"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now compresses on-disk indexes with Zstd, resulting in a 50-80% size reduction depending on the type of indexes used, and reducing the overall index size to below the raw data size. This improves retention spans significantly. For example, using the default configuration, the indexes for ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.ftp")," events now use 75% less disk space, and ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.flow")," 30% less.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2346"}),"#2346"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The index statistics in ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status --detailed")," now show the event distribution per schema as a percentage of the total number of events in addition to the per-schema number, e.g., for ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.flow")," events under the key ",(0,n.kt)("inlineCode",{parentName:"p"},"index.statistics.layouts.suricata.flow.percentage"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2351"}),"#2351"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status --detailed")," now shows metadata from all partitions under the key ",(0,n.kt)("inlineCode",{parentName:"p"},".catalog.partitions"),". Additionally, the catalog emits metrics under the key ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog.num-events")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog.num-partitions")," containing the number of events and partitions respectively. The metrics contain the schema name in the field ",(0,n.kt)("inlineCode",{parentName:"p"},"metadata_schema")," and the (internal) partition version in the field ",(0,n.kt)("inlineCode",{parentName:"p"},"metadata_partition-version"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2360"}),"#2360"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2363"}),"#2363"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The VAST Cloud CLI can now authenticate to the Tenzir private registry and download the vast-pro image (including plugins such as Matcher). The deployment script can now be configured to use a specific image and can thus be set to use vast-pro.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2415"}),"#2415")))),(0,n.kt)("h3",h({},{id:"bug-fixes-8"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer crashes when importing ",(0,n.kt)("inlineCode",{parentName:"p"},"map")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"pattern")," data annotated with the ",(0,n.kt)("inlineCode",{parentName:"p"},"#skip")," attribute.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2286"}),"#2286"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The command-line options ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugins"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin-dirs"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"--schema-dirs")," now correctly overwrite their corresponding configuration options.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2289"}),"#2289"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer crashes when a query arrives at a newly created active partition in the time window between the partition creation and the first event arriving at the partition.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2295"}),"#2295"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Setting the environment variable ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_ENDPOINT")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"host:port")," pair no longer fails on startup with a parse error.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2305"}),"#2305"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer hangs when it is shut down while still importing events.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2324"}),"#2324"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now reads the default false-positive rate for sketches correctly. This broke accidentally with the v2.0 release. The option moved from ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.catalog-fp-rate")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.index.default-fp-rate"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2325"}),"#2325"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The parser for ",(0,n.kt)("inlineCode",{parentName:"p"},"real")," values now understands scientific notation, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"1.23e+42"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2332"}),"#2332"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"csv")," import no longer crashes when the CSV file contains columns not present in the selected schema. Instead, it imports these columns as strings.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2336"}),"#2336"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"vast export csv")," now renders enum columns in their string representation instead of their internal numerical representation.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2336"}),"#2336"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON import now treats ",(0,n.kt)("inlineCode",{parentName:"p"},"time")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"duration")," fields correctly for JSON strings containing a number, i.e., the JSON string ",(0,n.kt)("inlineCode",{parentName:"p"},'"1654735756"')," now behaves just like the JSON number ",(0,n.kt)("inlineCode",{parentName:"p"},"1654735756")," and for a ",(0,n.kt)("inlineCode",{parentName:"p"},"time")," field results in the value ",(0,n.kt)("inlineCode",{parentName:"p"},"2022-06-09T00:49:16.000Z"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2340"}),"#2340"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST will no longer terminate when it can't write any more data to disk. Incoming data will still be accepted but discarded. We encourage all users to enable the disk-monitor or compaction features as a proper solution to this problem.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2376"}),"#2376"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer ignores environment variables for plugin-specific options. E.g., the environment variable ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_PLUGINS__FOO__BAR")," now correctly refers to the ",(0,n.kt)("inlineCode",{parentName:"p"},"bar")," option of the ",(0,n.kt)("inlineCode",{parentName:"p"},"foo")," plugin, i.e., ",(0,n.kt)("inlineCode",{parentName:"p"},"plugins.foo.bar"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2390"}),"#2390"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We improved the mechanism to recover the database state after an unclean shutdown.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2394"}),"#2394")))),(0,n.kt)("h2",h({},{id:"v200"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v2.0.0"}),"v2.0.0")),(0,n.kt)("h3",h({},{id:"breaking-changes-1"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We removed the experimental ",(0,n.kt)("inlineCode",{parentName:"p"},"vast get")," command. It relied on an internal unique event ID that was only exposed to the user in debug messages. This removal is a preparatory step towards a simplification of some of the internal workings of VAST.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2121"}),"#2121"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"meta-index")," is now called the ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog"),". This affects multiple metrics and entries in the output of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status"),", and the configuration option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.meta-index-fp-rate"),", which is now called ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.catalog-fp-rate"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2128"}),"#2128"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The command line option ",(0,n.kt)("inlineCode",{parentName:"p"},"--verbosity")," has the new name ",(0,n.kt)("inlineCode",{parentName:"p"},"--console-verbosity"),". This synchronizes the CLI interface with the configuration file that solely understands the option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.console-verbosity"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2178"}),"#2178"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Multiple transform steps now have new names: ",(0,n.kt)("inlineCode",{parentName:"p"},"select")," is now called ",(0,n.kt)("inlineCode",{parentName:"p"},"where"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"delete")," is now called ",(0,n.kt)("inlineCode",{parentName:"p"},"drop"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"project")," is now called ",(0,n.kt)("inlineCode",{parentName:"p"},"put"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"aggregate")," is now called ",(0,n.kt)("inlineCode",{parentName:"p"},"summarize"),". This breaking change is in preparation for an upcoming feature that improves the capability of VAST's query language.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2228"}),"#2228"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"layout-names")," option of the ",(0,n.kt)("inlineCode",{parentName:"p"},"rename")," transform step was renamed ",(0,n.kt)("inlineCode",{parentName:"p"},"schemas"),". The step now additonally supports renaming ",(0,n.kt)("inlineCode",{parentName:"p"},"fields"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2228"}),"#2228")))),(0,n.kt)("h3",h({},{id:"changes-8"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST ships experimental Terraform scripts to deploy on AWS Lambda and Fargate.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2108"}),"#2108"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We revised the query scheduling logic to exploit synergies when multiple queries run at the same time. In that vein, we updated the related metrics with more accurate names to reflect the new mechanism. The new keys ",(0,n.kt)("inlineCode",{parentName:"p"},"scheduler.partition.materializations"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"scheduler.partition.scheduled"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"scheduler.partition.lookups")," provide periodic counts of partitions loaded from disk and scheduled for lookup, and the overall number of queries issued to partitions, respectively. The keys ",(0,n.kt)("inlineCode",{parentName:"p"},"query.workers.idle"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"query.workers.busy")," were renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"scheduler.partition.remaining-capacity"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"scheduler.partition.current-lookups"),". Finally, the key ",(0,n.kt)("inlineCode",{parentName:"p"},"scheduler.partition.pending")," counts the number of currently pending partitions. It is still possible to opt-out of the new scheduling algorithm with the (deprecated) option ",(0,n.kt)("inlineCode",{parentName:"p"},"--use-legacy-query-scheduler"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2117"}),"#2117"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now requires Apache Arrow >= v7.0.0.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2122"}),"#2122"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST's internal data model now completely preserves the nesting of the stored data when using the ",(0,n.kt)("inlineCode",{parentName:"p"},"arrow")," encoding, and maps the pattern, address, subnet, and enumeration types onto Arrow extension types rather than using the underlying representation directly. This change enables use of the ",(0,n.kt)("inlineCode",{parentName:"p"},"export arrow")," command without needing information about VAST's type system.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2159"}),"#2159"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Transform steps that add or modify columns now transform the columns in-place rather than at the end, preserving the nesting structure of the original data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2159"}),"#2159"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The deprecated ",(0,n.kt)("inlineCode",{parentName:"p"},"msgpack")," encoding no longer exists. Data imported using the ",(0,n.kt)("inlineCode",{parentName:"p"},"msgpack")," encoding can still be accessed, but new data will always use the ",(0,n.kt)("inlineCode",{parentName:"p"},"arrow")," encoding.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2159"}),"#2159"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Client commands such as ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," now create less threads at runtime, reducing the risk of hitting system resource limits.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2193"}),"#2193"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"index")," section in the status output no longer contains the ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog-bytes")," keys. The information is already present in the top-level ",(0,n.kt)("inlineCode",{parentName:"p"},"catalog")," section.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2233"}),"#2233")))),(0,n.kt)("h3",h({},{id:"features-9"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.index")," section in the configuration supports adjusting the false-positive rate of first-stage lookups for individual fields, allowing users to optimize the time/space trade-off for expensive queries.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2065"}),"#2065"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now creates one active partition per layout, rather than having a single active partition for all layouts.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2096"}),"#2096"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.active-partition-timeout")," controls the time after which an active partition is flushed to disk. The timeout may hit before the partition size reaches ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.max-partition-size"),", allowing for an additional temporal control for data freshness. The active partition timeout defaults to 1 hour.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2096"}),"#2096"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," now displays the total number of events stored under the key ",(0,n.kt)("inlineCode",{parentName:"p"},"index.statistics.events.total"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2133"}),"#2133"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The disk monitor has new status entries ",(0,n.kt)("inlineCode",{parentName:"p"},"blacklist")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"blacklist   - size")," containing information about partitions failed to be erased.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2160"}),"#2160"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST has now complete support for passing environment variables as alternate path to configuration files. Environment variables have ",(0,n.kt)("em",{parentName:"p"},"lower")," precedence than CLI arguments and ",(0,n.kt)("em",{parentName:"p"},"higher")," precedence than config files. Variable names of the form ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_FOO__BAR_BAZ")," map to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.foo.bar-baz"),", i.e., ",(0,n.kt)("inlineCode",{parentName:"p"},"__")," is a record separator and ",(0,n.kt)("inlineCode",{parentName:"p"},"_")," translates to ",(0,n.kt)("inlineCode",{parentName:"p"},"-"),". This does not apply to the prefix ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_"),", which is considered the application identifier. Only variables with non-empty values are considered.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2162"}),"#2162"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST v1.0 deprecated the experimental aging feature. Given popular demand we've decided to un-deprecate it, and to actually implement it on top of the same building blocks the compaction mechanism uses. This means that it is now fully working and no longer considered experimental.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2186"}),"#2186"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"replace")," transform step now allows for setting values of complex types, e.g., lists or records.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2228"}),"#2228"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"lsvast")," tool now prints the whole store contents when given a store file as an argument.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2247"}),"#2247")))),(0,n.kt)("h3",h({},{id:"bug-fixes-9"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"explore")," command now properly terminates after the requested number of results are delivered.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2120"}),"#2120"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"count --estimate")," erroneously materialized store files from disk, resulting in an unneeded performance penalty. VAST now answers approximate count queries by solely consulting the relevant index files.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2146"}),"#2146"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import zeek")," command now correctly marks the event timestamp using the ",(0,n.kt)("inlineCode",{parentName:"p"},"timestamp")," type alias for all inferred schemas.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2155"}),"#2155"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Some queries could get stuck when an importer would time out during the meta index lookup. This race condition no longer exists.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2167"}),"#2167"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We optimized the queue size of the logger for commands other than ",(0,n.kt)("inlineCode",{parentName:"p"},"vast start"),". Client commands now show a significant reduction in memory usage and startup time.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2176"}),"#2176"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The CSV parser no longer fails when encountering integers when floating point values were expected.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2184"}),"#2184"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast(1)")," man-page is no longer empty for VAST distributions with static binaries.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2190"}),"#2190"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST servers no longer accept queries after initiating shutdown. This fixes a potential infinite hang if new queries were coming in faster than VAST was able to process them.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2215"}),"#2215"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer sometimes crashes when aging or compaction erase whole partitions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2227"}),"#2227"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Environment variables for options that specify lists now consistently use comma-separators and respect escaping with backslashes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2236"}),"#2236"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON import no longer rejects non-string selector fields. Instead, it always uses the textual JSON representation as a selector. E.g., the JSON object ",(0,n.kt)("inlineCode",{parentName:"p"},"{id:1,...}")," imported via ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import json --selector=id:mymodule")," now matches the schema named ",(0,n.kt)("inlineCode",{parentName:"p"},"mymodule.1")," rather than erroring because the ",(0,n.kt)("inlineCode",{parentName:"p"},"id")," field is not a string.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2255"}),"#2255"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Transform steps removing all nested fields from a record leaving only empty nested records no longer cause VAST to crash.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2258"}),"#2258"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The query optimizer incorrectly transformed queries with conjunctions or disjunctions with several operands testing against the same string value, leading to missing result. This was rarely an issue in practice before the introduction of homogenous partitions with the v2.0 release.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2264"}),"#2264")))),(0,n.kt)("h2",h({},{id:"v112"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v1.1.2"}),"v1.1.2")),(0,n.kt)("h3",h({},{id:"bug-fixes-10"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Terminating or timing out exports during the catalog lookup no longer causes query workers to become stuck indefinitely.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/2165"}),"#2165"))),(0,n.kt)("h2",h({},{id:"v111"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v1.1.1"}),"v1.1.1")),(0,n.kt)("h3",h({},{id:"bug-fixes-11"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The disk monitor now correctly continues deleting until below the low water mark after a partition failed to delete.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2160"}),"#2160"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We fixed a rarely occurring race condition caused query workers to become stuck after delivering all results until the corresponding client process terminated.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2160"}),"#2160"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Queries that timed out or were externally terminated while in the query backlog and with more than five unhandled candidate partitions no longer permanently get stuck.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2160"}),"#2160")))),(0,n.kt)("h2",h({},{id:"v110"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v1.1.0"}),"v1.1.0")),(0,n.kt)("h3",h({},{id:"changes-9"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer attempts to intepret query expressions as Sigma rules automatically. Instead, this functionality moved to a dedicated ",(0,n.kt)("inlineCode",{parentName:"p"},"sigma")," query language plugin that must explicitly be enabled at build time.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2074"}),"#2074"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"msgpack")," encoding option is now deprecated. VAST issues a warning on startup and automatically uses the ",(0,n.kt)("inlineCode",{parentName:"p"},"arrow")," encoding instead. A future version of VAST will remove this option entirely.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2087"}),"#2087"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The experimental aging feature is now deprecated. The ",(0,n.kt)("a",h({parentName:"p"},{href:"https://vast.io/docs/about/use-cases/data-aging"}),"compaction plugin")," offers a superset of the aging functionality.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2087"}),"#2087"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Actor names in log messages now have an ",(0,n.kt)("inlineCode",{parentName:"p"},"-ID")," suffix to make it easier to tell multiple instances of the same actor apart, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"exporter-42"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2119"}),"#2119"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We fixed an issue where partition transforms that erase complete partitions trigger an internal assertion failure.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2123"}),"#2123")))),(0,n.kt)("h3",h({},{id:"features-10"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The built-in ",(0,n.kt)("inlineCode",{parentName:"p"},"select")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"project")," transform steps now correctly handle dropping all rows and columns respectively, effectively deleting the input data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2064"}),"#2064"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2082"}),"#2082"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST has a new ",(0,n.kt)("em",{parentName:"p"},"query language")," plugin type that allows for adding additional query language frontends. The plugin performs one function: compile user input into a VAST expression. The new ",(0,n.kt)("inlineCode",{parentName:"p"},"sigma")," plugin demonstrates usage of this plugin type.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2074"}),"#2074"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new built-in ",(0,n.kt)("inlineCode",{parentName:"p"},"rename")," transform step allows for renaming event types during a transformation. This is useful when you want to ensure that a repeatedly triggered transformation does not affect already transformed events.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2076"}),"#2076"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"aggregate")," transform plugin allows for flexibly grouping and aggregating events. We recommend using it alongside the ",(0,n.kt)("a",h({parentName:"p"},{href:"https://vast.io/docs/about/use-cases/data-aging"}),(0,n.kt)("inlineCode",{parentName:"a"},"compaction")," plugin"),", e.g., for rolling up events into a more space-efficient representation after a certain amount of time.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2076"}),"#2076")))),(0,n.kt)("h3",h({},{id:"bug-fixes-12"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A performance bug in the first stage of query evaluation caused VAST to return too many candidate partitions when querying for a field suffix. For example, a query for the ",(0,n.kt)("inlineCode",{parentName:"p"},"ts")," field commonly used in Zeek logs also included partitions for ",(0,n.kt)("inlineCode",{parentName:"p"},"netflow.pkts")," from ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.netflow")," events. This bug no longer exists, resulting in a considerable speedup of affected queries.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2086"}),"#2086"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST does not lose query capacity when backlogged queries are cancelled any more.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2092"}),"#2092"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now correctly adjusts the index statistics when applying partition transforms.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2097"}),"#2097"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We fixed a bug that potentially resulted in the wrong subset of partitions to be considered during query evaluation.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2103"}),"#2103")))),(0,n.kt)("h2",h({},{id:"v100"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/v1.0.0"}),"v1.0.0")),(0,n.kt)("h3",h({},{id:"changes-10"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Building VAST now requires Arrow >= 6.0.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2033"}),"#2033"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer uses calendar-based versioning. Instead, it uses a semantic versioning scheme. A new VERSIONING.md document installed alongside VAST explores the semantics in-depth.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2035"}),"#2035"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugins now have a separate version. The build scaffolding installs README.md and CHANGELOG.md files in the plugin source tree root automatically.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2035"}),"#2035")))),(0,n.kt)("h3",h({},{id:"features-11"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST has a new transform step: ",(0,n.kt)("inlineCode",{parentName:"p"},"project"),", which keeps the fields with configured key suffixes and removes the rest from the input. At the same time, the ",(0,n.kt)("inlineCode",{parentName:"p"},"delete")," transform step can remove not only one but multiple fields from the input based on the configured key suffixes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2000"}),"#2000"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"--omit-nulls")," option to the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export json")," command causes VAST to skip over fields in JSON objects whose value is ",(0,n.kt)("inlineCode",{parentName:"p"},"null")," when rendering them.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2004"}),"#2004"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST has a new transform step: ",(0,n.kt)("inlineCode",{parentName:"p"},"select"),", which keeps rows matching the configured expression and removes the rest from the input.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2014"}),"#2014"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"#import_time")," meta extractor allows for querying events based on the time they arrived at the VAST server process. It may only be used for comparisons with ",(0,n.kt)("a",h({parentName:"p"},{href:"https://vast.io/docs/understand/query-language/expressions#values"}),"time value literals"),", e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export json '#import_time > 1 hour ago'")," exports all events that were imported within the last hour as NDJSON.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2019"}),"#2019")))),(0,n.kt)("h3",h({},{id:"bug-fixes-13"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The index now emits the metrics ",(0,n.kt)("inlineCode",{parentName:"p"},"query.backlog.{low,normal}")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"query.workers.{idle,busy}")," reliably.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2032"}),"#2032"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer ignores the ",(0,n.kt)("inlineCode",{parentName:"p"},"--schema-dirs")," option when using ",(0,n.kt)("inlineCode",{parentName:"p"},"--bare-mode"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2046"}),"#2046"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Starting VAST no longer fails if creating the database directory requires creating intermediate directories.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/2046"}),"#2046")))),(0,n.kt)("h2",h({},{id:"20211216"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.12.16"}),"2021.12.16")),(0,n.kt)("h3",h({},{id:"changes-11"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"VAST's internal type system has a new on-disk data representation. While we still support reading older databases, reverting to an older version of VAST will not be possible after this change. Alongside this change, we've implemented numerous fixes and streamlined handling of field name lookups, which now more consistently handles the dot-separator. E.g., the query ",(0,n.kt)("inlineCode",{parentName:"li"},'#field == "ip"')," still matches the field ",(0,n.kt)("inlineCode",{parentName:"li"},"source.ip"),", but no longer the field ",(0,n.kt)("inlineCode",{parentName:"li"},"source_ip"),". The change is also performance-relevant in the long-term: For data persisted from previous versions of VAST we convert to the new type system on the fly, and for newly ingested data we now have near zero-cost deserialization for types, which should result in an overall speedup once the old data is rotated out by the disk monitor.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/1888"}),"#1888"))),(0,n.kt)("h3",h({},{id:"features-12"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"All metrics events now contain the version of VAST. Additionally, VAST now emits startup and shutdown metrics at the start and stop of the VAST server.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1973"}),"#1973"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"JSON field selectors are now configurable instead of being hard-coded for Suricata Eve JSON and Zeek Streaming JSON. E.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import json --selector=event_type:suricata")," is now equivalent to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import suricata"),". This allows for easier integration of JSONL data containing a field that indicates its type.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1974"}),"#1974"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Metrics events now optionally contain a metadata field that is a key-value mapping of string to string, allowing for finer-grained introspection. For now this enables correlation of metrics events and individual queries. A set of new metrics for query lookup use this feature to include the query ID.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1987"}),"#1987"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1992"}),"#1992")))),(0,n.kt)("h3",h({},{id:"bug-fixes-14"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The field-based default selector of the JSON import now correctly matches types with nested record types.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/1988"}),"#1988"))),(0,n.kt)("h2",h({},{id:"20211118"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.11.18"}),"2021.11.18")),(0,n.kt)("h3",h({},{id:"changes-12"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"max-queries")," configuration option now works at a coarser granularity. It used to limit the number of queries that could simultaneously retrieve data, but it now sets the number of queries that can be processed at the same time.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1896"}),"#1896"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer vendors ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/Cyan4973/xxHash"}),"xxHash"),", which is now a regular required dependency. Internally, VAST switched its default hash function to XXH3, providing a speedup of up to 3x.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1905"}),"#1905"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Building VAST from source now requires CMake 3.18+.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1914"}),"#1914"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A recently added features allows for exporting everything when no query is provided. We've restricted this to prefer reading a query from stdin if available. Additionally, conflicting ways to read the query now trigger errors.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1917"}),"#1917")))),(0,n.kt)("h3",h({},{id:"features-13"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A new 'apply' handler in the index gives plugin authors the ability to apply transforms over entire partitions. Previously, transforms were limited to streams of table slice during import or export.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1887"}),"#1887"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The export command now has a ",(0,n.kt)("inlineCode",{parentName:"p"},"--low-priority")," option to reduce the priority of the request while query backlogs are being worked down.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1929"}),"#1929"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1947"}),"#1947"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The keys ",(0,n.kt)("inlineCode",{parentName:"p"},"query.backlog.normal")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"query.backlog.low")," have been added to the metrics output. The values indicate the number of quries that are currently in the backlog.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1942"}),"#1942")))),(0,n.kt)("h3",h({},{id:"bug-fixes-15"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The timeout duration to delete partitions has been increased to one minute, reducing the frequency of warnings for hitting this timeout significantly.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1897"}),"#1897"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When reading IPv6 addresses from PCAP data, only the first 4 bytes have been considered. VAST now stores all 16 bytes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1905"}),"#1905"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Store files now get deleted correctly if the database directory differs from the working directory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1912"}),"#1912"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Debug builds of VAST no longer segfault on a status request with the ",(0,n.kt)("inlineCode",{parentName:"p"},"--debug")," option.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1915"}),"#1915"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.dns")," schema has been updated to match the currently used EVE-JSON structure output by recent Suricata versions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1919"}),"#1919"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer tries to create indexes for fields of type ",(0,n.kt)("inlineCode",{parentName:"p"},"list<record{...}>")," as that wasn't supported in the first place.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1933"}),"#1933"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Static plugins are no longer always loaded, but rather need to be explicitly enabled as documented. To restore the behavior from before this bug fix, set ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins: [bundled]")," in your configuration file.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1959"}),"#1959")))),(0,n.kt)("h2",h({},{id:"20210930"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.09.30"}),"2021.09.30")),(0,n.kt)("h3",h({},{id:"changes-13"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default store backend now is ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store")," in order to enable the use of partition transforms in the future. To continue using the (now deprecated) legacy store backend, set ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.store-backend")," to archive.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1876"}),"#1876"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Example configuration files are now installed to the datarootdir as opposed to the sysconfdir in order to avoid overriding previously installed configuration files.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1880"}),"#1880")))),(0,n.kt)("h3",h({},{id:"features-14"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If present in the plugin source directory, the build scaffolding now automatically installs ",(0,n.kt)("inlineCode",{parentName:"p"},"<plugin>.yaml.example")," files, commenting out every line so the file has no effect. This serves as documentation for operators that can modify the installed file in-place.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1860"}),"#1860"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"broker")," plugin is now a also ",(0,n.kt)("em",{parentName:"p"},"writer")," plugin on top of being already a ",(0,n.kt)("em",{parentName:"p"},"reader")," plugin. The new plugin enables exporting query results directly into a a Zeek process, e.g., to write Zeek scripts that incorporate context from the past. Run ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export broker <expr>")," to ship events via Broker that Zeek dispatches under the event ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST::data(layout: string, data: any)"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1863"}),"#1863"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new tool ",(0,n.kt)("inlineCode",{parentName:"p"},"mdx-regenerate")," allows operators to re-create all ",(0,n.kt)("inlineCode",{parentName:"p"},".mdx")," files in a database directory to the latest file format version while VAST is running. This is useful for advanced users in preparation for version upgrades that bump the format version.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1866"}),"#1866"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Running ",(0,n.kt)("inlineCode",{parentName:"p"},"vat status --detailed")," now lists all loaded configuration files under ",(0,n.kt)("inlineCode",{parentName:"p"},"system.config-files"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1871"}),"#1871"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The query argument to the export and count commands may now be omitted, which causes the commands to operate on all data. Note that this may be a very expensive operation, so use with caution.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1879"}),"#1879"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status --detailed")," now contains information about queries   that are currently processed in the index.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1881"}),"#1881")))),(0,n.kt)("h3",h({},{id:"bug-fixes-16"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The status command no longer occasionally contains garbage keys when the VAST server is under high load.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1872"}),"#1872"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Remote sources and sinks are no longer erroneously included in the output of VAST status.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1873"}),"#1873"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The index now correctly cancels pending queries when the requester dies.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1884"}),"#1884"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Import filter expressions now work correctly with queries using field extractors, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import suricata 'event_type == \"alert\"' < path/to/eve.json"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1885"}),"#1885"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Expression predicates of the ",(0,n.kt)("inlineCode",{parentName:"p"},"#field")," type now produce error messages instead of empty result sets for operations that are not supported.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1886"}),"#1886"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The disk monitor no longer fails to delete segments of particularly busy partitions with the ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store")," store backend.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1892"}),"#1892")))),(0,n.kt)("h2",h({},{id:"20210826"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.08.26"}),"2021.08.26")),(0,n.kt)("h3",h({},{id:"changes-14"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer strips link-layer framing when ingesting PCAPs. The stored payload is the raw PCAP packet. Similarly, ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export pcap")," now includes a Ethernet link-layer framing, per libpcap's ",(0,n.kt)("inlineCode",{parentName:"p"},"DLT_EN10MB")," link type.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1797"}),"#1797"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Strings in error or warning log messages are no longer escaped, greatly improving readability of messages containing nested error contexts.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1842"}),"#1842"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now supports building against {fmt} 8 and spdlog 1.9.2, and now requires at least {fmt} 7.1.3.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1846"}),"#1846"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ships with an updated schema type for the ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.dhcp")," event, covering all fields of the extended output.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1854"}),"#1854")))),(0,n.kt)("h3",h({},{id:"features-15"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store")," store backend works correctly with ",(0,n.kt)("inlineCode",{parentName:"p"},"vast get")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast explore"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1805"}),"#1805"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST can now process Eve JSON events of type ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.packet")," that Suricata emits when the config option ",(0,n.kt)("inlineCode",{parentName:"p"},"tagged-packets")," is set and a rule tags a packet using, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"tag:session,5,packets;"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1819"}),"#1819"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1833"}),"#1833")))),(0,n.kt)("h3",h({},{id:"bug-fixes-17"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Previously missing fields of suricata event types are now part of the concept definitions of ",(0,n.kt)("inlineCode",{parentName:"p"},"net.src.ip"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"net.src.port"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"net.dst.ip"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"net.dst.port"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"net.app"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"net.proto"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"net.community_id"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"net.vlan"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"net.packets"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1798"}),"#1798"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Invalid segment files will no longer crash VAST at startup.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1820"}),"#1820"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugins in the prebuilt Docker images no longer show ",(0,n.kt)("inlineCode",{parentName:"p"},"unspecified")," as their version.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1828"}),"#1828"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The configuration options ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.metrics.{file,uds}-sink.path")," now correctly specify paths relative to the database directory of VAST, rather than the current working directory of the VAST server.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1848"}),"#1848"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store")," store backend and built-in transform steps (",(0,n.kt)("inlineCode",{parentName:"p"},"hash"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"replace"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"delete"),") now function correctly in static VAST binaries.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1850"}),"#1850"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output of VAST status now includes status information for sources and sinks spawned in the VAST node, i.e., via ",(0,n.kt)("inlineCode",{parentName:"p"},"vast spawn source|sink <format>")," rather than ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import|export <format>"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1852"}),"#1852"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"In order to align with the ",(0,n.kt)("a",h({parentName:"p"},{href:"https://www.gnu.org/prep/standards/html_node/Directory-Variables.html"}),"GNU Coding Standards"),", the static binary (and other relocatable binaries) now uses ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc")," as sysconfdir for installations to ",(0,n.kt)("inlineCode",{parentName:"p"},"/usr/bin/vast"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1856"}),"#1856"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now only switches to journald style logging by default when it is actually supported.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1857"}),"#1857"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The CSV parser now correctly parses quoted fields in non-string types. E.g., ",(0,n.kt)("inlineCode",{parentName:"p"},'"127.0.0.1"')," in CSV now successfully parsers when a matching schema contains an ",(0,n.kt)("inlineCode",{parentName:"p"},"address")," type field.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1858"}),"#1858"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The memory counts in the output of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," now represent bytes consistently, as opposed to a mix of bytes and kilobytes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1862"}),"#1862")))),(0,n.kt)("h2",h({},{id:"20210729"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.07.29"}),"2021.07.29")),(0,n.kt)("h3",h({},{id:"changes-15"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer officially supports Debian Buster with GCC-8. In CI, VAST now runs on Debian Bullseye with GCC-10. The provided Docker images now use ",(0,n.kt)("inlineCode",{parentName:"p"},"debian:bullseye-slim")," as base image. Users that require Debian Buster support should use the provided static builds instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1765"}),"#1765"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"From now on VAST is compiled with the C++20 language standard. Minimum compiler versions have increased to GCC 10, Clang 11, and AppleClang 12.0.5.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1768"}),"#1768"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," binaries in our ",(0,n.kt)("a",h({parentName:"p"},{href:"http://hub.docker.com/r/tenzir/vast"}),"prebuilt Docker images")," no longer contain AVX instructions for increased portability. Building the image locally continues to add supported auto-vectorization flags automatically.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1778"}),"#1778"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The following new build options exist: ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_ENABLE_AUTO_VECTORIZATION")," enables/disables all auto-vectorization flags, and ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_ENABLE_SSE_INSTRUCTIONS")," enables ",(0,n.kt)("inlineCode",{parentName:"p"},"-msse"),"; similar options exist for SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, AVX, and AVX2.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1778"}),"#1778")))),(0,n.kt)("h3",h({},{id:"features-16"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST has new a ",(0,n.kt)("inlineCode",{parentName:"p"},"store_plugin")," type for custom store backends that hold the raw data of a partition. The new setting ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.store-backend")," controls the selection of the store implementation, which has a default value is ",(0,n.kt)("inlineCode",{parentName:"p"},"segment-store"),". This is still an opt-in feature: unless the configuration value is set, VAST defaults to the old implementation.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1720"}),"#1720"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1762"}),"#1762"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1802"}),"#1802"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now supports import filter expressions. They act as the dual to export query expressions: ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import suricata '#type == \"suricata.alert\"' < eve.json")," will import only ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.alert")," events, discarding all other events.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1742"}),"#1742"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now comes with a ",(0,n.kt)("a",h({parentName:"p"},{href:"https://hub.docker.com/r/tenzir/vast-dev"}),(0,n.kt)("inlineCode",{parentName:"a"},"tenzir/vast-dev"))," Docker image in addition to the regular ",(0,n.kt)("a",h({parentName:"p"},{href:"https://hub.docker.com/r/tenzir/vast"}),(0,n.kt)("inlineCode",{parentName:"a"},"tenzir/vast")),". The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast-dev")," image targets development contexts, e.g., when building additional plugins. The image contains all build-time dependencies of VAST and runs as ",(0,n.kt)("inlineCode",{parentName:"p"},"root")," rather than the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," user.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1749"}),"#1749"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"lsvast")," now prints extended information for hash indexes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1755"}),"#1755"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/zeek/broker"}),"Broker")," plugin enables seamless log ingestion from ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/zeek/zeek"}),"Zeek")," to VAST via a TCP socket. Broker is Zeek's messaging library and the plugin turns VAST into a Zeek ",(0,n.kt)("a",h({parentName:"p"},{href:"https://docs.zeek.org/en/master/frameworks/cluster.html#logger"}),"logger node"),". Use ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import broker")," to establish a connection to a Zeek node and acquire logs.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1758"}),"#1758"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugin versions are now unique to facilitate debugging. They consist of three optional parts: (1) the CMake project version of the plugin, (2) the Git revision of the last commit that touched the plugin, and (3) a ",(0,n.kt)("inlineCode",{parentName:"p"},"dirty")," suffix for uncommited changes to the plugin. Plugin developers no longer need to specify the version manually in the plugin entrypoint.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1764"}),"#1764"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now supports the ",(0,n.kt)("em",{parentName:"p"},"arm64")," architecture.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1773"}),"#1773"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Installing VAST now includes a ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yaml.example")," configuration file listing all available options.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1777"}),"#1777"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now exports per-layout import metrics under the key ",(0,n.kt)("inlineCode",{parentName:"p"},"<reader>.events.<layout-name>")," in addition to the regular ",(0,n.kt)("inlineCode",{parentName:"p"},"<reader>.events"),". This makes it easier to understand the event type distribution.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1781"}),"#1781"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The static binary now bundles the Broker plugin.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1789"}),"#1789")))),(0,n.kt)("h3",h({},{id:"bug-fixes-18"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Configuring VAST to use CAF's built-in OpenSSL module via the ",(0,n.kt)("inlineCode",{parentName:"p"},"caf.openssl.*")," options now works again as expected.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1740"}),"#1740"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The the ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," command now prints information about input and output transformations.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1748"}),"#1748"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A ",(0,n.kt)("inlineCode",{parentName:"p"},"[*** LOG ERROR #0001 ***]")," error message on startup under Linux no longer occurs.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1754"}),"#1754"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Queries against fields using a ",(0,n.kt)("inlineCode",{parentName:"p"},"#index=hash")," attribute could have missed some results. Fixing a bug in the offset calculation during bitmap processing resolved the issue.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1755"}),"#1755"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A regression caused VAST's plugins to be loaded in random order, which printed a warning about mismatching plugins between client and server. The order is now deterministic.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1756"}),"#1756"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST does not abort JSON imports anymore when encountering something other than a JSON object, e.g., a number or a string. Instead, VAST skips the offending line.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1759"}),"#1759"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Import processes now respond quicker. Shutdown requests are no longer delayed when the server process has busy imports, and metrics reports are now written in a timely manner.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1771"}),"#1771"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Particularly busy imports caused the shutdown of the server process to hang, if import processes were still running or had not yet flushed all data. The server now shuts down correctly in these cases.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1771"}),"#1771"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The static binary no longer behaves differently than the regular build with regards to its configuration directories: system-wide configuration files now reside in ",(0,n.kt)("inlineCode",{parentName:"p"},"<prefix>/etc/vast/vast.yaml")," rather than ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/vast/vast.yaml"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1777"}),"#1777"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_ENABLE_JOURNALD_LOGGING")," CMake option is no longer ignored.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1780"}),"#1780"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugins built against an external libvast no longer require the ",(0,n.kt)("inlineCode",{parentName:"p"},"CMAKE_INSTALL_LIBDIR")," to be specified as a path relative to the configured ",(0,n.kt)("inlineCode",{parentName:"p"},"CMAKE_INSTALL_PREFIX"),". This fixes an issue with plugins in separate packages for some package managers, e.g., Nix.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1786"}),"#1786"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The official Docker image and static binary distribution of VAST now produce the correct version output for plugins from the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast version")," command.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1799"}),"#1799"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The disk budget feature no longer triggers a rare segfault while deleting partitions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1804"}),"#1804"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1809"}),"#1809")))),(0,n.kt)("h2",h({},{id:"20210624"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.06.24"}),"2021.06.24")),(0,n.kt)("h3",h({},{id:"breaking-changes-2"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Apache Arrow is now a required dependency. The previously deprecated build  option ",(0,n.kt)("inlineCode",{parentName:"p"},"-DVAST_ENABLE_ARROW=OFF")," no longer exists.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1683"}),"#1683"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer loads static plugins by default. Generally, VAST now treats static plugins and bundled dynamic plugins equally, allowing users to enable or disable static plugins as needed for their deployments.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1703"}),"#1703")))),(0,n.kt)("h3",h({},{id:"changes-16"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The VAST community chat moved from Gitter to Slack. ",(0,n.kt)("a",h({parentName:"p"},{href:"http://slack.tenzir.com"}),"Join us")," in the ",(0,n.kt)("inlineCode",{parentName:"p"},"#vast")," channel for vibrant discussions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1696"}),"#1696"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("a",h({parentName:"p"},{href:"https://hub.docker.com/r/tenzir/vast"}),"tenzir/vast")," Docker image bundles the PCAP plugin.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1705"}),"#1705"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST merges lists from configuration files. E.g., running VAST with ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugins=some-plugin")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins: [other-plugin]")," in the configuration now results in both ",(0,n.kt)("inlineCode",{parentName:"p"},"some-plugin")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"other-plugin")," being loaded (sorted by the usual precedence), instead of just ",(0,n.kt)("inlineCode",{parentName:"p"},"some-plugin"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1721"}),"#1721"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1734"}),"#1734")))),(0,n.kt)("h3",h({},{id:"features-17"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.start.commands")," allows for specifying an ordered list of VAST commands that run after successful startup. The effect is the same as first starting a node, and then using another VAST client to issue commands.  This is useful for commands that have side effects that cannot be expressed through the config file, e.g., starting a source inside the VAST server that listens on a socket or reads packets from a network interface.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1699"}),"#1699"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The options ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugin-dirs")," may now be specified on the command line as well as the configuration. Use the options ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugins")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin-dirs")," respectively.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1703"}),"#1703"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Add the reserved plugin name ",(0,n.kt)("inlineCode",{parentName:"p"},"bundled")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins")," to enable load all bundled plugins, i.e., static or dynamic plugins built alongside VAST, or use ",(0,n.kt)("inlineCode",{parentName:"p"},"--plugins=bundled")," on the command line. The reserved plugin name ",(0,n.kt)("inlineCode",{parentName:"p"},"all")," causes all bundled and external plugins to be loaded, i.e., all shared libraries matching ",(0,n.kt)("inlineCode",{parentName:"p"},"libvast-plugin-*")," from the configured ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugin-dirs"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1703"}),"#1703"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"It's now possible to configure the VAST endpoint as an environment variable by setting ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_ENDPOINT"),". This has higher precedence than setting ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.endpoint")," in configuration files, but lower precedence than passing ",(0,n.kt)("inlineCode",{parentName:"p"},"--endpoint=")," on the command-line.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1714"}),"#1714"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugins load their respective configuration from ",(0,n.kt)("inlineCode",{parentName:"p"},"<configdir>/vast/plugin/<plugin-name>.yaml")," in addition to the regular configuration file at ",(0,n.kt)("inlineCode",{parentName:"p"},"<configdir>/vast/vast.yaml"),". The new plugin-specific file does not require putting configuration under the key ",(0,n.kt)("inlineCode",{parentName:"p"},"plugins.<plugin-name>"),". This allows for deploying plugins without needing to touch the ",(0,n.kt)("inlineCode",{parentName:"p"},"<configdir>/vast/vast.yaml")," configuration file.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1724"}),"#1724")))),(0,n.kt)("h3",h({},{id:"bug-fixes-19"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer crashes when querying for string fields with non-string values. Instead, an error message warns the user about an invalid query.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1685"}),"#1685"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Building plugins against an installed VAST no longer requires manually specifying ",(0,n.kt)("inlineCode",{parentName:"p"},"-DBUILD_SHARED_LIBS=ON"),". The option is now correctly enabled by default for external plugins.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1697"}),"#1697"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The UDS metrics sink continues to send data when the receiving socket is recreated.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1702"}),"#1702"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.log-rotation-threshold")," option was silently ignored, causing VAST to always use the default log rotation threshold of 10 MiB. The option works as expected now.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1709"}),"#1709"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Additional tags for the ",(0,n.kt)("a",h({parentName:"p"},{href:"https://hub.docker.com/r/tenzir/vast"}),"tenzir/vast")," Docker image for the release versions exist, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"tenzir/vast:2021.05.27"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1711"}),"#1711"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import csv")," command handles quoted fields correctly. Previously, the quotes were part of the parsed value, and field separators in quoted strings caused the parser to fail.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1712"}),"#1712"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Import processes no longer hang on receiving SIGINT or SIGKILL. Instead, they shut down properly after flushing yet to be processed data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1718"}),"#1718")))),(0,n.kt)("h2",h({},{id:"20210527"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.05.27"}),"2021.05.27")),(0,n.kt)("h3",h({},{id:"breaking-changes-3"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Schemas are no longer implicitly shared between sources, i.e., an ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," process importing data with a custom schema will no longer affect other sources started at a later point in time. Schemas known to the VAST server process are still available to all ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," processes. We do not expect this change to have a real-world impact, but it could break setups where some sources have been installed on hosts without their own schema files, the VAST server did not have up-to-date schema files, and other sources were (ab)used to provide the latest type information.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1656"}),"#1656"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"configure")," script was removed. This was a custom script that mimicked the functionality of an autotools-based ",(0,n.kt)("inlineCode",{parentName:"p"},"configure")," script by writing directly to the cmake cache. Instead, users now must use the ",(0,n.kt)("inlineCode",{parentName:"p"},"cmake")," and/or ",(0,n.kt)("inlineCode",{parentName:"p"},"ccmake")," binaries directly to configure VAST.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1657"}),"#1657")))),(0,n.kt)("h3",h({},{id:"changes-17"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Building VAST without Apache Arrow via ",(0,n.kt)("inlineCode",{parentName:"li"},"-DVAST_ENABLE_ARROW=OFF")," is now deprecated, and support for the option will be removed in a future release. As the Arrow ecosystem and libraries matured, we feel confident in making it a required dependency and plan to build upon it more in the future.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/1682"}),"#1682"))),(0,n.kt)("h3",h({},{id:"features-18"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("em",{parentName:"p"},"transforms")," feature allows VAST to apply transformations to incoming and outgoing data. A transform consists of a sequence of steps that execute sequentially, e.g., to remove, overwrite, hash, encrypt data. A new plugin type makes it easy to write custom transforms.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1517"}),"#1517"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1656"}),"#1656"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugin schemas are now installed to ",(0,n.kt)("inlineCode",{parentName:"p"},"<datadir>/vast/plugin/<plugin>/schema"),", while VAST's built-in schemas reside in ",(0,n.kt)("inlineCode",{parentName:"p"},"<datadir>/vast/schema"),". The load order guarantees that plugins are able to reliably override the schemas bundled with VAST.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1608"}),"#1608"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export --timeout=<duration>")," allows for setting a timeout for VAST queries. Cancelled exports result in a non-zero exit code.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1611"}),"#1611"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"To enable easier post-processing, the new option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.export.json.numeric-durations")," switches JSON output of ",(0,n.kt)("inlineCode",{parentName:"p"},"duration")," types from human-readable strings (e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},'"4.2m"'),") to numeric (e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"252.15"),") in fractional seconds.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1628"}),"#1628"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," command now prints the VAST server version information under the ",(0,n.kt)("inlineCode",{parentName:"p"},"version")," key.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1652"}),"#1652"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new setting ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.disk-monitor-step-size")," enables the disk monitor to remove ",(0,n.kt)("em",{parentName:"p"},"N")," partitions at once before re-checking if the new size of the database directory is now small enough. This is useful when checking the size of a directory is an expensive operation itself, e.g., on compressed filesystems.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1655"}),"#1655")))),(0,n.kt)("h3",h({},{id:"bug-fixes-20"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now correctly refuses to run when loaded plugins fail their initialization, i.e., are in a state that cannot be reasoned about.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1618"}),"#1618"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A recent change caused imports over UDP not to forward its events to the VAST server process. Running ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import -l :<port>/udp <format>")," now works as expected again.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1622"}),"#1622"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Non-relocatable VAST binaries no longer look for configuration, schemas, and plugins in directories relative to the binary location. Vice versa, relocatable VAST binaries no longer look for configuration, schemas, and plugins in their original install directory, and instead always use paths relative to their binary location. On macOS, we now always build relocatable binaries. Relocatable binaries now work correctly on systems where the libary install directory is ",(0,n.kt)("inlineCode",{parentName:"p"},"lib64")," instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"lib"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1624"}),"#1624"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer erroneously skips the version mismatch detection between client and server. The check now additionally compares running plugins.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1652"}),"#1652"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Executing VAST's unit test suite in parallel no longer fails.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1659"}),"#1659"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST and transform plugins now build without Arrow support again.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1673"}),"#1673"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"delete")," transform step correctly deletes fields from the layout when running VAST with Arrow disabled.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1673"}),"#1673"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer erroneously warns about a version mismatch between client and server when their plugin load order differs.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1679"}),"#1679")))),(0,n.kt)("h2",h({},{id:"20210429"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.04.29"}),"2021.04.29")),(0,n.kt)("h3",h({},{id:"breaking-changes-4"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The previously deprecated (",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1409"}),"#1409"),") option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.no-default-schema")," no longer exists.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1507"}),"#1507"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugins configured via ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins")," in the configuration file can now be specified using either the plugin name or the full path to the shared plugin library. We no longer allow omitting the extension from specified plugin files, and recommend using the plugin name as a more portable solution, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"example")," over ",(0,n.kt)("inlineCode",{parentName:"p"},"libexample")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"/path/to/libexample.so")," over ",(0,n.kt)("inlineCode",{parentName:"p"},"/path/to/libexample"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1527"}),"#1527"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The previously deprecated usage (",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1354"}),"#1354"),") of format-independent options after the format in commands is now no longer possible. This affects the options ",(0,n.kt)("inlineCode",{parentName:"p"},"listen"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"read"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"schema"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"schema-file"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"type"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"uds")," for import commands and the ",(0,n.kt)("inlineCode",{parentName:"p"},"write")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"uds")," options for export commands.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1529"}),"#1529"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugins must define a separate entrypoint in their build scaffolding using the argument ",(0,n.kt)("inlineCode",{parentName:"p"},"ENTRYPOINT")," to the CMake function ",(0,n.kt)("inlineCode",{parentName:"p"},"VASTRegisterPlugin"),". If only a single value is given to the argument ",(0,n.kt)("inlineCode",{parentName:"p"},"SOURCES"),", it is interpreted as the ",(0,n.kt)("inlineCode",{parentName:"p"},"ENTRYPOINT")," automatically.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1549"}),"#1549"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"To avoid confusion between the PCAP plugin and libpcap, which both have a library file named ",(0,n.kt)("inlineCode",{parentName:"p"},"libpcap.so"),", we now generally prefix the plugin library output names with ",(0,n.kt)("inlineCode",{parentName:"p"},"vast-plugin-"),". E.g., The PCAP plugin library file is now named ",(0,n.kt)("inlineCode",{parentName:"p"},"libvast-plugin-pcap.so"),". Plugins specified with a full path in the configuration under ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins")," must be adapted accordingly.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1593"}),"#1593")))),(0,n.kt)("h3",h({},{id:"changes-18"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The metrics for Suricata Eve JSON and Zeek Streaming JSON imports are now under the categories ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata-reader")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"zeek-reader")," respectively so they can be distinguished from the regular JSON import, which is still under ",(0,n.kt)("inlineCode",{parentName:"p"},"json-reader"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1498"}),"#1498"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ships with a schema record type for Suricata's ",(0,n.kt)("inlineCode",{parentName:"p"},"rfb")," event type.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1499"}),"#1499"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/satta"}),"@satta"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"exporter.hits")," metric has been removed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1514"}),"#1514"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1574"}),"#1574"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We upstreamed the Debian patches provided by ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/satta"}),"@satta"),". VAST now prefers an installed ",(0,n.kt)("inlineCode",{parentName:"p"},"tsl-robin-map>=0.6.2")," to the bundled one unless configured with ",(0,n.kt)("inlineCode",{parentName:"p"},"--with-bundled-robin-map"),", and we provide a manpage for ",(0,n.kt)("inlineCode",{parentName:"p"},"lsvast")," if ",(0,n.kt)("inlineCode",{parentName:"p"},"pandoc")," is installed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1515"}),"#1515"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The Suricata ",(0,n.kt)("inlineCode",{parentName:"p"},"dns")," schema type now defines the ",(0,n.kt)("inlineCode",{parentName:"p"},"dns.grouped.A")," field containing a list of all returned addresses.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1531"}),"#1531"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The status output of ",(0,n.kt)("em",{parentName:"p"},"Analyzer Plugins")," moved from the ",(0,n.kt)("inlineCode",{parentName:"p"},"importer.analyzers")," key into the top-level record.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1544"}),"#1544"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"--disable-default-config-dirs")," disables the loading of user and system configuration, schema, and plugin directories. We use this option internally when running integration tests.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1557"}),"#1557"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Building VAST now requires CMake >= 3.15.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1559"}),"#1559"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The VAST community chat moved from Element to Gitter. Join us at ",(0,n.kt)("a",h({parentName:"p"},{href:"https://gitter.im/tenzir/vast"}),"gitter.im/tenzir/vast")," or via Matrix at ",(0,n.kt)("inlineCode",{parentName:"p"},"#tenzir_vast:gitter.im"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1591"}),"#1591")))),(0,n.kt)("h3",h({},{id:"features-19"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The disk monitor gained a new ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.start.disk-budget-check-binary")," option that can be used to specify an external binary to determine the size of the database directory. This can be useful in cases where ",(0,n.kt)("inlineCode",{parentName:"p"},"stat()")," does not give the correct answer, e.g. on compressed filesystems.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1453"}),"#1453"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_PLUGIN_DIRS")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_SCHEMA_DIRS")," environment variables allow for setting additional plugin and schema directories separated with ",(0,n.kt)("inlineCode",{parentName:"p"},":")," with higher precedence than other plugin and schema directories.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1532"}),"#1532"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1541"}),"#1541"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"It is now possible to build plugins against an installed VAST. This requires a slight adaptation to every plugin's build scaffolding. The example plugin was updated accordingly.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1532"}),"#1532"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("em",{parentName:"p"},"Component Plugins")," are a new category of plugins that execute code within the VAST server process. ",(0,n.kt)("em",{parentName:"p"},"Analyzer Plugins")," are now a specialization of ",(0,n.kt)("em",{parentName:"p"},"Component Plugins"),", and their API remains unchanged.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1544"}),"#1544"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1547"}),"#1547"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1588"}),"#1588"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("em",{parentName:"p"},"Reader Plugins")," and ",(0,n.kt)("em",{parentName:"p"},"Writer Plugins")," are a new family of plugins that add import/export formats. The previously optional PCAP format moved into a dedicated plugin. Configure with ",(0,n.kt)("inlineCode",{parentName:"p"},"--with-pcap-plugin")," and add ",(0,n.kt)("inlineCode",{parentName:"p"},"pcap")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.plugins")," to enable the PCAP plugin.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1549"}),"#1549")))),(0,n.kt)("h3",h({},{id:"bug-fixes-21"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer erroneously tries to load explicitly specified plugins dynamically that are linked statically.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1528"}),"#1528"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Custom commands from plugins ending in ",(0,n.kt)("inlineCode",{parentName:"p"},"start")," no longer try to write to the server instead of the client log file.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1530"}),"#1530"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Linking against an installed VAST via CMake now correctly resolves VAST's dependencies.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1532"}),"#1532"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer refuses to start when any of the configuration file directories is unreadable, e.g., because VAST is running in a sandbox.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1533"}),"#1533"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The CSV reader no longer crashes when encountering nested type aliases.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1534"}),"#1534"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The command-line parser no longer crashes when encountering a flag with missing value in the last position of a command invocation.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1536"}),"#1536"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A bug in the parsing of ISO8601 formatted dates that incorrectly adjusted the time to the UTC timezone has been fixed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1537"}),"#1537"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugin unit tests now correctly load and initialize their respective plugins.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1549"}),"#1549"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The shutdown logic contained a bug that would make the node fail to terminate in case a plugin actor is registered at said node.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1563"}),"#1563"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A race condition in the shutdown logic that caused an assertion was fixed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1563"}),"#1563"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now correctly builds within shallow clones of the repository. If the build system is unable to determine the correct version from ",(0,n.kt)("inlineCode",{parentName:"p"},"git-describe"),", it now always falls back to the version of the last release.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1570"}),"#1570"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We fixed a regression that made it impossible to build static binaries from outside of the repository root directory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1573"}),"#1573"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"VASTRegisterPlugin")," CMake function now correctly removes the ",(0,n.kt)("inlineCode",{parentName:"p"},"ENTRYPOINT")," from the given ",(0,n.kt)("inlineCode",{parentName:"p"},"SOURCES"),", allowing for plugin developers to easily glob for sources again.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1573"}),"#1573"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"exporter.selectivity")," metric is now 1.0 instead of NaN for idle periods.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1574"}),"#1574"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer renders JSON numbers with non-finite numbers as ",(0,n.kt)("inlineCode",{parentName:"p"},"NaN"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"-NaN"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"inf"),", or ",(0,n.kt)("inlineCode",{parentName:"p"},"-inf"),", resulting in invalid JSON output. Instead, such numbers are now rendered as ",(0,n.kt)("inlineCode",{parentName:"p"},"null"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1574"}),"#1574"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Specifying relative ",(0,n.kt)("inlineCode",{parentName:"p"},"CMAKE_INSTALL_*DIR")," in the build configuration no longer causes VAST not to pick up system-wide installed configuration files, schemas, and plugins. The configured install prefix is now used correctly. The defunct ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_SYSCONFDIR"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_DATADIR"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"VAST_LIBDIR")," CMake options no longer exist. Use a combination of ",(0,n.kt)("inlineCode",{parentName:"p"},"CMAKE_INSTALL_PREFIX")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"CMAKE_INSTALL_*DIR")," instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1580"}),"#1580"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Spaces before SI prefixes in command line arguments and configuration options are now generally ignored, e.g., it is now possible to set the disk monitor budgets to ",(0,n.kt)("inlineCode",{parentName:"p"},"2 GiB")," rather than ",(0,n.kt)("inlineCode",{parentName:"p"},"2GiB"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1590"}),"#1590")))),(0,n.kt)("h2",h({},{id:"20210325"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.03.25"}),"2021.03.25")),(0,n.kt)("h3",h({},{id:"breaking-changes-5"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The previously deprecated ",(0,n.kt)("inlineCode",{parentName:"p"},"#timestamp")," extractor has been removed from the query language entirely. Use ",(0,n.kt)("inlineCode",{parentName:"p"},":timestamp")," instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1399"}),"#1399"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Plugins can now be linked statically against VAST. A new ",(0,n.kt)("inlineCode",{parentName:"p"},"VASTRegisterPlugin")," CMake function enables easy setup of the build scaffolding required for plugins. Configure with ",(0,n.kt)("inlineCode",{parentName:"p"},"--with-static-plugins")," or build a static binary to link all plugins built alongside VAST statically. All plugin build scaffoldings must be adapted, older plugins do no longer work.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1445"}),"#1445"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1452"}),"#1452")))),(0,n.kt)("h3",h({},{id:"changes-19"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default size of table slices (event batches) that is created from ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import")," processes has been changed from 1,000 to 1,024.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1396"}),"#1396"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ships with schema record types for Suricata's ",(0,n.kt)("inlineCode",{parentName:"p"},"mqtt")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"anomaly")," event types.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1408"}),"#1408"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/satta"}),"@satta"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.no-default-schema")," is deprecated, as it is no longer needed to override types from bundled schemas.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1409"}),"#1409"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Query latency for expressions that contain concept names has improved substantially. For DB sizes in the TB region, and with a large variety of event types, queries with a high selectivity experience speedups of up to 5x.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1433"}),"#1433"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The zeek-to-vast utility was moved to the ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/zeek-vast"}),"tenzir/zeek-vast")," repository. All options related to zeek-to-vast and the bundled Broker submodule were removed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1435"}),"#1435"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The type extractor in the expression language now works with type aliases. For example, given the type definition for port from the base schema ",(0,n.kt)("inlineCode",{parentName:"p"},"type port = count"),", a search for ",(0,n.kt)("inlineCode",{parentName:"p"},":count")," will also consider fields of type ",(0,n.kt)("inlineCode",{parentName:"p"},"port"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1446"}),"#1446")))),(0,n.kt)("h3",h({},{id:"features-20"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The schema language now supports 4 operations on record types: ",(0,n.kt)("inlineCode",{parentName:"p"},"+")," combines the fields of 2 records into a new record. ",(0,n.kt)("inlineCode",{parentName:"p"},"<+")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"+>")," are variations of ",(0,n.kt)("inlineCode",{parentName:"p"},"+")," that give precedence to the left and right operand respectively. ",(0,n.kt)("inlineCode",{parentName:"p"},"-")," creates a record with the field specified as its right operand removed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1407"}),"#1407"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1487"}),"#1487"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1490"}),"#1490"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now supports nested records in Arrow table slices and in the JSON import, e.g., data of type ",(0,n.kt)("inlineCode",{parentName:"p"},"list<record<name: string, age: count>"),". While nested record fields are not yet queryable, ingesting such data will no longer cause VAST to crash. MessagePack table slices don't support records in lists yet.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1429"}),"#1429")))),(0,n.kt)("h3",h({},{id:"bug-fixes-22"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Some non-null pointers were incorrectly rendered as ",(0,n.kt)("inlineCode",{parentName:"p"},"*nullptr")," in log messages.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1430"}),"#1430"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Data that was ingested before the deprecation of the ",(0,n.kt)("inlineCode",{parentName:"p"},"#timestamp")," attribute wasn't exported correctly with newer versions. This is now corrected.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1432"}),"#1432"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON parser now accepts data with numerical or boolean values in fields that expect strings according to the schema. VAST converts these values into string representations.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1439"}),"#1439"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A query for a field or field name suffix that matches multiple fields of different types would erroneously return no results.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1447"}),"#1447"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The disk monitor now correctly erases partition synopses from the meta index.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1450"}),"#1450"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The archive, index, source, and sink components now report metrics when idle instead of omitting them entirely. This allows for distinguishing between idle and not running components from the metrics.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1451"}),"#1451"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer crashes when the disk monitor tries to calculate the size of the database while files are being deleted. Instead, it will retry after the configured scan interval.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1458"}),"#1458"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Insufficient permissions for one of the paths in the ",(0,n.kt)("inlineCode",{parentName:"p"},"schema-dirs")," option would lead to a crash in ",(0,n.kt)("inlineCode",{parentName:"p"},"vast start"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1472"}),"#1472"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A race condition during server shutdown could lead to an invariant violation, resulting in a firing assertion. Streamlining the shutdown logic resolved the issue.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1473"}),"#1473"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1485"}),"#1485"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Enabling the disk budget feature no longer prevents the server process from exiting after it was stopped.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1495"}),"#1495")))),(0,n.kt)("h2",h({},{id:"20210224"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.02.24"}),"2021.02.24")),(0,n.kt)("h3",h({},{id:"breaking-changes-6"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST switched to ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/gabime/spdlog"}),"spdlog >= 1.5.0")," for logging. For users, this means: The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.console-format")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.file-format")," now must be specified using the spdlog pattern syntax as described ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/gabime/spdlog/wiki/3.-Custom-formatting#pattern-flags"}),"here"),". All settings under ",(0,n.kt)("inlineCode",{parentName:"p"},"caf.logger.*")," are now ignored by VAST, and only the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.*")," counterparts are used for logger configuration.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1223"}),"#1223"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1328"}),"#1328"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1334"}),"#1334"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1390"}),"#1390"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/a4z"}),"@a4z"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now requires ",(0,n.kt)("a",h({parentName:"p"},{href:"https://fmt.dev"}),"{fmt} >= 5.2.1")," to be installed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1330"}),"#1330"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"All options in ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.metrics.*")," had underscores in their names replaced with dashes to align with other options. For example, ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.metrics.file_sink")," is now ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.metrics.file-sink"),". The old options no longer work.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1368"}),"#1368"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"User-supplied schema files are now picked up from ",(0,n.kt)("inlineCode",{parentName:"p"},"<SYSCONFDIR>/vast/schema")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"<XDG_CONFIG_HOME>/vast/schema")," instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"<XDG_DATA_HOME>/vast/schema"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1372"}),"#1372"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The previously deprecated options ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.spawn.importer.ids")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.schema-paths")," no longer work. Furthermore, queries spread over multiple arguments are now disallowed instead of triggering a deprecation warning.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1374"}),"#1374"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The special meaning of the ",(0,n.kt)("inlineCode",{parentName:"p"},"#timestamp")," attribute has been removed from the schema language. Timestamps can from now on be marked as such by using the ",(0,n.kt)("inlineCode",{parentName:"p"},"timestamp")," type instead. Queries of the form ",(0,n.kt)("inlineCode",{parentName:"p"},"#timestamp <op> value")," remain operational but are deprecated in favor of ",(0,n.kt)("inlineCode",{parentName:"p"},":timestamp"),". Note that this change also affects ",(0,n.kt)("inlineCode",{parentName:"p"},":time")," queries, which aren't supersets of ",(0,n.kt)("inlineCode",{parentName:"p"},"#timestamp")," queries any longer.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1388"}),"#1388")))),(0,n.kt)("h3",h({},{id:"changes-20"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Schema parsing now uses a 2-pass loading phase so that type aliases can reference other types that are later defined in the same directory. Additionally, type definitions from already parsed schema dirs can be referenced from schema types that are parsed later. Types can also be redefined in later directories, but a type can not be defined twice in the same directory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1331"}),"#1331"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"infer")," command has an improved heuristic for the number types ",(0,n.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"count"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"real"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1343"}),"#1343"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1356"}),"#1356"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/ngrodzitski"}),"@ngrodzitski"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The options ",(0,n.kt)("inlineCode",{parentName:"p"},"listen"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"read"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"schema"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"schema-file"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"type"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"uds")," can from now on be supplied to the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command directly. Similarly, the options ",(0,n.kt)("inlineCode",{parentName:"p"},"write")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"uds")," can be supplied to the ",(0,n.kt)("inlineCode",{parentName:"p"},"export")," command. All options can still be used after the format subcommand, but that usage is deprecated.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1354"}),"#1354"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The query normalizer interprets value predicates of type ",(0,n.kt)("inlineCode",{parentName:"p"},"subnet")," more broadly: given a subnet ",(0,n.kt)("inlineCode",{parentName:"p"},"S"),", the parser expands this to the expression ",(0,n.kt)("inlineCode",{parentName:"p"},":subnet == S || :addr in S"),". This change makes it easier to search for IP addresses belonging to a specific subnet.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1373"}),"#1373"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast help")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast documentation")," now goes to ",(0,n.kt)("em",{parentName:"p"},"stdout")," instead of to stderr. Erroneous invocations of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," also print the helptext, but in this case the output still goes to stderr to avoid interference with downstream tooling.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1385"}),"#1385")))),(0,n.kt)("h3",h({},{id:"experimental-features"}),"Experimental Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/Neo23x0/sigma"}),"Sigma")," rules are now a valid format to represent query expression. VAST parses the ",(0,n.kt)("inlineCode",{parentName:"li"},"detection")," attribute of a rule and translates it into a native query expression. To run a query using a Sigma rule, pass it on standard input, e.g., ",(0,n.kt)("inlineCode",{parentName:"li"},"vast export json < rule.yaml"),".\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/1379"}),"#1379"))),(0,n.kt)("h3",h({},{id:"features-21"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST rotates server logs by default. The new config options ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.disable-log-rotation")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.log-rotation-threshold")," can be used to control this behaviour.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1223"}),"#1223"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1362"}),"#1362"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The meta index now stores partition synopses in separate files. This will decrease restart times for systems with large databases, slow disks and aggressive ",(0,n.kt)("inlineCode",{parentName:"p"},"readahead")," settings. A new config setting ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.meta-index-dir")," allows storing the meta index information in a separate directory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1330"}),"#1330"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1376"}),"#1376"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON import now always relies upon ",(0,n.kt)("a",h({parentName:"p"},{href:"https://simdjson.org"}),"simdjson"),". The previously experimental ",(0,n.kt)("inlineCode",{parentName:"p"},"--simdjson")," option to the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import json|suricata|zeek-json")," commands no longer exist as the feature is considered stable.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1343"}),"#1343"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1356"}),"#1356"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/ngrodzitski"}),"@ngrodzitski"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new options ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.metrics.file-sink.real-time")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.metrics.uds-sink.real-time")," enable real-time metrics reporting for the file sink and UDS sink respectively.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1368"}),"#1368"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The type extractor in the expression language now works with user defined types. For example the type ",(0,n.kt)("inlineCode",{parentName:"p"},"port")," is defined as ",(0,n.kt)("inlineCode",{parentName:"p"},"type port = count")," in the base schema. This type can now be queried with an expression like ",(0,n.kt)("inlineCode",{parentName:"p"},":port == 80"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1382"}),"#1382")))),(0,n.kt)("h3",h({},{id:"bug-fixes-23"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"An ordering issue introduced in ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1295"}),"#1295")," that could lead to a segfault with long-running queries was reverted.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1381"}),"#1381"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A bug in the new simdjson based JSON reader introduced in ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1356"}),"#1356")," could trigger an assertion in the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import")," process if an input field could not be converted to the field type in the target layout. This is no longer the case.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1386"}),"#1386")))),(0,n.kt)("h2",h({},{id:"20210128"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2021.01.28"}),"2021.01.28")),(0,n.kt)("h3",h({},{id:"breaking-changes-7"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new short options ",(0,n.kt)("inlineCode",{parentName:"p"},"-v"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"-vv"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"-vvv"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"-q"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"-qq"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"-qqq")," map onto the existing verbosity levels. The existing short syntax, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"-v debug"),", no longer works.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1244"}),"#1244"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The GitHub CI changed to Debian Buster and produces Debian artifacts instead of Ubuntu artifacts. Similarly, the Docker images we provide on ",(0,n.kt)("a",h({parentName:"p"},{href:"https://hub.docker.com/r/tenzir/vast"}),"Docker Hub")," use Debian Buster as base image. To build Docker images locally, users must set ",(0,n.kt)("inlineCode",{parentName:"p"},"DOCKER_BUILDKIT=1")," in the build environment.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1294"}),"#1294")))),(0,n.kt)("h3",h({},{id:"changes-21"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST preserves nested JSON objects in events instead of formatting them in a flattened form when exporting data with ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export json"),". The old behavior can be enabled with ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export json --flatten"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1257"}),"#1257"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1289"}),"#1289"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"vast start")," prints the endpoint it is listening on when providing the option ",(0,n.kt)("inlineCode",{parentName:"p"},"--print-endpoint"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1271"}),"#1271"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.schema-paths")," is renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.schema-dirs"),". The old option is deprecated and will be removed in a future release.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1287"}),"#1287")))),(0,n.kt)("h3",h({},{id:"experimental-features-1"}),"Experimental Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST features a new plugin framework to support efficient customization points at various places of the data processing pipeline. There exist several base classes that define an interface, e.g., for adding new commands or spawning a new actor that processes the incoming stream of data. The directory ",(0,n.kt)("inlineCode",{parentName:"p"},"examples/plugins/example")," contains an example plugin.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1208"}),"#1208"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1264"}),"#1264"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1275"}),"#1275"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1282"}),"#1282"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1285"}),"#1285"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1287"}),"#1287"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1302"}),"#1302"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1307"}),"#1307"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1316"}),"#1316"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST relies on ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/simdjson/simdjson"}),"simdjson")," for JSON parsing. The substantial gains in throughput shift the bottleneck of the ingest path from parsing input to indexing at the node. To use the (yet experimental) feature, use ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import json|suricata|zeek-json --simdjson"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1230"}),"#1230"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1246"}),"#1246"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1281"}),"#1281"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1314"}),"#1314"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1315"}),"#1315"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/ngrodzitski"}),"@ngrodzitski")))),(0,n.kt)("h3",h({},{id:"features-22"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"import zeek-json")," command allows for importing line-delimited Zeek JSON logs as produced by the ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/corelight/json-streaming-logs"}),"json-streaming-logs")," package. Unlike stock Zeek JSON logs, where one file contains exactly one log type, the streaming format contains different log event types in a single stream and uses an additional ",(0,n.kt)("inlineCode",{parentName:"p"},"_path")," field to disambiguate the log type. For stock Zeek JSON logs, use the existing ",(0,n.kt)("inlineCode",{parentName:"p"},"import json")," with the ",(0,n.kt)("inlineCode",{parentName:"p"},"-t")," flag to specify the log type.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1259"}),"#1259"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST queries also accept ",(0,n.kt)("inlineCode",{parentName:"p"},"nanoseconds"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"microseconds"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"milliseconds")," ",(0,n.kt)("inlineCode",{parentName:"p"},"seconds")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"minutes")," as units for a duration.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1265"}),"#1265"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," contains detailed memory usage information about active and cached partitions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1297"}),"#1297"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST installations bundle a LICENSE.3rdparty file alongside the regular LICENSE file that lists all embedded code that is under a separate license.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1306"}),"#1306")))),(0,n.kt)("h3",h({},{id:"bug-fixes-24"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Invalid Arrow table slices read from disk no longer trigger a segmentation fault. Instead, the invalid on-disk state is ignored.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1247"}),"#1247"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Manually specified configuration files may reside in the default location directories. Configuration files can be symlinked.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1248"}),"#1248"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For relocatable installations, the list of schema loading paths does not include a build-time configured path any more.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1249"}),"#1249"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Values in JSON fields that can't be converted to the type that is specified in the schema won't cause the containing event to be dropped any longer.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1250"}),"#1250"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Line based imports correctly handle read timeouts that occur in the middle of a line.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1276"}),"#1276"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Disk monitor quota settings not ending in a 'B' are no longer silently discarded.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1278"}),"#1278"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A potential race condition that could lead to a hanging export if a partition was persisted just as it was scanned no longer exists.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1295"}),"#1295")))),(0,n.kt)("h2",h({},{id:"20201216"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.12.16"}),"2020.12.16")),(0,n.kt)("h3",h({},{id:"breaking-changes-8"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"splunk-to-vast")," script has a new name: ",(0,n.kt)("inlineCode",{parentName:"p"},"taxonomize"),". The script now also generates taxonomy declarations for Azure Sentinel.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1134"}),"#1134"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"CAF-encoded table slices no longer exist. As such, the option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.import.batch-encoding")," now only supports ",(0,n.kt)("inlineCode",{parentName:"p"},"arrow")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"msgpack")," as arguments.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1142"}),"#1142"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The on-disk format for table slices now supports versioning of table slice encodings. This breaking change makes it so that adding further encodings or adding new versions of existing encodings is possible without breaking again in the future.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1143"}),"#1143"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1157"}),"#1157"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1160"}),"#1160"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1165"}),"#1165"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Archive segments no longer include an additional, unnecessary version identifier. We took the opportunity to clean this up bundled with the other recent breaking changes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1168"}),"#1168"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The build configuration of VAST received a major overhaul. Inclusion of libvast in other procects via ",(0,n.kt)("inlineCode",{parentName:"p"},"add_subdirectory(path/to/vast)")," is now easily possible. The names of all build options were aligned, and the new build summary shows all available options.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1175"}),"#1175"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"port")," type is no longer a first-class type. The new way to represent transport-layer ports relies on ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," instead. In the schema, VAST ships with a new alias ",(0,n.kt)("inlineCode",{parentName:"p"},"type port = count")," to keep existing schema definitions in tact. However, this is a breaking change because the on-disk format and Arrow data representation changed. Queries with ",(0,n.kt)("inlineCode",{parentName:"p"},":port")," type extractors no longer work. Similarly, the syntax ",(0,n.kt)("inlineCode",{parentName:"p"},"53/udp")," no longer exists; use ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," syntax ",(0,n.kt)("inlineCode",{parentName:"p"},"53")," instead. Since most ",(0,n.kt)("inlineCode",{parentName:"p"},"port")," occurrences do not carry a known transport-layer type, and the type information exists typically in a separate field, removing ",(0,n.kt)("inlineCode",{parentName:"p"},"port")," as native type streamlines the data model.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1187"}),"#1187")))),(0,n.kt)("h3",h({},{id:"changes-22"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer requires you to manually remove a stale PID file from a no-longer running ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," process. Instead, VAST prints a warning and overwrites the old PID file.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1128"}),"#1128"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST does not produce metrics by default any more. The option ",(0,n.kt)("inlineCode",{parentName:"p"},"--disable-metrics")," has been renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"--enable-metrics")," accordingly.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1137"}),"#1137"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now processes the schema directory recursively, as opposed to stopping at nested directories.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1154"}),"#1154"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default segment size in the archive is now 1 GiB. This reduces fragmentation of the archive meta data and speeds up VAST startup time.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1166"}),"#1166"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now listens on port 42000 instead of letting the operating system choose the port if the option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.endpoint")," specifies an endpoint without a port. To restore the old behavior, set the port to 0 explicitly.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1170"}),"#1170"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The Suricata schemas received an overhaul: there now exist ",(0,n.kt)("inlineCode",{parentName:"p"},"vlan")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"in_iface")," fields in all types. In addition, VAST ships with new types for ",(0,n.kt)("inlineCode",{parentName:"p"},"ikev2"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"nfs"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"snmp"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"tftp"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"rdp"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"sip")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"dcerpc"),". The ",(0,n.kt)("inlineCode",{parentName:"p"},"tls")," type gets support for the additional ",(0,n.kt)("inlineCode",{parentName:"p"},"sni")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"session_resumed")," fields.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1176"}),"#1176"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1180"}),"#1180"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1186"}),"#1186"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1237"}),"#1237"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/satta"}),"@satta"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Installed schema definitions now reside in ",(0,n.kt)("inlineCode",{parentName:"p"},"<datadir>/vast/schema/types"),", taxonomy definitions in ",(0,n.kt)("inlineCode",{parentName:"p"},"<datadir>/vast/schema/taxonomy"),", and concept definitions in ",(0,n.kt)("inlineCode",{parentName:"p"},"<datadir/vast/schema/concepts"),", as opposed to them all being in the schema directory directly. When overriding an existing installation, you ",(0,n.kt)("em",{parentName:"p"},"may")," have to delete the old schema definitions by hand.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1194"}),"#1194"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"zeek")," export format now strips off the prefix ",(0,n.kt)("inlineCode",{parentName:"p"},"zeek.")," to ensure full compatibility with regular Zeek output. For all non-Zeek types, the prefix remains intact.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1205"}),"#1205")))),(0,n.kt)("h3",h({},{id:"experimental-features-2"}),"Experimental Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ships with its own taxonomy and basic concept definitions for Suricata, Zeek, and Sysmon.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1135"}),"#1135"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1150"}),"#1150"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The query language now supports models. Models combine a list of concepts into a semantic unit that can be fulfiled by an event. If the type of an event contains a field for every concept in a model. Turn to ",(0,n.kt)("a",h({parentName:"p"},{href:"https://vast.io/docs/understand/data-model/taxonomies#models"}),"the documentation")," for more information.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1185"}),"#1185"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1228"}),"#1228"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The expression language gained support for the ",(0,n.kt)("inlineCode",{parentName:"p"},"#field")," meta extractor. It is the complement for ",(0,n.kt)("inlineCode",{parentName:"p"},"#type")," and uses suffix matching for field names at the layout level.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1228"}),"#1228")))),(0,n.kt)("h3",h({},{id:"features-23"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.client-log-file")," enables client-side logging. By default, VAST only writes log files for the server process.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1132"}),"#1132"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"--print-bytesizes")," of ",(0,n.kt)("inlineCode",{parentName:"p"},"lsvast")," prints information about the size of certain fields of the flatbuffers inside a VAST database directory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1149"}),"#1149"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The storage required for index IP addresses has been optimized. This should  result in significantly reduced memory usage over time, as well as faster  restart times and reduced disk space requirements.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1172"}),"#1172"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1200"}),"#1200"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1216"}),"#1216"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A new key 'meta-index-bytes' appears in the status output generated by ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status --detailed"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1193"}),"#1193"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"dump")," command prints configuration and schema-related information. The implementation allows for printing all registered concepts and models, via ",(0,n.kt)("inlineCode",{parentName:"p"},"vast dump concepts")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast dump models"),". The flag to ",(0,n.kt)("inlineCode",{parentName:"p"},"--yaml")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"dump")," switches from JSON to YAML output, such that it confirms to the taxonomy configuration syntax.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1196"}),"#1196"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1233"}),"#1233"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"On Linux, VAST now contains a set of built-in USDT tracepoints that can be used by tools like ",(0,n.kt)("inlineCode",{parentName:"p"},"perf")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"bpftrace")," when debugging. Initially, we provide the two tracepoints ",(0,n.kt)("inlineCode",{parentName:"p"},"chunk_make")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"chunk_destroy"),", which trigger every time a ",(0,n.kt)("inlineCode",{parentName:"p"},"vast::chunk")," is created or destroyed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1206"}),"#1206"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Low-selectivity queries of string (in)equality queries now run up to 30x faster, thanks to more intelligent selection of relevant index partitions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1214"}),"#1214")))),(0,n.kt)("h3",h({},{id:"bug-fixes-25"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("inlineCode",{parentName:"p"},"vast import")," no longer stalls when it doesn't receive any data for more than 10 seconds.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1136"}),"#1136"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yaml.example")," contained syntax errors. The example config file now works again.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1145"}),"#1145"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer starts if the specified config file does not exist.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1147"}),"#1147"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status --detailed")," now contains informations about runnings sinks, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export <format> <query>")," processes.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1155"}),"#1155"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer blocks when an invalid query operation is issued.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1189"}),"#1189"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The type registry now detects and handles breaking changes in schemas, e.g., when a field type changes or a field is dropped from record.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1195"}),"#1195"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The index now correctly drops further results when queries finish early, thus improving the performance of queries for a limited number of events.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1209"}),"#1209"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The index no longer crashes when too many parallel queries are running.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1210"}),"#1210"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The index no longer causes exporters to deadlock when the meta index produces false positives.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1225"}),"#1225"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The summary log message of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export")," now contains the correct number of candidate events.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1228"}),"#1228"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," command does not collect status information from sources and sinks any longer. They were often too busy to respond, leading to a long delay before the command completed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1234"}),"#1234"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Concepts that reference other concepts are now loaded correctly from their definition.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1236"}),"#1236")))),(0,n.kt)("h2",h({},{id:"20201029"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.10.29"}),"2020.10.29")),(0,n.kt)("h3",h({},{id:"changes-23"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new option ",(0,n.kt)("inlineCode",{parentName:"p"},"import.read-timeout")," allows for setting an input timeout for low volume sources. Reaching the timeout causes the current batch to be forwarded immediately. This behavior was previously controlled by ",(0,n.kt)("inlineCode",{parentName:"p"},"import.batch-timeout"),", which now only controls the maximum buffer time before the source forwards batches to the server.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1096"}),"#1096"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST will now warn if a client command connects to a server that runs on a different version of the vast binary.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1098"}),"#1098"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Log files are now less verbose because class and function names are not printed on every line.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1107"}),"#1107"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default database directory moved to ",(0,n.kt)("inlineCode",{parentName:"p"},"/var/lib/vast")," for Linux deployments.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1116"}),"#1116")))),(0,n.kt)("h3",h({},{id:"experimental-features-3"}),"Experimental Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The query language now comes with support for concepts, the first part of taxonomies. Concepts is a mechanism to unify the various naming schemes of different data formats into a single, coherent nomenclature.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1102"}),"#1102"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A new ",(0,n.kt)("em",{parentName:"p"},"disk monitor")," component can now monitor the database size and delete data that exceeds a specified threshold. Once VAST reaches the maximum amount of disk space, the disk monitor deletes the oldest data. The command-line options ",(0,n.kt)("inlineCode",{parentName:"p"},"--disk-quota-high"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"--disk-quota-low"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"--disk-quota-check-interval")," control the rotation behavior.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1103"}),"#1103")))),(0,n.kt)("h3",h({},{id:"features-24"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When running VAST under systemd supervision, it is now possible to use the ",(0,n.kt)("inlineCode",{parentName:"p"},"Type=notify")," directive in the unit file to let VAST notify the service manager when it becomes ready.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1091"}),"#1091"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new options ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.segments")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.max-segment-size")," control how the archive generates segments.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1103"}),"#1103"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new script ",(0,n.kt)("inlineCode",{parentName:"p"},"splunk-to-vast")," converts a splunk CIM model file in JSON to a VAST taxonomy. For example, ",(0,n.kt)("inlineCode",{parentName:"p"},"splunk-to-vast < Network_Traffic.json")," renders the concept definitions for the ",(0,n.kt)("em",{parentName:"p"},"Network Traffic")," datamodel. The generated taxonomy does not include field definitions, which users should add separately according to their data formats.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1121"}),"#1121"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The expression language now accepts records without field names. For example,",(0,n.kt)("inlineCode",{parentName:"p"},'id == <192.168.0.1, 41824, 143.51.53.13, 25, "tcp">')," is now valid syntax and instantiates a record with 5 fields. Note: expressions with records currently do not execute.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1129"}),"#1129")))),(0,n.kt)("h3",h({},{id:"bug-fixes-26"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The lookup for schema directories now happens in a fixed order.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1086"}),"#1086"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Sources that receive no or very little input do not block ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," any longer.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1096"}),"#1096"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status --detailed")," command now correctly shows the status of all sources, i.e., ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"vast spawn source")," commands.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1109"}),"#1109"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST no longer opens a random public port, which used to be enabled in the experimental VAST cluster mode in order to transparently establish a full mesh.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1110"}),"#1110"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"lsvast")," tool failed to print FlatBuffers schemas correctly. The output now renders correctly.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1123"}),"#1123")))),(0,n.kt)("h2",h({},{id:"20200930"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.09.30"}),"2020.09.30")),(0,n.kt)("h3",h({},{id:"breaking-changes-9"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Data exported in the Apache Arrow format now contains the name of the payload record type in the metadata section of the schema.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1072"}),"#1072"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The persistent storage format of the index now uses FlatBuffers.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/863"}),"#863")))),(0,n.kt)("h3",h({},{id:"changes-24"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON export format now renders ",(0,n.kt)("inlineCode",{parentName:"p"},"duration")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"port")," fields using strings as opposed to numbers. This avoids a possible loss of information and enables users to re-use the output in follow-up queries directly.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1034"}),"#1034"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The delay between the periodic log messages for reporting the current event rates has been increased to 10 seconds.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1035"}),"#1035"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The global VAST configuration now always resides in ",(0,n.kt)("inlineCode",{parentName:"p"},"<sysconfdir>/vast/vast.conf"),", and bundled schemas always in ",(0,n.kt)("inlineCode",{parentName:"p"},"<datadir>/vast/schema/"),". VAST no longer supports reading a ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.conf")," file in the current working directory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1036"}),"#1036"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The proprietary VAST configuration file has changed to the more ops-friendly industry standard YAML. This change introduced also a new dependency: ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/jbeder/yaml-cpp"}),"yaml-cpp")," version 0.6.2 or greater. The top-level ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yaml.example")," illustrates how the new YAML config looks like. Please rename existing configuration files from ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.conf")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yaml"),". VAST still reads ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.conf")," but will soon only look for ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yaml")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yml")," files in available configuration file paths.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1045"}),"#1045"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1055"}),"#1055"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1059"}),"#1059"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1062"}),"#1062"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The options that affect batches in the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command received new, more user-facing names: ",(0,n.kt)("inlineCode",{parentName:"p"},"import.table-slice-type"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"import.table-slice-size"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"import.read-timeout")," are now called ",(0,n.kt)("inlineCode",{parentName:"p"},"import.batch-encoding"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"import.batch-size"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"import.read-timeout")," respectively.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1058"}),"#1058"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"All configuration options are now grouped into ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"caf")," sections, depending on whether they affect VAST itself or are handed through to the underlying actor framework CAF directly. Take a look at the bundled ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.yaml.example")," file for an explanation of the new layout.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1073"}),"#1073"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We refactored the index architecture to improve stability and responsiveness. This includes fixes for several shutdown issues.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/863"}),"#863")))),(0,n.kt)("h3",h({},{id:"experimental-features-4"}),"Experimental Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The ",(0,n.kt)("inlineCode",{parentName:"li"},"vast get")," command has been added. It retrieves events from the database directly by their ids.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/938"}),"#938"))),(0,n.kt)("h3",h({},{id:"features-25"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now supports the XDG base directory specification: The ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.conf")," is now found at ",(0,n.kt)("inlineCode",{parentName:"p"},"${XDG_CONFIG_HOME:-${HOME}/.config}/vast/vast.conf"),", and schema files at ",(0,n.kt)("inlineCode",{parentName:"p"},"${XDG_DATA_HOME:-${HOME}/.local/share}/vast/schema/"),". The user-specific configuration file takes precedence over the global configuration file in ",(0,n.kt)("inlineCode",{parentName:"p"},"<sysconfdir>/vast/vast.conf"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1036"}),"#1036"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now merges the contents of all used configuration files instead of using only the most user-specific file. The file specified using ",(0,n.kt)("inlineCode",{parentName:"p"},"--config")," takes the highest precedence, followed by the user-specific path ",(0,n.kt)("inlineCode",{parentName:"p"},"${XDG_CONFIG_HOME:-${HOME}/.config}/vast/vast.conf"),", and the compile-time path ",(0,n.kt)("inlineCode",{parentName:"p"},"<sysconfdir>/vast/vast.conf"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1040"}),"#1040"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ships with a new tool ",(0,n.kt)("inlineCode",{parentName:"p"},"lsvast")," to display information about the contents of a VAST database directory. See ",(0,n.kt)("inlineCode",{parentName:"p"},"lsvast --help")," for usage instructions.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/863"}),"#863"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output of the ",(0,n.kt)("inlineCode",{parentName:"p"},"status")," command was restructured with a strong focus on usability. The new flags ",(0,n.kt)("inlineCode",{parentName:"p"},"--detailed")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"--debug")," add additional content to the output.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/995"}),"#995")))),(0,n.kt)("h3",h({},{id:"bug-fixes-27"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Stalled sources that were unable to generate new events no longer stop import processes from shutting down under rare circumstances.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/1058"}),"#1058"))),(0,n.kt)("h2",h({},{id:"20200828"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.08.28"}),"2020.08.28")),(0,n.kt)("h3",h({},{id:"breaking-changes-10"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"We now bundle a patched version of CAF, with a changed ABI. This means that if you're linking against the bundled CAF library, you also need to distribute that library so that VAST can use it at runtime. The versions are API compatible so linking against a system version of CAF is still possible and supported.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/1020"}),"#1020"))),(0,n.kt)("h3",h({},{id:"changes-25"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"set")," type has been removed. Experience with the data model showed that there is no strong use case to separate sets from vectors in the core. While this may be useful in programming languages, VAST deals with immutable data where set constraints have been enforced upstream. This change requires updating existing schemas by changing ",(0,n.kt)("inlineCode",{parentName:"p"},"set<T>")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"vector<T>"),". In the query language, the new symbol for the empty ",(0,n.kt)("inlineCode",{parentName:"p"},"map")," changed from ",(0,n.kt)("inlineCode",{parentName:"p"},"{-}")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"{}"),", as it now unambiguously identifies ",(0,n.kt)("inlineCode",{parentName:"p"},"map")," instances.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1010"}),"#1010"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"vector")," type has been renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"list"),". In an effort to streamline the type system vocabulary, we favor ",(0,n.kt)("inlineCode",{parentName:"p"},"list")," over ",(0,n.kt)("inlineCode",{parentName:"p"},"vector")," because it's closer to existing terminology (e.g., Apache Arrow). This change requires updating existing schemas by changing ",(0,n.kt)("inlineCode",{parentName:"p"},"vector<T>")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"list<T>"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1016"}),"#1016"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The expression field parser now allows the '-' character.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/999"}),"#999")))),(0,n.kt)("h3",h({},{id:"features-26"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now writes a PID lock file on startup to prevent multiple server processes from accessing the same persistent state. The ",(0,n.kt)("inlineCode",{parentName:"p"},"pid.lock")," file resides in the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.db")," directory.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1001"}),"#1001"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default schema for Suricata has been updated to support the ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.ftp")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.ftp_data")," event types.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1009"}),"#1009"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now prints the location of the configuration file that is used.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1009"}),"#1009")))),(0,n.kt)("h3",h({},{id:"bug-fixes-28"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The shutdown process of the server process could potentially hang forever. VAST now uses a 2-step procedure that first attempts to terminate all components cleanly. If that fails, it will attempt a hard kill afterwards, and if that fails after another timeout, the process will call ",(0,n.kt)("inlineCode",{parentName:"p"},"abort(3)"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1005"}),"#1005"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When continuous query in a client process terminated, the node did not clean up the corresponding server-side state. This memory leak no longer exists.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1006"}),"#1006"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The port encoding for Arrow-encoded table slices is now host-independent and  always uses network-byte order.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1007"}),"#1007"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Importing JSON no longer fails for JSON fields containing ",(0,n.kt)("inlineCode",{parentName:"p"},"null")," when the corresponding VAST type in the schema is a non-trivial type like ",(0,n.kt)("inlineCode",{parentName:"p"},"vector<string>"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1009"}),"#1009"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Some file descriptors remained open when they weren't needed any more. This descriptor leak has been fixed.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1018"}),"#1018"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When running VAST under heavy load, CAF stream slot ids could wrap around after a few days and deadlock the system. As a workaround, we extended the slot id bit width to make the time until this happens unrealistically large.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1020"}),"#1020"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Incomplete reads have not been handled properly, which manifested for files larger than 2GB. On macOS, writing files larger than 2GB may have failed previously. VAST now respects OS-specific constraints on the maximum block size.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1025"}),"#1025"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST would overwrite existing on-disk state data when encountering a partial read during startup. This state-corrupting behavior no longer exists.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1026"}),"#1026"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST did not terminate when a critical component failed during startup. VAST now binds the lifetime of the node to all critical components.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/1028"}),"#1028"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"MessagePack-encoded table slices now work correctly for nested container types.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/984"}),"#984"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A bug in the expression parser prevented the correct parsing of fields starting with either 'F' or 'T'.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/999"}),"#999")))),(0,n.kt)("h2",h({},{id:"20200728"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.07.28"}),"2020.07.28")),(0,n.kt)("h3",h({},{id:"breaking-changes-11"}),"Breaking Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",h({parentName:"li"},{href:"https://google.github.io/flatbuffers/"}),"FlatBuffers")," is now a required  dependency for VAST. The archive and the segment store use FlatBuffers to store  and version their on-disk persistent state.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/972"}),"#972"))),(0,n.kt)("h3",h({},{id:"changes-26"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The suricata schema file contains new type definitions for the stats, krb5, smb, and ssh events.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/954"}),"#954"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/986"}),"#986"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now recognizes ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/vast/schema")," as an additional default directory for schema files.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/980"}),"#980")))),(0,n.kt)("h3",h({},{id:"features-27"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Starting with this release, installing VAST on any Linux becomes significantly easier: A static binary will be provided with each release on the GitHub releases page.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/966"}),"#966"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"We open-sourced our ",(0,n.kt)("a",h({parentName:"p"},{href:"http://msgpack.org"}),"MessagePack"),"-based table slice implementation, which provides a compact row-oriented encoding of data. This encoding works well for binary formats (e.g., PCAP) and access patterns that involve materializing entire rows. The MessagePack table slice is the new default when Apache Arrow is unavailable. To enable parsing into MessagePack, you can pass ",(0,n.kt)("inlineCode",{parentName:"p"},"--table-slice-type=msgpack")," to the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command, or set the configuration option ",(0,n.kt)("inlineCode",{parentName:"p"},"import.table-slice-type")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"'msgpack'"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/975"}),"#975")))),(0,n.kt)("h3",h({},{id:"bug-fixes-29"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The PCAP reader now correctly shows the amount of generated events.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/954"}),"#954"))),(0,n.kt)("h2",h({},{id:"20200625"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.06.25"}),"2020.06.25")),(0,n.kt)("h3",h({},{id:"changes-27"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The options ",(0,n.kt)("inlineCode",{parentName:"p"},"system.table-slice-type")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"system.table-slice-size")," have been removed, as they duplicated ",(0,n.kt)("inlineCode",{parentName:"p"},"import.table-slice-type")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"import.table-slice-size")," respectively.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/908"}),"#908"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/951"}),"#951"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The JSON export format now renders timestamps using strings instead of numbers in order to avoid possible loss of precision.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/909"}),"#909"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"default")," table slice type has been renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"caf"),". It has not been the default when built with Apache Arrow support for a while now, and the new name more accurately reflects what it is doing.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/948"}),"#948")))),(0,n.kt)("h3",h({},{id:"experimental-features-5"}),"Experimental Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"VAST now supports aging out existing data. This feature currently only concerns data in the archive. The options ",(0,n.kt)("inlineCode",{parentName:"li"},"system.aging-frequency")," and ",(0,n.kt)("inlineCode",{parentName:"li"},"system.aging-query")," configure a query that runs on a regular schedule to determine which events to delete. It is also possible to trigger an aging cycle manually.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/929"}),"#929"))),(0,n.kt)("h3",h({},{id:"features-28"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now has options to limit the amount of results produced by an invocation of ",(0,n.kt)("inlineCode",{parentName:"p"},"vast explore"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/882"}),"#882"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import json")," command's type restrictions are more relaxed now, and can additionally convert from JSON strings to VAST internal data types.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/891"}),"#891"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now supports ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/vast/vast.conf")," as an additional fallback for the configuration file. The following file locations are looked at in order: Path specified on the command line via ",(0,n.kt)("inlineCode",{parentName:"p"},"--config=path/to/vast.conf"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.conf")," in current working directory, ",(0,n.kt)("inlineCode",{parentName:"p"},"${INSTALL_PREFIX}/etc/vast/vast.conf"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/vast/vast.conf"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/898"}),"#898"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command gained a new ",(0,n.kt)("inlineCode",{parentName:"p"},"--read-timeout")," option that forces data to be forwarded to the importer regardless of the internal batching parameters and table slices being unfinished. This allows for reducing the latency between the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command and the node. The default timeout is 10 seconds.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/916"}),"#916"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The output format for the ",(0,n.kt)("inlineCode",{parentName:"p"},"explore")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"pivot")," commands can now be set using the ",(0,n.kt)("inlineCode",{parentName:"p"},"explore.format")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"pivot.format")," options respectively. Both default to JSON.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/921"}),"#921"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The meta index now uses Bloom filters for equality queries involving IP addresses. This especially accelerates queries where the user wants to know whether a certain IP address exists in the entire database.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/931"}),"#931")))),(0,n.kt)("h3",h({},{id:"bug-fixes-30"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A use after free bug would sometimes crash the node while it was shutting down.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/896"}),"#896"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A bogus import process that assembled table slices with a greater number of events than expected by the node was able to lead to wrong query results.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/908"}),"#908"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"export json")," command now correctly unescapes its output.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/910"}),"#910"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now correctly checks for control characters in inputs.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/910"}),"#910")))),(0,n.kt)("h2",h({},{id:"20200528"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.05.28"}),"2020.05.28")),(0,n.kt)("h3",h({},{id:"changes-28"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The command line flag for disabling the accountant has been renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"--disable-metrics")," to more accurately reflect its intended purpose. The internal ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.statistics")," event has been renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.metrics"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/870"}),"#870"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Spreading a query over multiple command line arguments in commands like explore/export/pivot/etc. has been deprecated.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/878"}),"#878")))),(0,n.kt)("h3",h({},{id:"experimental-features-6"}),"Experimental Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Added a new ",(0,n.kt)("inlineCode",{parentName:"li"},"explore")," command to VAST that can be used to show data records within a certain time from the results of a query.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/873"}),"#873"),(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/877"}),"#877"))),(0,n.kt)("h3",h({},{id:"features-29"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"All input parsers now support mixed ",(0,n.kt)("inlineCode",{parentName:"p"},"\\n")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"\\r\\n")," line endings.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/865"}),"#865"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When importing events of a new or updated type, VAST now only requires the type to be specified once (e.g., in a schema file). For consecutive imports, the event type does not need to be specified again. A list of registered types can now be viewed using ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," under the key ",(0,n.kt)("inlineCode",{parentName:"p"},"node.type-registry.types"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/875"}),"#875"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When importing JSON data without knowing the type of the imported events a priori, VAST now supports automatic event type deduction based on the JSON object keys in the data. VAST selects a type ",(0,n.kt)("em",{parentName:"p"},"iff")," the set of fields match a known type. The ",(0,n.kt)("inlineCode",{parentName:"p"},"--type")," / ",(0,n.kt)("inlineCode",{parentName:"p"},"-t")," option to the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command restricts the matching to the set of types that share the provided prefix. Omitting ",(0,n.kt)("inlineCode",{parentName:"p"},"-t")," attempts to match JSON against all known types. If only a single variant of a type is matched, the import falls back to the old behavior and fills in ",(0,n.kt)("inlineCode",{parentName:"p"},"nil")," for mismatched keys.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/875"}),"#875"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now prints a message when it is waiting for user input to read a query from a terminal.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/878"}),"#878"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now ships with a schema suitable for Sysmon import.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/886"}),"#886")))),(0,n.kt)("h3",h({},{id:"bug-fixes-31"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The parser for Zeek tsv data used to ignore attributes that were defined for the Zeek-specific types in the schema files. It has been modified to respect and prefer the specified attributes for the fields that are present in the input data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/847"}),"#847"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Fixed a bug that caused ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import")," processes to produce ",(0,n.kt)("inlineCode",{parentName:"p"},"'default'")," table slices, despite having the ",(0,n.kt)("inlineCode",{parentName:"p"},"'arrow'")," type as the default.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/866"}),"#866"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Fixed a bug where setting the ",(0,n.kt)("inlineCode",{parentName:"p"},"logger.file-verbosity")," in the config file would not have an effect.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/866"}),"#866")))),(0,n.kt)("h2",h({},{id:"20200429"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.04.29"}),"2020.04.29")),(0,n.kt)("h3",h({},{id:"changes-29"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The index specific options ",(0,n.kt)("inlineCode",{parentName:"p"},"max-partition-size"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"max-resident-partitions"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"max-taste-partitions"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"max-queries")," can now be specified on the command line when starting a node.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/728"}),"#728"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default bind address has been changed from ",(0,n.kt)("inlineCode",{parentName:"p"},"::")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"localhost"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/828"}),"#828"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"--skip-candidate-checks")," / ",(0,n.kt)("inlineCode",{parentName:"p"},"-s")," for the ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," command was renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"--estimate")," / ",(0,n.kt)("inlineCode",{parentName:"p"},"-e"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/843"}),"#843")))),(0,n.kt)("h3",h({},{id:"features-30"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Packet drop and discard statistics are now reported to the accountant for PCAP import, and are available using the keys ",(0,n.kt)("inlineCode",{parentName:"p"},"pcap-reader.recv"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"pcap-reader.drop"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"pcap-reader.ifdrop"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"pcap-reader.discard"),", and ",(0,n.kt)("inlineCode",{parentName:"p"},"pcap-reader.discard-rate")," in the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.statistics")," event. If the number of dropped packets exceeds a configurable threshold, VAST additionally warns about packet drops on the command line.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/827"}),"#827"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/844"}),"#844"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Bash autocompletion for ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," is now available via the autocomplete script located at ",(0,n.kt)("inlineCode",{parentName:"p"},"scripts/vast-completions.bash")," in the VAST source tree.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/833"}),"#833")))),(0,n.kt)("h3",h({},{id:"bug-fixes-32"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Archive lookups are now interruptible. This change fixes an issue that caused consecutive exports to slow down the node, which improves the overall performance for larger databases considerably.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/825"}),"#825"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Fixed a crash when importing data while a continuous export was running for unrelated events.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/830"}),"#830"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Queries of the form ",(0,n.kt)("inlineCode",{parentName:"p"},"x != 80/tcp")," were falsely evaluated as ",(0,n.kt)("inlineCode",{parentName:"p"},"x != 80/? && x != ?/tcp"),". (The syntax in the second predicate does not yet exist; it only illustrates the bug.) Port inequality queries now correctly evaluate ",(0,n.kt)("inlineCode",{parentName:"p"},"x != 80/? || x != ?/tcp"),". E.g., the result now contains values like ",(0,n.kt)("inlineCode",{parentName:"p"},"80/udp")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"80/?"),", but also ",(0,n.kt)("inlineCode",{parentName:"p"},"8080/tcp"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/834"}),"#834"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Fixed a bug that could cause stalled input streams not to forward events to the index and archive components for the JSON, CSV, and Syslog readers, when the input stopped arriving but no EOF was sent. This is a follow-up to ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/750"}),"#750"),". A timeout now ensures that that the readers continue when some events were already handled, but the input appears to be stalled.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/835"}),"#835"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For some queries, the index evaluated only a subset of all relevant partitions in a non-deterministic manner. Fixing a violated evaluation invariant now guarantees deterministic execution.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/842"}),"#842"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"stop")," command always returned immediately, regardless of whether it succeeded. It now blocks until the remote node shut down properly or returns an error exit code upon failure.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/849"}),"#849")))),(0,n.kt)("h2",h({},{id:"20200326"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.03.26"}),"2020.03.26")),(0,n.kt)("h3",h({},{id:"changes-30"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The VERBOSE log level has been added between INFO and DEBUG. This level is enabled at build time for all build types, making it possible to get more detailed logging output from release builds.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/787"}),"#787"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The internal statistics event type ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.account")," has been renamed to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.statistics")," for clarity.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/789"}),"#789"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The command line options prefix for changing CAF options was changed from ",(0,n.kt)("inlineCode",{parentName:"p"},"--caf#")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"--caf."),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/797"}),"#797"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The log folder ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.log/")," in the current directory will not be created by  default any more. Users must explicitly set the ",(0,n.kt)("inlineCode",{parentName:"p"},"system.file-verbosity")," option  if they wish to keep the old behavior.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/803"}),"#803"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The config option ",(0,n.kt)("inlineCode",{parentName:"p"},"system.log-directory")," was deprecated and replaced by the new  option ",(0,n.kt)("inlineCode",{parentName:"p"},"system.log-file"),". All logs will now be written to a single file.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/806"}),"#806")))),(0,n.kt)("h3",h({},{id:"features-31"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import syslog")," command allows importing Syslog messages as defined in ",(0,n.kt)("a",h({parentName:"p"},{href:"https://tools.ietf.org/html/rfc5424"}),"RFC5424"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/770"}),"#770"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"--disable-community-id")," has been added to the ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import pcap")," command for disabling the automatic computation of Community IDs.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/777"}),"#777"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Continuous export processes can now be stopped correctly. Before this change, the node showed an error message and the exporting process exited with a non-zero exit code.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/779"}),"#779"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The short option ",(0,n.kt)("inlineCode",{parentName:"p"},"-c")," for setting the configuration file has been removed. The long option ",(0,n.kt)("inlineCode",{parentName:"p"},"--config")," must now be used instead. This fixed a bug that did not allow for ",(0,n.kt)("inlineCode",{parentName:"p"},"-c")," to be used for continuous exports.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/781"}),"#781"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Expressions must now be parsed to the end of input. This fixes a bug that caused malformed queries to be evaluated until the parser failed. For example, the query ",(0,n.kt)("inlineCode",{parentName:"p"},'#type == "suricata.http" && .dest_port == 80')," was erroneously evaluated as ",(0,n.kt)("inlineCode",{parentName:"p"},'#type == "suricata.http"')," instead.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/791"}),"#791"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The hash index has been re-enabled after it was outfitted with a new ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/Tessil/robin-map/"}),"high-performance hash map")," implementation that increased performance to the point where it is on par with the regular index.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/796"}),"#796"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"An under-the-hood change to our parser-combinator framework makes sure that we do not discard possibly invalid input data up the the end of input. This uncovered a bug in our MRT/bgpdump integrations, which have thus been disabled (for now), and will be fixed at a later point in time.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/808"}),"#808")))),(0,n.kt)("h2",h({},{id:"20200227"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.02.27"}),"2020.02.27")),(0,n.kt)("h3",h({},{id:"changes-31"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The build system will from now on try use the CAF library from the system, if one is provided. If it is not found, the CAF submodule will be used as a fallback.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/740"}),"#740"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST now supports (and requires) Apache Arrow >= 0.16.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/751"}),"#751"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"--historical")," for export commands has been removed, as it was the  default already.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/754"}),"#754"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The option ",(0,n.kt)("inlineCode",{parentName:"p"},"--directory")," has been replaced by ",(0,n.kt)("inlineCode",{parentName:"p"},"--db-directory")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"log-directory"),", which set directories for persistent state and log files respectively. The default log file path has changed from ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.db/log")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.log"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/758"}),"#758"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Hash indices have been disabled again due to a performance regression.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/765"}),"#765")))),(0,n.kt)("h3",h({},{id:"features-32"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"For users of the ",(0,n.kt)("a",h({parentName:"li"},{href:"https://nixos.org/nix/"}),"Nix")," package manager, expressions have been added to generate reproducible development environments with ",(0,n.kt)("inlineCode",{parentName:"li"},"nix-shell"),".\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/740"}),"#740"))),(0,n.kt)("h3",h({},{id:"bug-fixes-33"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Continuously importing events from a Zeek process with a low rate of emitted events resulted in a long delay until the data would be included in the result set of queries. This is because the import process would buffer up to 10,000 events before sending them to the server as a batch. The algorithm has been tuned to flush its buffers if no data is available for more than 500 milliseconds.\n",(0,n.kt)("a",h({parentName:"li"},{href:"https://github.com/tenzir/vast/pull/750"}),"#750"))),(0,n.kt)("h2",h({},{id:"20200131"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/2020.01.31"}),"2020.01.31")),(0,n.kt)("h3",h({},{id:"changes-32"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import pcap")," command no longer takes interface names via ",(0,n.kt)("inlineCode",{parentName:"p"},"--read,-r"),", but instead from a separate option named ",(0,n.kt)("inlineCode",{parentName:"p"},"--interface,-i"),". This change has been made for consistency with other tools.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/641"}),"#641"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Record field names can now be entered as quoted strings in the schema and expression languages. This lifts a restriction where JSON fields with whitespaces or special characters could not be ingested.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/685"}),"#685"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Build configuration defaults have been adapated for a better user experience. Installations are now relocatable by default, which can be reverted by configuring with ",(0,n.kt)("inlineCode",{parentName:"p"},"--without-relocatable"),". Additionally, new sets of defaults named ",(0,n.kt)("inlineCode",{parentName:"p"},"--release")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"--debug")," (renamed from ",(0,n.kt)("inlineCode",{parentName:"p"},"--dev-mode"),") have been added.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/695"}),"#695"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Two minor modifications were done in the parsing framework: (i) the parsers for enums and records now allow trailing separators, and (ii) the dash (",(0,n.kt)("inlineCode",{parentName:"p"},"-"),") was removed from the allowed characters of schema type names.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/706"}),"#706"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST is switching to a calendar-based versioning scheme starting with this release.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/739"}),"#739")))),(0,n.kt)("h3",h({},{id:"features-33"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When a record field has the ",(0,n.kt)("inlineCode",{parentName:"p"},"#index=hash")," attribute, VAST will choose an optimized index implementation. This new index type only supports (in)equality queries and is therefore intended to be used with opaque types, such as unique identifiers or random strings.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/632"}),"#632"),"\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/726"}),"#726"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Added ",(0,n.kt)("em",{parentName:"p"},"Apache Arrow")," as new export format. This allows users to export query results as Apache Arrow record batches for processing the results downstream, e.g., in Python or Spark.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/633"}),"#633"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import pcap")," command now takes an optional snapshot length via ",(0,n.kt)("inlineCode",{parentName:"p"},"--snaplen"),". If the snapshot length is set to snaplen, and snaplen is less than the size of a packet that is captured, only the first snaplen bytes of that packet will be captured and provided as packet data.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/642"}),"#642"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"An experimental new Python module enables querying VAST and processing results as ",(0,n.kt)("a",h({parentName:"p"},{href:"https://arrow.apache.org/docs/python/"}),"pyarrow")," tables.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/685"}),"#685"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The long option ",(0,n.kt)("inlineCode",{parentName:"p"},"--config"),", which sets an explicit path to the VAST configuration file, now also has the short option ",(0,n.kt)("inlineCode",{parentName:"p"},"-c"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/689"}),"#689"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"On FreeBSD, a VAST installation now includes an rc.d script that simpliefies spinning up a VAST node. CMake installs the script at ",(0,n.kt)("inlineCode",{parentName:"p"},"PREFIX/etc/rc.d/vast"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/693"}),"#693")))),(0,n.kt)("h3",h({},{id:"bug-fixes-34"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"In some cases it was possible that a source would connect to a node before it was fully initialized, resulting in a hanging ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import")," process.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/647"}),"#647"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"PCAP ingestion failed for traces containing VLAN tags. VAST now strips ",(0,n.kt)("a",h({parentName:"p"},{href:"https://en.wikipedia.org/wiki/IEEE_802.1Q"}),"IEEE 802.1Q")," headers instead of skipping VLAN-tagged packets.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/650"}),"#650"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Importing events over UDP with ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import <format> --listen :<port>/udp")," failed to register the accountant component. This caused an unexpected message warning to be printed on startup and resulted in losing import statistics. VAST now correctly registers the accountant.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/655"}),"#655"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The import process did not print statistics when importing events over UDP. Additionally, warnings about dropped UDP packets are no longer shown per packet, but rather periodically reported in a readable format.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/662"}),"#662"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A bug in the quoted string parser caused a parsing failure if an escape character occurred in the last position.\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/685"}),"#685"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A race condition in the index logic was able to lead to incomplete or empty result sets for ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/703"}),"#703"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The example configuration file contained an invalid section ",(0,n.kt)("inlineCode",{parentName:"p"},"vast"),". This has been changed to the correct name ",(0,n.kt)("inlineCode",{parentName:"p"},"system"),".\n",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/tenzir/vast/pull/705"}),"#705")))),(0,n.kt)("h2",h({},{id:"02---20191030"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/0.2"}),"0.2")," - 2019.10.30"),(0,n.kt)("h3",h({},{id:"changes-33"}),"Changes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The query language has been extended to support expression of the form ",(0,n.kt)("inlineCode",{parentName:"p"},"X == /pattern/"),", where ",(0,n.kt)("inlineCode",{parentName:"p"},"X")," is a compatible LHS extractor. Previously, patterns only supports the match operator ",(0,n.kt)("inlineCode",{parentName:"p"},"~"),". The two operators have the same semantics when one operand is a pattern.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"CAF and Broker are no longer required to be installed prior to building VAST. These dependencies are now tracked as git submodules to ensure version compatibility. Specifying a custom build is still possible via the CMake variables ",(0,n.kt)("inlineCode",{parentName:"p"},"CAF_ROOT_DIR")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"BROKER_ROOT_DIR"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When exporting data in ",(0,n.kt)("inlineCode",{parentName:"p"},"pcap")," format, it is no longer necessary to manually restrict the query by adding the predicate ",(0,n.kt)("inlineCode",{parentName:"p"},'#type == "pcap.packet"')," to the expression. This now happens automatically because only this type contains the raw packet data.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When defining schema attributes in key-value pair form, the value no longer requires double-quotes. For example, ",(0,n.kt)("inlineCode",{parentName:"p"},"#foo=x")," is now the same as ",(0,n.kt)("inlineCode",{parentName:"p"},'#foo="x"'),". The form without double-quotes consumes the input until the next space and does not support escaping. In case an attribute value contains whitespace, double-quotes must be provided, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},'#foo="x y z"'),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The PCAP packet type gained the additional field ",(0,n.kt)("inlineCode",{parentName:"p"},"community_id")," that contains the ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/corelight/community-id-spec"}),"Community ID")," flow hash. This identifier facilitates pivoting to a specific flow from data sources with connnection-level information, such Zeek or Suricata logs.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Log files generally have some notion of timestamp for recorded events. To make the query language more intuitive, the syntax for querying time points thus changed from ",(0,n.kt)("inlineCode",{parentName:"p"},"#time")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"#timestamp"),". For example, ",(0,n.kt)("inlineCode",{parentName:"p"},"#time > 2019-07-02+12:00:00")," now reads ",(0,n.kt)("inlineCode",{parentName:"p"},"#timestamp > 2019-07-02+12:00:00"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Default schema definitions for certain ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," formats changed from hard-coded to runtime-evaluated. The default location of the schema definition files is ",(0,n.kt)("inlineCode",{parentName:"p"},"$(dirname vast-executable)"),"/../share/vast/schema. Currently this is used for the Suricata JSON log reader.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default directory name for persistent state changed from ",(0,n.kt)("inlineCode",{parentName:"p"},"vast")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast.db"),". This makes it possible to run ",(0,n.kt)("inlineCode",{parentName:"p"},"./vast")," in the current directory without having to specify a different state directory on the command line.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Nested types are from now on accessed by the ",(0,n.kt)("inlineCode",{parentName:"p"},"."),"-syntax. This means VAST now has a unified syntax to select nested types and fields. For example, what used to be ",(0,n.kt)("inlineCode",{parentName:"p"},"zeek::http")," is now just ",(0,n.kt)("inlineCode",{parentName:"p"},"zeek.http"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The (internal) option ",(0,n.kt)("inlineCode",{parentName:"p"},"--node")," for the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"export")," commands has been renamed from ",(0,n.kt)("inlineCode",{parentName:"p"},"-n")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"-N"),", to allow usage of ",(0,n.kt)("inlineCode",{parentName:"p"},"-n")," for ",(0,n.kt)("inlineCode",{parentName:"p"},"--max-events"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"To make the export option to limit the number of events to be exported more idiomatic, it has been renamed from ",(0,n.kt)("inlineCode",{parentName:"p"},"--events,e")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"--max-events,n"),". Now ",(0,n.kt)("inlineCode",{parentName:"p"},"vast export -n 42")," generates at most 42 events."))),(0,n.kt)("h3",h({},{id:"features-34"}),"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The default schema for Suricata has been updated to support the new ",(0,n.kt)("inlineCode",{parentName:"p"},"suricata.smtp")," event type in Suricata 5.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"export null")," command retrieves data, but never prints anything. Its main purpose is to make benchmarking VAST easier and faster.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"pivot")," command retrieves data of a related type. It inspects each event in a query result to find an event of the requested type. If a common field exists in the schema definition of the requested type, VAST will dynamically create a new query to fetch the contextual data according to the type relationship. For example, if two records ",(0,n.kt)("inlineCode",{parentName:"p"},"T")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"U")," share the same field ",(0,n.kt)("inlineCode",{parentName:"p"},"x"),", and the user requests to pivot via ",(0,n.kt)("inlineCode",{parentName:"p"},"T.x == 42"),", then VAST will fetch all data for ",(0,n.kt)("inlineCode",{parentName:"p"},"U.x == 42"),". An example use case would be to pivot from a Zeek or Suricata log entry to the corresponding PCAP packets. VAST uses the field ",(0,n.kt)("inlineCode",{parentName:"p"},"community_id")," to pivot between the logs and the packets. Pivoting is currently implemented for Suricata, Zeek (with ",(0,n.kt)("a",h({parentName:"p"},{href:"https://github.com/corelight/bro-community-id"}),"community ID computation")," enabled), and PCAP.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"infer")," command performs schema inference of input data. The command can deduce the input format and creates a schema definition that is sutable to use with the supplied data. Supported input types include Zeek TSV and JSONLD.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The newly added ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," comman allows counting hits for a query without exporting data.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Commands now support a ",(0,n.kt)("inlineCode",{parentName:"p"},"--documentation")," option, which returns Markdown-formatted documentation text.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"A new schema for Argus CSV output has been added. It parses the output of ",(0,n.kt)("inlineCode",{parentName:"p"},"ra(1)"),", which produces CSV output when invoked with ",(0,n.kt)("inlineCode",{parentName:"p"},"-L 0 -c ,"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The schema language now supports comments. A double-slash (",(0,n.kt)("inlineCode",{parentName:"p"},"//"),") begins a comment. Comments last until the end of the line, i.e., until a newline character (",(0,n.kt)("inlineCode",{parentName:"p"},"\\n"),").")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command now supports CSV formatted data. The type for each column is automatically derived by matching the column names from the CSV header in the input with the available types from the schema definitions.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Configuring how much status information gets printed to STDERR previously required obscure config settings. From now on, users can simply use ",(0,n.kt)("inlineCode",{parentName:"p"},"--verbosity=<level>,-v <level>"),", where ",(0,n.kt)("inlineCode",{parentName:"p"},"<level>")," is one of ",(0,n.kt)("inlineCode",{parentName:"p"},"quiet"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"error"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"warn"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"info"),", ",(0,n.kt)("inlineCode",{parentName:"p"},"debug"),", or ",(0,n.kt)("inlineCode",{parentName:"p"},"trace"),". However, ",(0,n.kt)("inlineCode",{parentName:"p"},"debug")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"trace")," are only available for debug builds (otherwise they fall back to log level ",(0,n.kt)("inlineCode",{parentName:"p"},"info"),").")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The query expression language now supports ",(0,n.kt)("em",{parentName:"p"},"data predicates"),", which are a shorthand for a type extractor in combination with an equality operator. For example, the data predicate ",(0,n.kt)("inlineCode",{parentName:"p"},"6.6.6.6")," is the same as ",(0,n.kt)("inlineCode",{parentName:"p"},":addr == 6.6.6.6"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"index")," object in the output from ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," has a new field ",(0,n.kt)("inlineCode",{parentName:"p"},"statistics")," for a high-level summary of the indexed data. Currently, there exists a nested ",(0,n.kt)("inlineCode",{parentName:"p"},"layouts")," objects with per-layout statistics about the number of events indexed.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"accountant")," object in the output from ",(0,n.kt)("inlineCode",{parentName:"p"},"vast status")," has a new field ",(0,n.kt)("inlineCode",{parentName:"p"},"log-file")," that points to the filesystem path of the accountant log file.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Data extractors in the query language can now contain a type prefix. This enables an easier way to extract data from a specific type. For example, a query to look for Zeek conn log entries with responder IP address 1.2.3.4 had to be written with two terms, ",(0,n.kt)("inlineCode",{parentName:"p"},"#type == zeek.conn && id.resp_h == 1.2.3.4"),", because the nested id record can occur in other types as well. Such queries can now written more tersely as ",(0,n.kt)("inlineCode",{parentName:"p"},"zeek.conn.id.resp_h == 1.2.3.4"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST gained support for importing Suricata JSON logs. The import command has a new suricata format that can ingest EVE JSON output.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The data parser now supports ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"integer")," values according to the ",(0,n.kt)("em",{parentName:"p"},"International System for Units (SI)"),". For example, ",(0,n.kt)("inlineCode",{parentName:"p"},"1k")," is equal to ",(0,n.kt)("inlineCode",{parentName:"p"},"1000")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"1Ki")," equal to ",(0,n.kt)("inlineCode",{parentName:"p"},"1024"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"VAST can now ingest JSON data. The ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command gained the ",(0,n.kt)("inlineCode",{parentName:"p"},"json")," format, which allows for parsing line-delimited JSON (LDJSON) according to a user-selected type with ",(0,n.kt)("inlineCode",{parentName:"p"},"--type"),". The ",(0,n.kt)("inlineCode",{parentName:"p"},"--schema")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"--schema-file")," options can be used in conjunction to supply custom types. The JSON objects in the input must match the selected type, that is, the keys of the JSON object must be equal to the record field names and the object values must be convertible to the record field types.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"For symmetry to the ",(0,n.kt)("inlineCode",{parentName:"p"},"export")," command, the ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command gained the ",(0,n.kt)("inlineCode",{parentName:"p"},"--max-events,n")," option to limit the number of events that will be imported.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"import")," command gained the ",(0,n.kt)("inlineCode",{parentName:"p"},"--listen,l")," option to receive input from the network. Currently only UDP is supported. Previously, one had to use a clever netcat pipe with enough receive buffer to achieve the same effect, e.g., ",(0,n.kt)("inlineCode",{parentName:"p"},"nc -I 1500 -p 4200 | vast import pcap"),". Now this pipe degenerates to ",(0,n.kt)("inlineCode",{parentName:"p"},"vast import pcap -l"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The new ",(0,n.kt)("inlineCode",{parentName:"p"},"--disable-accounting")," option shuts off periodic gathering of system telemetry in the accountant actor. This also disables output in the ",(0,n.kt)("inlineCode",{parentName:"p"},"accounting.log"),"."))),(0,n.kt)("h3",h({},{id:"bug-fixes-35"}),"Bug Fixes"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The user environments ",(0,n.kt)("inlineCode",{parentName:"p"},"LDFLAGS")," were erroneously passed to ",(0,n.kt)("inlineCode",{parentName:"p"},"ar"),". Instead, the user environments ",(0,n.kt)("inlineCode",{parentName:"p"},"ARFLAGS")," are now used.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Exporting data with ",(0,n.kt)("inlineCode",{parentName:"p"},"export -n <count>")," crashed when ",(0,n.kt)("inlineCode",{parentName:"p"},"count")," was a multiple of the table slice size. The command now works as expected.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Queries of the form ",(0,n.kt)("inlineCode",{parentName:"p"},"#type ~ /pattern/")," used to be rejected erroneously. The validation code has been corrected and such queries are now working as expected.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When specifying ",(0,n.kt)("inlineCode",{parentName:"p"},"enum")," types in the schema, ingestion failed because there did not exist an implementation for such types. It is now possible to use define enumerations in schema as expected and query them as strings.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Queries with the less ",(0,n.kt)("inlineCode",{parentName:"p"},"<")," or greater ",(0,n.kt)("inlineCode",{parentName:"p"},">")," operators produced off-by-one results for the ",(0,n.kt)("inlineCode",{parentName:"p"},"duration")," when the query contained a finer resolution than the index. The operator now works as expected.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Timestamps were always printed in millisecond resolution, which lead to loss of precision when the internal representation had a higher resolution. Timestamps are now rendered up to nanosecond resolution - the maximum resolution supported.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"All query expressions in the form ",(0,n.kt)("inlineCode",{parentName:"p"},"#type != X")," were falsely evaluated as ",(0,n.kt)("inlineCode",{parentName:"p"},"#type == X")," and consequently produced wrong results. These expressions now behave as expected.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Parsers for reading log input that relied on recursive rules leaked memory by creating cycling references. All recursive parsers have been updated to break such cycles and thus no longer leak memory.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The Zeek reader failed upon encountering logs with a ",(0,n.kt)("inlineCode",{parentName:"p"},"double")," column, as it occurs in ",(0,n.kt)("inlineCode",{parentName:"p"},"capture_loss.log"),". The Zeek parser generator has been fixed to handle such types correctly.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Some queries returned duplicate events because the archive did not filter the result set properly. This no longer occurs after fixing the table slice filtering logic.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("inlineCode",{parentName:"p"},"map")," data parser did not parse negative values correctly. It was not possible to parse strings of the form ",(0,n.kt)("inlineCode",{parentName:"p"},'"{-42 -> T}"')," because the parser attempted to parse the token for the empty map ",(0,n.kt)("inlineCode",{parentName:"p"},'"{-}"')," instead.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"The CSV printer of the ",(0,n.kt)("inlineCode",{parentName:"p"},"export")," command used to insert 2 superfluous fields when formatting an event: The internal event ID and a deprecated internal timestamp value. Both fields have been removed from the output, bringing it into line with the other output formats.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"When a node terminates during an import, the client process remained unaffected and kept processing input. Now the client terminates when a remote node terminates.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Evaluation of predicates with negations return incorrect results. For example, the expression ",(0,n.kt)("inlineCode",{parentName:"p"},":addr !in 10.0.0.0/8")," created a disjunction of all fields to which ",(0,n.kt)("inlineCode",{parentName:"p"},":addr")," resolved, without properly applying De-Morgan. The same bug also existed for key extractors. De-Morgan is now applied properly for the operations ",(0,n.kt)("inlineCode",{parentName:"p"},"!in")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"!~"),"."))),(0,n.kt)("h2",h({},{id:"01---20190228"}),(0,n.kt)("a",h({parentName:"h2"},{href:"https://github.com/tenzir/vast/releases/tag/0.1"}),"0.1")," - 2019.02.28"),(0,n.kt)("p",null,"This is the first official release."))}b.isMDXComponent=!0}}]);