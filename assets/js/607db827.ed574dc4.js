"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[99863],{15680:(e,n,a)=>{a.d(n,{xA:()=>l,yg:()=>u});var t=a(96540);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function p(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=t.createContext({}),c=function(e){var n=t.useContext(i),a=n;return e&&(a="function"==typeof e?e(n):p(p({},n),e)),a},l=function(e){var n=c(e.components);return t.createElement(i.Provider,{value:n},e.children)},d="mdxType",y={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},g=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=c(a),g=r,u=d["".concat(i,".").concat(g)]||d[g]||y[g]||o;return a?t.createElement(u,p(p({ref:n},l),{},{components:a})):t.createElement(u,p({ref:n},l))}));function u(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=a.length,p=new Array(o);p[0]=g;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[d]="string"==typeof e?e:r,p[1]=s;for(var c=2;c<o;c++)p[c]=a[c];return t.createElement.apply(null,p)}return t.createElement.apply(null,a)}g.displayName="MDXCreateElement"},76742:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>h,contentTitle:()=>m,default:()=>M,frontMatter:()=>u,metadata:()=>I,toc:()=>b});var t=a(15680),r=Object.defineProperty,o=Object.defineProperties,p=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,n,a)=>n in e?r(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,d=(e,n)=>{for(var a in n||(n={}))i.call(n,a)&&l(e,a,n[a]);if(s)for(var a of s(n))c.call(n,a)&&l(e,a,n[a]);return e},y=(e,n)=>o(e,p(n)),g=(e,n)=>{var a={};for(var t in e)i.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&s)for(var t of s(e))n.indexOf(t)<0&&c.call(e,t)&&(a[t]=e[t]);return a};const u={},m="Secrets",I={unversionedId:"secrets/README",id:"secrets/README",title:"Secrets",description:"Secrets are accepted by operators for parameters that may be sensitive,",source:"@site/docs/secrets/README.md",sourceDirName:"secrets",slug:"/secrets/",permalink:"/next/secrets/",draft:!1,editUrl:"https://github.com/tenzir/tenzir/tree/main/web/docs/secrets/README.md",tags:[],version:"current",frontMatter:{}},h={},b=[{value:"Usage in TQL",id:"usage-in-tql",level:2},{value:"The <code>secret</code> type",id:"the-secret-type",level:2},{value:"Encoding &amp; Decoding",id:"encoding--decoding",level:3},{value:"Concatenation",id:"concatenation",level:3},{value:"Ad-hoc Secrets",id:"ad-hoc-secrets",level:2},{value:"Managed Secrets",id:"managed-secrets",level:2},{value:"Tenzir Configuration Secrets",id:"tenzir-configuration-secrets",level:3},{value:"Platform Secrets",id:"platform-secrets",level:3},{value:"External Secret Stores",id:"external-secret-stores",level:4},{value:"Legacy Model",id:"legacy-model",level:2}],N={toc:b},D="wrapper";function M(e){var n=e,{components:r}=n,o=g(n,["components"]);return(0,t.yg)(D,y(d(d({},N),o),{components:r,mdxType:"MDXLayout"}),(0,t.yg)("h1",d({},{id:"secrets"}),"Secrets"),(0,t.yg)("p",null,"Secrets are accepted by operators for parameters that may be sensitive,\nsuch as authentication tokens, passwords or even URLs."),(0,t.yg)("h2",d({},{id:"usage-in-tql"}),"Usage in TQL"),(0,t.yg)("p",null,"There are two ways to pass an argument to a operator that expects a secret:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"By providing a plain ",(0,t.yg)("inlineCode",{parentName:"p"},"string")," (",(0,t.yg)("a",d({parentName:"p"},{href:"#ad-hoc-secrets"}),"Ad-hod Secret"),"):"),(0,t.yg)("figure",d({parentName:"li"},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,t.yg)("code",d({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"to_splunk"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),' "https://localhost:8088"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),", hec_token"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),'"my-plaintext-token"'))),(0,t.yg)("button",d({parentName:"pre"},{type:"button",data:'to_splunk "https://localhost:8088", hec_token="my-plaintext-token"',title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,t.yg)("span",d({parentName:"button"},{className:"ready"})),(0,t.yg)("span",d({parentName:"button"},{className:"success"}))),(0,t.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    ')))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("p",{parentName:"li"},"By using the ",(0,t.yg)("a",d({parentName:"p"},{href:"/next/tql2/functions/secret"}),(0,t.yg)("inlineCode",{parentName:"a"},"secret"))," function (",(0,t.yg)("a",d({parentName:"p"},{href:"#managed-secrets"}),"Manged Secret"),"):"),(0,t.yg)("figure",d({parentName:"li"},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,t.yg)("code",d({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"to_splunk"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),' "https://localhost:8088"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),", hec_token"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"secret"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"("),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),'"splunk-hec-token"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),")"))),(0,t.yg)("button",d({parentName:"pre"},{type:"button",data:'to_splunk "https://localhost:8088", hec_token=secret("splunk-hec-token")',title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,t.yg)("span",d({parentName:"button"},{className:"ready"})),(0,t.yg)("span",d({parentName:"button"},{className:"success"}))),(0,t.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))),(0,t.yg)("p",{parentName:"li"},"This will fetch the value of the secret named ",(0,t.yg)("inlineCode",{parentName:"p"},"splunk-hec-token"),"."))),(0,t.yg)("p",null,"Operators generally do not document that they accept a secret, but will accept\nsecrets where appropriate."),(0,t.yg)("h2",d({},{id:"the-secret-type"}),"The ",(0,t.yg)("inlineCode",{parentName:"h2"},"secret")," type"),(0,t.yg)("p",null,"Secrets are a special type in Tenzir's type system. The ",(0,t.yg)("inlineCode",{parentName:"p"},"secret")," type only supports\na limited set of operations, all of which yield ",(0,t.yg)("inlineCode",{parentName:"p"},"secret"),"."),(0,t.yg)("h3",d({},{id:"encoding--decoding"}),"Encoding & Decoding"),(0,t.yg)("p",null,"Secrets can be Base64-decoded using the ",(0,t.yg)("a",d({parentName:"p"},{href:"/next/tql2/functions/decode_base64"}),(0,t.yg)("inlineCode",{parentName:"a"},"decode_base64")),"\nfunction and Base64-encoded using the ",(0,t.yg)("a",d({parentName:"p"},{href:"/next/tql2/functions/encode_base64"}),(0,t.yg)("inlineCode",{parentName:"a"},"encode_base64")),"\nfunction."),(0,t.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,t.yg)("code",d({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"secret"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"("),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),'"my-secret"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),")"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"."),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}}),"decode_base64"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"()"))),(0,t.yg)("button",d({parentName:"pre"},{type:"button",data:'secret("my-secret").decode_base64()',title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,t.yg)("span",d({parentName:"button"},{className:"ready"})),(0,t.yg)("span",d({parentName:"button"},{className:"success"}))),(0,t.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))),(0,t.yg)("h3",d({},{id:"concatenation"}),"Concatenation"),(0,t.yg)("p",null,"Secrets can be concatenated with other secrets as well as strings using the\n",(0,t.yg)("inlineCode",{parentName:"p"},"+")," operator."),(0,t.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"tql","data-theme":"github-dark-default"}),(0,t.yg)("code",d({parentName:"pre"},{"data-language":"tql","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"auth "),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),' "Bearer "'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}})," +"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}})," secret"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"("),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),'"my-secret"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),")")),"\n",(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"url "),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"="),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}})," secret"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"("),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),'"user-name"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),") "),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}}),"+"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),' ":"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FF7B72"}})," +"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#D2A8FF"}})," secret"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),"("),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),'"password"'),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),")"))),(0,t.yg)("button",d({parentName:"pre"},{type:"button",data:'auth = "Bearer " + secret("my-secret")\nurl = secret("user-name") + ":" + secret("password")',title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,t.yg)("span",d({parentName:"button"},{className:"ready"})),(0,t.yg)("span",d({parentName:"button"},{className:"success"}))),(0,t.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))),(0,t.yg)("admonition",d({},{title:"Limited Nesting",type:"info"}),(0,t.yg)("p",{parentName:"admonition"},"The ",(0,t.yg)("em",{parentName:"p"},"result")," of a concatenation can no longer be encoded or decoded.")),(0,t.yg)("h2",d({},{id:"ad-hoc-secrets"}),"Ad-hoc Secrets"),(0,t.yg)("p",null,"Ad-hoc secrets are secrets that are created from a ",(0,t.yg)("inlineCode",{parentName:"p"},"string")," directly within TQL.\nThis happens when you provide a ",(0,t.yg)("inlineCode",{parentName:"p"},"string")," to an operator that expects a ",(0,t.yg)("inlineCode",{parentName:"p"},"secret"),"."),(0,t.yg)("p",null,"Providing plain string values can be useful when developing pipelines, if you do\nnot want to add the secret to the configuration or a secret store."),(0,t.yg)("p",null,"It is also useful for arguments that are not a secret for all users, such as URLs."),(0,t.yg)("p",null,"It is important to understand that secrets created from plain ",(0,t.yg)("inlineCode",{parentName:"p"},"string"),"s do not\nenjoy the same security as managed secrets. Their value is directly available in\nthe TQL pipeline definition, as well as the compiled and executed representation.\nAs such, it may be persisted on the node."),(0,t.yg)("h2",d({},{id:"managed-secrets"}),"Managed Secrets"),(0,t.yg)("p",null,"The ",(0,t.yg)("a",d({parentName:"p"},{href:"/next/tql2/functions/secret"}),(0,t.yg)("inlineCode",{parentName:"a"},"secret"))," function retrieves a managed secret."),(0,t.yg)("p",null,"Managed secrets are looked up in the following order:"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},"The environment of the Tenzir Node"),(0,t.yg)("li",{parentName:"ol"},"The configuration of the Tenzir Node"),(0,t.yg)("li",{parentName:"ol"},"The Tenzir Platform secret store for the workspace the Tenzir Node is running in")),(0,t.yg)("p",null,"A secret's actual value is only looked up when it is required by the operator\naccepting the secret. If the value is looked up over any network connection, it is\nadditionally encrypted using ECIES with a one-time, per secret key.\nThe value stays encrypted through the entire transfer until the final usage site."),(0,t.yg)("p",null,"A ",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir")," client process can use the ",(0,t.yg)("inlineCode",{parentName:"p"},"secret")," function only if it has a Tenzir\nNode to connect to."),(0,t.yg)("h3",d({},{id:"tenzir-configuration-secrets"}),"Tenzir Configuration Secrets"),(0,t.yg)("p",null,"Secrets can be specified in the ",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir.yaml")," config file, under the path\n",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir.secrets"),"."),(0,t.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"yaml","data-theme":"github-dark-default"}),(0,t.yg)("code",d({parentName:"pre"},{"data-language":"yaml","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#7EE787"}}),"tenzir"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#7EE787"}}),"  secrets"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),":")),"\n",(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#8B949E"}}),"    # Add your secrets there.")),"\n",(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#7EE787"}}),"    geheim"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#E6EDF3"}}),": "),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),"1528F9F3-FAFA-45B4-BC3C-B755D0E0D9C2"))),(0,t.yg)("button",d({parentName:"pre"},{type:"button",data:"tenzir:\n  secrets:\n    # Add your secrets there.\n    geheim: 1528F9F3-FAFA-45B4-BC3C-B755D0E0D9C2",title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,t.yg)("span",d({parentName:"button"},{className:"ready"})),(0,t.yg)("span",d({parentName:"button"},{className:"success"}))),(0,t.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))),(0,t.yg)("p",null,"Since Tenzir's configuration options can also be set as environment variables,\nthis means that secrets can also be defined in the environment. The above secret\ncould also be defined via the environment variable ",(0,t.yg)("inlineCode",{parentName:"p"},"TENZIR_SECRETS__GEHEIM"),".\nAn environment variable takes precedence over an equivalent key in the\nconfiguration file."),(0,t.yg)("p",null,"See the ",(0,t.yg)("a",d({parentName:"p"},{href:"/next/configuration"}),"configuration reference")," for more details."),(0,t.yg)("p",null,"Be aware that the ",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir.secrets")," section is hidden from the\n",(0,t.yg)("a",d({parentName:"p"},{href:"/next/tql2/functions/config"}),(0,t.yg)("inlineCode",{parentName:"a"},"config()"))," function."),(0,t.yg)("h3",d({},{id:"platform-secrets"}),"Platform Secrets"),(0,t.yg)("p",null,"The Tenzir Platform stores a separate set of secrets for every workspace.\nThese secrets are accessible to all Tenzir Nodes connected to that workspace."),(0,t.yg)("p",null,"Secrets can be added, updated or deleted from a workspace using either the\n",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir-platform")," CLI or the web interface. Read more details in the ",(0,t.yg)("a",d({parentName:"p"},{href:"/next/platform-cli#manage-secrets"}),"CLI\nreference"),"."),(0,t.yg)("p",null,"For example, to add a new secret ",(0,t.yg)("inlineCode",{parentName:"p"},"geheim"),", use the following command:"),(0,t.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"bash","data-theme":"github-dark-default"}),(0,t.yg)("code",d({parentName:"pre"},{"data-language":"bash","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FFA657"}}),"tenzir-platform"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}})," secret"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}})," add"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}})," geheim"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#79C0FF"}})," --value=1528F9F3-FAFA-45B4-BC3C-B755D0E0D9C2"))),(0,t.yg)("button",d({parentName:"pre"},{type:"button",data:"tenzir-platform secret add geheim --value=1528F9F3-FAFA-45B4-BC3C-B755D0E0D9C2",title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,t.yg)("span",d({parentName:"button"},{className:"ready"})),(0,t.yg)("span",d({parentName:"button"},{className:"success"}))),(0,t.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))),(0,t.yg)("p",null,"To manage secrets from the web interface, go to the ",(0,t.yg)("inlineCode",{parentName:"p"},"Workspace Settings")," screen\nby clicking on the gear icon in the workspace selector."),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Secrets UI",src:a(70361).A,width:"3256",height:"1724"})),(0,t.yg)("h4",d({},{id:"external-secret-stores"}),"External Secret Stores"),(0,t.yg)("admonition",d({},{title:"Sovereign Edition Recommended",type:"note"}),(0,t.yg)("p",{parentName:"admonition"},"The ability to use an external secret store is most useful for Sovereign Edition\ncustomers running a self-hosted instance of the platform.")),(0,t.yg)("p",null,"Instead of using its internal secret store, the Tenzir Platform can be\nconfigured to provide access to the secrets stored in an external secrets store.\nThis access is read-only, writing to or deleting from an external\nsecrets store is currently not supported."),(0,t.yg)("p",null,"External secret stores can currently only be configured using the ",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir-platform"),"\nCLI. To configure an external secret store, use the ",(0,t.yg)("inlineCode",{parentName:"p"},"secret store add")," subcommand."),(0,t.yg)("figure",d({},{"data-rehype-pretty-code-figure":""}),(0,t.yg)("pre",d({parentName:"figure"},{tabIndex:0,"data-language":"bash","data-theme":"github-dark-default"}),(0,t.yg)("code",d({parentName:"pre"},{"data-language":"bash","data-theme":"github-dark-default",style:{display:"grid"}}),(0,t.yg)("span",d({parentName:"code"},{"data-line":""}),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#FFA657"}}),"tenzir-platform"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}})," secret"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}})," store"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}})," add"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}})," aws"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#79C0FF"}})," --region="),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),"'eu-west-1'"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#79C0FF"}})," --assumed-role-arn="),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#A5D6FF"}}),"'arn:aws:iam::1234567890:role/tenzir-platform-secrets-access'"),(0,t.yg)("span",d({parentName:"span"},{style:{color:"#79C0FF"}})," --prefix=tenzir/"))),(0,t.yg)("button",d({parentName:"pre"},{type:"button",data:"tenzir-platform secret store add aws --region='eu-west-1' --assumed-role-arn='arn:aws:iam::1234567890:role/tenzir-platform-secrets-access' --prefix=tenzir/",title:"Copy code","aria-label":"Copy code",className:"rehype-pretty-copy","data-feedback-duration":"3000","data-name":"rehype-pretty-copy-button"}),(0,t.yg)("span",d({parentName:"button"},{className:"ready"})),(0,t.yg)("span",d({parentName:"button"},{className:"success"}))),(0,t.yg)("style",{parentName:"pre"},'\n    :root {\n      --copy-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDM2IDM2Ij48cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjYmZjN2Q1IiBkPSJNMjkuNSA3aC0xOUExLjUgMS41IDAgMCAwIDkgOC41djI0YTEuNSAxLjUgMCAwIDAgMS41IDEuNWgxOWExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTI0QTEuNSAxLjUgMCAwIDAgMjkuNSA3TTI5IDMySDExVjloMThaIiBjbGFzcz0iY2xyLWktb3V0bGluZSBjbHItaS1vdXRsaW5lLXBhdGgtMSIvPjxwYXRoIGZpbGw9IiNiZmM3ZDUiIGQ9Ik0yNiAzLjVBMS41IDEuNSAwIDAgMCAyNC41IDJoLTE5QTEuNSAxLjUgMCAwIDAgNCAzLjV2MjRBMS41IDEuNSAwIDAgMCA1LjUgMjlINlY0aDIwWiIgY2xhc3M9ImNsci1pLW91dGxpbmUgY2xyLWktb3V0bGluZS1wYXRoLTIiLz48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDM2djM2SDB6Ii8+PC9zdmc+");\n      --success-icon: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cmVjdCB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBmaWxsPSIjMDBkNjAwIiBkPSJNMjEgN0w5IDE5bC01LjUtNS41bDEuNDEtMS40MUw5IDE2LjE3TDE5LjU5IDUuNTl6Ii8+PC9zdmc+");\n    }\n\n    pre:has(code) {\n      position: relative;\n    }\n\n    button[data=\'<span>\'] {\n      width: 0;\n      height: 0;\n      display: none;\n      visibility: hidden;\n    }\n\n    pre button.rehype-pretty-copy {\n      top: 1px;\n      right: 1px;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      cursor: pointer;\n      margin-top: 8px;\n      margin-right: 8px;\n      position: absolute;\n      border-radius: 25%;\n      & span {\n        width: 100%;\n        aspect-ratio: 1 / 1;\n        background-repeat: no-repeat;\n      }\n      & .ready {\n        background-image: var(--copy-icon);\n      }\n      & .success {\n        display: none;\n        background-image: var(--success-icon);\n      }\n    }\n\n    &.rehype-pretty-copied { \n      & .success { \n        display: block;\n      } & .ready {\n        display: none;\n      }\n    }\n\n    pre button.rehype-pretty-copy.rehype-pretty-copied {\n      opacity: 1;\n      cursor: default;\n      & .ready { display: none; }\n      & .success { display: block; }\n    }\n\n      pre button.rehype-pretty-copy { opacity: 0; }\n      button[data-name="rehype-pretty-copy-button"]:hover {\n        opacity: 1;\n      }\n    '))),(0,t.yg)("p",null,"At the moment, only AWS Secrets Manager is supported as external secrets store."),(0,t.yg)("p",null,"In order to provide access the external secrets to the nodes, the Tenzir Platform\nmust be given the necessary permissions to read secret values from the external store.\nIn the example above, this means that the Tenzir Platform must be able to assume\nthe specified role, and the role must have permissions to read secrets under the\nprefix ",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir/")," from the Secrets Manager instance in the account of the\nassumed role."),(0,t.yg)("p",null,"See the ",(0,t.yg)("a",d({parentName:"p"},{href:"/next/platform-cli#manage-external-secret-stores"}),"CLI reference")," for more details."),(0,t.yg)("h2",d({},{id:"legacy-model"}),"Legacy Model"),(0,t.yg)("p",null,"The configuration option ",(0,t.yg)("inlineCode",{parentName:"p"},"tenzir.legacy-secret-model")," can be used to change the\nbehavior of the ",(0,t.yg)("inlineCode",{parentName:"p"},"secret")," function to return a ",(0,t.yg)("inlineCode",{parentName:"p"},"string")," instead of a ",(0,t.yg)("inlineCode",{parentName:"p"},"secret"),"."),(0,t.yg)("p",null,"When using the legacy model, only secrets from the Tenzir Node's configuration\ncan be used, no secrets from the Tenzir Platform's secret store will be\navailable."),(0,t.yg)("p",null,"We do not recommend enabling this option."))}M.isMDXComponent=!0},70361:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/screenshot-c52f4cee3b0e8eb73f453bb36df729dd.png"}}]);