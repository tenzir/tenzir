<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">VAST v2.0 | Tenzir</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.tenzir.com/blog/vast-v2.0"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="VAST v2.0 | Tenzir"><meta data-rh="true" name="description" content="VAST v2.0 - Smarter Query Scheduling &amp; Tunable Filters"><meta data-rh="true" property="og:description" content="VAST v2.0 - Smarter Query Scheduling &amp; Tunable Filters"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-05-16T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/dominiklohmann"><meta data-rh="true" property="article:tag" content="release,compaction,performance,pcap"><link data-rh="true" rel="icon" href="/img/tenzir-logo-adaptive.svg"><link data-rh="true" rel="canonical" href="https://docs.tenzir.com/blog/vast-v2.0"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/blog/vast-v2.0" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/blog/vast-v2.0" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BVB58VRBDH-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tenzir RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tenzir Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Tenzir" href="/opensearch.xml">




<script src="https://plausible.io/js/script.js" aysnc defer="defer" data-domain="docs.tenzir.com"></script><link rel="stylesheet" href="/assets/css/styles.e1b207ac.css">
<link rel="preload" href="/assets/js/runtime~main.8a0c43c9.js" as="script">
<link rel="preload" href="/assets/js/main.42972fa5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/tenzir-black.svg" alt="Tenzir" class="themedImage_ToTc themedImage--light_HNdA" width="120"><img src="/img/tenzir-white.svg" alt="Tenzir" class="themedImage_ToTc themedImage--dark_i4oU" width="120"></div></a><a class="navbar__item navbar__link" href="/get-started">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/changelog">Changelog</a><a class="navbar__item navbar__link" href="/roadmap">Roadmap</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link header-discord-link" aria-label="Discord" href="/discord"></a><a href="https://github.com/tenzir/tenzir" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/get-started">v4.18</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/get-started">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/get-started">v4.18</a></li><li><a class="dropdown__link" href="/v4.17/get-started">v4.17</a></li><li><a class="dropdown__link" href="/v4.16/get-started">v4.16</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Blog Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.18">Tenzir v4.18</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.17">Tenzir v4.17</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/an-interns-reflection">An Intern&#x27;s Reflection</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.16">Tenzir v4.16</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.15">Tenzir v4.15</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.14">Tenzir v4.14</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.13">Tenzir v4.13</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.12">Tenzir v4.12</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/reduce-cost-and-noise-with-deduplication">Reduce Cost and Noise with Deduplication</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.11">Tenzir v4.11</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.10">Tenzir v4.10</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.9">Tenzir v4.9</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/introducing-office-hours">Introducing Office Hours</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.8">Tenzir v4.8</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/switching-fluentbit-from-json-to-msgpack">Switching Fluent Bit from JSON to MsgPack</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.7">Tenzir v4.7</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/contextualization-made-simple">Contextualization Made Simple</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.6">Tenzir v4.6</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/enrichment-complexity-in-the-wild">Enrichment Complexity in the Wild</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.5">Tenzir v4.5</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">VAST v2.0</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-05-16T00:00:00.000Z" itemprop="datePublished">May 16, 2022</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/dominiklohmann" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/dominiklohmann.png" alt="Dominik Lohmann"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dominiklohmann" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dominik Lohmann</span></a></div><small class="avatar__subtitle" itemprop="description">Engineering Manager</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community, we are excited to announce <a href="https://github.com/tenzir/vast/releases/tag/v2.0.0" target="_blank" rel="noopener noreferrer">VAST v2.0</a>,
bringing faster execution of bulk-submitted queries, improved tunability of
index structures, and new configurability through environment variables.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="query-scheduling">Query Scheduling<a href="#query-scheduling" class="hash-link" aria-label="Direct link to Query Scheduling" title="Direct link to Query Scheduling">​</a></h2><p>VAST is now more intelligent in how it schedules queries.</p><p>When a query arrives at the VAST server, VAST first goes to the catalog which
returns a set of on-disk candidate partitions that the query may be applicable
to. Previous versions of VAST simply iterated through the available queries as
they came in, loading partition by partition to extract events. Due to memory
constraints, VAST is only able to keep some partitions in memory, which causes
frequent loading and unloading of the same partitions for queries that access
the same data. Now, VAST loads partitions depending on how many queries they are
relevant for and evaluates all ongoing queries for one partition at a time.</p><p>Additionally, VAST now partitions the data for each schema separately, moving
away from partitions that contain events of multiple schemas. This helps with
common access patterns and speeds up queries restricted to a single schema.</p><p>The numbers speak for themselves:</p><p><img loading="lazy" alt="Benchmarks" src="/assets/images/scheduler-light-a41d3be0b89de1169e9d96fd5d927da1.png#gh-light-mode-only" width="3000" height="2100" class="img_ev3q">
<img loading="lazy" alt="Benchmarks" src="/assets/images/scheduler-dark-494294caab31783eaf51c54055597463.png#gh-dark-mode-only" width="3000" height="2100" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="updates-to-aging-compaction-and-the-disk-monitor">Updates to Aging, Compaction, and the Disk Monitor<a href="#updates-to-aging-compaction-and-the-disk-monitor" class="hash-link" aria-label="Direct link to Updates to Aging, Compaction, and the Disk Monitor" title="Direct link to Updates to Aging, Compaction, and the Disk Monitor">​</a></h2><p>VAST v1.0 deprecated the experimental aging feature. Given popular demand we&#x27;ve
decided to un-deprecate it and to actually implement it on top of the same
building blocks the new compaction mechanism uses, which means that it is now
fully working and no longer considered experimental.</p><p>The compaction plugin is now able to apply general time-based compactions that
are not restricted to a specific set of types. This makes it possible for
operators to implement rules like &quot;delete all data after 1 week&quot;, without having
to list all possible data types that may occur.</p><p>Some smaller interface changes improve the observability of the compactor for
operators: The  <code>vast compaction status</code> command prints the current compaction
status, and the <code>vast compaction list</code> command now lists all configured
compaction rules of the VAST node.</p><p>Additionally, we&#x27;ve improved overall stability and fault tolerance improvements
surrounding the disk monitor and compaction features.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fine-tuned-catalog-configuration">Fine-tuned Catalog Configuration<a href="#fine-tuned-catalog-configuration" class="hash-link" aria-label="Direct link to Fine-tuned Catalog Configuration" title="Direct link to Fine-tuned Catalog Configuration">​</a></h2><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Advanced Users</div><div class="admonitionContent_S0QG"><p>This section is for advanced users only.</p></div></div><p>The catalog manages partition metadata and is responsible for deciding whether a
partition qualifies for a certain query. It does so by maintaining sketch data
structures (e.g., Bloom filters, summary statistics) for each partition.
Sketches are highly space-efficient at the cost of being probabilistic and
yielding false positives.</p><p>Due to this characteristic, sketches can grow sublinear: doubling the number of
events in a sketch does not lead to a doubling of the memory requirement.
Because the catalog must be traversed in full for a given query it needs to be
maintained in active memory to provide high responsiveness.</p><p>A false positive can have substantial impact on the query latency by
materializing irrelevant partitions, which involves unnecessary I/O. Based on
the cost of I/O, this penalty may be substantial. Conversely, reducing the false
positive rate increases the memory consumption, leading to a higher resident set
size and larger RAM requirements.</p><p>You can control this space-time trade-off in the configuration section
<code>vast.index</code> by specifying index rules. Each rule corresponds to one sketch and
consists of the following components:</p><p><code>targets</code>: a list of extractors to describe the set of fields whose values to
add to the sketch. <code>fp-rate</code>: an optional value to control the false-positive
rate of the sketch.</p><p>VAST does not create field-level sketches unless a dedicated rule with a
matching target configuration exists. Here&#x27;s an example:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">vast</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">index</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">rules</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># field synopses: need to specify fully qualified field name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> suricata.http.http.url</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">fp-rate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.005</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">fp-rate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This configuration includes two rules (= two sketches), where the first rule
includes a field extractor and the second a type extractor. The first rule
applies to a single field, <code>suricata.http.http.url</code>, and has a false-positive
rate of 0.5%. The second rule creates one sketch for all fields of type <code>addr</code>
that has a false-positive rate of 10%.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-vast-with-environment-variables">Configuring VAST with Environment Variables<a href="#configuring-vast-with-environment-variables" class="hash-link" aria-label="Direct link to Configuring VAST with Environment Variables" title="Direct link to Configuring VAST with Environment Variables">​</a></h2><p>VAST now offers an additional configuration path besides editing YAML
configuration files and providing command line arguments: <em>setting environment
variables</em>. This enables a convenient configuration experience when using
container runtimes, such as Docker, where the other two configuration paths have
a mediocre UX at best:</p><p>The container entry point is limited to adding command line arguments, where not
all options may be set. For Docker Compose and Kubernetes, it is often not
trivially possible to even add command line arguments.</p><p>Providing a manual configuration file is a heavy-weight action, because it
requires (1) generating a potentially templated configuration file, and (2)
mounting that file into a location where VAST would read it.</p><p>An environment variable has the form <code>KEY=VALUE</code>. VAST processes only
environment variables having the form <code>VAST_{KEY}=VALUE</code>. For example,
<code>VAST_ENDPOINT=1.2.3.4</code> translates to the command line option
<code>--endpoint=1.2.3.4</code> and YAML configuration <code>vast.endpoint: 1.2.3.4</code>.</p><p>Regarding precedence, environment variables override configuration file
settings, and command line arguments override environment variables. Please
consult the documentation for a more detailed explanation of how to specify keys
and values.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vlan-tag-extraction-and-better-packet-decapsulation">VLAN Tag Extraction and Better Packet Decapsulation<a href="#vlan-tag-extraction-and-better-packet-decapsulation" class="hash-link" aria-label="Direct link to VLAN Tag Extraction and Better Packet Decapsulation" title="Direct link to VLAN Tag Extraction and Better Packet Decapsulation">​</a></h2><p>VAST now extracts <a href="https://en.wikipedia.org/wiki/IEEE_802.1Q" target="_blank" rel="noopener noreferrer">802.1Q VLAN tags</a>
from packets, making it possible to filter packets based on VLAN ID. The packet
schema includes a new nested record <code>vlan</code> with two fields: <code>outer</code> and <code>inner</code>
to represent the respective VLAN ID. For example, you can generate PCAP traces
of packets based on VLAN IDs as follows:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vast </span><span class="token builtin class-name">export</span><span class="token plain"> pcap </span><span class="token string" style="color:#e3116c">&#x27;vlan.outer &gt; 0 || vlan.inner in [1, 2, 3]&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> tcpdump -r - -nl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>VLAN tags occur in many variations, and VAST extracts them in case of
single-tagging and  <a href="https://en.wikipedia.org/wiki/IEEE_802.1ad" target="_blank" rel="noopener noreferrer">QinQ
double-tagging</a>. Consult the PCAP
documentation for details on this feature.</p><p>Internally, the packet decapsulation logic has been rewritten to follow a
layered approach: frames, packets, and segments are the building blocks. The
plan is to reuse this architecture when switching to kernel-bypass packet
acquisition using DPDK. If you would like to see more work on the front of
high-performance packet recording, please reach out.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h2><p>The <code>--verbosity</code> command-line option is now called <code>--console-verbosity</code>. The
shorthand options <code>-v</code>, <code>-vv</code>, <code>-vvv</code>, <code>-q</code>, <code>-qq</code>, and  <code>-qqq</code>  are unchanged.
This aligns the command-line option with the configuration option
<code>vast.console-verbosity</code>, and disambiguates from the <code>vast.file-verbosity</code>
option.</p><p>The <em>Meta Index</em> is now called the <em>Catalog</em>. This affects multiple status and
metrics keys. We plan to extend the functionality of the Catalog in a future
release, turning it into a more powerful first instance for lookups.</p><p>Transform steps that add or modify columns now add or modify the columns
in-place rather than at the end, preserving the nesting structure of the
original data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="changes-for-developers">Changes for Developers<a href="#changes-for-developers" class="hash-link" aria-label="Direct link to Changes for Developers" title="Direct link to Changes for Developers">​</a></h2><p>The <code>vast get</code> command no longer exists. The command allowed for retrieving
events by their internal unique ID, which we are looking to remove entirely in
the future.</p><p>Changes to the internal data representation of VAST require all transform step
plugins to be updated. The output format of the vast export arrow command
changed for the address, subnet, pattern, and enumeration types, which are now
modeled as <a href="https://arrow.apache.org/docs/format/Columnar.html#extension-types" target="_blank" rel="noopener noreferrer">Arrow Extension
Types</a>. The
record type is no longer flattened. The mapping of VAST types to Apache Arrow
data types  is now considered stable.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="smaller-things">Smaller Things<a href="#smaller-things" class="hash-link" aria-label="Direct link to Smaller Things" title="Direct link to Smaller Things">​</a></h2><ul><li>VAST client commands now start much faster and use less memory.</li><li>The <code>vast count --estimate &#x27;&lt;query&gt;&#x27;</code> feature no longer unnecessarily causes
stores to load from disk, resulting in major speedups for larger databases and
broad queries.</li><li>The <a href="https://github.com/tenzir/vast" target="_blank" rel="noopener noreferrer">tenzir/vast</a> repository now contains
experimental Terraform scripts for deploying VAST to AWS Fargate and Lambda.</li></ul></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/compaction">compaction</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/performance">performance</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/pcap">pcap</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/apache-arrow-as-platform-for-security-data-engineering"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Apache Arrow as Platform for Security Data Engineering</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/vast-v1.1.2"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">VAST v1.1.2</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#query-scheduling" class="table-of-contents__link toc-highlight">Query Scheduling</a></li><li><a href="#updates-to-aging-compaction-and-the-disk-monitor" class="table-of-contents__link toc-highlight">Updates to Aging, Compaction, and the Disk Monitor</a></li><li><a href="#fine-tuned-catalog-configuration" class="table-of-contents__link toc-highlight">Fine-tuned Catalog Configuration</a></li><li><a href="#configuring-vast-with-environment-variables" class="table-of-contents__link toc-highlight">Configuring VAST with Environment Variables</a></li><li><a href="#vlan-tag-extraction-and-better-packet-decapsulation" class="table-of-contents__link toc-highlight">VLAN Tag Extraction and Better Packet Decapsulation</a></li><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-for-developers" class="table-of-contents__link toc-highlight">Changes for Developers</a></li><li><a href="#smaller-things" class="table-of-contents__link toc-highlight">Smaller Things</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li><li class="footer__item"><a href="https://docs.google.com/presentation/d/1R59T2nuGJg43g6PVKogZbb6DjcJXRYBx3Bih8W-A-oM/present" target="_blank" rel="noopener noreferrer" class="footer__link-item">Release Notes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/discord">Discord</a></li><li class="footer__item"><a href="https://github.com/tenzir/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/tenzir_company" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tenzir</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/newsletter">Newsletter</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-statement">Privacy Statement</a></li><li class="footer__item"><a class="footer__link-item" href="/next/tenzir-vs-cribl">Tenzir vs. Cribl</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Tenzir GmbH.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8a0c43c9.js"></script>
<script src="/assets/js/main.42972fa5.js"></script>
</body>
</html>