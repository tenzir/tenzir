<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">VAST v1.1 | Tenzir</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.tenzir.com/blog/vast-v1.1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="VAST v1.1 | Tenzir"><meta data-rh="true" name="description" content="VAST v1.1 - Compaction &amp; Query Language Frontends"><meta data-rh="true" property="og:description" content="VAST v1.1 - Compaction &amp; Query Language Frontends"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-03-03T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/dominiklohmann"><meta data-rh="true" property="article:tag" content="release,compaction,query"><link data-rh="true" rel="icon" href="/img/tenzir-logo-adaptive.svg"><link data-rh="true" rel="canonical" href="https://docs.tenzir.com/blog/vast-v1.1"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/blog/vast-v1.1" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/blog/vast-v1.1" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BVB58VRBDH-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tenzir RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tenzir Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Tenzir" href="/opensearch.xml">




<script src="https://plausible.io/js/script.js" aysnc defer="defer" data-domain="docs.tenzir.com"></script><link rel="stylesheet" href="/assets/css/styles.d20f12f0.css">
<link rel="preload" href="/assets/js/runtime~main.2eb4c277.js" as="script">
<link rel="preload" href="/assets/js/main.886178bd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/tenzir-black.svg" alt="Tenzir" class="themedImage_ToTc themedImage--light_HNdA" width="120"><img src="/img/tenzir-white.svg" alt="Tenzir" class="themedImage_ToTc themedImage--dark_i4oU" width="120"></div></a><a class="navbar__item navbar__link" href="/overview">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link header-discord-link" aria-label="Discord" href="/discord"></a><a href="https://github.com/tenzir/tenzir" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/overview">v4.22</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/overview">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/overview">v4.22</a></li><li><a class="dropdown__link" href="/v4.21/overview">v4.21</a></li><li><a class="dropdown__link" href="/v4.20/overview">v4.20</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Blog Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-platform-v1.2">Tenzir Platform v1.2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-node-v4.22">Tenzir Node v4.22</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-node-v4.21">Tenzir Node v4.21</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-platform-v1.1">Tenzir Platform v1.1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-node-v4.20">Tenzir Node v4.20</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/unifying-network-and-endpoint-data-with-community-ids">Unifying Network and Endpoint Data with Community IDs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-platform-is-now-generally-available">Tenzir Platform is Now Generally Available</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.19">Tenzir v4.19</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.18">Tenzir v4.18</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.17">Tenzir v4.17</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/an-interns-reflection">An Intern&#x27;s Reflection</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.16">Tenzir v4.16</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.15">Tenzir v4.15</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.14">Tenzir v4.14</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.13">Tenzir v4.13</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.12">Tenzir v4.12</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/reduce-cost-and-noise-with-deduplication">Reduce Cost and Noise with Deduplication</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.11">Tenzir v4.11</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.10">Tenzir v4.10</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/tenzir-v4.9">Tenzir v4.9</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">VAST v1.1</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-03-03T00:00:00.000Z" itemprop="datePublished">March 3, 2022</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/dominiklohmann" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/dominiklohmann.png" alt="Dominik Lohmann"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dominiklohmann" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Dominik Lohmann</span></a></div><small class="avatar__subtitle" itemprop="description">Engineering Manager</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Dear community, we are excited to announce <a href="https://github.com/tenzir/vast/releases/tag/v1.1.0" target="_blank" rel="noopener noreferrer">VAST v1.1</a>,
which ships with exciting new features: <em>query language plugins</em> to exchange the
query expression frontend, and <em>compaction</em> as a mechanism for expressing
fine-grained data retention policies and gradually aging out data instead of
simply deleting it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="query-language-plugins">Query Language Plugins<a href="#query-language-plugins" class="hash-link" aria-label="Direct link to Query Language Plugins" title="Direct link to Query Language Plugins">​</a></h2><p>VAST features a new query language plugin type
that makes it possible to exchange the querying frontend, that is, replace the
language in which the user writes queries. This makes it easier to integrate
VAST into specific domains without compromising the policy-neutral system core.</p><p>The first instance of the query language plugin is the <a href="https://github.com/tenzir/vast/tree/master/plugins/sigma" target="_blank" rel="noopener noreferrer"><code>sigma</code>
plugin</a>, which make it
possible to pass Sigma rules as
input instead of a standard VAST query expression. Prior to this plugin, VAST
attempted to parse a query as Sigma rule first, and if that failed, tried to
parse it as a VAST expression. The behavior changed in that VAST now always
tries to interpret user input as VAST expression, and if that fails, goes
through all other loaded query language plugins.</p><p>Moving forward, we will make it easier for integrators to BYO query language and
leverage VAST as an execution engine. We have already
<a href="https://github.com/tenzir/vast/pull/2075" target="_blank" rel="noopener noreferrer">experimented</a> with
<a href="https://substrait.io" target="_blank" rel="noopener noreferrer">Substrait</a>, a cross-language protobuf spec for query
plans. The vision is that users can easily connect <em>any</em> query language that
compiles into Substrait, and VAST takes the query plan as binary substrait blob.
Substrait is still a very young project, but if the Arrow integration starts to
mature, it has the potential to enable very powerful types of queries without
much heavy lifting on our end. We already use the Arrow Compute API to implement
generic grouping and aggregation during compaction, which allows us to avoid
hand-roll and optimize compute kernels for standard functions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compaction-plugin">Compaction Plugin<a href="#compaction-plugin" class="hash-link" aria-label="Direct link to Compaction Plugin" title="Direct link to Compaction Plugin">​</a></h2><p>Compaction is a feature to perform fine-grained transformation of historical
data to manage a fixed storage budget. This gives operators full control over
shrinking data gradually—both from a temporal and spatial angle:</p><p><strong>Spatial</strong>: Traditionally, reaching a storage budget triggers deletion of the
oldest (or least-recently-used) data. This is a binary decision to throw away a
subset of events. It does not differentiate the utility of data within an event.
What if you could only throw away the irrelevant parts and keep the information
that might still be useful for longitudinal investigations? What if you could
aggregate multiple events into a single one that captures valuable information?
Imagine, for example, halving the space utilization of events with network flow
information and keeping them 6 months longer; or imagine you could roll up a set
of flows into a traffic matrix that only captures who communicated with whom in
a given timeframe.</p><p>By incrementally elevating data into more space-efficient representations,
compaction gives you a much more powerful mechanism to achieve long retention
periods while working with high-volume telemetry.</p><p><strong>Temporal</strong>: data residency regulations often come with compliance policies
with maximum retention periods, e.g., data containing personal data. For
example, a policy may dictate a maximum retention of 1 week for events
containing URIs and 3 months for events containing IP addresses related to
network connections. However, these retention windows could be broadened when
pseudonomyzing or anonymizing the relevant fields.</p><p>Compaction has a policy-based approach to specify these temporal constraints in
a clear, declarative fashion.</p><p>Compaction supersedes both the disk monitor and aging, being able to cover the
entire functionality of their behaviors in a more configurable way. The disk
monitor remains unchanged and the experimental aging feature is deprecated (see
below).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="updates-to-transform-steps">Updates to Transform Steps<a href="#updates-to-transform-steps" class="hash-link" aria-label="Direct link to Updates to Transform Steps" title="Direct link to Updates to Transform Steps">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="aggregate-step">Aggregate Step<a href="#aggregate-step" class="hash-link" aria-label="Direct link to Aggregate Step" title="Direct link to Aggregate Step">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Transforms → Pipelines</div><div class="admonitionContent_S0QG"><p>In <a href="/blog/vast-v2.2">VAST v2.2</a>, we renamed <em>transforms</em> to <em>pipelines</em>, and
<em>transform steps</em> to <em>pipeline operators</em>. This caused several configuration key
changes. Additionally, we renamed the <code>aggregate</code> operator to
<code>summarize</code>. Please keep this in mind when reading the example
below and consult the documentation for the up-to-date syntax.</p></div></div><p>The new <code>aggregate</code> transform step plugin allows for reducing data with an
aggregation operation over a group of columns.</p><p>Aggregation is a two-step process of first bucketing data in groups of values,
and then executing an aggregation function that computes a single value over the
bucket. The functionality is in line with what standard execution engines offer
via &quot;group-by&quot; and &quot;aggregate&quot;.</p><p>Based on how the transformation is invoked in VAST, the boundary for determining
what goes into a grouping can be a table slice (e.g., during import/export) or
an entire partition (during compaction).</p><p>How this works is best shown on example data. Consider the following events
representing flow data that contain a source IP address, a start and end
timestamp, the number of bytes per flow, a boolean flag whether there is an
associated alert, and a unique identifier.</p><figure data-rehype-pretty-code-figure=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span data-line=""><span style="color:#E6EDF3">{</span><span style="color:#7EE787">&quot;source_ip&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;10.0.0.1&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;num_bytes&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">87122</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;start&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:40&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;end&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:47&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;alerted&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">false</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;unique_id&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">1</span><span style="color:#E6EDF3">}</span></span>
<span data-line=""><span style="color:#E6EDF3">{</span><span style="color:#7EE787">&quot;source_ip&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;10.0.0.2&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;num_bytes&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">62335</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;start&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:43&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;end&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:48&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;alerted&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">false</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;unique_id&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">2</span><span style="color:#E6EDF3">}</span></span>
<span data-line=""><span style="color:#E6EDF3">{</span><span style="color:#7EE787">&quot;source_ip&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;10.0.0.1&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;num_bytes&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">640</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;start&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:46&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;end&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:47&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;alerted&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;unique_id&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">3</span><span style="color:#E6EDF3">}</span></span>
<span data-line=""><span style="color:#E6EDF3">{</span><span style="color:#7EE787">&quot;source_ip&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;10.0.0.1&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;num_bytes&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">2162</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;start&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:49&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;end&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:51&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;alerted&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">false</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;unique_id&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">4</span><span style="color:#E6EDF3">}</span></span></code></pre></figure><p>We can now configure a transformation that groups the events by their source IP
address, takes the sum of the number of bytes, the minimum of the start
timestamp, the maximum of the end timestamp, and the disjunction of the alerted
flag. Since the unique identifier cannot be aggregated in a meaningful manner,
it  is discarded.</p><figure data-rehype-pretty-code-figure=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span data-line=""><span style="color:#7EE787">vast</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#7EE787">  transforms</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#7EE787">    example-aggregation</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">      - </span><span style="color:#7EE787">aggregate</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#7EE787">          group-by</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">            - </span><span style="color:#A5D6FF">source_ip</span></span>
<span data-line=""><span style="color:#7EE787">          sum</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">            - </span><span style="color:#A5D6FF">num_bytes</span></span>
<span data-line=""><span style="color:#7EE787">          min</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">            - </span><span style="color:#A5D6FF">start</span></span>
<span data-line=""><span style="color:#7EE787">          max</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">            - </span><span style="color:#A5D6FF">end</span></span>
<span data-line=""><span style="color:#7EE787">          any</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">            - </span><span style="color:#A5D6FF">alerted</span></span></code></pre></figure><p>After applying the transform, the resulting events will look like this:</p><figure data-rehype-pretty-code-figure=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span data-line=""><span style="color:#E6EDF3">{</span><span style="color:#7EE787">&quot;source_ip&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;10.0.0.1&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;num_bytes&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">89924</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;start&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-22T10:36:40&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;end&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2022-02-02T10:36:51&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;alerted&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">true</span><span style="color:#E6EDF3">}</span></span>
<span data-line=""><span style="color:#E6EDF3">{</span><span style="color:#7EE787">&quot;source_ip&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;10.0.0.2&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;num_bytes&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">62335</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;start&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2020-11-06T10:36:43&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;end&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">&quot;2020-02-22T10:36:48&quot;</span><span style="color:#E6EDF3">, </span><span style="color:#7EE787">&quot;alerted&quot;</span><span style="color:#E6EDF3">: </span><span style="color:#79C0FF">false</span><span style="color:#E6EDF3">}</span></span></code></pre></figure><p>Unlike the built-in transform steps, <code>aggregate</code> is a separate open-source
plugin that needs to be manually enabled in your <code>vast.yaml</code> configuration to be
usable:</p><figure data-rehype-pretty-code-figure=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span data-line=""><span style="color:#7EE787">vast</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#7EE787">  plugins</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">    - </span><span style="color:#A5D6FF">aggregate</span></span></code></pre></figure><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rename-step">Rename Step<a href="#rename-step" class="hash-link" aria-label="Direct link to Rename Step" title="Direct link to Rename Step">​</a></h3><p>The new <code>rename</code> transform step is a built-in that allows for changing the name
of the schema of data. This is particularly useful when a transformation changes
the shape of the data. E.g., an aggregated <code>suricata.flow</code> should likely be
renamed because it is of a different layout.</p><p>This is how you configure the transform step:</p><figure data-rehype-pretty-code-figure=""><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span data-line=""><span style="color:#7EE787">rename</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#7EE787">  layout-names</span><span style="color:#E6EDF3">:</span></span>
<span data-line=""><span style="color:#E6EDF3">    - </span><span style="color:#7EE787">from</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">suricata.flow</span></span>
<span data-line=""><span style="color:#7EE787">      to</span><span style="color:#E6EDF3">: </span><span style="color:#A5D6FF">suricata.aggregated_flow</span></span></code></pre></figure><h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-and-select-steps">Project and Select Steps<a href="#project-and-select-steps" class="hash-link" aria-label="Direct link to Project and Select Steps" title="Direct link to Project and Select Steps">​</a></h3><p>The built-in <code>project</code> and <code>select</code> transform steps now drop table slices where
no columns and rows match the configuration respectively instead of leaving the
data untouched.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deprecations">Deprecations<a href="#deprecations" class="hash-link" aria-label="Direct link to Deprecations" title="Direct link to Deprecations">​</a></h2><p>The <code>msgpack</code> encoding no longer exists. As we integrate deeper with Apache
Arrow, the <code>arrow</code> encoding is now the only option. Configuration options for
<code>msgpack</code> will be removed in an upcoming major release. On startup, VAST now
warns if any of the deprecated options are in use.</p><p>VAST’s <em>aging</em> feature never made it out of the experimental stage: it only
erased data without updating the index correctly, leading to unnecessary lookups
due to overly large candidate sets and miscounts in the statistics. Because
time-based compaction is a superset of the aging functionality (that also
updates the index correctly), we will remove aging in a future release. VAST now
warns on startup if it’s configured to run aging.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/release">release</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/compaction">compaction</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/query">query</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/vast-v1.1.1"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">VAST v1.1.1</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/vast-v1.0"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">VAST v1.0</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#query-language-plugins" class="table-of-contents__link toc-highlight">Query Language Plugins</a></li><li><a href="#compaction-plugin" class="table-of-contents__link toc-highlight">Compaction Plugin</a></li><li><a href="#updates-to-transform-steps" class="table-of-contents__link toc-highlight">Updates to Transform Steps</a><ul><li><a href="#aggregate-step" class="table-of-contents__link toc-highlight">Aggregate Step</a></li><li><a href="#rename-step" class="table-of-contents__link toc-highlight">Rename Step</a></li><li><a href="#project-and-select-steps" class="table-of-contents__link toc-highlight">Project and Select Steps</a></li></ul></li><li><a href="#deprecations" class="table-of-contents__link toc-highlight">Deprecations</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li><li class="footer__item"><a href="https://docs.google.com/presentation/d/1R59T2nuGJg43g6PVKogZbb6DjcJXRYBx3Bih8W-A-oM/present" target="_blank" rel="noopener noreferrer" class="footer__link-item">Release Notes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/discord">Discord</a></li><li class="footer__item"><a href="https://github.com/tenzir/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/tenzir_company" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tenzir</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/newsletter">Newsletter</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-statement">Privacy Statement</a></li><li class="footer__item"><a class="footer__link-item" href="/next/tenzir-vs-cribl">Tenzir vs. Cribl</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Tenzir GmbH.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2eb4c277.js"></script>
<script src="/assets/js/main.886178bd.js"></script>
</body>
</html>