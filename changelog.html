<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Changelog | Tenzir</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.tenzir.com/changelog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Changelog | Tenzir"><meta data-rh="true" name="description" content="&lt;!--"><meta data-rh="true" property="og:description" content="&lt;!--"><link data-rh="true" rel="icon" href="/img/tenzir-logo-adaptive.svg"><link data-rh="true" rel="canonical" href="https://docs.tenzir.com/changelog"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/changelog" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.tenzir.com/changelog" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BVB58VRBDH-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/releases/rss.xml" title="Tenzir RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/releases/atom.xml" title="Tenzir Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Tenzir" href="/opensearch.xml">



<link rel="alternate" type="application/rss+xml" href="/archive/rss.xml" title="Tenzir RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/archive/atom.xml" title="Tenzir Atom Feed">

<script src="https://plausible.io/js/script.js" aysnc defer="defer" data-domain="docs.tenzir.com"></script><link rel="stylesheet" href="/assets/css/styles.8411515e.css">
<link rel="preload" href="/assets/js/runtime~main.68a47143.js" as="script">
<link rel="preload" href="/assets/js/main.31fd0d6f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/tenzir-black.svg" alt="Tenzir" class="themedImage_ToTc themedImage--light_HNdA" width="120"><img src="/img/tenzir-white.svg" alt="Tenzir" class="themedImage_ToTc themedImage--dark_i4oU" width="120"></div></a><a class="navbar__item navbar__link" href="/overview">Docs</a><a class="navbar__item navbar__link" href="/releases">Releases</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link header-discord-link" aria-label="Discord" href="/discord"></a><a href="https://github.com/tenzir/tenzir" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/overview">v4.32</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/overview">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/overview">v4.32</a></li><li><a class="dropdown__link" href="/v4.31/overview">v4.31</a></li><li><a class="dropdown__link" href="/v4.30/overview">v4.30</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><article><h1>Changelog</h1><p>This changelog documents all notable changes to Tenzir and is updated on every release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next">Next<a href="#next" class="hash-link" aria-label="Direct link to Next" title="Direct link to Next">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes">Changes<a href="#changes" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>TQL2 is now the default and only option for writing pipelines with Tenzir. The environment variable <code>TENZIR_TQL2</code>, the configuration option <code>tenzir.tql2</code> have no more effect. Using the command-line option <code>--tql2</code> results in an error.
<a href="https://github.com/tenzir/tenzir/pull/5086" target="_blank" rel="noopener noreferrer">#5086</a></p></li><li><p>We added a new function <code>file_contents</code> to read bytes from a file with an absolute path.
<a href="https://github.com/tenzir/tenzir/pull/5111" target="_blank" rel="noopener noreferrer">#5111</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features">Features<a href="#features" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>We added a new operator <code>from_http</code> which creates an HTTP/1.1 server that listens on a specified <code>&lt;host&gt;:&lt;port&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/5114" target="_blank" rel="noopener noreferrer">#5114</a></p></li><li><p><code>write_json arrays_of_objects=true</code> now works correctly with an empty input, returning an empty JSON array instead of running into a panic.
<a href="https://github.com/tenzir/tenzir/pull/5115" target="_blank" rel="noopener noreferrer">#5115</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4321"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.32.1" target="_blank" rel="noopener noreferrer">v4.32.1</a><a href="#v4321" class="hash-link" aria-label="Direct link to v4321" title="Direct link to v4321">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-1">Features<a href="#features-1" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The <code>to_google_secops</code> operator now has two additonal configuration options to set the <code>max_request_size</code> and the <code>batch_timeout</code>.
<a href="https://github.com/tenzir/tenzir/pull/5108" target="_blank" rel="noopener noreferrer">#5108</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug Fixes<a href="#bug-fixes" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The default max request size has been changed from <code>4MB</code> to <code>1MB</code> for <code>to_google_secops</code> to align with the API.
<a href="https://github.com/tenzir/tenzir/pull/5108" target="_blank" rel="noopener noreferrer">#5108</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4320"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.32.0" target="_blank" rel="noopener noreferrer">v4.32.0</a><a href="#v4320" class="hash-link" aria-label="Direct link to v4320" title="Direct link to v4320">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-2">Features<a href="#features-2" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>.?</code> operator is a new alternative to the <code>.</code> operator that allows field access without warnings when the field does not exist or the parent record is <code>null</code>. For example, both <code>foo.bar</code> and <code>foo.?bar</code> return <code>null</code> if <code>foo</code> is <code>null</code>, or if <code>bar</code> does not exist, but the latter does not warn about this. Functionally, <code>foo.?bar</code> is equivalent to <code>foo.bar if foo.has(&quot;bar&quot;)</code>.
<a href="https://github.com/tenzir/tenzir/pull/5099" target="_blank" rel="noopener noreferrer">#5099</a></p></li><li><p>The <code>get</code> method on records or lists is an alternative to index expressions that allows for specifying a default value when the list index is out of bounds or the record field is missing. For example, <code>foo[bar]</code> is equivalent to <code>foo.get(bar)</code>, and <code>foo[bar] if foo.has(bar) else fallback</code> is equivalent to <code>foo.get(bar, fallback)</code>. This works for both records and lists.
<a href="https://github.com/tenzir/tenzir/pull/5099" target="_blank" rel="noopener noreferrer">#5099</a></p></li><li><p>Indexing expressions on records now support numeric indices to access record fields. For example, <code>this[0]</code> returns the first field of the top-level record.
<a href="https://github.com/tenzir/tenzir/pull/5099" target="_blank" rel="noopener noreferrer">#5099</a></p></li><li><p>The <code>has</code> method on records no longer requires the field name to be a constant.
<a href="https://github.com/tenzir/tenzir/pull/5099" target="_blank" rel="noopener noreferrer">#5099</a></p></li><li><p>The <code>config</code> function replaces the previous <code>config</code> operator as a more flexible mechanism to access variables from the configuration file. If you rely on the previous behavior, use <code>from config()</code> as a replacement.
<a href="https://github.com/tenzir/tenzir/pull/5099" target="_blank" rel="noopener noreferrer">#5099</a></p></li><li><p>We now provide an integration for customers with a Google SecOps workspace via the <code>to_google_secops</code> operator. This new operator can send logs via the <a href="https://cloud.google.com/chronicle/docs/reference/ingestion-api#unstructuredlogentries" target="_blank" rel="noopener noreferrer">Chronicle Ingestion API</a>.
<a href="https://github.com/tenzir/tenzir/pull/5101" target="_blank" rel="noopener noreferrer">#5101</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-1">Bug Fixes<a href="#bug-fixes-1" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug that caused the <code>from_opensearch</code> operator to crash on high volume input. Additionally, the operator now correctly responds to requests.
<a href="https://github.com/tenzir/tenzir/pull/5096" target="_blank" rel="noopener noreferrer">#5096</a></p></li><li><p>The <code>parse_json</code> function no longer crashes in case it encounters invalid arrays.
<a href="https://github.com/tenzir/tenzir/pull/5100" target="_blank" rel="noopener noreferrer">#5100</a></p></li><li><p>The <code>save_tcp</code> operator no longer panics or crashes on startup when it cannot connect to the provided hostname and port, and instead produces a helpful error message.
<a href="https://github.com/tenzir/tenzir/pull/5103" target="_blank" rel="noopener noreferrer">#5103</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4312"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.31.2" target="_blank" rel="noopener noreferrer">v4.31.2</a><a href="#v4312" class="hash-link" aria-label="Direct link to v4312" title="Direct link to v4312">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-3">Features<a href="#features-3" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>You can now specify an optional compression method for the files written by the <code>to_hive</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/5088" target="_blank" rel="noopener noreferrer">#5088</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-2">Bug Fixes<a href="#bug-fixes-2" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>We removed the limit of 20,000 elements in lists and records for <code>read_*</code> operators and <code>parse_*</code> functions.
<a href="https://github.com/tenzir/tenzir/pull/5091" target="_blank" rel="noopener noreferrer">#5091</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4310"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.31.0" target="_blank" rel="noopener noreferrer">v4.31.0</a><a href="#v4310" class="hash-link" aria-label="Direct link to v4310" title="Direct link to v4310">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-4">Features<a href="#features-4" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>We added a <code>from_opensearch</code> operator that presents a OpenSearch-compatible REST API to enable easy interop with tools that can send data to OpenSearch or Elasticsearch, e.g. Filebeat, Winlogbeat etc.
<a href="https://github.com/tenzir/tenzir/pull/5075" target="_blank" rel="noopener noreferrer">#5075</a></p></li><li><p>We added a new <code>write_syslog</code> operator to format events as syslog messages.
<a href="https://github.com/tenzir/tenzir/pull/5083" target="_blank" rel="noopener noreferrer">#5083</a></p></li><li><p>Tenzir now supports inline <code>if … else</code> expressions in the form <code>foo if pred</code>, which returns <code>foo</code> if <code>pred</code> evaluates to <code>true</code>, or <code>null</code> otherwise, and <code>foo if pred else bar</code>, which instead of falling back to <code>null</code> falls back to <code>bar</code>.
<a href="https://github.com/tenzir/tenzir/pull/5085" target="_blank" rel="noopener noreferrer">#5085</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-3">Bug Fixes<a href="#bug-fixes-3" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>from_fluent_bit</code> and <code>to_fluent_bit</code> operators no longer crash when trying to handle very large payloads.
<a href="https://github.com/tenzir/tenzir/pull/5084" target="_blank" rel="noopener noreferrer">#5084</a></p></li><li><p>The binary operators <code>and</code> and <code>or</code> now skip evaluating their right-hand side when not necessary. For example, <code>where this.has(&quot;foo&quot;) and foo == 42</code> now avoids emitting a warning when <code>foo</code> does not exist.
<a href="https://github.com/tenzir/tenzir/pull/5085" target="_blank" rel="noopener noreferrer">#5085</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4303"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.30.3" target="_blank" rel="noopener noreferrer">v4.30.3</a><a href="#v4303" class="hash-link" aria-label="Direct link to v4303" title="Direct link to v4303">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-5">Features<a href="#features-5" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>We introduced a new <code>type_of(x: any) -&gt; record</code> function that returns the exact type definition of a TQL expression. For example, <code>this = type_of(this)</code> replaces an event with its schema&#x27;s definition.
<a href="https://github.com/tenzir/tenzir/pull/5062" target="_blank" rel="noopener noreferrer">#5062</a></p></li><li><p>The <code>/serve</code> endpoint gained a new option <code>schema</code>, which can be set to <code>legacy</code> (default), <code>exact</code>, or <code>never</code>. The <code>legacy</code> option causes the schema definition to be rendered in a simplified way, which is the current default. The <code>exact</code> option causes the schema definitions to be rendered exactly without omitting any information. Set the option to <code>never</code> to omit schema definitions entirely.
<a href="https://github.com/tenzir/tenzir/pull/5062" target="_blank" rel="noopener noreferrer">#5062</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-4">Bug Fixes<a href="#bug-fixes-4" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>to_fluent_bit</code> operator no longer crashes on larger inputs.
<a href="https://github.com/tenzir/tenzir/pull/5076" target="_blank" rel="noopener noreferrer">#5076</a></p></li><li><p>We fixed a hang in <code>to_azure_log_analytics</code> for pipelines that never exhausted their input.
<a href="https://github.com/tenzir/tenzir/pull/5077" target="_blank" rel="noopener noreferrer">#5077</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4302"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.30.2" target="_blank" rel="noopener noreferrer">v4.30.2</a><a href="#v4302" class="hash-link" aria-label="Direct link to v4302" title="Direct link to v4302">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-5">Bug Fixes<a href="#bug-fixes-5" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Fixed an error in the <code>{from,to}_fluent_bit</code> operators that would cause it to fail to start successfully when using an input plugin (in particular the <code>elasticsearch</code> plugin) when the TLS setting was enabled without specifying a keyfile.
<a href="https://github.com/tenzir/tenzir/pull/5070" target="_blank" rel="noopener noreferrer">#5070</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4301"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.30.1" target="_blank" rel="noopener noreferrer">v4.30.1</a><a href="#v4301" class="hash-link" aria-label="Direct link to v4301" title="Direct link to v4301">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-1">Changes<a href="#changes-1" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>The default value for the <code>tenzir.active-partition-timeout</code> option increased from 30s to 5min. The option controls how long the <code>import</code> operators waits until flushing events to disk. In the past, this value was set so low because the <code>export</code> operator was only able to access already flushed events. This is no longer the case, removing the need for the low timeout. Note that the <code>import</code> operator always immediately flushes events after a pipeline with <code>import</code> completes, or when the node shuts down.
<a href="https://github.com/tenzir/tenzir/pull/5056" target="_blank" rel="noopener noreferrer">#5056</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-6">Features<a href="#features-6" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The import buffer timeout is now configurable via the <code>tenzir.import-buffer-timeout</code> option. The option defaults to 1 second, and controls how long the <code>import</code> operator buffers events for batching before forwarding them. Set the option to <code>0s</code> to enable an unbuffered mode with minimal latency, or to a higher value to increase performance.
<a href="https://github.com/tenzir/tenzir/pull/5056" target="_blank" rel="noopener noreferrer">#5056</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4300"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.30.0" target="_blank" rel="noopener noreferrer">v4.30.0</a><a href="#v4300" class="hash-link" aria-label="Direct link to v4300" title="Direct link to v4300">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-2">Changes<a href="#changes-2" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>skip_host_verification</code> option has been removed from the <code>load_http</code>, <code>save_email</code> and <code>save_http</code> operators. Its functionality has been merged into the <code>skip_peer_verification</code> option.
<a href="https://github.com/tenzir/tenzir/pull/5022" target="_blank" rel="noopener noreferrer">#5022</a></p></li><li><p><code>metrics &quot;operator&quot;</code> is now deprecated. Use <code>metrics &quot;pipeline&quot;</code> instead, which offers a pre-aggregated view of pipeline metrics. We plan to remove operator metrics in an upcoming release, as they are too expensive in large-scale deployments.
<a href="https://github.com/tenzir/tenzir/pull/5024" target="_blank" rel="noopener noreferrer">#5024</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-7">Features<a href="#features-7" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>We introduced common TLS settings for all operators that support TLS. The Tenzir config now has a key <code>cacert</code>, which will set the CA certificate file for all operators using it. The default for this will be chosen appropriately for the system.
<a href="https://github.com/tenzir/tenzir/pull/5022" target="_blank" rel="noopener noreferrer">#5022</a></p></li><li><p><code>metrics &quot;pipeline&quot;</code> provides an easy way to view the ingress and egress of pipelines. The new metrics show the ingress and egress of every pipeline in windows of ten seconds.
<a href="https://github.com/tenzir/tenzir/pull/5024" target="_blank" rel="noopener noreferrer">#5024</a></p></li><li><p>We have added a new <code>to_clickhouse</code> operator, which enables you to easily send events to ClickHouse.
<a href="https://github.com/tenzir/tenzir/pull/5032" target="_blank" rel="noopener noreferrer">#5032</a></p></li><li><p>The <code>load_gcs</code> and <code>save_gcs</code> operators are now available in TQL2 to interact with Google Cloud Storage.
<a href="https://github.com/tenzir/tenzir/pull/5054" target="_blank" rel="noopener noreferrer">#5054</a></p></li><li><p>The new <code>assert_throughput</code> operators allows for checking whether a pipeline meets the minimum expected throughput at any place in the pipeline.
<a href="https://github.com/tenzir/tenzir/pull/5055" target="_blank" rel="noopener noreferrer">#5055</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-6">Bug Fixes<a href="#bug-fixes-6" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>from</code> operator no longer incorrectly attempts to use parsers with a known file extension that is a suffix of the actual file extension. For example, <code>from &quot;file.foojson&quot;</code> will no longer attempt to use the <code>json</code> parser by default, while <code>from &quot;file.foo.json&quot;</code> and <code>from &quot;file.json&quot;</code> continue to work as expected. This fixes an error for <code>.ndjson</code> files, which could previously not decide between the <code>json</code> and <code>ndjson</code> parsers.
<a href="https://github.com/tenzir/tenzir/pull/5050" target="_blank" rel="noopener noreferrer">#5050</a></p></li><li><p>The <code>read_zeek_tsv</code> operator sometimes produced an invalid field with the name <code>\0</code> for types without a schema specified. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/5052" target="_blank" rel="noopener noreferrer">#5052</a></p></li><li><p>We fixed a regression that caused strings passed as options to the <code>from_fluent_bit</code> and <code>to_fluent_bit</code> operators to incorrectly be surrounded by double quotes.
<a href="https://github.com/tenzir/tenzir/pull/5053" target="_blank" rel="noopener noreferrer">#5053</a></p></li><li><p><code>to_fluent_bit</code> incorrectly reported zero bytes being pushed to the Fluent Bit engine as an error. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/5053" target="_blank" rel="noopener noreferrer">#5053</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4292"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.29.2" target="_blank" rel="noopener noreferrer">v4.29.2</a><a href="#v4292" class="hash-link" aria-label="Direct link to v4292" title="Direct link to v4292">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-3">Changes<a href="#changes-3" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>We have improved how internal errors are presented to the user, making it easier to report and analyze bugs.
<a href="https://github.com/tenzir/tenzir/pull/5023" target="_blank" rel="noopener noreferrer">#5023</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-8">Features<a href="#features-8" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The newly added <code>max_buffered_chunks</code> for <code>load_tcp</code> controls how many reads the operator schedules in advance on the socket. The option defaults to 10.
<a href="https://github.com/tenzir/tenzir/pull/5040" target="_blank" rel="noopener noreferrer">#5040</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-7">Bug Fixes<a href="#bug-fixes-7" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Installing packages no longer fails when packages contain additional fields, and instead warns about the unexpected fields.
<a href="https://github.com/tenzir/tenzir/pull/5031" target="_blank" rel="noopener noreferrer">#5031</a></p></li><li><p>We fixed a bug that caused a loss of type names for nested fields in assignments, causing field metadata in <code>write_feather</code> and <code>write_parquet</code> to be missing.
<a href="https://github.com/tenzir/tenzir/pull/5033" target="_blank" rel="noopener noreferrer">#5033</a></p></li><li><p>We fixed a bug that caused unnecessary idle wakeups in the <code>load_tcp</code> operator, throwing off scheduling of pipelines using it. Under rare circumstances, this could also lead to partially duplicated output of the operator&#x27;s nested pipeline.
<a href="https://github.com/tenzir/tenzir/pull/5035" target="_blank" rel="noopener noreferrer">#5035</a></p></li><li><p>We fixed a bug in the <code>from_fluent_bit</code> and <code>to_fluent_bit</code> operators that caused positive integer options to be forwarded with a leading <code>+</code>. For example, <code>options={port: 9200}</code> forwarded the option <code>port=+9200</code> to Fluent Bit.
<a href="https://github.com/tenzir/tenzir/pull/5037" target="_blank" rel="noopener noreferrer">#5037</a></p></li><li><p>We fixed a bug in the <code>cache</code> operator that caused caches that were capped just short of the <code>tenzir.cache.capacity</code> option to still get evicted immediately.
<a href="https://github.com/tenzir/tenzir/pull/5039" target="_blank" rel="noopener noreferrer">#5039</a></p></li><li><p>The <code>cache</code> operator no longer hangs indefinitely when creating a new cache from a pipeline that returned zero events. For example, the pipeline <code>from {} | head 0 | cache &quot;whoops&quot;</code> never exited before this fix.
<a href="https://github.com/tenzir/tenzir/pull/5042" target="_blank" rel="noopener noreferrer">#5042</a></p></li><li><p>Expressions that have varying output types for the same input types (mostly the <code>parse_*</code> family of functions) no longer trigger an assertion on certain inputs.
<a href="https://github.com/tenzir/tenzir/pull/5043" target="_blank" rel="noopener noreferrer">#5043</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4291"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.29.1" target="_blank" rel="noopener noreferrer">v4.29.1</a><a href="#v4291" class="hash-link" aria-label="Direct link to v4291" title="Direct link to v4291">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-9">Features<a href="#features-9" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The <code>/pipeline/create</code> and <code>/pipeline/launch</code> endpoints now accept an optional <code>id</code> parameter for assigning the pipeline&#x27;s ID manually.
<a href="https://github.com/tenzir/tenzir/pull/5026" target="_blank" rel="noopener noreferrer">#5026</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-8">Bug Fixes<a href="#bug-fixes-8" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Dropping all fields from a record with the <code>drop</code> operator no longer removes the record itself. For example, <code>from {x: {y: 0}} | drop x.y</code> now returns <code>{x: {}}</code> instead of <code>{}</code>.
<a href="https://github.com/tenzir/tenzir/pull/5021" target="_blank" rel="noopener noreferrer">#5021</a></p></li><li><p>We fixed a bug that caused pipelines with <code>from_fluent_bit</code> to not report their startup successfully, causing errors when deploying pipelines starting with the operator through the Tenzir Platform.
<a href="https://github.com/tenzir/tenzir/pull/5025" target="_blank" rel="noopener noreferrer">#5025</a></p></li><li><p>Using the <code>tls</code> option of the <code>to_splunk</code> operator no longer directly emits an error.
<a href="https://github.com/tenzir/tenzir/pull/5027" target="_blank" rel="noopener noreferrer">#5027</a></p></li><li><p>We fixed a bug in the <code>read_xsv</code> and <code>parse_xsv</code> family of operators and functions that caused the parser to fail unexpectedly when the data contained a list (as specified through the list separator) for fields where the provided <code>schema</code> did not expect lists.
<a href="https://github.com/tenzir/tenzir/pull/5028" target="_blank" rel="noopener noreferrer">#5028</a></p></li><li><p>The resolution of user-defined operator aliases in the <code>tenzir.operators</code> section is no longer order-dependent. Previously, an operator <code>foo</code> may have depended on an operator <code>bar</code>, but not the other way around. This limitation no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/5029" target="_blank" rel="noopener noreferrer">#5029</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4290"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.29.0" target="_blank" rel="noopener noreferrer">v4.29.0</a><a href="#v4290" class="hash-link" aria-label="Direct link to v4290" title="Direct link to v4290">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-4">Changes<a href="#changes-4" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>sep</code> argument on the <code>flatten</code> and <code>unflatten</code> functions is now a positional argument, allowing you to simply write <code>record.flatten(&quot;-&quot;)</code>.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>The <code>unflatten</code> option found on many <code>read_*</code> operators and <code>parse_*</code> functions is now called <code>unflatten_separator</code>.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>The <code>field_sep</code>, <code>list_sep</code> and <code>null_value</code> options on the XSV operators and functions (such as <code>read_xsv</code>, <code>write_csv</code> or <code>parse_tsv</code>) are now named arguments on all of them and are called <code>field_separator</code>, <code>list_separator</code> and <code>null_value</code>.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>The <code>field_split</code> and <code>list_split</code> arguments for the <code>read_kv</code> operator and <code>parse_kv</code> function are now named arguments.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>The <code>chart_area</code>, <code>chart_bar</code>, and <code>chart_pie</code> operators no longer reject null-values. Previously, gaps in charts were only supported for <code>chart_line</code>.
<a href="https://github.com/tenzir/tenzir/pull/5009" target="_blank" rel="noopener noreferrer">#5009</a></p></li><li><p>The output of <code>write_ndjson</code> is now more compact and no longer includes unnecessary whitespace. Additionally, <code>write_json</code> no longer prints a trailing whitespace after each comma.
<a href="https://github.com/tenzir/tenzir/pull/5015" target="_blank" rel="noopener noreferrer">#5015</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-10">Features<a href="#features-10" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>New functions <code>years</code>, <code>months</code>, <code>weeks</code>, <code>days</code>, <code>hours</code>, <code>minutes</code>, <code>seconds</code>, <code>milliseconds</code>, <code>microseconds</code> and <code>nanoseconds</code> convert a numeric value to the equivalent duration. Their counterpart <code>count_*</code> functions calculate how many units can the duration be broken into, i.e. <code>duration / unit</code>.
<a href="https://github.com/tenzir/tenzir/pull/4985" target="_blank" rel="noopener noreferrer">#4985</a></p></li><li><p>The <code>abs</code> function calculates the absolute value for a number or a duration.
<a href="https://github.com/tenzir/tenzir/pull/4985" target="_blank" rel="noopener noreferrer">#4985</a></p></li><li><p>The <code>write_xsv</code> family of operators now accepts multi-character separators, instead of being restricted to a single character.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>We added the <code>write_kv</code> operator, allowing you to write events as Key-Value pairs.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>We added the functions <code>any.print_json()</code> and <code>any.print_yaml()</code> to print any value as a JSON or YAML string.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>We added the functions <code>record.print_kv()</code>, <code>record.print_csv()</code>, <code>record.print_ssv()</code>, <code>record.print_tsv()</code> and <code>record.print_xsv()</code> to print records as the respective format.
<a href="https://github.com/tenzir/tenzir/pull/5001" target="_blank" rel="noopener noreferrer">#5001</a></p></li><li><p>The new <code>base</code> option for <code>int</code> and <code>uint</code> functions allows parsing hexadecimal numbers in strings.
<a href="https://github.com/tenzir/tenzir/pull/5006" target="_blank" rel="noopener noreferrer">#5006</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-9">Bug Fixes<a href="#bug-fixes-9" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The implicit events sink of the <code>tenzir</code> binary now respects the <code>--color=[always|never|auto]</code> option and the <code>NO_COLOR</code> environment variable. Previously, color usage was only determined based on whether <code>stdout</code> had a TTY attached.
<a href="https://github.com/tenzir/tenzir/pull/5007" target="_blank" rel="noopener noreferrer">#5007</a></p></li><li><p>We fixed a bug that caused <code>type_id(this)</code> to return inconsistent values for schemas with metadata attached, e.g., after assigning a schema name via <code>@name = &quot;new_name&quot;</code> or using operators like <code>chart_line</code> that add custom metadata to a schema for use of the Tenzir Platform. Unfortunately, this may cause charts or tables added to dashboards before Tenzir Platform v1.7 to break. To fix them, click on the action menu on the chart or table on the dashboard, click &quot;Open in Explorer,&quot; and re-add the chart or table to the dashboard. We are sorry about this inconvenience.
<a href="https://github.com/tenzir/tenzir/pull/5008" target="_blank" rel="noopener noreferrer">#5008</a></p></li><li><p>A compilation error within an <code>if</code> statement no longer causes pipelines to crash.
<a href="https://github.com/tenzir/tenzir/pull/5011" target="_blank" rel="noopener noreferrer">#5011</a></p></li><li><p>We now include the <code>to_splunk</code> operator in the Tenzir binary packages.
<a href="https://github.com/tenzir/tenzir/pull/5012" target="_blank" rel="noopener noreferrer">#5012</a></p></li><li><p>We fixed an optimization bug that caused pipelines of the form <code>subscribe &lt;topic&gt; | where &lt;value&gt; in &lt;field&gt;</code> to evaluate the predicate <code>&lt;field&gt; in &lt;value&gt;</code> instead, returning incorrect results from the pipeline.
<a href="https://github.com/tenzir/tenzir/pull/5014" target="_blank" rel="noopener noreferrer">#5014</a></p></li><li><p>The <code>read_grok</code> operator and <code>parse_grok</code> functions no longer crash when providing an invalid Grok expression.
<a href="https://github.com/tenzir/tenzir/pull/5018" target="_blank" rel="noopener noreferrer">#5018</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4282"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.28.2" target="_blank" rel="noopener noreferrer">v4.28.2</a><a href="#v4282" class="hash-link" aria-label="Direct link to v4282" title="Direct link to v4282">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-11">Features<a href="#features-11" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>fill</code> option on <code>chart_area</code>, <code>chart_bar</code> and <code>chart_line</code> allows you to specify a value to replace <code>null</code>s with and fill gaps.
<a href="https://github.com/tenzir/tenzir/pull/4967" target="_blank" rel="noopener noreferrer">#4967</a></p></li><li><p>The <code>from</code> and <code>to</code> operators now assume <code>http</code> and <code>https</code> URLs to produce or accept JSON, unless the filename in the URL contains a known file extension.
<a href="https://github.com/tenzir/tenzir/pull/4990" target="_blank" rel="noopener noreferrer">#4990</a></p></li><li><p>The <code>write_json</code> and <code>write_ndjson</code> operators now have a <code>arrays_of_objects</code> option.
<a href="https://github.com/tenzir/tenzir/pull/4994" target="_blank" rel="noopener noreferrer">#4994</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-10">Bug Fixes<a href="#bug-fixes-10" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>We fixed a bug in <code>load_amqp</code> and <code>save_amqp</code> that prevented the node from starting if they were used in a pipeline configured as code and failed to connect.
<a href="https://github.com/tenzir/tenzir/pull/4994" target="_blank" rel="noopener noreferrer">#4994</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4280"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.28.0" target="_blank" rel="noopener noreferrer">v4.28.0</a><a href="#v4280" class="hash-link" aria-label="Direct link to v4280" title="Direct link to v4280">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-5">Changes<a href="#changes-5" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p><code>metrics &quot;operator&quot;</code> no longer includes metrics from hidden pipelines, such as pipelines run under-the-hood by the Tenzir Platform.
<a href="https://github.com/tenzir/tenzir/pull/4966" target="_blank" rel="noopener noreferrer">#4966</a></p></li><li><p>Unless specified explicitly, the <code>cache</code> has no more default capacity in terms of number of events per cache. Instead, the node now tracks the global cache capacity in number of bytes. This is limited to 1GiB by default, and can be configured with the <code>tenzir.cache.capacity</code> option. For practical reasons, we require at least 64MiB of caches.
<a href="https://github.com/tenzir/tenzir/pull/4984" target="_blank" rel="noopener noreferrer">#4984</a></p></li><li><p>The default <code>write_timeout</code> of caches increased from 1 minute to 10 minutes, and can now be configured with the <code>tenzir.cache.lifetime</code> option.
<a href="https://github.com/tenzir/tenzir/pull/4984" target="_blank" rel="noopener noreferrer">#4984</a></p></li><li><p>The <code>/serve</code> endpoint now returns an additional field <code>state</code>, which can be one of <code>running</code>, <code>completed</code>, or <code>failed</code>, indicating the status of the pipeline with the corresponding <code>serve</code> operator at the time of the request.
<a href="https://github.com/tenzir/tenzir/pull/4984" target="_blank" rel="noopener noreferrer">#4984</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-12">Features<a href="#features-12" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>It is now possible to define additional patterns in the <code>parse_grok</code> function.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p>The <code>read_xsv</code> family of parsers now accept the <code>header</code> as a list of strings as an alternative to a single delimited string.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p><code>read_grok</code> now accepts additional <code>pattern_definitions</code> as either a <code>record</code> mapping from pattern name to definition or a <code>string</code> of newline separated patterns definitions.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p>We introduced the <code>parse_csv</code>, <code>parse_kv</code>, <code>parse_ssv</code>, <code>parse_tsv</code>, <code>parse_xsv</code> and <code>parse_yaml</code> functions, allowing you to parse strings as those formats.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p>The <code>map</code> function now handles cases where list elements mapped to different types.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p>The new <code>load_stdin</code> operator accepts bytes from standard input, while <code>save_stdout</code> writes bytes to standard output.
<a href="https://github.com/tenzir/tenzir/pull/4969" target="_blank" rel="noopener noreferrer">#4969</a></p></li><li><p>You can use the new <code>parse_syslog</code> function to parse a string as a syslog message.
<a href="https://github.com/tenzir/tenzir/pull/4980" target="_blank" rel="noopener noreferrer">#4980</a></p></li><li><p><code>to_opensearch</code> and <code>to_splunk</code> now feature an explicit <code>tls</code> option.
<a href="https://github.com/tenzir/tenzir/pull/4983" target="_blank" rel="noopener noreferrer">#4983</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-11">Bug Fixes<a href="#bug-fixes-11" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Re-defining a predefined grok pattern no longer terminates the application.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p>The <code>string.parse_json()</code> function can now parse single numbers or strings instead of only objects.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p><code>read_leef</code> and <code>parse_leef</code> now include the <code>event_class_id</code> in their output.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p><code>read_yaml</code> now properly parses numbers as numbers.
<a href="https://github.com/tenzir/tenzir/pull/4933" target="_blank" rel="noopener noreferrer">#4933</a></p></li><li><p>We sqashed a bug that prevented the <code>tenzir-node</code> process from exiting cleanly while the <code>lookup</code> operator was used in a pipeline.
<a href="https://github.com/tenzir/tenzir/pull/4978" target="_blank" rel="noopener noreferrer">#4978</a></p></li><li><p>We fixed an up to 60 seconds hang in requests to the <code>/serve</code> endpoint when the request was issued after the pipeline with the corresponding <code>serve</code> operator was started and before it finished with an error and without results.
<a href="https://github.com/tenzir/tenzir/pull/4984" target="_blank" rel="noopener noreferrer">#4984</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4270"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.27.0" target="_blank" rel="noopener noreferrer">v4.27.0</a><a href="#v4270" class="hash-link" aria-label="Direct link to v4270" title="Direct link to v4270">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-6">Changes<a href="#changes-6" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>TQL1 is now deprecated in favor of TQL2. Starting a TQL1 pipeline issues a warning on startup nudging towards upgrading to TQL2, which will become the default in the upcoming Tenzir v5.0 release. This warning cannot be turned off.
<a href="https://github.com/tenzir/tenzir/pull/4954" target="_blank" rel="noopener noreferrer">#4954</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-13">Features<a href="#features-13" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>Charting functionality is now available in TQL2 via the new <code>chart_area</code>, <code>chart_bar</code>, <code>chart_line</code> and <code>chart_pie</code> operators and the <a href="https://app.tenzir.com" target="_blank" rel="noopener noreferrer">Tenzir Platform</a>.
<a href="https://github.com/tenzir/tenzir/pull/4888" target="_blank" rel="noopener noreferrer">#4888</a></p></li><li><p>The <code>platform</code> plugin now understands the <code>skip-peer-verification</code> and <code>cacert</code> options in order to enable connections to self-hosted platform instances with self-signed TLS certificates.
<a href="https://github.com/tenzir/tenzir/pull/4918" target="_blank" rel="noopener noreferrer">#4918</a></p></li><li><p>The <code>unroll</code> operator now works for record fields as well as lists. The operator duplicates the surrounding event for every field in the specified record.
<a href="https://github.com/tenzir/tenzir/pull/4934" target="_blank" rel="noopener noreferrer">#4934</a></p></li><li><p>The <code>load_kafka</code> and <code>save_kafka</code> operators can now authenticate with AWS MSK using IAM via the new <code>aws_iam</code> options.
<a href="https://github.com/tenzir/tenzir/pull/4944" target="_blank" rel="noopener noreferrer">#4944</a></p></li><li><p>The new <code>tenzir.retention.metrics</code> and <code>tenzir.retention.diagnostics</code> configuration options configure how long Tenzir Nodes retain metrics and diagnostics. The policies are checked once every hour.
<a href="https://github.com/tenzir/tenzir/pull/4949" target="_blank" rel="noopener noreferrer">#4949</a></p></li><li><p><code>metrics &quot;operator&quot;</code> now includes a new <code>batches</code> field under the <code>input</code> and <code>output</code> records that counts how many batches of events or bytes the metric was generated from.
<a href="https://github.com/tenzir/tenzir/pull/4962" target="_blank" rel="noopener noreferrer">#4962</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-12">Bug Fixes<a href="#bug-fixes-12" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Operators such as <code>load_kafka</code>, <code>load_s3</code> etc can now correctly read their respective YAML configs.
<a href="https://github.com/tenzir/tenzir/pull/4944" target="_blank" rel="noopener noreferrer">#4944</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4260"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.26.0" target="_blank" rel="noopener noreferrer">v4.26.0</a><a href="#v4260" class="hash-link" aria-label="Direct link to v4260" title="Direct link to v4260">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-7">Changes<a href="#changes-7" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>Errors from the startup of configured pipelines, including those coming from configured packages, now have improved rendering.
<a href="https://github.com/tenzir/tenzir/pull/4886" target="_blank" rel="noopener noreferrer">#4886</a></p></li><li><p>Timestamps are now printed with a <code>Z</code> suffix to indicate that they are relative to UTC. Furthermore, the fractional part of the seconds is no longer always printed using 6 digits. Instead, timestamps that do not have sub-second information no longer have a fractional part. Other timestamps are either printed with 3, 6 or 9 fractional digits, depending on their resolution.
<a href="https://github.com/tenzir/tenzir/pull/4916" target="_blank" rel="noopener noreferrer">#4916</a></p></li><li><p>Durations that are printed as minutes now use <code>min</code> instead of <code>m</code>. Additionally, the fractional part of durations is now printed with full precision instead of being rounded to two digits.
<a href="https://github.com/tenzir/tenzir/pull/4916" target="_blank" rel="noopener noreferrer">#4916</a></p></li><li><p>Contexts persist less frequently now in the background, reducing their resource usage.
<a href="https://github.com/tenzir/tenzir/pull/4919" target="_blank" rel="noopener noreferrer">#4919</a></p></li><li><p>The implicit sources and sinks that can be set via commandline options or configuration now use TQL2.
<a href="https://github.com/tenzir/tenzir/pull/4921" target="_blank" rel="noopener noreferrer">#4921</a></p></li><li><p>The default implicit event sink now writes TQL values instead of JSON.
<a href="https://github.com/tenzir/tenzir/pull/4921" target="_blank" rel="noopener noreferrer">#4921</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-14">Features<a href="#features-14" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p><code>metrics &quot;caf&quot;</code> offers insights into Tenzir&#x27;s underlying actor system. This is primarily aimed at developers for performance benchmarking.
<a href="https://github.com/tenzir/tenzir/pull/4897" target="_blank" rel="noopener noreferrer">#4897</a></p></li><li><p>The new <code>merge</code> function combines two records. <code>merge(foo, bar)</code> is a shorthand for <code>{...foo, ...bar}</code>.
<a href="https://github.com/tenzir/tenzir/pull/4897" target="_blank" rel="noopener noreferrer">#4897</a></p></li><li><p>We added a <code>to_asl</code> operator that can be used to send OCSF normalized events to an Amazon Security Lake.
<a href="https://github.com/tenzir/tenzir/pull/4911" target="_blank" rel="noopener noreferrer">#4911</a></p></li><li><p>You can use the new <code>string.match_regex(regex:string)</code> function to check whether a string partially matches a regular expression.
<a href="https://github.com/tenzir/tenzir/pull/4917" target="_blank" rel="noopener noreferrer">#4917</a></p></li><li><p>You can use the new <code>write_tql</code> operator to print events as TQL expressions.
<a href="https://github.com/tenzir/tenzir/pull/4921" target="_blank" rel="noopener noreferrer">#4921</a></p></li><li><p>We added <code>strip</code> options to <code>write_json</code> and <code>write_ndjson</code>, allowing you to strip null fields as well as empty records or lists.
<a href="https://github.com/tenzir/tenzir/pull/4921" target="_blank" rel="noopener noreferrer">#4921</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-13">Bug Fixes<a href="#bug-fixes-13" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed an overzealous parameter validation bug that prevented the use of the <code>/pipeline/launch</code> API endpoint when specifying a <code>cache_id</code> without a <code>serve_id</code> when <code>definition</code> contained a definition for a pipeline without a sink.
<a href="https://github.com/tenzir/tenzir/pull/4919" target="_blank" rel="noopener noreferrer">#4919</a></p></li><li><p>We fixed a bug which broke the CONVERSION part of the GROK pattern semantic.
<a href="https://github.com/tenzir/tenzir/pull/4939" target="_blank" rel="noopener noreferrer">#4939</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4250"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.25.0" target="_blank" rel="noopener noreferrer">v4.25.0</a><a href="#v4250" class="hash-link" aria-label="Direct link to v4250" title="Direct link to v4250">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-8">Changes<a href="#changes-8" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>topic</code> argument for <code>load_kafka</code> and <code>save_kafka</code> is now a positional argument, instead of a named argument.
<a href="https://github.com/tenzir/tenzir/pull/4805" target="_blank" rel="noopener noreferrer">#4805</a></p></li><li><p>The array version of <code>from</code> that allowed you to create multiple events has been removed. Instead, you can just pass multiple records to <code>from</code> now.
<a href="https://github.com/tenzir/tenzir/pull/4805" target="_blank" rel="noopener noreferrer">#4805</a></p></li><li><p>Functions can now return values of different types for the same input types. For example, <code>x.otherwise(y)</code> no longer requires that <code>x</code> has the same type as <code>y</code>.
<a href="https://github.com/tenzir/tenzir/pull/4839" target="_blank" rel="noopener noreferrer">#4839</a></p></li><li><p>The <code>compress</code> and <code>decompress</code> operators have been deprecated in favor of separate operators for each compression algorithm. These new operators expose additional options, such as <code>compress_gzip level=10, format=&quot;deflate&quot;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4876" target="_blank" rel="noopener noreferrer">#4876</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-15">Features<a href="#features-15" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>We have added a new <code>to_snowflake</code> sink operator, writing events into a <a href="https://www.snowflake.com/" target="_blank" rel="noopener noreferrer">snowflake</a> table.
<a href="https://github.com/tenzir/tenzir/pull/4589" target="_blank" rel="noopener noreferrer">#4589</a></p></li><li><p>We have added the <code>from</code> operator that allows you to easily onboard data from most sources. For example, you can now write <code>from &quot;https://example.com/file.json.gz&quot;</code> to automatically deduce the load operator, compression, and format.
<a href="https://github.com/tenzir/tenzir/pull/4805" target="_blank" rel="noopener noreferrer">#4805</a></p></li><li><p>We have added the <code>to</code> operator that allows you to easily send data to most destinations. For example, you can now write <code>to &quot;ftps://example.com/file.json.gz&quot;</code> to automatically deduce the save operator, compression, and format.
<a href="https://github.com/tenzir/tenzir/pull/4805" target="_blank" rel="noopener noreferrer">#4805</a></p></li><li><p>You can use the new <code>subnet(string)</code> function to parse strings as subnets.
<a href="https://github.com/tenzir/tenzir/pull/4805" target="_blank" rel="noopener noreferrer">#4805</a></p></li><li><p>Several new options are now available for the <code>load_http</code> operator: <code>data</code>, <code>json</code>, <code>form</code>, <code>skip_peer_verification</code>, <code>skip_hostname_verification</code>, <code>chunked</code>, and <code>multipart</code>. The <code>skip_peer_verification</code> and <code>skip_hostname_verification</code> options are now also available for the <code>save_http</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4811" target="_blank" rel="noopener noreferrer">#4811</a></p></li><li><p>The <code>read_csv</code>, <code>read_kv</code>, <code>read_ssv</code>, <code>read_tsv</code> and <code>read_xsv</code> operators now support custom quote characters.
<a href="https://github.com/tenzir/tenzir/pull/4837" target="_blank" rel="noopener noreferrer">#4837</a></p></li><li><p>The <code>read_csv</code>, <code>read_ssv</code>, <code>read_tsv</code> and <code>read_xsv</code> operators support doubled quote escaping.
<a href="https://github.com/tenzir/tenzir/pull/4837" target="_blank" rel="noopener noreferrer">#4837</a></p></li><li><p>The <code>read_csv</code>, <code>read_ssv</code>, <code>read_tsv</code> and <code>read_xsv</code> operators now accept multi-character strings as separators.
<a href="https://github.com/tenzir/tenzir/pull/4837" target="_blank" rel="noopener noreferrer">#4837</a></p></li><li><p>The <code>list_sep</code> option for the <code>read_csv</code>, <code>read_ssv</code>, <code>read_tsv</code> and <code>read_xsv</code> operators can be set to an empty string, which will disable list parsing.
<a href="https://github.com/tenzir/tenzir/pull/4837" target="_blank" rel="noopener noreferrer">#4837</a></p></li><li><p>The new <code>string.parse_leef()</code> function can be used to parse a string as a LEEF message.
<a href="https://github.com/tenzir/tenzir/pull/4837" target="_blank" rel="noopener noreferrer">#4837</a></p></li><li><p>Start your Tenzir Node with <code>tenzir-node --tql2</code> or set the <code>TENZIR_TQL2=true</code> environment variable to enable TQL2-only mode for your node. In this mode, all pipelines will run as TQL2, with the old TQL1 pipelines only being available through the <code>legacy</code> operator. In Q1 2025, this option will be enabled by default, and later in 2025 the <code>legacy</code> operator and TQL1 support will be removed entirely.
<a href="https://github.com/tenzir/tenzir/pull/4840" target="_blank" rel="noopener noreferrer">#4840</a></p></li><li><p>Whether an IP address is contained in a subnet can now be checked using expressions such as <code>1.2.3.4 in 1.2.0.0/16</code>. Similarly, to check whether a subnet is included in another subnet, use <code>1.2.0.0/16 in 1.0.0.0/8</code>.
<a href="https://github.com/tenzir/tenzir/pull/4841" target="_blank" rel="noopener noreferrer">#4841</a></p></li><li><p>TQL2 now allows writing <code>x not in y</code> as an equivalent to <code>not (x in y)</code> for better readability.
<a href="https://github.com/tenzir/tenzir/pull/4844" target="_blank" rel="noopener noreferrer">#4844</a></p></li><li><p>The <code>save_email</code> now accepts a <code>tls</code> option to specify TLS usage when establishing the SMTP connection.
<a href="https://github.com/tenzir/tenzir/pull/4848" target="_blank" rel="noopener noreferrer">#4848</a></p></li><li><p>The <code>deduplicate</code> operator in TQL2 to help you remove events with a common key. The operator provides more flexibility than its TQL1 pendant by letting the common key use any expression, not just a field name. You can also control timeouts with finer granularity.
<a href="https://github.com/tenzir/tenzir/pull/4850" target="_blank" rel="noopener noreferrer">#4850</a></p></li><li><p>The <code>context::erase</code> operator allows you to selectively remove entries from contexts.
<a href="https://github.com/tenzir/tenzir/pull/4864" target="_blank" rel="noopener noreferrer">#4864</a></p></li><li><p>A new operator <code>to_opensearch</code> is now available for sending data to OpenSearch-compatible Bulk API providers including ElasticSearch.
<a href="https://github.com/tenzir/tenzir/pull/4871" target="_blank" rel="noopener noreferrer">#4871</a></p></li><li><p>The new <code>duration</code> function now allows to parse expressions resulting in strings as duration values.
<a href="https://github.com/tenzir/tenzir/pull/4877" target="_blank" rel="noopener noreferrer">#4877</a></p></li><li><p>Numbers and string expressions containing numbers can now be converted into <code>float</code> type values using the <code>float</code> function.
<a href="https://github.com/tenzir/tenzir/pull/4882" target="_blank" rel="noopener noreferrer">#4882</a></p></li><li><p>User-defined operators can now be written and used in TQL2. To use TQL2, start your definition with the comment <code>// tql2</code>, or use the <code>--tql2</code> flag to opt into TQL2 as the default.
<a href="https://github.com/tenzir/tenzir/pull/4884" target="_blank" rel="noopener noreferrer">#4884</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-14">Bug Fixes<a href="#bug-fixes-14" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Metadata such as <code>@name</code> can now be set to a dynamically computed value that does not have to be a constant. For example, if the field <code>event_name</code> should be used as the event name, <code>@name = event_name</code> now correctly assigns the events their name instead of using the first value.
<a href="https://github.com/tenzir/tenzir/pull/4839" target="_blank" rel="noopener noreferrer">#4839</a></p></li><li><p>The <code>endpoint</code> argument of the <code>save_email</code> operator was documented as optional but was not parsed as so. This has been fixed and the argument is now correctly optional.
<a href="https://github.com/tenzir/tenzir/pull/4848" target="_blank" rel="noopener noreferrer">#4848</a></p></li><li><p>Pipelines that begin with <code>export | where</code> followed by an expression that does not depend on the incoming events, such as <code>export | where 1 == 1</code>, no longer cause an internal error.
<a href="https://github.com/tenzir/tenzir/pull/4861" target="_blank" rel="noopener noreferrer">#4861</a></p></li><li><p>Warnings that happen very early during pipeline startup now correctly show up in the Tenzir Platform.
<a href="https://github.com/tenzir/tenzir/pull/4867" target="_blank" rel="noopener noreferrer">#4867</a></p></li><li><p><code>write_parquet</code> now gracefully handles nested empty records by replacing them with nulls. The Apache Parquet format does fundamentally not support empty nested records.
<a href="https://github.com/tenzir/tenzir/pull/4874" target="_blank" rel="noopener noreferrer">#4874</a></p></li><li><p>Operator invocations that directly use parenthesis but continue after the closing parenthesis are no longer rejected. For example, <code>where (x or y) and z</code> is now being parsed correctly.
<a href="https://github.com/tenzir/tenzir/pull/4885" target="_blank" rel="noopener noreferrer">#4885</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4241"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.24.1" target="_blank" rel="noopener noreferrer">v4.24.1</a><a href="#v4241" class="hash-link" aria-label="Direct link to v4241" title="Direct link to v4241">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-15">Bug Fixes<a href="#bug-fixes-15" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a rare crash on startup that would occur when starting the <code>tenzir-node</code> process was so slow that it would try to emit metrics before the component handling metrics was ready.
<a href="https://github.com/tenzir/tenzir/pull/4846" target="_blank" rel="noopener noreferrer">#4846</a></p></li><li><p>The TQL2 <code>nics</code> operator had a bug causing the operator name to be <code>nic</code>. This has now been fixed and works as documented.
<a href="https://github.com/tenzir/tenzir/pull/4847" target="_blank" rel="noopener noreferrer">#4847</a></p></li><li><p>We fixed the <code>last</code> aggregation function to return the last element.
<a href="https://github.com/tenzir/tenzir/pull/4855" target="_blank" rel="noopener noreferrer">#4855</a></p></li><li><p>We fixed a bug introduced with v4.24.0 causing crashes on startup when some of the files in the node&#x27;s state directory were smaller than 12 bytes.
<a href="https://github.com/tenzir/tenzir/pull/4856" target="_blank" rel="noopener noreferrer">#4856</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4240"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.24.0" target="_blank" rel="noopener noreferrer">v4.24.0</a><a href="#v4240" class="hash-link" aria-label="Direct link to v4240" title="Direct link to v4240">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-9">Changes<a href="#changes-9" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The topics provided to the <code>publish</code> and <code>subscribe</code> operators now exactly match the <code>topic</code> field in the corresponding metrics.
<a href="https://github.com/tenzir/tenzir/pull/4738" target="_blank" rel="noopener noreferrer">#4738</a></p></li><li><p>Using <code>publish</code> and <code>subscribe</code> without an explicitly provided topic now uses the topic <code>main</code> as opposed to an implementation-defined special name.
<a href="https://github.com/tenzir/tenzir/pull/4738" target="_blank" rel="noopener noreferrer">#4738</a></p></li><li><p>The usage string that is reported when an operator or function is being used incorrectly now uses the same format as the documentation.
<a href="https://github.com/tenzir/tenzir/pull/4740" target="_blank" rel="noopener noreferrer">#4740</a></p></li><li><p>The functions <code>ocsf_category_name</code>, <code>ocsf_category_uid</code>, <code>ocsf_class_name</code>, and <code>ocsf_class_uid</code> are now called <code>ocsf::category_name</code>, <code>ocsf::category_uid</code>, <code>ocsf::class_name</code>, and <code>ocsf::class_uid</code>, respectively. Similarly, the <code>package_add</code>, <code>package_remove</code>, <code>packages</code>, and <code>show pipelines</code> operators are now called <code>package::add</code>, <code>package::remove</code>, <code>package::list</code>, and <code>pipeline::list</code>, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4741" target="_blank" rel="noopener noreferrer">#4741</a>
<a href="https://github.com/tenzir/tenzir/pull/4746" target="_blank" rel="noopener noreferrer">#4746</a></p></li><li><p>The <code>cache</code> operator&#x27;s <code>ttl</code> and <code>max_ttl</code> options are now called <code>read_timeout</code> and <code>write_timeout</code>, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4758" target="_blank" rel="noopener noreferrer">#4758</a></p></li><li><p>The option <code>ndjson</code> for <code>write_json</code> operator has been removed in favor of a new operator <code>write_ndjson</code>.
<a href="https://github.com/tenzir/tenzir/pull/4762" target="_blank" rel="noopener noreferrer">#4762</a></p></li><li><p>The <code>tls_no_verify</code> option of the <code>to_splunk</code> operator is now called <code>skip_peer_verification</code>.
<a href="https://github.com/tenzir/tenzir/pull/4825" target="_blank" rel="noopener noreferrer">#4825</a></p></li><li><p>The new <code>string</code> function now replaces the <code>str</code> function. The older <code>str</code> name will be available as an alias for some time for compatibility but will be removed in a future release.
<a href="https://github.com/tenzir/tenzir/pull/4834" target="_blank" rel="noopener noreferrer">#4834</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-16">Features<a href="#features-16" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>parse_time</code> and <code>format_time</code> functions transform strings into timestamps and vice versa.
<a href="https://github.com/tenzir/tenzir/pull/4576" target="_blank" rel="noopener noreferrer">#4576</a></p></li><li><p>The following operators are now available in TQL2 for loading and saving: <code>load_amqp</code>, <code>save_amqp</code>, <code>load_ftp</code>, <code>save_ftp</code>, <code>load_nic</code>, <code>load_s3</code>, <code>save_s3</code>, <code>load_sqs</code>, <code>save_sqs</code>, <code>load_udp</code>, <code>save_udp</code>, <code>load_zmq</code>, <code>save_zmq</code>, <code>save_tcp</code> and <code>save_email</code>.
<a href="https://github.com/tenzir/tenzir/pull/4716" target="_blank" rel="noopener noreferrer">#4716</a>
<a href="https://github.com/tenzir/tenzir/pull/4807" target="_blank" rel="noopener noreferrer">#4807</a></p></li><li><p>The following new operators are available in TQL2 to convert event streams to byte streams in various formats: <code>write_csv</code>, <code>write_feather</code>, <code>write_json</code>, <code>write_lines</code>, <code>write_ndjson</code>, <code>write_parquet</code>, <code>write_pcap</code>, <code>write_ssv</code>, <code>write_tsv</code>, <code>write_xsv</code>, <code>write_yaml</code>, <code>write_zeek_tsv</code>.
<a href="https://github.com/tenzir/tenzir/pull/4716" target="_blank" rel="noopener noreferrer">#4716</a>
<a href="https://github.com/tenzir/tenzir/pull/4807" target="_blank" rel="noopener noreferrer">#4807</a></p></li><li><p>The <code>unroll</code> operator is now available in TQL2. It takes a field of type list, and duplicates the surrounding event for every element of the list.
<a href="https://github.com/tenzir/tenzir/pull/4736" target="_blank" rel="noopener noreferrer">#4736</a></p></li><li><p>The <code>decapsulate</code> function now handles SLL2 frames (Linux cooked capture encapsulation).
<a href="https://github.com/tenzir/tenzir/pull/4744" target="_blank" rel="noopener noreferrer">#4744</a></p></li><li><p>The contexts feature is now available in TQL2. It has undergone significant changes to make use of TQL2&#x27;s more powerful expressions. Contexts are shared between TQL1 and TQL2 pipelines. All operators are grouped in the <code>context</code> module, including the <code>enrich</code> and <code>show contexts</code> operators, which are now called <code>context::enrich</code> and <code>context::list</code>, respectively. To create a new context, use the <code>context::create_lookup_table</code>, <code>context::create_bloom_filter</code>, or <code>context::create_geoip</code> operators.
<a href="https://github.com/tenzir/tenzir/pull/4753" target="_blank" rel="noopener noreferrer">#4753</a></p></li><li><p>Lookup table contexts now support separate create, write, and read timeouts via the <code>create_timeout</code>, <code>write_timeout</code>, and <code>read_timeout</code> options, respectively. The options are exclusive to contexts updated with TQL2&#x27;s <code>context::update</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4753" target="_blank" rel="noopener noreferrer">#4753</a></p></li><li><p>The <code>--limit</code> option for the TQL1 <code>chart</code> operator controls the previously hardcoded upper limit on the number of events in a chart. The option defaults to 10,000 events.
<a href="https://github.com/tenzir/tenzir/pull/4757" target="_blank" rel="noopener noreferrer">#4757</a></p></li><li><p>The <code>&lt;list&gt;.map(&lt;capture&gt;, &lt;expression&gt;)</code> function replaces each value from <code>&lt;list&gt;</code> with the value from <code>&lt;expression&gt;</code>. Within <code>&lt;expression&gt;</code>, the elements are available as <code>&lt;capture&gt;</code>. For example, to add 5 to all elements in the list <code>xs</code>, use <code>xs = xs.map(x, x + 5)</code>.
<a href="https://github.com/tenzir/tenzir/pull/4788" target="_blank" rel="noopener noreferrer">#4788</a></p></li><li><p>The <code>&lt;list&gt;.where(&lt;capture&gt;, &lt;predicate&gt;)</code> removes all elements from <code>&lt;list&gt;</code> for which the <code>&lt;predicate&gt;</code> evaluates to <code>false</code>. Within <code>&lt;predicate&gt;</code>, the elements are available as <code>&lt;capture&gt;</code>. For example, to remove all elements smaller than 3 from the list <code>xs</code>, use <code>xs = xs.where(x, x &gt;= 3)</code>.
<a href="https://github.com/tenzir/tenzir/pull/4788" target="_blank" rel="noopener noreferrer">#4788</a></p></li><li><p>The new <code>append</code>, <code>prepend</code>, and <code>concatenate</code> functions add an element to the end of a list, to the front of a list, and merge two lists, respectively. <code>xs.append(y)</code> is equivalent to <code>[...xs, y]</code>, <code>xs.prepend(y)</code> is equivalent to <code>[y, ...xs]</code>, and <code>concatenate(xs, ys)</code> is equivalent to <code>[...xs, ..ys]</code>.
<a href="https://github.com/tenzir/tenzir/pull/4792" target="_blank" rel="noopener noreferrer">#4792</a></p></li><li><p>The function <code>otherwise(primary:any, fallback:any)</code> provides a simple way to specify a <code>fallback</code> expression when the <code>primary</code> expression evaluates to <code>null</code>.
<a href="https://github.com/tenzir/tenzir/pull/4794" target="_blank" rel="noopener noreferrer">#4794</a></p></li><li><p>Indexing records with string expressions is now supported.
<a href="https://github.com/tenzir/tenzir/pull/4795" target="_blank" rel="noopener noreferrer">#4795</a></p></li><li><p>The <code>split</code> and <code>split_regex</code> functions split a string into a list of strings based on a delimiter or a regular expression, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4799" target="_blank" rel="noopener noreferrer">#4799</a></p></li><li><p>The <code>join</code> aggregation function concatenates a strings into a single string, optionally separated by a delimiter.
<a href="https://github.com/tenzir/tenzir/pull/4799" target="_blank" rel="noopener noreferrer">#4799</a></p></li><li><p>The <code>zip</code> function merges two lists into a single list of a record with two fields <code>left</code> and <code>right</code>. For example, <code>zip([1, 2], [3, 4])</code> returns <code>[{left: 1, right: 3}, {left: 2, right: 4}]</code>.
<a href="https://github.com/tenzir/tenzir/pull/4803" target="_blank" rel="noopener noreferrer">#4803</a></p></li><li><p>The new functions <code>encode_base64</code> and <code>decode_base64</code> encode and decode blobs and strings as Base64.
<a href="https://github.com/tenzir/tenzir/pull/4806" target="_blank" rel="noopener noreferrer">#4806</a></p></li><li><p>The functions <code>encode_hex</code> and <code>decode_hex</code> transform strings and blobs to/from their hexadecimal byte representation.
<a href="https://github.com/tenzir/tenzir/pull/4815" target="_blank" rel="noopener noreferrer">#4815</a></p></li><li><p>Aggregation functions now work on lists. For example, <code>[1, 2, 3].sum()</code> will return <code>6</code>, and <code>[&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;].map(x, x == &quot;bar&quot;).any()</code> will return <code>true</code>.
<a href="https://github.com/tenzir/tenzir/pull/4821" target="_blank" rel="noopener noreferrer">#4821</a></p></li><li><p>The <code>to_splunk</code> operator now supports the <code>cacert</code>, <code>certfile</code>, and <code>keyfile</code> options to provide certificates for the TLS connection.
<a href="https://github.com/tenzir/tenzir/pull/4825" target="_blank" rel="noopener noreferrer">#4825</a></p></li><li><p>The <code>network</code> function returns the network address of a CIDR subnet. For example, <code>192.168.0.0/16.network()</code> returns <code>192.168.0.0</code>.
<a href="https://github.com/tenzir/tenzir/pull/4828" target="_blank" rel="noopener noreferrer">#4828</a></p></li><li><p>The <code>local</code> and <code>remote</code> operators allow for overriding the location of a pipeline. Local operators prefer running at a client <code>tenzir</code> process, and remote operators prefer running at a remote <code>tenzir-node</code> process. These operators are primarily intended for testing purposes.
<a href="https://github.com/tenzir/tenzir/pull/4835" target="_blank" rel="noopener noreferrer">#4835</a></p></li><li><p>The <code>unordered</code> operator throws away the order of events in a pipeline. This causes some operators to run faster, e.g., <code>read_ndjson</code> is able to parse events out of order through this. This operator is primarily intended for testing purposes, as most of the time the ordering requirements are inferred from subsequent operators in the pipeline.
<a href="https://github.com/tenzir/tenzir/pull/4835" target="_blank" rel="noopener noreferrer">#4835</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-16">Bug Fixes<a href="#bug-fixes-16" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The docs for the <code>sqs</code> connector now correctly reflect the default of <code>3s</code> for the <code>--poll-time</code> option.
<a href="https://github.com/tenzir/tenzir/pull/4716" target="_blank" rel="noopener noreferrer">#4716</a></p></li><li><p><code>context inspect</code> crashed when used to inspect a context that was previously updated with <code>context update</code> with an input containing a field of type <code>enum</code>. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4746" target="_blank" rel="noopener noreferrer">#4746</a></p></li><li><p>The last metric emitted for each run of the <code>enrich</code> operator was incorrectly named <code>tenzir.enrich.metrics</code> instead of <code>tenzir.metrics.enrich</code>, causing it not to be available via <code>metrics enrich</code>.
<a href="https://github.com/tenzir/tenzir/pull/4753" target="_blank" rel="noopener noreferrer">#4753</a></p></li><li><p>The <code>enumerate</code> operator now correctly prepends the added index field instead of appending it.
<a href="https://github.com/tenzir/tenzir/pull/4756" target="_blank" rel="noopener noreferrer">#4756</a></p></li><li><p>It is no longer possible to manually remove contexts that are installed as part of a package.
<a href="https://github.com/tenzir/tenzir/pull/4768" target="_blank" rel="noopener noreferrer">#4768</a></p></li><li><p>The <code>to_hive</code> operator now correctly writes files relative to the working directory of a <code>tenzir</code> client process instead of relative to the node.
<a href="https://github.com/tenzir/tenzir/pull/4771" target="_blank" rel="noopener noreferrer">#4771</a></p></li><li><p>The <code>read_ndjson</code> operator no longer uses an error-prone mechanism to continue parsing an NDJSON line that contains an error. Instead, the entire line is skipped.
<a href="https://github.com/tenzir/tenzir/pull/4801" target="_blank" rel="noopener noreferrer">#4801</a></p></li><li><p>The <code>str</code> function no longer adds extra quotes when given a string. For example, <code>str(&quot;&quot;) == &quot;\&quot;\&quot;&quot;</code> was changed to <code>str(&quot;&quot;) == &quot;&quot;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4809" target="_blank" rel="noopener noreferrer">#4809</a></p></li><li><p>The TQL1 and TQL2 <code>sockets</code> operators no longer crash on specific builds.
<a href="https://github.com/tenzir/tenzir/pull/4816" target="_blank" rel="noopener noreferrer">#4816</a></p></li><li><p>The <code>max_content_length</code> option for the <code>to_splunk</code> operator was named incorrectly in an earlier version to <code>send_timeout</code>. This has now been fixed.
<a href="https://github.com/tenzir/tenzir/pull/4825" target="_blank" rel="noopener noreferrer">#4825</a></p></li><li><p>We fixed an oversight in the syslog parsers, which caused it to not yield an event until the next line came in.
<a href="https://github.com/tenzir/tenzir/pull/4829" target="_blank" rel="noopener noreferrer">#4829</a></p></li><li><p>The TQL2 <code>save_http</code> operator had a bug causing it to fail to connect and get stuck in an infinite loop. This is now fixed and works as expected.
<a href="https://github.com/tenzir/tenzir/pull/4833" target="_blank" rel="noopener noreferrer">#4833</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4231"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.23.1" target="_blank" rel="noopener noreferrer">v4.23.1</a><a href="#v4231" class="hash-link" aria-label="Direct link to v4231" title="Direct link to v4231">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-17">Bug Fixes<a href="#bug-fixes-17" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The node doesn&#x27;t try to recreate its cache directory on startup anymore, avoiding permissions issues on systems with strict access control.
<a href="https://github.com/tenzir/tenzir/pull/4742" target="_blank" rel="noopener noreferrer">#4742</a></p></li><li><p>The <code>docker compose</code> setup now uses separate local volumes for each <code>tenzir</code> directory. This fixes a bug where restarting the container resets installed packages or pipelines.
<a href="https://github.com/tenzir/tenzir/pull/4749" target="_blank" rel="noopener noreferrer">#4749</a></p></li><li><p>The <code>parquet</code> plugin is now available in the <code>tenzir/tenzir</code> and <code>tenzir/tenzir-node</code> Docker images.
<a href="https://github.com/tenzir/tenzir/pull/4760" target="_blank" rel="noopener noreferrer">#4760</a></p></li><li><p>We fixed a bug in the kafka plugin so that it no longer wrongly splits config options from the <code>yaml</code> files at the dot character.
<a href="https://github.com/tenzir/tenzir/pull/4761" target="_blank" rel="noopener noreferrer">#4761</a></p></li><li><p>We fixed a crash in pipelines that use the <code>export</code> operator and a subsequent <code>where</code> filter with certain expressions.
<a href="https://github.com/tenzir/tenzir/pull/4774" target="_blank" rel="noopener noreferrer">#4774</a></p></li><li><p>We fixed a bug causing the <code>syslog</code> parser to never yield events until the input stream ended.
<a href="https://github.com/tenzir/tenzir/pull/4777" target="_blank" rel="noopener noreferrer">#4777</a></p></li><li><p>We fixed a bug in TQL2&#x27;s <code>where</code> operator that made it sometimes return incorrect results for events for which the predicate evaluated to <code>null</code>. Now, the operator consistently warns when this happens and drops the events.
<a href="https://github.com/tenzir/tenzir/pull/4785" target="_blank" rel="noopener noreferrer">#4785</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4230"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.23.0" target="_blank" rel="noopener noreferrer">v4.23.0</a><a href="#v4230" class="hash-link" aria-label="Direct link to v4230" title="Direct link to v4230">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-10">Changes<a href="#changes-10" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>We renamed the TQL2 <code>azure_log_analytics</code> operator to <code>to_azure_log_analytics</code>.
<a href="https://github.com/tenzir/tenzir/pull/4726" target="_blank" rel="noopener noreferrer">#4726</a></p></li><li><p>We renamed the TQL2 <code>velociraptor</code> operator to <code>from_velociraptor</code>.
<a href="https://github.com/tenzir/tenzir/pull/4726" target="_blank" rel="noopener noreferrer">#4726</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-17">Features<a href="#features-17" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The relational operator <code>in</code> now supports checking for existence of an element in a list. For example, <code>where x in [&quot;important&quot;, &quot;values&quot;]</code> is functionally equivalent to <code>where x == &quot;important&quot; or x == &quot;values&quot;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4691" target="_blank" rel="noopener noreferrer">#4691</a></p></li><li><p>We&#x27;ve added new hash functions for commonly used algorithms: <code>hash_md5</code>, <code>hash_sha1</code>, <code>hash_sha224</code>, <code>hash_sha256</code>, <code>hash_sha384</code>, <code>hash_sha512</code>, <code>hash_xxh3</code>.
<a href="https://github.com/tenzir/tenzir/pull/4705" target="_blank" rel="noopener noreferrer">#4705</a></p></li><li><p><code>ceil</code> and <code>floor</code> join the existing <code>round</code> function for rounding numbers, durations, and timestamps upwards and downwards, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4712" target="_blank" rel="noopener noreferrer">#4712</a></p></li><li><p>The new <code>to_splunk</code> sink operator writes data to Splunk HEC endpoint.
<a href="https://github.com/tenzir/tenzir/pull/4719" target="_blank" rel="noopener noreferrer">#4719</a></p></li><li><p>The new <code>load_balance</code> operator distributes events over a set of subpipelines.
<a href="https://github.com/tenzir/tenzir/pull/4720" target="_blank" rel="noopener noreferrer">#4720</a></p></li><li><p>New <code>load_kafka</code> and <code>save_kafka</code> operators enable seamless integration with Apache Kafka in TQL2.
<a href="https://github.com/tenzir/tenzir/pull/4725" target="_blank" rel="noopener noreferrer">#4725</a></p></li><li><p>The spread syntax <code>...</code> can now be used inside lists to expand one list into another. For example, <code>[1, ...[2, 3]]</code> evaluates to <code>[1, 2, 3]</code>.
<a href="https://github.com/tenzir/tenzir/pull/4729" target="_blank" rel="noopener noreferrer">#4729</a></p></li><li><p>TQL now supports &quot;universal function call syntax,&quot; which means that every method is callable as a function and every function with at least one positional argument is callable as a method.
<a href="https://github.com/tenzir/tenzir/pull/4730" target="_blank" rel="noopener noreferrer">#4730</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-18">Bug Fixes<a href="#bug-fixes-18" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>TQL2&#x27;s <code>summarize</code> now returns a single event when used with no groups and no input events just like in TQL1, making <code>from [] | summarize count=count()</code> return <code>{count: 0}</code> instead of nothing.
<a href="https://github.com/tenzir/tenzir/pull/4709" target="_blank" rel="noopener noreferrer">#4709</a></p></li><li><p>We eliminated a rare crash in the <code>serve</code> operator that was introduced in v4.20.3.
<a href="https://github.com/tenzir/tenzir/pull/4715" target="_blank" rel="noopener noreferrer">#4715</a></p></li><li><p>The <code>str</code> function no longer returns the numeric index of an enumeration value. Instead, the result is now the actual name associated with that value.
<a href="https://github.com/tenzir/tenzir/pull/4717" target="_blank" rel="noopener noreferrer">#4717</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4222"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.22.2" target="_blank" rel="noopener noreferrer">v4.22.2</a><a href="#v4222" class="hash-link" aria-label="Direct link to v4222" title="Direct link to v4222">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-18">Features<a href="#features-18" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>value_counts</code> aggregation function returns a list of values and their frequency.
<a href="https://github.com/tenzir/tenzir/pull/4701" target="_blank" rel="noopener noreferrer">#4701</a></p></li><li><p>The new <code>sort</code> method sorts fields in records by name and lists by values.
<a href="https://github.com/tenzir/tenzir/pull/4704" target="_blank" rel="noopener noreferrer">#4704</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-19">Bug Fixes<a href="#bug-fixes-19" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug that sometimes prevented incoming connections from <code>load_tcp</code> from closing properly.
<a href="https://github.com/tenzir/tenzir/pull/4674" target="_blank" rel="noopener noreferrer">#4674</a></p></li><li><p>The <code>google-cloud-pubsub</code> connector and TQL2 operators <code>load_google_cloud_pubsub</code> <code>save_google_cloud_pubsub</code> operators are now available in the Docker image.
<a href="https://github.com/tenzir/tenzir/pull/4690" target="_blank" rel="noopener noreferrer">#4690</a></p></li><li><p>We fixed a bug that caused the <code>mode</code> aggregation function to sometimes ignore some input values.
<a href="https://github.com/tenzir/tenzir/pull/4701" target="_blank" rel="noopener noreferrer">#4701</a></p></li><li><p>We fixed a bug in the <code>buffer</code> operator that caused it to break when restarting a pipeline or using multiple buffers in a &quot;parallel&quot; context, such as in <code>load_tcp</code>&#x27;s pipeline argument.
<a href="https://github.com/tenzir/tenzir/pull/4702" target="_blank" rel="noopener noreferrer">#4702</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4221"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.22.1" target="_blank" rel="noopener noreferrer">v4.22.1</a><a href="#v4221" class="hash-link" aria-label="Direct link to v4221" title="Direct link to v4221">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-19">Features<a href="#features-19" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>We added three new, TQL2-exclusive aggregation functions: <code>first</code>, <code>last</code>, and <code>mode</code>. The functions return the first, last, and most common non-null value per group, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4679" target="_blank" rel="noopener noreferrer">#4679</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-20">Bug Fixes<a href="#bug-fixes-20" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>/serve</code> endpoint now returns instantly when its pipeline fails before the endpoint is used for the first time. In the Tenzir Platform this causes the load more button in the Explorer to correctly stop showing for pipelines that fail shortly after starting.
<a href="https://github.com/tenzir/tenzir/pull/4688" target="_blank" rel="noopener noreferrer">#4688</a></p></li><li><p>The boolean operators <code>and</code>/<code>or</code> now work correctly for the type <code>null</code>. Previously, <code>null and false</code> evaluated to <code>null</code>, and a warning was emitted. Now, it evaluates to <code>false</code> without a warning.
<a href="https://github.com/tenzir/tenzir/pull/4689" target="_blank" rel="noopener noreferrer">#4689</a></p></li><li><p>Using the <code>tenzir</code> process from multiple users on the same host sometimes failed because the cache directory was not writable for all users. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4694" target="_blank" rel="noopener noreferrer">#4694</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4220"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.22.0" target="_blank" rel="noopener noreferrer">v4.22.0</a><a href="#v4220" class="hash-link" aria-label="Direct link to v4220" title="Direct link to v4220">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-20">Features<a href="#features-20" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>google-cloud-pubsub</code> connectors allow subscribing to a Google Cloud Pub/Sub subscription and publishing to a Google Cloud Pub/Sub topic.
<a href="https://github.com/tenzir/tenzir/pull/4656" target="_blank" rel="noopener noreferrer">#4656</a></p></li><li><p>We added low-level actor metrics that help admins track the system health over time.
<a href="https://github.com/tenzir/tenzir/pull/4668" target="_blank" rel="noopener noreferrer">#4668</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-21">Bug Fixes<a href="#bug-fixes-21" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug in the HTTP connectors, that caused them to not respect the http response codes.
<a href="https://github.com/tenzir/tenzir/pull/4660" target="_blank" rel="noopener noreferrer">#4660</a></p></li><li><p>The node now wipes its cache directory whenever it restarts.
<a href="https://github.com/tenzir/tenzir/pull/4669" target="_blank" rel="noopener noreferrer">#4669</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4211"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.21.1" target="_blank" rel="noopener noreferrer">v4.21.1</a><a href="#v4211" class="hash-link" aria-label="Direct link to v4211" title="Direct link to v4211">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-21">Features<a href="#features-21" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>A new <code>sample</code> operator now provides the ability to dynamically sample input data based on the frequency of the receiving events allowing relative sampling in situations of varying load.
<a href="https://github.com/tenzir/tenzir/pull/4645" target="_blank" rel="noopener noreferrer">#4645</a></p></li><li><p>The <code>grok</code> parser now allows better control over the schema inference.
<a href="https://github.com/tenzir/tenzir/pull/4657" target="_blank" rel="noopener noreferrer">#4657</a></p></li><li><p>The <code>grok</code> parser can now be directly used when reading input, allowing for <code>read grok</code>.
<a href="https://github.com/tenzir/tenzir/pull/4657" target="_blank" rel="noopener noreferrer">#4657</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-22">Bug Fixes<a href="#bug-fixes-22" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug that sometimes caused the <code>tenzir-node</code> process to hang on shutdown. This was most likely to happen when the node shut down immediately after starting up, e.g., because of an invalid configuration file.
<a href="https://github.com/tenzir/tenzir/pull/4613" target="_blank" rel="noopener noreferrer">#4613</a></p></li><li><p>Fixed a bug in the python operator that could lead to random valid file descriptors in the parent process being closed prematurely.
<a href="https://github.com/tenzir/tenzir/pull/4646" target="_blank" rel="noopener noreferrer">#4646</a></p></li><li><p>The <code>azure-blob-storage</code> connector is now also available in the static linux binary distributions.
<a href="https://github.com/tenzir/tenzir/pull/4649" target="_blank" rel="noopener noreferrer">#4649</a></p></li><li><p>We fixed a bug that caused the <code>context_updates</code> field in <code>metrics lookup</code> to be reported once per field specified in the corresponding <code>lookup</code> operator instead of being reported once per operator in total.
<a href="https://github.com/tenzir/tenzir/pull/4655" target="_blank" rel="noopener noreferrer">#4655</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4210"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.21.0" target="_blank" rel="noopener noreferrer">v4.21.0</a><a href="#v4210" class="hash-link" aria-label="Direct link to v4210" title="Direct link to v4210">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-11">Changes<a href="#changes-11" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The JSON parser&#x27;s <code>--precise</code> option is now deprecated, as the &quot;precise&quot; mode is the new default. Use <code>--merge</code> to get the previous &quot;imprecise&quot; behavior.
<a href="https://github.com/tenzir/tenzir/pull/4527" target="_blank" rel="noopener noreferrer">#4527</a></p></li><li><p>The JSON parser&#x27;s <code>--no-infer</code> option has been renamed to <code>--schema-only</code>. The old name is deprecated and will be removed in the future.
<a href="https://github.com/tenzir/tenzir/pull/4527" target="_blank" rel="noopener noreferrer">#4527</a></p></li><li><p>We removed the unused <code>--snapshot</code> option from the <code>lookup</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4613" target="_blank" rel="noopener noreferrer">#4613</a></p></li><li><p>Tenzir&#x27;s internal wire format <code>bitz</code> is now considered stable. Note that the format underwent significant changes as part of its stabilization, and is incompatible with <code>bitz</code> from Tenzir Node v4.20 and older.
<a href="https://github.com/tenzir/tenzir/pull/4633" target="_blank" rel="noopener noreferrer">#4633</a></p></li><li><p>The <code>lookup</code> operator now prefers recent data in searches for lookups against historical data instead of using the order in which context updates arrive.
<a href="https://github.com/tenzir/tenzir/pull/4636" target="_blank" rel="noopener noreferrer">#4636</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-22">Features<a href="#features-22" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The CEF, CSV, GELF, JSON, KV, LEEF, Suricata, Syslog, XSV, YAML and Zeek JSON parsers now properly adhere to the schema of the read data. Previously, parsers would merge heterogeneous input into a single, growing schema, inserting nulls for fields that did not exist in some events.
<a href="https://github.com/tenzir/tenzir/pull/4527" target="_blank" rel="noopener noreferrer">#4527</a></p></li><li><p>The <code>fluent-bit</code> source now properly adheres to the schema of the read data.
<a href="https://github.com/tenzir/tenzir/pull/4527" target="_blank" rel="noopener noreferrer">#4527</a></p></li><li><p>The CEF, CSV, GELF, JSON, KV, LEEF, Suricata, Syslog, XSV, YAML and Zeek JSON parsers now all support the <code>--schema</code>, <code>--selector</code> flags to parse their data according to some given schema, as well as various other flags to more precisely control their output schema.
<a href="https://github.com/tenzir/tenzir/pull/4527" target="_blank" rel="noopener noreferrer">#4527</a></p></li><li><p><code>metrics tcp</code> shows metrics for TCP connections, emitted once every second per connection. The metrics contains the reads and writes on the socket and the number of bytes transmitted.
<a href="https://github.com/tenzir/tenzir/pull/4564" target="_blank" rel="noopener noreferrer">#4564</a></p></li><li><p>The JSON parser is now able to also handle extremely large events when not using the NDJSON or GELF mode.
<a href="https://github.com/tenzir/tenzir/pull/4590" target="_blank" rel="noopener noreferrer">#4590</a></p></li><li><p>The <code>kv</code> parser now allows for keys and values to be enclosed in double quotes: Split matches within quotes will not be considered. Quotes will be trimmed of keys and values. For example <code>&quot;key&quot;=&quot;nested = value, fun&quot;</code> will now successfully parse as <code>{ &quot;key&quot; : &quot;nested = value, fun&quot; }</code>.
<a href="https://github.com/tenzir/tenzir/pull/4591" target="_blank" rel="noopener noreferrer">#4591</a></p></li><li><p>The <code>buffer</code> operator now works with bytes inputs in addition to the existing support for events inputs.
<a href="https://github.com/tenzir/tenzir/pull/4594" target="_blank" rel="noopener noreferrer">#4594</a></p></li><li><p>The <code>lines</code> parser can now handle null delimited &quot;lines&quot; with the <code>--null</code> flag.
<a href="https://github.com/tenzir/tenzir/pull/4603" target="_blank" rel="noopener noreferrer">#4603</a></p></li><li><p>The new <code>azure-blob-storage</code> connector allows reading from and writing to Azure Blob Storage via an URI.
<a href="https://github.com/tenzir/tenzir/pull/4617" target="_blank" rel="noopener noreferrer">#4617</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-23">Bug Fixes<a href="#bug-fixes-23" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed various edge cases in parsers where values would not be properly parsed as typed data and were stored as plain text instead. No input data was lost, but no valuable type information was gained either.
<a href="https://github.com/tenzir/tenzir/pull/4527" target="_blank" rel="noopener noreferrer">#4527</a></p></li><li><p>The <code>import</code> and <code>partitions</code> operators and the <code>tenzir-ctl rebuild</code> command no longer occasionally fail with request timeouts when the node is under high load.
<a href="https://github.com/tenzir/tenzir/pull/4597" target="_blank" rel="noopener noreferrer">#4597</a></p></li><li><p>We fixed an accidentally quadratic scaling with the number of top-level array elements in <code>read json --arrays-of-objects</code>. As a result, using this option will now be much faster.
<a href="https://github.com/tenzir/tenzir/pull/4601" target="_blank" rel="noopener noreferrer">#4601</a></p></li><li><p>Pipelines starting with <code>from tcp</code> no longer enter the failed state when an error occurrs in one of the connections.
<a href="https://github.com/tenzir/tenzir/pull/4602" target="_blank" rel="noopener noreferrer">#4602</a></p></li><li><p>We fixed a very rare crash in the zero-copy parser implementation of <code>read feather</code> and <code>read parquet</code> that was caused by releasing shared memory too early.
<a href="https://github.com/tenzir/tenzir/pull/4633" target="_blank" rel="noopener noreferrer">#4633</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4203"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.20.3" target="_blank" rel="noopener noreferrer">v4.20.3</a><a href="#v4203" class="hash-link" aria-label="Direct link to v4203" title="Direct link to v4203">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-24">Bug Fixes<a href="#bug-fixes-24" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug where the <code>export</code>, <code>metrics</code>, and <code>diagnostics</code> operators were sometimes missing events from up to the last 30 seconds. In the Tenzir Platform, this showed itself as a gap in activity sparkbars upon loading the page.
<a href="https://github.com/tenzir/tenzir/pull/4583" target="_blank" rel="noopener noreferrer">#4583</a></p></li><li><p>The <code>/serve</code> endpoint now gracefully handles retried requests with the same continuation token, returning the same result for each request.
<a href="https://github.com/tenzir/tenzir/pull/4585" target="_blank" rel="noopener noreferrer">#4585</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4202"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.20.2" target="_blank" rel="noopener noreferrer">v4.20.2</a><a href="#v4202" class="hash-link" aria-label="Direct link to v4202" title="Direct link to v4202">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-25">Bug Fixes<a href="#bug-fixes-25" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The empty record type is no longer rejected in schema definitions.
<a href="https://github.com/tenzir/tenzir/pull/4558" target="_blank" rel="noopener noreferrer">#4558</a></p></li><li><p>We fixed a bug that caused the Demo Node package not to be pre-installed correctly when using the <code>tenzir/tenzir-demo</code> Docker image.
<a href="https://github.com/tenzir/tenzir/pull/4559" target="_blank" rel="noopener noreferrer">#4559</a></p></li><li><p>We fixed a potential crash in the <code>csv</code>, <code>ssv</code>, and <code>tsv</code> parsers for slowly arriving inputs.
<a href="https://github.com/tenzir/tenzir/pull/4570" target="_blank" rel="noopener noreferrer">#4570</a></p></li><li><p>The <code>azure-log-analytics</code> operator sometimes errored on startup complaining about am unknown <code>window</code> option. This no longer occurs.
<a href="https://github.com/tenzir/tenzir/pull/4578" target="_blank" rel="noopener noreferrer">#4578</a></p></li><li><p>Restarting pipelines with the <code>udp</code> connector no longer fails to bind to the socket.
<a href="https://github.com/tenzir/tenzir/pull/4579" target="_blank" rel="noopener noreferrer">#4579</a></p></li><li><p>The systemd unit now allows binding to privileged ports by default via the ambient capability <code>CAP_NET_BIND_SERVICE</code>.
<a href="https://github.com/tenzir/tenzir/pull/4580" target="_blank" rel="noopener noreferrer">#4580</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4201"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.20.1" target="_blank" rel="noopener noreferrer">v4.20.1</a><a href="#v4201" class="hash-link" aria-label="Direct link to v4201" title="Direct link to v4201">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-26">Bug Fixes<a href="#bug-fixes-26" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>We fixed a regression introduced with Tenzir v4.20 that sometimes caused the Tenzir Platform to fail to fetch results from pipelines.
<a href="https://github.com/tenzir/tenzir/pull/4554" target="_blank" rel="noopener noreferrer">#4554</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4200"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.20.0" target="_blank" rel="noopener noreferrer">v4.20.0</a><a href="#v4200" class="hash-link" aria-label="Direct link to v4200" title="Direct link to v4200">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-12">Changes<a href="#changes-12" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The previously deprecated legacy metrics system configured via the <code>tenzir.metrics</code> configuration section no longer exists. Use the <code>metrics</code> operator instead.
<a href="https://github.com/tenzir/tenzir/pull/4381" target="_blank" rel="noopener noreferrer">#4381</a></p></li><li><p><code>lookup</code> metrics no longer contain the <code>snapshot</code> field; instead, the values show in the <code>retro</code> field.
<a href="https://github.com/tenzir/tenzir/pull/4381" target="_blank" rel="noopener noreferrer">#4381</a></p></li><li><p>The <code>show</code> operator is deprecated. Use the operator <code>&lt;aspect&gt;</code> instead of <code>show &lt;aspect&gt;</code>. The information from <code>show dependencies</code> and <code>show build</code> is now available in the <code>version</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4455" target="_blank" rel="noopener noreferrer">#4455</a>
<a href="https://github.com/tenzir/tenzir/pull/4549" target="_blank" rel="noopener noreferrer">#4549</a></p></li><li><p>The <code>lines</code> printer now does not perform any escaping and is no longer an alias to the <code>ssv</code> printer. Additionally, nulls are skipped, instead of being printed as <code>-</code>.
<a href="https://github.com/tenzir/tenzir/pull/4520" target="_blank" rel="noopener noreferrer">#4520</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-23">Features<a href="#features-23" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>rebuild</code> metrics contain information about running partition rebuilds.
<a href="https://github.com/tenzir/tenzir/pull/4381" target="_blank" rel="noopener noreferrer">#4381</a></p></li><li><p>The <code>ingest</code> metrics contain information about all ingested events and their schema. This is slightly different from the existing <code>import</code> metrics, which track only events imported via the <code>import</code> operator, and are separate per pipeline.
<a href="https://github.com/tenzir/tenzir/pull/4381" target="_blank" rel="noopener noreferrer">#4381</a></p></li><li><p>The new <code>unstoppable</code> flag allows for pipelines to run and repeat indefinitely without the ability to stop or pause.
<a href="https://github.com/tenzir/tenzir/pull/4513" target="_blank" rel="noopener noreferrer">#4513</a></p></li><li><p>The <code>cache</code> operator is a transformation that passes through events, creating an in-memory cache of events on the first use. On subsequent uses, the operator signals upstream operators no to start at all, and returns the cached events immediately. The operator may also be used as a source for reading from a cache only, or as a sink for writing to a cache only.
<a href="https://github.com/tenzir/tenzir/pull/4515" target="_blank" rel="noopener noreferrer">#4515</a></p></li><li><p>The <code>/pipeline/launch</code> operator features four new parameters <code>cache_id</code>, <code>cache_capacity</code>,<code>cache_ttl</code>, and <code>cache_max_ttl</code>. If a <code>cache_id</code> is specified, the pipeline&#x27;s implicit sink will use the <code>cache</code> operator under the hood. At least one of <code>serve_id</code> and <code>cache_id</code> must be specified.
<a href="https://github.com/tenzir/tenzir/pull/4515" target="_blank" rel="noopener noreferrer">#4515</a></p></li><li><p>The <code>lookup</code> operator is now smarter about retroactive lookups for frequently updated contexts and avoids loading data from disk multiple times for context updates that arrive shortly after one another.
<a href="https://github.com/tenzir/tenzir/pull/4535" target="_blank" rel="noopener noreferrer">#4535</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-27">Bug Fixes<a href="#bug-fixes-27" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a regression introduced in Tenzir v4.19.2 in the <code>azure-log-analytics</code> operator that prevented it from starting correctly.
<a href="https://github.com/tenzir/tenzir/pull/4516" target="_blank" rel="noopener noreferrer">#4516</a></p></li><li><p>IPv6 addresses with a prefix that is a valid duration, for example <code>2dff::</code> with the prefix <code>2d</code>, now correctly parse as an IP instead of a string.
<a href="https://github.com/tenzir/tenzir/pull/4523" target="_blank" rel="noopener noreferrer">#4523</a></p></li><li><p>We fixed an issue where the <code>export</code>, <code>metrics</code>, or <code>diagnostics</code> operators crashed the node when started while the node was shutting down or after an unexpected filesystem error occurred. This happened frequently while using the Tenzir Platform, which subscribes to metrics and diagnostics automatically.
<a href="https://github.com/tenzir/tenzir/pull/4530" target="_blank" rel="noopener noreferrer">#4530</a></p></li><li><p><code>context inspect &lt;ctx&gt;</code> no longer crashes for lookup table contexts with values of multiple schemas when using subnets as keys.
<a href="https://github.com/tenzir/tenzir/pull/4531" target="_blank" rel="noopener noreferrer">#4531</a></p></li><li><p>We fixed a bug that sometimes caused the <code>retro.queued_events</code> value in <code>lookup</code> metrics to stop going down again.
<a href="https://github.com/tenzir/tenzir/pull/4535" target="_blank" rel="noopener noreferrer">#4535</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4196"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.19.6" target="_blank" rel="noopener noreferrer">v4.19.6</a><a href="#v4196" class="hash-link" aria-label="Direct link to v4196" title="Direct link to v4196">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-24">Features<a href="#features-24" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The <code>tenzir</code> command-line utility gained a new option <code>--strict</code>, causing it to exit with a non-zero exit code for pipelines that emit at least one warning.
<a href="https://github.com/tenzir/tenzir/pull/4506" target="_blank" rel="noopener noreferrer">#4506</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-28">Bug Fixes<a href="#bug-fixes-28" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>slice</code> operator no longer crashes when used with a positive begin and negative end value when operating on less events than <code>-end</code>, e.g., when working on a single event and using <code>slice 0:-1</code>.
<a href="https://github.com/tenzir/tenzir/pull/4505" target="_blank" rel="noopener noreferrer">#4505</a></p></li><li><p>We fixed a bug in the <code>shell</code> operator that could cause the process to crash when breaking its pipe. Now, the operator shuts down with an error diagnostic instead.
<a href="https://github.com/tenzir/tenzir/pull/4508" target="_blank" rel="noopener noreferrer">#4508</a></p></li><li><p>Pipelines with the <code>python</code> operator now deploy more quickly, as their deployment no longer waits for the virtual environment to be set up successfully.
<a href="https://github.com/tenzir/tenzir/pull/4508" target="_blank" rel="noopener noreferrer">#4508</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4195"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.19.5" target="_blank" rel="noopener noreferrer">v4.19.5</a><a href="#v4195" class="hash-link" aria-label="Direct link to v4195" title="Direct link to v4195">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-29">Bug Fixes<a href="#bug-fixes-29" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The <code>serve</code> operator no longer uses an excessive amount of CPU.
<a href="https://github.com/tenzir/tenzir/pull/4499" target="_blank" rel="noopener noreferrer">#4499</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4194"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.19.4" target="_blank" rel="noopener noreferrer">v4.19.4</a><a href="#v4194" class="hash-link" aria-label="Direct link to v4194" title="Direct link to v4194">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-30">Bug Fixes<a href="#bug-fixes-30" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The <code>packages</code> plugin is now available in the static binary release artifacts.
<a href="https://github.com/tenzir/tenzir/pull/4490" target="_blank" rel="noopener noreferrer">#4490</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4193"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.19.3" target="_blank" rel="noopener noreferrer">v4.19.3</a><a href="#v4193" class="hash-link" aria-label="Direct link to v4193" title="Direct link to v4193">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-31">Bug Fixes<a href="#bug-fixes-31" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Pipelines from packages now correctly remember their last run number and last state when the reinstalling the package.
<a href="https://github.com/tenzir/tenzir/pull/4479" target="_blank" rel="noopener noreferrer">#4479</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4192"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.19.2" target="_blank" rel="noopener noreferrer">v4.19.2</a><a href="#v4192" class="hash-link" aria-label="Direct link to v4192" title="Direct link to v4192">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-13">Changes<a href="#changes-13" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>We&#x27;ve made some changes that optimize Tenzir&#x27;s memory usage. Pipeline operators that emit very small batches of events or bytes at a high frequency now use less memory. The <code>serve</code> operator&#x27;s internal buffer is now soft-capped at 1Ki instead of 64Ki events, aligning the buffer size with the default upper limit for the number of events that can be fetched at once from <code>/serve</code>. The <code>export</code>, <code>metrics</code>, and <code>diagnostics</code> operators now handle back pressure better and utilize less memory in situations where the node has many small partitions. For expert users, the new <code>tenzir.demand</code> configuration section allows for controlling how eagerly operators demand input from their upstream operators. Lowering the demand reduces the peak memory usage of pipelines at some performance cost.
<a href="https://github.com/tenzir/tenzir/pull/4447" target="_blank" rel="noopener noreferrer">#4447</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-25">Features<a href="#features-25" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The throttle operator allows for limiting the bandwidth of a pipeline.
<a href="https://github.com/tenzir/tenzir/pull/4448" target="_blank" rel="noopener noreferrer">#4448</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-32">Bug Fixes<a href="#bug-fixes-32" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The <code>subscribe</code> operator now delivers metrics more consistently.
<a href="https://github.com/tenzir/tenzir/pull/4439" target="_blank" rel="noopener noreferrer">#4439</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4191"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.19.1" target="_blank" rel="noopener noreferrer">v4.19.1</a><a href="#v4191" class="hash-link" aria-label="Direct link to v4191" title="Direct link to v4191">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-33">Bug Fixes<a href="#bug-fixes-33" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Activating heartbeats via <code>-X</code>/<code>--set</code> on an <code>amqp</code> saver triggered socket errors if the interval between sent messages was larger than the heartbeat interval. This has been fixed by handling heartbeat communication correctly in such cases.
<a href="https://github.com/tenzir/tenzir/pull/4428" target="_blank" rel="noopener noreferrer">#4428</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4190"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.19.0" target="_blank" rel="noopener noreferrer">v4.19.0</a><a href="#v4190" class="hash-link" aria-label="Direct link to v4190" title="Direct link to v4190">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-14">Changes<a href="#changes-14" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>python</code> operator now resolves dependencies with every fresh pipeline run. Just restart your pipeline to upgrade to the latest available versions of your Python modules.
<a href="https://github.com/tenzir/tenzir/pull/4336" target="_blank" rel="noopener noreferrer">#4336</a></p></li><li><p>The <code>python</code> operator no longer uses <code>pip</code> but rather <a href="https://github.com/astral-sh/uv" target="_blank" rel="noopener noreferrer"><code>uv</code></a>. In case you set custom environment variables for <code>pip</code> you need to exchange those with alternative settings that work with <code>uv</code>.
<a href="https://github.com/tenzir/tenzir/pull/4336" target="_blank" rel="noopener noreferrer">#4336</a></p></li><li><p>The <code>/serve</code> endpoint now always uses the simple output format for schema definitions. The option <code>use_simple_format</code> is now ignored.
<a href="https://github.com/tenzir/tenzir/pull/4411" target="_blank" rel="noopener noreferrer">#4411</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-26">Features<a href="#features-26" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>package</code> operator allows for adding and removing packages, a combination of pipelines and contexts deployed to a node as a set. Nodes load packages installed to <code>&lt;configdir&gt;/tenzir/package/&lt;package-name&gt;/package.yaml</code> on startup.
<a href="https://github.com/tenzir/tenzir/pull/4344" target="_blank" rel="noopener noreferrer">#4344</a></p></li><li><p>The <code>buffer</code> operator buffers up to the specified number of events in an in-memory buffer. By default, operators in a pipeline run only when their downstream operators want to receive input. This mechanism is called back pressure. The <code>buffer</code> operator effectively breaks back pressure by storing up to the specified number of events in memory, always requesting more input, which allows upstream operators to run uninterruptedly even in case the downstream operators of the buffer are unable to keep up. This allows pipelines to handle data spikes more easily.
<a href="https://github.com/tenzir/tenzir/pull/4404" target="_blank" rel="noopener noreferrer">#4404</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-34">Bug Fixes<a href="#bug-fixes-34" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Metrics emitted towards the end of an operator&#x27;s runtime were sometimes not recorded correctly. This now works reliably.
<a href="https://github.com/tenzir/tenzir/pull/4404" target="_blank" rel="noopener noreferrer">#4404</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4185"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.18.5" target="_blank" rel="noopener noreferrer">v4.18.5</a><a href="#v4185" class="hash-link" aria-label="Direct link to v4185" title="Direct link to v4185">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-35">Bug Fixes<a href="#bug-fixes-35" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The <code>unflatten</code> operator now correctly preserves field order and overwrites in case of a name conflict.
<a href="https://github.com/tenzir/tenzir/pull/4405" target="_blank" rel="noopener noreferrer">#4405</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4184"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.18.4" target="_blank" rel="noopener noreferrer">v4.18.4</a><a href="#v4184" class="hash-link" aria-label="Direct link to v4184" title="Direct link to v4184">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-36">Bug Fixes<a href="#bug-fixes-36" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The <code>subscribe</code> operator no longer propagates back pressure to its corresponding <code>publish</code> operators when part of a pipeline that runs in the background, i.e., is not visible on the overview page on app.tenzir.com. An invisible subscriber should never be able to slow down a publisher.
<a href="https://github.com/tenzir/tenzir/pull/4399" target="_blank" rel="noopener noreferrer">#4399</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4183"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.18.3" target="_blank" rel="noopener noreferrer">v4.18.3</a><a href="#v4183" class="hash-link" aria-label="Direct link to v4183" title="Direct link to v4183">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-15">Changes<a href="#changes-15" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><code>metrics export</code> now includes an additional field that shows the number of queued events in the pipeline.
<a href="https://github.com/tenzir/tenzir/pull/4396" target="_blank" rel="noopener noreferrer">#4396</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-37">Bug Fixes<a href="#bug-fixes-37" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Fixed an issue where <code>null</code> records were sometimes transformed into non-null records with <code>null</code> fields.
<a href="https://github.com/tenzir/tenzir/pull/4394" target="_blank" rel="noopener noreferrer">#4394</a></p></li><li><p>We fixed an issue that sometimes caused <code>subscribe</code> to fail when multiple <code>publish</code> operators pushed to the same topic at the exact same time.
<a href="https://github.com/tenzir/tenzir/pull/4394" target="_blank" rel="noopener noreferrer">#4394</a></p></li><li><p>We fixed a bug that caused a potentially unbounded memory usage in <code>export --live</code>, <code>metrics --live</code>, and <code>diagnostics --live</code>.
<a href="https://github.com/tenzir/tenzir/pull/4396" target="_blank" rel="noopener noreferrer">#4396</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4182"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.18.2" target="_blank" rel="noopener noreferrer">v4.18.2</a><a href="#v4182" class="hash-link" aria-label="Direct link to v4182" title="Direct link to v4182">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-38">Bug Fixes<a href="#bug-fixes-38" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>We fixed a memory leak in <code>export</code> that was introduced with <code>v4.18.1</code>.
<a href="https://github.com/tenzir/tenzir/pull/4389" target="_blank" rel="noopener noreferrer">#4389</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4181"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.18.1" target="_blank" rel="noopener noreferrer">v4.18.1</a><a href="#v4181" class="hash-link" aria-label="Direct link to v4181" title="Direct link to v4181">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-27">Features<a href="#features-27" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>Setting the <code>tenzir.endpoint</code> option to <code>false</code> now causes the node not to listen for node-to-node connections. Previously, the port was always exposed for other nodes or <code>tenzir</code> processes to connect.
<a href="https://github.com/tenzir/tenzir/pull/4380" target="_blank" rel="noopener noreferrer">#4380</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-39">Bug Fixes<a href="#bug-fixes-39" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug that caused <code>deduplicate &lt;fields...&gt; --distance &lt;distance&gt;</code> to sometimes produce incorrect results when followed by <code>where &lt;expr&gt;</code> with an expression that filters on the deduplicated fields.
<a href="https://github.com/tenzir/tenzir/pull/4379" target="_blank" rel="noopener noreferrer">#4379</a></p></li><li><p>Pipelines that use the <code>every</code> modifier with the <code>export</code> operator no longer terminate after the first run.
<a href="https://github.com/tenzir/tenzir/pull/4382" target="_blank" rel="noopener noreferrer">#4382</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4180"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.18.0" target="_blank" rel="noopener noreferrer">v4.18.0</a><a href="#v4180" class="hash-link" aria-label="Direct link to v4180" title="Direct link to v4180">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-16">Changes<a href="#changes-16" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The deprecated <code>vast</code> symlink for the <code>tenzir-ctl</code> binary that offeres backwards compatiblity with versions older than Tenzir v4—when it was called VAST—no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/4343" target="_blank" rel="noopener noreferrer">#4343</a></p></li><li><p>The deprecated <code>tenzir.db-directory</code> option no longer exists. Use <code>tenzir.state-directory</code> instead.
<a href="https://github.com/tenzir/tenzir/pull/4343" target="_blank" rel="noopener noreferrer">#4343</a></p></li><li><p>Diagnostics from managed pipelines are now deduplicated, showing each diagnostic at most once for each run.
<a href="https://github.com/tenzir/tenzir/pull/4348" target="_blank" rel="noopener noreferrer">#4348</a></p></li><li><p>Pipeline activity for pipelines starting with <code>subscribe | where &lt;expr&gt;</code> will no longer report ingress that does not match the provided filter expression.
<a href="https://github.com/tenzir/tenzir/pull/4349" target="_blank" rel="noopener noreferrer">#4349</a></p></li><li><p>The previously deprecated <code>--low-priority</code> option for the <code>export</code> operator no longer exists. The new <code>--parallel &lt;level&gt;</code> option allows tuning how many worker threads the operator uses at most for querying persisted events.
<a href="https://github.com/tenzir/tenzir/pull/4365" target="_blank" rel="noopener noreferrer">#4365</a></p></li><li><p>We raised the default and maximum long-polling timeouts for <code>/serve</code> from 2s and 5s to 5s and 10s, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4370" target="_blank" rel="noopener noreferrer">#4370</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-28">Features<a href="#features-28" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>publish</code>, <code>subscribe</code>, <code>import</code>, <code>export</code>, <code>lookup</code> and <code>enrich</code> operators deliver their own, operator-specific metrics now.
<a href="https://github.com/tenzir/tenzir/pull/4339" target="_blank" rel="noopener noreferrer">#4339</a>
<a href="https://github.com/tenzir/tenzir/pull/4365" target="_blank" rel="noopener noreferrer">#4365</a></p></li><li><p>The new <code>tenzir.metrics.api</code> metrics record every API call made to a Tenzir Node.
<a href="https://github.com/tenzir/tenzir/pull/4368" target="_blank" rel="noopener noreferrer">#4368</a></p></li><li><p>The <code>metrics</code> operator now optionally takes a metric name as an argument. For example, <code>metrics cpu</code> only shows CPU metrics. This is functionally equivalent to <code>metrics | where #schema == &quot;tenzir.metrics.cpu&quot;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4369" target="_blank" rel="noopener noreferrer">#4369</a></p></li><li><p>The <code>tenzir.metrics.platform</code> metrics records every second whether the connection to the Tenzir Platform is working as expected from the node&#x27;s perspective.
<a href="https://github.com/tenzir/tenzir/pull/4374" target="_blank" rel="noopener noreferrer">#4374</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-40">Bug Fixes<a href="#bug-fixes-40" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a rarely occurring issue in the <code>gelf</code> parser that led to parsing errors for some events.
<a href="https://github.com/tenzir/tenzir/pull/4341" target="_blank" rel="noopener noreferrer">#4341</a></p></li><li><p>We fixed a rare crash when one of multiple <code>subscribe</code> operators for the same topic disconnected while at least one of the other subscribers was overwhelmed and asked for corresponding publishers to throttle.
<a href="https://github.com/tenzir/tenzir/pull/4346" target="_blank" rel="noopener noreferrer">#4346</a></p></li><li><p>Pipelines of the form <code>export --live | where &lt;expr&gt;</code> failed to filter with type extractors or concepts. This now works as expected.
<a href="https://github.com/tenzir/tenzir/pull/4349" target="_blank" rel="noopener noreferrer">#4349</a></p></li><li><p>The SQS connector now honors system proxy settings.
<a href="https://github.com/tenzir/tenzir/pull/4359" target="_blank" rel="noopener noreferrer">#4359</a></p></li><li><p>We fixed a rare bug that caused the <code>lookup</code> operator to exit unexpectedly when using a high value for the operator&#x27;s <code>--parallel</code> option.
<a href="https://github.com/tenzir/tenzir/pull/4363" target="_blank" rel="noopener noreferrer">#4363</a></p></li><li><p>The time parser now accepts the <code>%F</code>, <code>%g</code>, <code>%G</code>, <code>%u</code>, <code>%V</code>, <code>%z</code>, and <code>%Z</code> format specifiers.
<a href="https://github.com/tenzir/tenzir/pull/4366" target="_blank" rel="noopener noreferrer">#4366</a></p></li><li><p>The <code>tcp</code> connector no longer fails in listen mode when you try to restart it directly after stopping it.
<a href="https://github.com/tenzir/tenzir/pull/4367" target="_blank" rel="noopener noreferrer">#4367</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4174"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.17.4" target="_blank" rel="noopener noreferrer">v4.17.4</a><a href="#v4174" class="hash-link" aria-label="Direct link to v4174" title="Direct link to v4174">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-41">Bug Fixes<a href="#bug-fixes-41" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug that caused a &quot;Bad file descriptor&quot; error from the python operator, when multiple instances of it were started simultaneously.
<a href="https://github.com/tenzir/tenzir/pull/4333" target="_blank" rel="noopener noreferrer">#4333</a></p></li><li><p>Shutting down a node no longer sets managed pipelines to the completed state unintentionally.
<a href="https://github.com/tenzir/tenzir/pull/4334" target="_blank" rel="noopener noreferrer">#4334</a></p></li><li><p>Configured pipelines with retry on error enabled will not trigger an assertion anymore when they fail to launch.
<a href="https://github.com/tenzir/tenzir/pull/4334" target="_blank" rel="noopener noreferrer">#4334</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4173"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.17.3" target="_blank" rel="noopener noreferrer">v4.17.3</a><a href="#v4173" class="hash-link" aria-label="Direct link to v4173" title="Direct link to v4173">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-29">Features<a href="#features-29" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The <code>partitions [&lt;expr&gt;]</code> source operator supersedes <code>show partitions</code> (now deprecated) and supports an optional expression as a positional argument for showing only the partitions that would be considered in <code>export | where &lt;expr&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4329" target="_blank" rel="noopener noreferrer">#4329</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-42">Bug Fixes<a href="#bug-fixes-42" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>We fixed a bug in Tenzir v4.17.2 that sometimes caused the deletion of on-disk state of configured contexts on startup.
<a href="https://github.com/tenzir/tenzir/pull/4330" target="_blank" rel="noopener noreferrer">#4330</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4172"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.17.2" target="_blank" rel="noopener noreferrer">v4.17.2</a><a href="#v4172" class="hash-link" aria-label="Direct link to v4172" title="Direct link to v4172">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-43">Bug Fixes<a href="#bug-fixes-43" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug that very rarely caused configured pipelines using contexts to fail starting up because the used context was not available, and similarly to fail shutting down because the used context was no longer available before the pipeline was shut down.
<a href="https://github.com/tenzir/tenzir/pull/4295" target="_blank" rel="noopener noreferrer">#4295</a>
<a href="https://github.com/tenzir/tenzir/pull/4322" target="_blank" rel="noopener noreferrer">#4322</a>
<a href="https://github.com/tenzir/tenzir/pull/4325" target="_blank" rel="noopener noreferrer">#4325</a></p></li><li><p>We fixed an issue where diagnostics were not properly propagated and thus not available to the <code>diagnostics</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4326" target="_blank" rel="noopener noreferrer">#4326</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4171"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.17.1" target="_blank" rel="noopener noreferrer">v4.17.1</a><a href="#v4171" class="hash-link" aria-label="Direct link to v4171" title="Direct link to v4171">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-44">Bug Fixes<a href="#bug-fixes-44" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>We fixed a bug in Tenzir v4.17 that caused some nodes to error on startup with an &quot;unreachable&quot; error.
<a href="https://github.com/tenzir/tenzir/pull/4322" target="_blank" rel="noopener noreferrer">#4322</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4170"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.17.0" target="_blank" rel="noopener noreferrer">v4.17.0</a><a href="#v4170" class="hash-link" aria-label="Direct link to v4170" title="Direct link to v4170">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-17">Changes<a href="#changes-17" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The built-in type aliases <code>timestamp</code> and <code>port</code> for <code>time</code> and <code>uint64</code>, respectively, no longer exist. They were an artifact of Tenzir from before it supported schema inference in most parsers, and did not play well with many operators when used together with inferred types from other parsers.
<a href="https://github.com/tenzir/tenzir/pull/4299" target="_blank" rel="noopener noreferrer">#4299</a></p></li><li><p><code>show pipelines</code> now includes &quot;hidden&quot; pipelines run by the by the Tenzir Platform or through the API. These pipelines usually run background jobs, so they&#x27;re intentionally hidden from the <code>/pipeline/list</code> API.
<a href="https://github.com/tenzir/tenzir/pull/4309" target="_blank" rel="noopener noreferrer">#4309</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-30">Features<a href="#features-30" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>print</code> operator allows for printing record fields as strings with any format.
<a href="https://github.com/tenzir/tenzir/pull/4265" target="_blank" rel="noopener noreferrer">#4265</a></p></li><li><p>We fixed bug that caused python-pip to fail when creating the runtime environment for the python operator.
<a href="https://github.com/tenzir/tenzir/pull/4279" target="_blank" rel="noopener noreferrer">#4279</a></p></li><li><p>The new <code>azure-log-analytics</code> operator makes it possible to upload events to supported or custom tables in Microsoft Azure.
<a href="https://github.com/tenzir/tenzir/pull/4281" target="_blank" rel="noopener noreferrer">#4281</a></p></li><li><p>Newly created diagnostics returned from the <code>diagnostics</code> now contain a <code>rendered</code> field that contains a rendered form of the diagnostic. To restore the previous behavior, use <code>diagnostics | drop rendered</code>.
<a href="https://github.com/tenzir/tenzir/pull/4290" target="_blank" rel="noopener noreferrer">#4290</a></p></li><li><p>The <code>enrich</code> operator no longer crashes when it is used to replace a field value with a context value of a different type and the context is not able to provide a substitute for all inputs.
<a href="https://github.com/tenzir/tenzir/pull/4291" target="_blank" rel="noopener noreferrer">#4291</a></p></li><li><p>The <code>lookup</code> operator gained a new <code>--parallel &lt;level&gt;</code> option controlling the number of partitions the operator is allowed to open at once for retrospective lookups. This can significantly increase performance at the cost of higher resource usage. The option defaults to 3. To restore the previous behavior, set the option to 1.
<a href="https://github.com/tenzir/tenzir/pull/4300" target="_blank" rel="noopener noreferrer">#4300</a></p></li><li><p>The <code>/pipeline/list</code> API now includes a new <code>ttl</code> field showing the TTL of the pipeline. The remaining TTL moved from <code>ttl_expires_in_ns</code> to a <code>remaining_ttl</code> field, aligning the output of the API with the <code>show pipelines</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4314" target="_blank" rel="noopener noreferrer">#4314</a></p></li><li><p><code>context update &lt;name&gt;</code> for <code>lookup-table</code> contexts now supports per-entry timeouts. The <code>--create-timeout &lt;duration&gt;</code> option sets the time after which lookup table entries expire, and the <code>--update-timeout &lt;duration&gt;</code> option sets the time after which lookup table entries expire if they are not accessed.
<a href="https://github.com/tenzir/tenzir/pull/5126" target="_blank" rel="noopener noreferrer">#5126</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-45">Bug Fixes<a href="#bug-fixes-45" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p><code>subnet == ip</code> and <code>pattern == string</code> predicates now behave just like <code>ip == subnet</code> and <code>string == pattern</code> predicates.
<a href="https://github.com/tenzir/tenzir/pull/4280" target="_blank" rel="noopener noreferrer">#4280</a></p></li><li><p>The <code>https</code> and related savers now signal an error when the saver-related upload fails.
<a href="https://github.com/tenzir/tenzir/pull/4281" target="_blank" rel="noopener noreferrer">#4281</a></p></li><li><p>Errors during pipeline startup are properly propagated instead of being replaced by <code>error: failed to run</code> in some situations.
<a href="https://github.com/tenzir/tenzir/pull/4288" target="_blank" rel="noopener noreferrer">#4288</a></p></li><li><p>The <code>summarize</code> operator no longer crashes when grpuping by a field of type <code>null</code>, i.e., a field whose type could not be inferred because all of its values were <code>null</code>.
<a href="https://github.com/tenzir/tenzir/pull/4289" target="_blank" rel="noopener noreferrer">#4289</a></p></li><li><p>We fixed a regression that caused excess CPU usage for some operators when idle. This was most visible with the <code>subscribe</code>, <code>export</code>, <code>metrics</code>, <code>diagnostics</code>, <code>lookup</code> and <code>enrich</code> operators.
<a href="https://github.com/tenzir/tenzir/pull/4297" target="_blank" rel="noopener noreferrer">#4297</a></p></li><li><p>The <code>-X</code> option for overriding configuration options for <code>librdkafka</code> now works the <code>kafka</code> saver as well. Previously, the option was only exposed for the loader, unlike advertised in the documentation.
<a href="https://github.com/tenzir/tenzir/pull/4317" target="_blank" rel="noopener noreferrer">#4317</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4160"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.16.0" target="_blank" rel="noopener noreferrer">v4.16.0</a><a href="#v4160" class="hash-link" aria-label="Direct link to v4160" title="Direct link to v4160">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-18">Changes<a href="#changes-18" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>The <code>approximate_median</code> aggregation function is now called <code>median</code>. We found the longer name, despite being more accurate, to be rather unintuitive.
<a href="https://github.com/tenzir/tenzir/pull/4273" target="_blank" rel="noopener noreferrer">#4273</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-31">Features<a href="#features-31" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>publish</code> operator&#x27;s topics no longer have to be unique. Instead, any number of pipelines may use the <code>publish</code> operator with the same topic. This enables multi-producer, multi-consumer (MPMC) event routing, where streams of events from different pipelines can now be merged back together in addition to being split.
<a href="https://github.com/tenzir/tenzir/pull/4270" target="_blank" rel="noopener noreferrer">#4270</a></p></li><li><p>Inter-pipeline data transfer with the <code>publish</code> and <code>subscribe</code> operators is now as fast as intra-pipeline data transfer between pipeline operators and utilizes the same amount of memory.
<a href="https://github.com/tenzir/tenzir/pull/4270" target="_blank" rel="noopener noreferrer">#4270</a></p></li><li><p>Back pressure now propagates from subscribers back to publishers, i.e., if a pipeline with a <code>subscribe</code> operator is too slow then all pipelines with matching <code>publish</code> operators will be slowed down to a matching speed. This limits the memory usage of <code>publish</code> operators and prevents data loss.
<a href="https://github.com/tenzir/tenzir/pull/4270" target="_blank" rel="noopener noreferrer">#4270</a></p></li><li><p>The <code>p99</code>, <code>p95</code>, <code>p90</code>, <code>p75</code>, and <code>p50</code> aggregation functions calculate commonly used percentiles of grouped values in the <code>summarize</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4273" target="_blank" rel="noopener noreferrer">#4273</a></p></li><li><p>For <code>lookup-table</code> contexts, the new <code>--erase</code> option for <code>context update</code> enables selective deletion of lookup table entries.
<a href="https://github.com/tenzir/tenzir/pull/4274" target="_blank" rel="noopener noreferrer">#4274</a></p></li><li><p>The <code>context update</code> operator now defaults the <code>--key &lt;field&gt;</code> option to the first field in the input when no field is explicitly specified.
<a href="https://github.com/tenzir/tenzir/pull/4274" target="_blank" rel="noopener noreferrer">#4274</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-46">Bug Fixes<a href="#bug-fixes-46" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Configured and non-configured contexts with the same name will not cause non-deterministic behavior upon loading anymore. The node will shut down instead.
<a href="https://github.com/tenzir/tenzir/pull/4224" target="_blank" rel="noopener noreferrer">#4224</a></p></li><li><p>Predicates of the form <code>ip == subnet</code> and <code>ip in [subnet1, subnet2, …]</code> now work as expected.
<a href="https://github.com/tenzir/tenzir/pull/4268" target="_blank" rel="noopener noreferrer">#4268</a></p></li><li><p>The <code>lookup</code> operator now correctly handles subnet keys when using the <code>--retro</code> or <code>--snapshot</code> options.
<a href="https://github.com/tenzir/tenzir/pull/4268" target="_blank" rel="noopener noreferrer">#4268</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4152"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.15.2" target="_blank" rel="noopener noreferrer">v4.15.2</a><a href="#v4152" class="hash-link" aria-label="Direct link to v4152" title="Direct link to v4152">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-47">Bug Fixes<a href="#bug-fixes-47" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Some <em>Running</em> pipelines were considered <em>Completed</em> when the node shut down, causing them not to start up again automatically when the node restarted. Now, the node only considers pipelines <em>Completed</em> that entered the state on their own before the node&#x27;s shutdown.
<a href="https://github.com/tenzir/tenzir/pull/4261" target="_blank" rel="noopener noreferrer">#4261</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4151"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.15.1" target="_blank" rel="noopener noreferrer">v4.15.1</a><a href="#v4151" class="hash-link" aria-label="Direct link to v4151" title="Direct link to v4151">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-48">Bug Fixes<a href="#bug-fixes-48" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>We fixed a regression that caused demo nodes not to start for Tenzir v4.15.
<a href="https://github.com/tenzir/tenzir/pull/4258" target="_blank" rel="noopener noreferrer">#4258</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4150"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.15.0" target="_blank" rel="noopener noreferrer">v4.15.0</a><a href="#v4150" class="hash-link" aria-label="Direct link to v4150" title="Direct link to v4150">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-32">Features<a href="#features-32" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>lookup-table</code> context now performs longest-prefix matches when the table key is of type <code>subnet</code> and the to-be-enriched field of type <code>ip</code>. For example, a lookup table with key <code>10.0.0.0/8</code> will match when enriching the IP address <code>10.1.1.1</code>.
<a href="https://github.com/tenzir/tenzir/pull/4051" target="_blank" rel="noopener noreferrer">#4051</a></p></li><li><p>We now offer an RPM package for RedHat Linux and its derivatives.
<a href="https://github.com/tenzir/tenzir/pull/4188" target="_blank" rel="noopener noreferrer">#4188</a></p></li><li><p>The <code>/pipeline/update</code> API endpoint now supports updating definitions of existing pipelines.
<a href="https://github.com/tenzir/tenzir/pull/4196" target="_blank" rel="noopener noreferrer">#4196</a></p></li><li><p>The <code>export</code>, <code>metrics</code>, and <code>diagnostics</code> operators now features a <code>--retro</code> flag. This flag will make the operators first export past events, even when <code>--live</code> is set. Specify both options explicitly to first return past events and then immediately switch into live mode.
<a href="https://github.com/tenzir/tenzir/pull/4203" target="_blank" rel="noopener noreferrer">#4203</a></p></li><li><p>The <code>sort</code> operator now supports sorting by multiple fields.
<a href="https://github.com/tenzir/tenzir/pull/4242" target="_blank" rel="noopener noreferrer">#4242</a></p></li><li><p>Pipelines configured as code in the <code>tenzir.yaml</code> configuration file may now contain labels.
<a href="https://github.com/tenzir/tenzir/pull/4247" target="_blank" rel="noopener noreferrer">#4247</a></p></li><li><p>The <code>https</code> connector supports the new options <code>--skip-peer-verification</code> and <code>--skip-hostname-verification</code> to disable verification of the peer&#x27;s certificate and verification of the certificate hostname.
<a href="https://github.com/tenzir/tenzir/pull/4248" target="_blank" rel="noopener noreferrer">#4248</a></p></li><li><p>Use <code>write json --arrays-of-objects</code> to write JSON arrays per batch of events instead of JSON objects per event.
<a href="https://github.com/tenzir/tenzir/pull/4249" target="_blank" rel="noopener noreferrer">#4249</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-49">Bug Fixes<a href="#bug-fixes-49" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p><code>export --live</code> no longer buffers the last batch of event that was imported, and instead immediately returns all imported events.
<a href="https://github.com/tenzir/tenzir/pull/4203" target="_blank" rel="noopener noreferrer">#4203</a></p></li><li><p><code>context inspect</code> will not crash anymore when encountering contexts that contain multi-schema data.
<a href="https://github.com/tenzir/tenzir/pull/4236" target="_blank" rel="noopener noreferrer">#4236</a></p></li><li><p>Pipelines configured as code no longer always restart with the node. Instead, just like for other pipelines, they only restart when they were running before the node shut down.
<a href="https://github.com/tenzir/tenzir/pull/4247" target="_blank" rel="noopener noreferrer">#4247</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4140"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.14.0" target="_blank" rel="noopener noreferrer">v4.14.0</a><a href="#v4140" class="hash-link" aria-label="Direct link to v4140" title="Direct link to v4140">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-19">Changes<a href="#changes-19" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>The <code>slice</code> operator now expects its arguments in the form <code>&lt;begin&gt;:&lt;end&gt;</code>, where either the begin or the end value may be omitted. For example, <code>slice 10:</code> returns all but the first 10 events, <code>slice 10:20</code> returns events 10 to 20 (exclusive), and <code>slice :-10</code> returns all but the last 10 events.
<a href="https://github.com/tenzir/tenzir/pull/4211" target="_blank" rel="noopener noreferrer">#4211</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-33">Features<a href="#features-33" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>mean</code> aggregation function computes the mean of grouped numeric values.
<a href="https://github.com/tenzir/tenzir/pull/4208" target="_blank" rel="noopener noreferrer">#4208</a></p></li><li><p>The new <code>approximate_median</code> aggregation function computes an approximate median of grouped numeric values using the t-digest algorithm.
<a href="https://github.com/tenzir/tenzir/pull/4208" target="_blank" rel="noopener noreferrer">#4208</a></p></li><li><p>The new <code>stddev</code> and <code>variance</code> aggregation functions compute the standard deviation and variance of grouped numeric values, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4208" target="_blank" rel="noopener noreferrer">#4208</a></p></li><li><p>The new <code>collect</code> aggregation function collects a list of all non-null grouped values. Unlike <code>distinct</code>, this function does not remove dulicates and the results may appear in any order.
<a href="https://github.com/tenzir/tenzir/pull/4208" target="_blank" rel="noopener noreferrer">#4208</a></p></li><li><p>The <code>summarize</code> operator gained two new options: <code>timeout</code> and <code>update-timeout</code>, which enable streaming aggregations. They specifiy the maximum time a bucket in the operator may exist, tracked from the arrival of the first and last event in the bucket, respectively. The <code>timeout</code> is useful to guarantee that events are held back no more than the specified duration, and the <code>update-timeout</code> is useful to finish aggregations earlier in cases where events that would be sorted into the same buckets arrive within the specified duration, allowing results to be seen earlier.
<a href="https://github.com/tenzir/tenzir/pull/4209" target="_blank" rel="noopener noreferrer">#4209</a></p></li><li><p>The <code>slice</code> operator now supports strides in the form of <code>slice &lt;begin&gt;:&lt;end&gt;:&lt;stride&gt;</code>. Negative strides reverse the event order. The new <code>reverse</code> operator is a short form of <code>slice ::-1</code> and reverses the event order.
<a href="https://github.com/tenzir/tenzir/pull/4216" target="_blank" rel="noopener noreferrer">#4216</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-50">Bug Fixes<a href="#bug-fixes-50" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Paths for <code>s3</code> and <code>gs</code> connectors are not broken anymore during loading/saving.
<a href="https://github.com/tenzir/tenzir/pull/4222" target="_blank" rel="noopener noreferrer">#4222</a></p></li><li><p>The <code>syslog</code> parser incorrectly identified a message without hostname and tag as one with hostname and no tag. This resulted in a hostname with a trailing colon, e.g., <code>zscaler-nss:</code>. In such messages, the parser now correctly sets the hostname to <code>null</code> and assigns <code>zscaler-nss</code> as tag/app, without the trailing colon.
<a href="https://github.com/tenzir/tenzir/pull/4225" target="_blank" rel="noopener noreferrer">#4225</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4131"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.13.1" target="_blank" rel="noopener noreferrer">v4.13.1</a><a href="#v4131" class="hash-link" aria-label="Direct link to v4131" title="Direct link to v4131">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-51">Bug Fixes<a href="#bug-fixes-51" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>slice</code> operator no longer waits for all input to arrive when used with a positive begin and a negative (or missing) end value, which rendered it unusable with infinite inputs. Instead, the operator now yields results earlier.
<a href="https://github.com/tenzir/tenzir/pull/4210" target="_blank" rel="noopener noreferrer">#4210</a></p></li><li><p>The <code>amqp</code> connector now properly signals more errors caused, for example, by networking issues. This enables pipelines using this connector to trigger their retry behavior.
<a href="https://github.com/tenzir/tenzir/pull/4212" target="_blank" rel="noopener noreferrer">#4212</a>
<a href="https://github.com/satta" target="_blank" rel="noopener noreferrer">@satta</a></p></li><li><p>The node&#x27;s CPU usage increased ever so slightly with every persisted partition, eventually causing imports and exports to get stuck. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4214" target="_blank" rel="noopener noreferrer">#4214</a></p></li><li><p>The <code>enrich</code>, <code>drop</code>, <code>extend</code>, <code>replace</code>, and <code>deduplicate</code> operators failed for empty input events. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4215" target="_blank" rel="noopener noreferrer">#4215</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4130"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.13.0" target="_blank" rel="noopener noreferrer">v4.13.0</a><a href="#v4130" class="hash-link" aria-label="Direct link to v4130" title="Direct link to v4130">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-20">Changes<a href="#changes-20" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>--clear</code> parameter for clearing lookup table contexts during an update no longer exists. It has been superseded by the more robust <code>context reset</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/4179" target="_blank" rel="noopener noreferrer">#4179</a></p></li><li><p>The deprecated <code>matcher</code> plugin no longer exists. Use the superior <code>lookup</code> operator and contexts instead.
<a href="https://github.com/tenzir/tenzir/pull/4187" target="_blank" rel="noopener noreferrer">#4187</a></p></li><li><p>The deprecated <code>tenzir-ctl import</code> and <code>tenzir-ctl export</code> commands no longer exists. They have been fully superseded by pipelines in the form <code>… | import</code> and <code>export | …</code>, respectively.
<a href="https://github.com/tenzir/tenzir/pull/4187" target="_blank" rel="noopener noreferrer">#4187</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-34">Features<a href="#features-34" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>geoip</code> context now supports loading in a MaxMind database with <code>context load &lt;ctx&gt;</code>. For example, <code>load s3://my-bucket/file.mmdb | context load my-ctx</code> makes the GeoIP context use a remotely stored database.
<a href="https://github.com/tenzir/tenzir/pull/4158" target="_blank" rel="noopener noreferrer">#4158</a></p></li><li><p>The <code>json</code> parser has a new <code>--precise</code> flag, which ensures that the layout of the emitted events precisely match the input. For example, it guarantees that no additional <code>null</code> fields will be added. This mode is implicitly enabled when using <code>read gelf</code>.
<a href="https://github.com/tenzir/tenzir/pull/4169" target="_blank" rel="noopener noreferrer">#4169</a></p></li><li><p>The new <code>leef</code> parser supports parsing Log Event Extended Format (LEEF) version 1.0 and 2.0 events, e.g., <code>LEEF:1.0|Microsoft|MSExchange|4.0 SP1|15345|src=192.0.2.0\tdst=172.50.123.1</code>.
<a href="https://github.com/tenzir/tenzir/pull/4178" target="_blank" rel="noopener noreferrer">#4178</a></p></li><li><p>The <code>cron &quot;&lt;cron expression&gt;&quot;</code> operator modifier executes an operator on a schedule. For example, <code>cron &quot;* */10 * * * MON-FRI&quot; from https://example.org/api</code> queries an endpoint on every 10th minute, Monday through Friday.
<a href="https://github.com/tenzir/tenzir/pull/4192" target="_blank" rel="noopener noreferrer">#4192</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-52">Bug Fixes<a href="#bug-fixes-52" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>syslog</code> parser no longer crops messages at unprintable characters, such as tab (<code>\t</code>).
<a href="https://github.com/tenzir/tenzir/pull/4178" target="_blank" rel="noopener noreferrer">#4178</a></p></li><li><p>The <code>syslog</code> parser no longer eagerly attempts to grab an application name from the content, fixing issues when combined with CEF and LEEF.
<a href="https://github.com/tenzir/tenzir/pull/4178" target="_blank" rel="noopener noreferrer">#4178</a></p></li><li><p>Some pipelines did not restart on failure. The retry mechanism now works for all kinds of failures.
<a href="https://github.com/tenzir/tenzir/pull/4184" target="_blank" rel="noopener noreferrer">#4184</a></p></li><li><p>Pipelines that are configured to automatically restart on failure can now be stopped explicitly. Stopping a failed pipeline now always changes its state to the stopped state.
<a href="https://github.com/tenzir/tenzir/pull/4184" target="_blank" rel="noopener noreferrer">#4184</a></p></li><li><p>Startup failures caused by invalid pipelines or contexts deployed as code in the configuration file sometimes caused the node to hang instead of shutting down with an error message. The node now shuts down as expected when this happens.
<a href="https://github.com/tenzir/tenzir/pull/4187" target="_blank" rel="noopener noreferrer">#4187</a></p></li><li><p>A permission error caused <code>python</code> operator to fail when it was previously used by another system user with the same set of requirements. There now is a one Python environment per user and set of requirements.
<a href="https://github.com/tenzir/tenzir/pull/4189" target="_blank" rel="noopener noreferrer">#4189</a></p></li><li><p>The CSV, TSV, and SSV printers no longer erroneously print the header multiple times when more than one event batch of events arrives.
<a href="https://github.com/tenzir/tenzir/pull/4195" target="_blank" rel="noopener noreferrer">#4195</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4122"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.12.2" target="_blank" rel="noopener noreferrer">v4.12.2</a><a href="#v4122" class="hash-link" aria-label="Direct link to v4122" title="Direct link to v4122">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-35">Features<a href="#features-35" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The chart operator now accepts the flags <code>--x-axis-type</code> and <code>--y-axis-type</code> for <code>bar</code>, <code>line</code>, and <code>area</code> charts, with the possible values being <code>log</code> and <code>linear</code>, with <code>linear</code> as the default value. Setting these flags defines the scale (logarithmic or linear) on the Tenzir App chart visualization.
<a href="https://github.com/tenzir/tenzir/pull/4147" target="_blank" rel="noopener noreferrer">#4147</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-53">Bug Fixes<a href="#bug-fixes-53" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The python operator now checks for syntax errors on operator start up.
<a href="https://github.com/tenzir/tenzir/pull/4139" target="_blank" rel="noopener noreferrer">#4139</a></p></li><li><p>Transformations or sinks used with the <code>every</code> operator modifier did not shut down correctly when exhausting their input. This now work as expected.
<a href="https://github.com/tenzir/tenzir/pull/4166" target="_blank" rel="noopener noreferrer">#4166</a></p></li><li><p>We fixed a bug that prevented restarts of pipelines containing a listening connector under specific circumstances.
<a href="https://github.com/tenzir/tenzir/pull/4170" target="_blank" rel="noopener noreferrer">#4170</a></p></li><li><p>The retry delay now works for pipelines that fail during startup.
<a href="https://github.com/tenzir/tenzir/pull/4171" target="_blank" rel="noopener noreferrer">#4171</a></p></li><li><p>The <code>chart</code> operator failed to render a chart when the y-axis was not specified explicitly and the events contained more than two top-level fields. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4173" target="_blank" rel="noopener noreferrer">#4173</a></p></li><li><p>We accidentally removed the implicit <code>read json</code> from <code>from tcp</code> in Tenzir v4.12. The shortform now works as expected again.
<a href="https://github.com/tenzir/tenzir/pull/4175" target="_blank" rel="noopener noreferrer">#4175</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4121"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.12.1" target="_blank" rel="noopener noreferrer">v4.12.1</a><a href="#v4121" class="hash-link" aria-label="Direct link to v4121" title="Direct link to v4121">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-54">Bug Fixes<a href="#bug-fixes-54" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a misconfiguration that caused the <code>publish</code> and <code>subscribe</code> operators not to be available in the statically linked Linux builds.
<a href="https://github.com/tenzir/tenzir/pull/4149" target="_blank" rel="noopener noreferrer">#4149</a></p></li><li><p>We fixed a crash on startup when selectively enabling or disabling plugins when at least two plugins with dependent plugins were disabled.
<a href="https://github.com/tenzir/tenzir/pull/4149" target="_blank" rel="noopener noreferrer">#4149</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4120"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.12.0" target="_blank" rel="noopener noreferrer">v4.12.0</a><a href="#v4120" class="hash-link" aria-label="Direct link to v4120" title="Direct link to v4120">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-21">Changes<a href="#changes-21" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>Lines of input containing an invalid syslog messages are now assumed to be a continuation of a message on a previous line, if there&#x27;s any.
<a href="https://github.com/tenzir/tenzir/pull/4080" target="_blank" rel="noopener noreferrer">#4080</a></p></li><li><p>The <code>feather</code> format now reads and writes Arrow IPC streams in addition to Feather files, and no longer requires random access to a file to function, making the format streamable with both <code>read feather</code> and <code>write feather</code>.
<a href="https://github.com/tenzir/tenzir/pull/4089" target="_blank" rel="noopener noreferrer">#4089</a></p></li><li><p>The <code>tenzir-ctl count &lt;expr&gt;</code> command no longer exists. It has long been deprecated and superseded by pipelines of the form <code>export | where &lt;expr&gt; | summarize count(.)</code>.
<a href="https://github.com/tenzir/tenzir/pull/4103" target="_blank" rel="noopener noreferrer">#4103</a></p></li><li><p>The deprecated <code>tenzir-ctl status</code> command and the corresponding <code>/status</code> endpoint no longer exist. They have been superseded by the <code>show</code> and <code>metrics</code> operators that provide more detailed insight.
<a href="https://github.com/tenzir/tenzir/pull/4103" target="_blank" rel="noopener noreferrer">#4103</a></p></li><li><p>The deprecated <code>tenzir.aging-frequency</code> and <code>tenzir.aging-query</code> options no longer exist. We recommend using the compaction or disk monitor mechanisms instead to delete persisted events.
<a href="https://github.com/tenzir/tenzir/pull/4103" target="_blank" rel="noopener noreferrer">#4103</a></p></li><li><p>The <code>show pipelines</code> operator and <code>/pipeline/list</code> endpoint no longer include pipeline metrics. We recommend using the <code>metrics</code> operator instead, which offers the same data in a more flexible way.
<a href="https://github.com/tenzir/tenzir/pull/4114" target="_blank" rel="noopener noreferrer">#4114</a></p></li><li><p>The <code>parquet</code> format more efficiently reads and writes Parquet files. The format is streamable for <code>write parquet</code>.
<a href="https://github.com/tenzir/tenzir/pull/4116" target="_blank" rel="noopener noreferrer">#4116</a></p></li><li><p>The <code>0mq</code> connector no longer automatically monitors TCP sockets to wait until at least one remote peer is present. Explicitly pass <code>--monitor</code> for this behavior.
<a href="https://github.com/tenzir/tenzir/pull/4117" target="_blank" rel="noopener noreferrer">#4117</a></p></li><li><p>In the <code>chart</code> operator, unless otherwise specified, every field but the first one is taken to be a value for the Y-axis, instead of just the second one.
<a href="https://github.com/tenzir/tenzir/pull/4119" target="_blank" rel="noopener noreferrer">#4119</a></p></li><li><p>If the value for <code>-x</code>/<code>--name</code> or <code>-y</code>/<code>--value</code> is explicitly specified, the other one must now be too.
<a href="https://github.com/tenzir/tenzir/pull/4119" target="_blank" rel="noopener noreferrer">#4119</a></p></li><li><p>The <code>--title</code> option is removed from <code>chart</code>. Titles can instead be set directly in the web interface.
<a href="https://github.com/tenzir/tenzir/pull/4119" target="_blank" rel="noopener noreferrer">#4119</a></p></li><li><p>The <code>context create</code>, <code>context reset</code>, <code>context update</code>, and <code>context load</code> operators no return information about the context. Pipelines ending with these operators will now be considered closed, and you will be asked to deploy them in the Explorer. Previously, users commonly added <code>discard</code> after these operators to force this behavior.
<a href="https://github.com/tenzir/tenzir/pull/4143" target="_blank" rel="noopener noreferrer">#4143</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-36">Features<a href="#features-36" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>udp</code> connector comes with a loader and saver to read bytes from and write bytes to a UDP socket.
<a href="https://github.com/tenzir/tenzir/pull/4067" target="_blank" rel="noopener noreferrer">#4067</a></p></li><li><p>The <code>deduplicate</code> operator allows removing duplicate events based on specific fields.
<a href="https://github.com/tenzir/tenzir/pull/4068" target="_blank" rel="noopener noreferrer">#4068</a></p></li><li><p>The <code>unroll</code> operator transforms an event that contains a list into a sequence of events where each output event contains one of the list elements.
<a href="https://github.com/tenzir/tenzir/pull/4078" target="_blank" rel="noopener noreferrer">#4078</a></p></li><li><p>The <code>bitz</code> format resembles Tenzir&#x27;s internal wire format. It enables lossless and quick transfer of events between Tenzir nodes through any connector.
<a href="https://github.com/tenzir/tenzir/pull/4079" target="_blank" rel="noopener noreferrer">#4079</a></p></li><li><p>Syslog messages spanning multiple lines are now supported.
<a href="https://github.com/tenzir/tenzir/pull/4080" target="_blank" rel="noopener noreferrer">#4080</a></p></li><li><p>The <code>batch</code> operator gained a new <code>--timeout &lt;duration&gt;</code> option that controls the maixmum latency for withholding events for batching.
<a href="https://github.com/tenzir/tenzir/pull/4095" target="_blank" rel="noopener noreferrer">#4095</a></p></li><li><p>Stopping a failed pipeline now moves it into the stopped state in the app and through the <code>/pipeline/update</code> API, stopping automatic restarts on failure.
<a href="https://github.com/tenzir/tenzir/pull/4108" target="_blank" rel="noopener noreferrer">#4108</a></p></li><li><p>Pipelines now restart on failure at most every minute. The new API parameter <code>retry_delay</code> is available in the <code>/pipeline/create</code>, <code>/pipeline/launch</code>, and <code>/pipeline/update</code> APIs to customize this value. For configured pipelines, the new <code>restart-on-error</code> option supersedes the previous <code>autostart.failed</code> option and may be set either to a boolean or to a duration, with the former using the default retry delay and the latter using a custom one.
<a href="https://github.com/tenzir/tenzir/pull/4108" target="_blank" rel="noopener noreferrer">#4108</a></p></li><li><p>The output of <code>show pipelines</code> and the <code>/pipeline/list</code> API now includes the start time of the pipeline in the field <code>start_time</code>, the newly added retry delay in the field <code>retry_delay</code>, and whether the pipeline is hidden from the overview page on app.tenzir.com in the field <code>hidden</code>.
<a href="https://github.com/tenzir/tenzir/pull/4108" target="_blank" rel="noopener noreferrer">#4108</a></p></li><li><p>The <code>every &lt;duration&gt;</code> operator modifier now supports all operators, turning blocking operators like <code>tail</code>, <code>sort</code> or <code>summarize</code> into operators that emit events every <code>&lt;duration&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4109" target="_blank" rel="noopener noreferrer">#4109</a></p></li><li><p>The <code>0mq</code> connector now supports <code>inproc</code> socket endpoint URLs, allowing you to create arbitrary publish/subscribe topologies within a node. For example, <code>save zmq inproc://foo</code> writes messages to the in-process socket named <code>foo</code>.
<a href="https://github.com/tenzir/tenzir/pull/4117" target="_blank" rel="noopener noreferrer">#4117</a></p></li><li><p>Some charts supported by the <code>chart</code> operator (<code>bar</code>, <code>line</code>, and <code>area</code>) now have a <code>--position</code> argument, with the possible values of <code>grouped</code> and <code>stacked</code>.
<a href="https://github.com/tenzir/tenzir/pull/4119" target="_blank" rel="noopener noreferrer">#4119</a></p></li><li><p>You can now define contexts and their creation parameters in the <code>tenzir.contexts</code> section of the configuration file.
<a href="https://github.com/tenzir/tenzir/pull/4126" target="_blank" rel="noopener noreferrer">#4126</a></p></li><li><p>The <code>show schemas</code> operator lists all unique schemas of events stored at the node.
<a href="https://github.com/tenzir/tenzir/pull/4131" target="_blank" rel="noopener noreferrer">#4131</a></p></li><li><p>The <code>suricata</code> parser&#x27;s schema now more accurately reflects Suricata&#x27;s Eve JSON output, adding many fields that were previously missing.
<a href="https://github.com/tenzir/tenzir/pull/4133" target="_blank" rel="noopener noreferrer">#4133</a>
<a href="https://github.com/tenzir/tenzir/pull/4138" target="_blank" rel="noopener noreferrer">#4138</a>
<a href="https://github.com/satta" target="_blank" rel="noopener noreferrer">@satta</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-55">Bug Fixes<a href="#bug-fixes-55" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The schema name of events returned by <code>show contexts</code> sometimes did not match the type of the context. This now works reliably.
<a href="https://github.com/tenzir/tenzir/pull/4082" target="_blank" rel="noopener noreferrer">#4082</a></p></li><li><p>The <code>tcp</code> connector now supports accepting multiple connections in parallel when used with the <code>from</code> operator, parsing data separately per connection.
<a href="https://github.com/tenzir/tenzir/pull/4084" target="_blank" rel="noopener noreferrer">#4084</a></p></li><li><p>The <code>python</code> operator no longer discards field that start with an underscore.
<a href="https://github.com/tenzir/tenzir/pull/4085" target="_blank" rel="noopener noreferrer">#4085</a></p></li><li><p>The <code>python</code> operator no longer deadlocks when given an empty program.
<a href="https://github.com/tenzir/tenzir/pull/4086" target="_blank" rel="noopener noreferrer">#4086</a></p></li><li><p>The JSON printer previously printed invalid JSON for <code>inf</code> and <code>nan</code>, which means that <code>serve</code> could sometimes emit invalid JSON, which is not handled well by platform/app. Instead, we now emit <code>null</code>.
<a href="https://github.com/tenzir/tenzir/pull/4087" target="_blank" rel="noopener noreferrer">#4087</a></p></li><li><p>We fixed a bug in the <code>http</code> saver that prevented sending HTTP PUT requests with an empty request body.
<a href="https://github.com/tenzir/tenzir/pull/4092" target="_blank" rel="noopener noreferrer">#4092</a></p></li><li><p>Pipelines run with the <code>tenzir</code> binary that connected to a Tenzir Node did sometimes not shut down correctly when the node shut down. This now happens reliably.
<a href="https://github.com/tenzir/tenzir/pull/4093" target="_blank" rel="noopener noreferrer">#4093</a></p></li><li><p>Nodes now shut down with a non-zero exit code when pipelines configured as part of the <code>tenzir.yaml</code> file fail to start, making such configuration errors easier to spot.
<a href="https://github.com/tenzir/tenzir/pull/4097" target="_blank" rel="noopener noreferrer">#4097</a></p></li><li><p>Tenzir Docker images no longer expose 5158/tcp by default, as this prevented running multiple containers in the same network or in host mode.
<a href="https://github.com/tenzir/tenzir/pull/4099" target="_blank" rel="noopener noreferrer">#4099</a></p></li><li><p>Empty records and <code>null</code> values of record type are now correctly unflattened.
<a href="https://github.com/tenzir/tenzir/pull/4104" target="_blank" rel="noopener noreferrer">#4104</a></p></li><li><p>We fixed a bug that caused the explorer to sometimes show 504 Gateway Timeout errors for pipelines where the first result took over two seconds to arrive.
<a href="https://github.com/tenzir/tenzir/pull/4123" target="_blank" rel="noopener noreferrer">#4123</a></p></li><li><p>The <code>http</code> saver now correctly sets the <code>Content-Length</code> header value for HTTP POST requests.
<a href="https://github.com/tenzir/tenzir/pull/4134" target="_blank" rel="noopener noreferrer">#4134</a></p></li><li><p>Lookup tables with more than 1M entries failed to load after the node was restarted. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4137" target="_blank" rel="noopener noreferrer">#4137</a></p></li><li><p>The <code>enrich</code> operator sometimes stopped working when it encountered an event for which the specified fields did not exist. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4143" target="_blank" rel="noopener noreferrer">#4143</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4112"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.11.2" target="_blank" rel="noopener noreferrer">v4.11.2</a><a href="#v4112" class="hash-link" aria-label="Direct link to v4112" title="Direct link to v4112">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-22">Changes<a href="#changes-22" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>The <code>python</code> operator now requires Python 3.9 (down from Python 3.10) or newer, making it available on more systems.
<a href="https://github.com/tenzir/tenzir/pull/4073" target="_blank" rel="noopener noreferrer">#4073</a><a href="https://github.com/satta" target="_blank" rel="noopener noreferrer">@satta</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-56">Bug Fixes<a href="#bug-fixes-56" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The <code>python</code> operator often failed with a 504 Gateway Timeout error on app.tenzir.com when first run. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4066" target="_blank" rel="noopener noreferrer">#4066</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4110"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.11.0" target="_blank" rel="noopener noreferrer">v4.11.0</a><a href="#v4110" class="hash-link" aria-label="Direct link to v4110" title="Direct link to v4110">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-23">Changes<a href="#changes-23" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>enrich</code> and <code>lookup</code> operators now include the metadata in every context object to accomodate the new <code>--replace</code> and <code>--separate</code> options. Previously, the metadata was available once in the output field.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p>The <code>mode</code> field in the enrichments returned from the <code>lookup</code> operator is now <code>lookup.retro</code>, <code>lookup.live</code>, or <code>lookup.snapshot</code> depending on the mode.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p>The <code>bloom-filter</code> context now always returns <code>true</code> or <code>null</code> for the context instead of embedding the result in a record with a single <code>data</code> field.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-37">Features<a href="#features-37" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>sqs</code> connector makes it possible to read from and write to Amazon SQS queues.
<a href="https://github.com/tenzir/tenzir/pull/3819" target="_blank" rel="noopener noreferrer">#3819</a></p></li><li><p>The new <code>files</code> source lists file information for a given directory.
<a href="https://github.com/tenzir/tenzir/pull/4035" target="_blank" rel="noopener noreferrer">#4035</a></p></li><li><p>The <code>--replace</code> option for the <code>enrich</code> operator causes the input values to be replaced with their context instead of extending the event with the context, resulting in a leaner output.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p>The <code>--separate</code> option makes the <code>enrich</code> and <code>lookup</code> operators handle each field individually, duplicating the event for each relevant field, and returning at most one context per output event.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p>The <code>--yield &lt;field&gt;</code> option allows for adding only a part of a context with the <code>enrich</code> and <code>lookup</code> operators. For example, with a <code>geoip</code> context with a MaxMind country database, <code>--yield registered_country.iso_code</code> will cause the enrichment to only consist of the country&#x27;s ISO code.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p>The new <code>email</code> saver allows for sending pipeline data via email by connecting to a mail server via SMTP or SMTPS.
<a href="https://github.com/tenzir/tenzir/pull/4041" target="_blank" rel="noopener noreferrer">#4041</a></p></li><li><p>The <code>every &lt;interval&gt;</code> operator modifier executes a source operator repeatedly. For example, <code>every 1h from http://foo.com/bar</code> polls an endpoint every hour.
<a href="https://github.com/tenzir/tenzir/pull/4050" target="_blank" rel="noopener noreferrer">#4050</a></p></li><li><p>The new <code>set</code> operator upserts fields, i.e., acts like <code>replace</code> for existing fields and like <code>extend</code> for new fields. It also supports setting the schema name explicitly via <code>set #schema=&quot;new-name&quot;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4057" target="_blank" rel="noopener noreferrer">#4057</a></p></li><li><p>The <code>put</code> operator now supports setting the schema name explicitly via <code>put #schema=&quot;new-name&quot;</code>.
<a href="https://github.com/tenzir/tenzir/pull/4057" target="_blank" rel="noopener noreferrer">#4057</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-57">Bug Fixes<a href="#bug-fixes-57" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Source operators that do not quit on their own only freed their resources after they had emitted an additional output, even after the pipeline had already exited. This sometimes caused errors when restarting pipelines, and in rare cases caused Tenzir nodes to hang on shutdown. This no longer happens, and the entire pipeline shuts down at once.
<a href="https://github.com/tenzir/tenzir/pull/3819" target="_blank" rel="noopener noreferrer">#3819</a></p></li><li><p><code>drop</code> and <code>select</code> silently ignored all but the first match of the specified type extractors and concepts. This no longer happens. For example, <code>drop :time</code> drops all fields with type <code>time</code> from events.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p>Enriching a field in adjacent events in <code>lookup</code> and <code>enrich</code> with a <code>lookup-table</code> context sometimes crashed when the lookup-table referred to values of different types.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p>The <code>geoip</code> context sometimes returned incorrect values. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4040" target="_blank" rel="noopener noreferrer">#4040</a></p></li><li><p><code>from &lt;url&gt;</code> now also works when the url specifies username and password.
<a href="https://github.com/tenzir/tenzir/pull/4043" target="_blank" rel="noopener noreferrer">#4043</a></p></li><li><p>We fixed a bug that caused every second context to become unavailable after a restarting the node.
<a href="https://github.com/tenzir/tenzir/pull/4045" target="_blank" rel="noopener noreferrer">#4045</a></p></li><li><p>The <code>compress</code> and <code>to</code> operators no longer fail when compression is unable to further reduce the size of a batch of bytes.
<a href="https://github.com/tenzir/tenzir/pull/4048" target="_blank" rel="noopener noreferrer">#4048</a></p></li><li><p>Disk metrics now work correctly for deployments with a customized state directory.
<a href="https://github.com/tenzir/tenzir/pull/4058" target="_blank" rel="noopener noreferrer">#4058</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4104"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.10.4" target="_blank" rel="noopener noreferrer">v4.10.4</a><a href="#v4104" class="hash-link" aria-label="Direct link to v4104" title="Direct link to v4104">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-58">Bug Fixes<a href="#bug-fixes-58" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>http</code> saver now correctly sets the <code>Content-Length</code> header when issuing HTTP requests.
<a href="https://github.com/tenzir/tenzir/pull/4031" target="_blank" rel="noopener noreferrer">#4031</a></p></li><li><p>Using <code>context load</code> with large context files no longer causes a crash.
<a href="https://github.com/tenzir/tenzir/pull/4033" target="_blank" rel="noopener noreferrer">#4033</a></p></li><li><p>The <code>sigma</code> operator crashed for some rules when trying to attach the rule to the matched event. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4034" target="_blank" rel="noopener noreferrer">#4034</a></p></li><li><p>The code passed to the <code>python</code> operator no longer fails to resolve names when the local and global scope are both used.
<a href="https://github.com/tenzir/tenzir/pull/4036" target="_blank" rel="noopener noreferrer">#4036</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4103"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.10.3" target="_blank" rel="noopener noreferrer">v4.10.3</a><a href="#v4103" class="hash-link" aria-label="Direct link to v4103" title="Direct link to v4103">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-24">Changes<a href="#changes-24" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>Tenzir nodes no longer attempt reconnecting to app.tenzir.com immediately upon failure, but rather wait before reconnecting.
<a href="https://github.com/tenzir/tenzir/pull/3997" target="_blank" rel="noopener noreferrer">#3997</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-59">Bug Fixes<a href="#bug-fixes-59" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>lookup</code> operator no longer tries to match internal metrics and diagnostics events.
<a href="https://github.com/tenzir/tenzir/pull/4028" target="_blank" rel="noopener noreferrer">#4028</a></p></li><li><p>The <code>lookup</code> operator no longer returns events for which none of the provided fields exist.
<a href="https://github.com/tenzir/tenzir/pull/4028" target="_blank" rel="noopener noreferrer">#4028</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4101"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.10.1" target="_blank" rel="noopener noreferrer">v4.10.1</a><a href="#v4101" class="hash-link" aria-label="Direct link to v4101" title="Direct link to v4101">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-60">Bug Fixes<a href="#bug-fixes-60" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>When upgrading from a previous version to Tenzir v4.10 and using configured pipelines for the first time, the node sometimes crashed on startup. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4020" target="_blank" rel="noopener noreferrer">#4020</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v4100"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.10.0" target="_blank" rel="noopener noreferrer">v4.10.0</a><a href="#v4100" class="hash-link" aria-label="Direct link to v4100" title="Direct link to v4100">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-25">Changes<a href="#changes-25" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>We&#x27;ve replaced the <code>tenzir.allow-unsafe-pipelines</code> option with the <code>tenzir.no-location-overrides</code> option with an inverted default. The new option is a less confusing default for new users and more accurately describes what the option does, namely preventing operator locations to be overriden.
<a href="https://github.com/tenzir/tenzir/pull/3978" target="_blank" rel="noopener noreferrer">#3978</a></p></li><li><p>Nodes now collect CPU, disk, memory, and process metrics every second instead of every ten seconds, improving the usability of metrics with the <code>chart</code> operator. Memory metrics now work as expected on macOS.
<a href="https://github.com/tenzir/tenzir/pull/3982" target="_blank" rel="noopener noreferrer">#3982</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-38">Features<a href="#features-38" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>enrich</code> and <code>lookup</code> operators now support type extractors, concepts, and comma-separated lists of fields as arguments to <code>--field</code>.
<a href="https://github.com/tenzir/tenzir/pull/3968" target="_blank" rel="noopener noreferrer">#3968</a></p></li><li><p>The <code>tenzir/tenzir</code> and <code>tenzir/tenzir-node</code> Docker images now run natively on arm64 in addition to amd64.
<a href="https://github.com/tenzir/tenzir/pull/3989" target="_blank" rel="noopener noreferrer">#3989</a></p></li><li><p>The <code>where</code> operator now supports using <code>and</code>, <code>or</code>, and <code>not</code> as alternatives to <code>&amp;&amp;</code>, <code>||</code>, and <code>!</code> in expressions.
<a href="https://github.com/tenzir/tenzir/pull/3993" target="_blank" rel="noopener noreferrer">#3993</a></p></li><li><p>S3 access and secret keys can now be specified in the S3 plugin&#x27;s configuration file.
<a href="https://github.com/tenzir/tenzir/pull/4001" target="_blank" rel="noopener noreferrer">#4001</a></p></li><li><p>We made it possible to set pipelines declaratively in the <code>tenzir.yaml</code> configuration file.
<a href="https://github.com/tenzir/tenzir/pull/4006" target="_blank" rel="noopener noreferrer">#4006</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-61">Bug Fixes<a href="#bug-fixes-61" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>top</code> and <code>rare</code> operators now correctly count null and absent values. Previously, they emitted a single event with a count of zero when any null or absent values were included in the input.
<a href="https://github.com/tenzir/tenzir/pull/3990" target="_blank" rel="noopener noreferrer">#3990</a></p></li><li><p>Tenzir nodes sometimes failed when trying to canonicalize file system paths before opening them when the disk-monitor or compaction rotated them out. This is now handled gracefully.
<a href="https://github.com/tenzir/tenzir/pull/3994" target="_blank" rel="noopener noreferrer">#3994</a></p></li><li><p>We fixed a problem with the TCP connector that caused pipeline restarts on the same port to fail if running <code>shell</code> or <code>python</code> operators were present.
<a href="https://github.com/tenzir/tenzir/pull/3998" target="_blank" rel="noopener noreferrer">#3998</a></p></li><li><p>The <code>python</code> operator now works with when using the <code>remote</code> location override.
<a href="https://github.com/tenzir/tenzir/pull/3999" target="_blank" rel="noopener noreferrer">#3999</a></p></li><li><p>The S3 connector no longer ignores the default credentials provider for the current user when any arguments are specified in the URI explicitly.
<a href="https://github.com/tenzir/tenzir/pull/4001" target="_blank" rel="noopener noreferrer">#4001</a></p></li><li><p>The <code>sigma</code> operator sometimes crashed when pointed to a non-existent file or directory. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/4010" target="_blank" rel="noopener noreferrer">#4010</a></p></li><li><p>Parsing an invalid syslog message (using the schema <code>syslog.unknown</code>) no longer causes a crash.
<a href="https://github.com/tenzir/tenzir/pull/4012" target="_blank" rel="noopener noreferrer">#4012</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v490"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.9.0" target="_blank" rel="noopener noreferrer">v4.9.0</a><a href="#v490" class="hash-link" aria-label="Direct link to v490" title="Direct link to v490">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-26">Changes<a href="#changes-26" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>Plugins may now depend on other plugins. Plugins with unmet dependencies are automatically disabled. For example, the <code>lookup</code> and <code>enrich</code> plugins now depend on the <code>context</code> plugin. Run <code>show plugins</code> to see all available plugins and their dependencies.
<a href="https://github.com/tenzir/tenzir/pull/3877" target="_blank" rel="noopener noreferrer">#3877</a></p></li><li><p>The option <code>tenzir.db-directory</code> is deprecated in favor of the <code>tenzir.state-directory</code> option and will be removed in the future.
<a href="https://github.com/tenzir/tenzir/pull/3889" target="_blank" rel="noopener noreferrer">#3889</a></p></li><li><p>We removed the <code>tenzir-ctl start</code> subcommand. Users should switch to the <code>tenzir-node</code> command instead, which accepts the same arguments and presents the same command-line interface.
<a href="https://github.com/tenzir/tenzir/pull/3899" target="_blank" rel="noopener noreferrer">#3899</a></p></li><li><p>The binary format used by contexts for saving on disk on node shutdown is now versioned. A node can support loading of multiple different versions, and automigrate between them.
<a href="https://github.com/tenzir/tenzir/pull/3945" target="_blank" rel="noopener noreferrer">#3945</a></p></li><li><p>Color escape codes are no longer emitted if <code>NO_COLOR</code> is set to a non-empty value, or when the output device is not a terminal.
<a href="https://github.com/tenzir/tenzir/pull/3952" target="_blank" rel="noopener noreferrer">#3952</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-39">Features<a href="#features-39" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>bloom-filter</code> context represents large sets in a space-efficient manner.
<a href="https://github.com/tenzir/tenzir/pull/3834" target="_blank" rel="noopener noreferrer">#3834</a></p></li><li><p>The <code>lines</code> printer enables simple line-delimited formatting of events.
<a href="https://github.com/tenzir/tenzir/pull/3847" target="_blank" rel="noopener noreferrer">#3847</a></p></li><li><p>The <code>chart</code> operator adds metadata to the schema of the input events, enabling rendering events as bar, area, line, or pie charts on app.tenzir.com.
<a href="https://github.com/tenzir/tenzir/pull/3866" target="_blank" rel="noopener noreferrer">#3866</a></p></li><li><p><code>show pipelines</code> and the <code>/pipeline</code> API endpoints now include <code>created_at</code> and <code>last_modified</code> fields that track the pipeline&#x27;s creation and last manual modification time, respectively. Pipelines created with older versions of Tenzir will use the start time of the node as their creation time.
<a href="https://github.com/tenzir/tenzir/pull/3869" target="_blank" rel="noopener noreferrer">#3869</a></p></li><li><p>The <code>structured_data</code> field in RFC 5424-style syslog messages is now parsed and included in the output.
<a href="https://github.com/tenzir/tenzir/pull/3871" target="_blank" rel="noopener noreferrer">#3871</a></p></li><li><p>Managed pipelines now contain a new <code>total_runs</code> parameter that counts all started runs. The new <code>run</code> field is available in the events delivered by the <code>metrics</code> and <code>diagnostics</code> operators.
<a href="https://github.com/tenzir/tenzir/pull/3883" target="_blank" rel="noopener noreferrer">#3883</a></p></li><li><p>The new <code>context inspect &lt;context-name&gt;</code> command dumps a specific context&#x27;s user-provided data, usually the context&#x27;s content.
<a href="https://github.com/tenzir/tenzir/pull/3893" target="_blank" rel="noopener noreferrer">#3893</a></p></li><li><p>The <code>openapi</code> source operator generates Tenzir&#x27;s OpenAPI specification. Use <code>openapi | to ./openapi.yaml</code> to generate a file with the canonical format.
<a href="https://github.com/tenzir/tenzir/pull/3898" target="_blank" rel="noopener noreferrer">#3898</a></p></li><li><p>The <code>--selector</code> option of the <code>json</code> parser now works with nested fields, and integer fields.
<a href="https://github.com/tenzir/tenzir/pull/3900" target="_blank" rel="noopener noreferrer">#3900</a></p></li><li><p>The <code>python</code> operator gained a new <code>--file</code> flag that allows loading python code from a file instead of providing it as part of the pipeline definition.
<a href="https://github.com/tenzir/tenzir/pull/3901" target="_blank" rel="noopener noreferrer">#3901</a></p></li><li><p>The <code>context reset</code> operator allows for clearing the state of a context.
<a href="https://github.com/tenzir/tenzir/pull/3908" target="_blank" rel="noopener noreferrer">#3908</a></p></li><li><p>The <code>context save</code> and <code>context load</code> operators allow serializing and deserializing the state of a context to/from bytes.
<a href="https://github.com/tenzir/tenzir/pull/3908" target="_blank" rel="noopener noreferrer">#3908</a></p></li><li><p>The <code>export</code> operator gained a <code>--low-priority</code> option, which causes it to interfere less with regular priority exports at the cost of potentially running slower.
<a href="https://github.com/tenzir/tenzir/pull/3909" target="_blank" rel="noopener noreferrer">#3909</a></p></li><li><p>The context match events now contain a new field <code>mode</code> that states the lookup mode of this particular match.
<a href="https://github.com/tenzir/tenzir/pull/3920" target="_blank" rel="noopener noreferrer">#3920</a></p></li><li><p>The <code>enrich</code> operator gained a <code>--filter</code> option, which causes it to exclude enriched events that do not contain a context.
<a href="https://github.com/tenzir/tenzir/pull/3920" target="_blank" rel="noopener noreferrer">#3920</a></p></li><li><p>When specifying a schema with a field typed as <code>time #unit=&lt;unit&gt;</code>, numeric values will be interpreted as offsets from the epoch.
<a href="https://github.com/tenzir/tenzir/pull/3927" target="_blank" rel="noopener noreferrer">#3927</a></p></li><li><p>Operator metrics now separately track the time that an operator was paused or running in the <code>time_paused</code> and <code>time_running</code> values in addition to the wall-clock time in <code>time_total</code>. Throughput rates now exclude the paused time from their calculation.
<a href="https://github.com/tenzir/tenzir/pull/3940" target="_blank" rel="noopener noreferrer">#3940</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-62">Bug Fixes<a href="#bug-fixes-62" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>xsv</code> parser (and by extension the <code>csv</code>, <code>tsv</code>, and <code>ssv</code> parsers) skipped  lines that had a mismatch between the number of values contained and the number  of fields defined in the header. Instead, it now fills in <code>null</code> values for  missing values and, if the new <code>--auto-expand</code> option is set, also adds new  header fields for excess values.
<a href="https://github.com/tenzir/tenzir/pull/3874" target="_blank" rel="noopener noreferrer">#3874</a></p></li><li><p>The <code>/serve</code> API sometimes returned an empty string for the next continuation token instead of <code>null</code> when there are no further results to fetch. It now consistently returns <code>null</code>.
<a href="https://github.com/tenzir/tenzir/pull/3885" target="_blank" rel="noopener noreferrer">#3885</a></p></li><li><p>Commas are now allowed as subsecond separators in timestamps in TQL. Previously, only dots were allowed, but ISO 8601 allows for both.
<a href="https://github.com/tenzir/tenzir/pull/3903" target="_blank" rel="noopener noreferrer">#3903</a></p></li><li><p>We fixed a bug that under rare circumstances led to an indefinite hang when using a high-volume source followed by a slow transformation and a fast sink.
<a href="https://github.com/tenzir/tenzir/pull/3909" target="_blank" rel="noopener noreferrer">#3909</a></p></li><li><p>Retroactive lookups will now properly terminate when they have finished.
<a href="https://github.com/tenzir/tenzir/pull/3910" target="_blank" rel="noopener noreferrer">#3910</a></p></li><li><p>We fixed a rare deadlock by changing the internal logger behavior from blocking until the oldest messages were consumed to overwriting them.
<a href="https://github.com/tenzir/tenzir/pull/3911" target="_blank" rel="noopener noreferrer">#3911</a></p></li><li><p>Invalid schema definitions, where a record contains the same key multiple times, are now detected and rejected.
<a href="https://github.com/tenzir/tenzir/pull/3929" target="_blank" rel="noopener noreferrer">#3929</a></p></li><li><p>The option to automatically restart on failure did not correctly trigger for pipelines that failed an operator emitted an error diagnostic, a new mechanism for improved error messages introduced with Tenzir v4.8. Such pipelines now restart automatically as expected.
<a href="https://github.com/tenzir/tenzir/pull/3947" target="_blank" rel="noopener noreferrer">#3947</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v482"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.8.2" target="_blank" rel="noopener noreferrer">v4.8.2</a><a href="#v482" class="hash-link" aria-label="Direct link to v482" title="Direct link to v482">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-63">Bug Fixes<a href="#bug-fixes-63" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>unflatten</code> operator no longer ignores fields that begin or end with the separator.
<a href="https://github.com/tenzir/tenzir/pull/3814" target="_blank" rel="noopener noreferrer">#3814</a></p></li><li><p>Some idle source operators and loaders, e.g., <code>from tcp://localhost:3000</code> where no data arrives via TCP, consumed excessive amounts of CPU. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/3865" target="_blank" rel="noopener noreferrer">#3865</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v481"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.8.1" target="_blank" rel="noopener noreferrer">v4.8.1</a><a href="#v481" class="hash-link" aria-label="Direct link to v481" title="Direct link to v481">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-40">Features<a href="#features-40" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The <code>velociraptor</code> operator gained a new <code>--profile &lt;profile&gt;</code> option to support multiple configured Velociraptor instances. To opt into using profiles, move your Velociraptor configuration in <code>&lt;configdir&gt;/tenzir/plugin/velociraptor.yaml</code> from <code>&lt;config&gt;</code> to <code>profiles.&lt;profile&gt;.&lt;config&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/3848" target="_blank" rel="noopener noreferrer">#3848</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-64">Bug Fixes<a href="#bug-fixes-64" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>amqp</code> connector plugin was incorrectly packaged and unavailable in some build configurations. The plugin is now available in all builds.
<a href="https://github.com/tenzir/tenzir/pull/3854" target="_blank" rel="noopener noreferrer">#3854</a></p></li><li><p>Failing to create the virtualenv of the <code>python</code> operator caused subsequent uses of the <code>python</code> operator to silently fail. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/3854" target="_blank" rel="noopener noreferrer">#3854</a></p></li><li><p>The Debian package now depends on <code>python3-venv</code>, which is required for the <code>python</code> operator to create its virtualenv.
<a href="https://github.com/tenzir/tenzir/pull/3854" target="_blank" rel="noopener noreferrer">#3854</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v480"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.8.0" target="_blank" rel="noopener noreferrer">v4.8.0</a><a href="#v480" class="hash-link" aria-label="Direct link to v480" title="Direct link to v480">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-27">Changes<a href="#changes-27" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>The <code>fluent-bit</code> source operator no longer performs JSON conversion from Fluent Bit prior to processing an event. Instead, it directly processes the MsgPack data that Fluent Bit uses internally for more robust and quicker event delivery.
<a href="https://github.com/tenzir/tenzir/pull/3770" target="_blank" rel="noopener noreferrer">#3770</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-41">Features<a href="#features-41" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>http</code> and <code>https</code> loaders now also have savers to send data from a pipeline to a remote API.
<a href="https://github.com/tenzir/tenzir/pull/3539" target="_blank" rel="noopener noreferrer">#3539</a></p></li><li><p>The <code>http</code> and <code>https</code> connectors have a new flag <code>--form</code> to submit the request body URL-encoded. This also changes the Content-Type header to <code>application/x-www-form-urlencoded</code>.
<a href="https://github.com/tenzir/tenzir/pull/3539" target="_blank" rel="noopener noreferrer">#3539</a></p></li><li><p>The new <code>timeshift</code> operator adjusts timestamps relative to a given start time, with an optional speedup.
<a href="https://github.com/tenzir/tenzir/pull/3701" target="_blank" rel="noopener noreferrer">#3701</a></p></li><li><p>The new <code>delay</code> operator delays events relative to a given start time, with an optional speedup.
<a href="https://github.com/tenzir/tenzir/pull/3701" target="_blank" rel="noopener noreferrer">#3701</a></p></li><li><p>The new <code>lookup</code> operator performs live filtering of the import feed using a context, and translates context updates into historical queries. This effectively enables live and retro matching in a single operator.
<a href="https://github.com/tenzir/tenzir/pull/3721" target="_blank" rel="noopener noreferrer">#3721</a></p></li><li><p>A Tenzir node will now automatically collect and store metrics about disk, cpu and memory usage of the host machine.
<a href="https://github.com/tenzir/tenzir/pull/3736" target="_blank" rel="noopener noreferrer">#3736</a></p></li><li><p>The <code>time</code> parser allows parsing datetimes and timestamps from arbitrary strings using a <code>strptime</code>-like format string.
<a href="https://github.com/tenzir/tenzir/pull/3738" target="_blank" rel="noopener noreferrer">#3738</a></p></li><li><p>The new <code>gelf</code> parser reads a stream of NULL-byte terminated messages in Graylog Extended Log Format (GELF).
<a href="https://github.com/tenzir/tenzir/pull/3768" target="_blank" rel="noopener noreferrer">#3768</a></p></li><li><p>The  <code>csv</code>, <code>tsv</code>, <code>ssv</code> and <code>xsv</code> parsers now support setting the header line manually with the <code>--header</code> option.
<a href="https://github.com/tenzir/tenzir/pull/3778" target="_blank" rel="noopener noreferrer">#3778</a></p></li><li><p>On Linux systems, the process metrics now have an additional value <code>open_fds</code> showing the number of file descriptors opened by the node.
<a href="https://github.com/tenzir/tenzir/pull/3784" target="_blank" rel="noopener noreferrer">#3784</a></p></li><li><p>Pipeline states in the <code>/pipeline</code> API will not change upon node shutdown anymore. When a node restarts afterwards, previously running pipelines will continue to run while paused pipelines will load in a stopped state.
<a href="https://github.com/tenzir/tenzir/pull/3785" target="_blank" rel="noopener noreferrer">#3785</a></p></li><li><p>The <code>metrics</code> operator returns internal metrics events generated in a Tenzir node. Use <code>metrics --live</code> to get a feed of metrics as they are being generated.
<a href="https://github.com/tenzir/tenzir/pull/3790" target="_blank" rel="noopener noreferrer">#3790</a></p></li><li><p>Concepts are now supported in more places than just the <code>where</code> operator: All operators and concepts that reference fields in events now support them transparently. For example, it is not possible to enrich with a lookup table against all source IP addresses defined in the concept <code>net.src.ip</code>, or to group by destination ports across different schemas with the concept <code>net.dst.port</code>.
<a href="https://github.com/tenzir/tenzir/pull/3812" target="_blank" rel="noopener noreferrer">#3812</a></p></li><li><p>The  <code>csv</code>, <code>tsv</code>, <code>ssv</code> and <code>xsv</code> printers now support not printing a header line with the <code>--no-header</code> option.
<a href="https://github.com/tenzir/tenzir/pull/3821" target="_blank" rel="noopener noreferrer">#3821</a></p></li><li><p>The new <code>diagnostics</code> operator provides information about diagnostics that a pipeline may encounter during its lifetime.
<a href="https://github.com/tenzir/tenzir/pull/3828" target="_blank" rel="noopener noreferrer">#3828</a></p></li><li><p>The RFC 3164 syslog parser now supports years in the message timestamp.
<a href="https://github.com/tenzir/tenzir/pull/3833" target="_blank" rel="noopener noreferrer">#3833</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-65">Bug Fixes<a href="#bug-fixes-65" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>tenzir/tenzir:latest-slim</code> Docker image now sets a default <code>TENZIR_CACHE_DIRECTORY</code> automatically.
<a href="https://github.com/tenzir/tenzir/pull/3764" target="_blank" rel="noopener noreferrer">#3764</a></p></li><li><p>When reading Base64-encoded JSON strings with the <code>blob</code> type, <code>=</code> padding is now accepted.
<a href="https://github.com/tenzir/tenzir/pull/3765" target="_blank" rel="noopener noreferrer">#3765</a></p></li><li><p>The <code>/serve</code> API now displays why a pipeline became unavailable in an error case instead of showing a generic error message. This causes runtime errors in pipelines to show up in the Explorer on app.tenzir.com.
<a href="https://github.com/tenzir/tenzir/pull/3788" target="_blank" rel="noopener noreferrer">#3788</a></p></li><li><p><code>export --live</code> sometimes got stuck, failing to deliver events. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/3790" target="_blank" rel="noopener noreferrer">#3790</a></p></li><li><p>The <code>/pipeline/launch</code> endpoint now optimizes the pipeline before starting it.
<a href="https://github.com/tenzir/tenzir/pull/3801" target="_blank" rel="noopener noreferrer">#3801</a></p></li><li><p>Updating entries of a <code>lookup-table</code> context now overrides values with duplicate keys instead of ignoring them.
<a href="https://github.com/tenzir/tenzir/pull/3808" target="_blank" rel="noopener noreferrer">#3808</a></p></li><li><p>The <code>zeek-tsv</code> printer incorrectly emitted metadata too frequently. It now only writes opening and closing tags when it encounters a new schema.
<a href="https://github.com/tenzir/tenzir/pull/3836" target="_blank" rel="noopener noreferrer">#3836</a></p></li><li><p>Failing transfers using <code>http(s)</code> and <code>ftp(s)</code> connectors now properly return an error when the transfer broke. For example, <code>from http://does.not.exist</code> no longer returns silently a success.
<a href="https://github.com/tenzir/tenzir/pull/3842" target="_blank" rel="noopener noreferrer">#3842</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v471"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.7.1" target="_blank" rel="noopener noreferrer">v4.7.1</a><a href="#v471" class="hash-link" aria-label="Direct link to v471" title="Direct link to v471">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-66">Bug Fixes<a href="#bug-fixes-66" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed a bug that caused operators that caused an increased memory usage for pipelines with slow operators immediately after a faster operator.
<a href="https://github.com/tenzir/tenzir/pull/3758" target="_blank" rel="noopener noreferrer">#3758</a></p></li><li><p>We fixed a bug that caused short-running pipelines to sometimes hang.
<a href="https://github.com/tenzir/tenzir/pull/3758" target="_blank" rel="noopener noreferrer">#3758</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v470"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.7.0" target="_blank" rel="noopener noreferrer">v4.7.0</a><a href="#v470" class="hash-link" aria-label="Direct link to v470" title="Direct link to v470">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-28">Changes<a href="#changes-28" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>show</code> operator now always connects to and runs at a node. Consequently, the <code>version</code> and <code>nics</code> aspects moved into operators of their own.
<a href="https://github.com/tenzir/tenzir/pull/3521" target="_blank" rel="noopener noreferrer">#3521</a></p></li><li><p>The events created by the RFC 3164 syslog parser no longer has a <code>tag</code> field, but <code>app_name</code> and <code>process_id</code>.
<a href="https://github.com/tenzir/tenzir/pull/3692" target="_blank" rel="noopener noreferrer">#3692</a></p></li><li><p>Records can now have fields where the name is empty.
<a href="https://github.com/tenzir/tenzir/pull/3742" target="_blank" rel="noopener noreferrer">#3742</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-42">Features<a href="#features-42" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>With the new <code>processes</code> and <code>sockets</code> source operators, you can now get a snapshot of the operating system processes and sockets as pipeline input.
<a href="https://github.com/tenzir/tenzir/pull/3521" target="_blank" rel="noopener noreferrer">#3521</a></p></li><li><p>The <code>kv</code> parser splits strings into key-value pairs.
<a href="https://github.com/tenzir/tenzir/pull/3646" target="_blank" rel="noopener noreferrer">#3646</a></p></li><li><p><code>show partitions</code> now contains location and size of the <code>store</code>, <code>index</code>, and <code>sketch</code> files of a partition, as well the aggregate size at <code>diskusage</code>.
<a href="https://github.com/tenzir/tenzir/pull/3675" target="_blank" rel="noopener noreferrer">#3675</a></p></li><li><p>The <code>grok</code> parser, for use with the <code>parse</code> operator, enables powerful regex-based string dissection.
<a href="https://github.com/tenzir/tenzir/pull/3683" target="_blank" rel="noopener noreferrer">#3683</a></p></li><li><p>The <code>syslog</code> parser now supports macOS-style syslog messages.
<a href="https://github.com/tenzir/tenzir/pull/3692" target="_blank" rel="noopener noreferrer">#3692</a></p></li><li><p>The <code>slice</code> operator keeps a range of events within a half-closed interval. Begin and end of the interval can be specified relative to the first or last event.
<a href="https://github.com/tenzir/tenzir/pull/3703" target="_blank" rel="noopener noreferrer">#3703</a></p></li><li><p><code>show operators</code> now shows user-defined operators in addition to operators that ship with Tenzir or as plugins.
<a href="https://github.com/tenzir/tenzir/pull/3723" target="_blank" rel="noopener noreferrer">#3723</a></p></li><li><p>The <code>tcp</code> connector is now also a saver in addition to a loader.
<a href="https://github.com/tenzir/tenzir/pull/3727" target="_blank" rel="noopener noreferrer">#3727</a></p></li><li><p>The new <code>geoip</code> context is a built-in that reads MaxMind DB files and uses IP values in events to enrich them with the MaxMind DB geolocation data.
<a href="https://github.com/tenzir/tenzir/pull/3731" target="_blank" rel="noopener noreferrer">#3731</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-67">Bug Fixes<a href="#bug-fixes-67" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Pipeline operators blocking in their execution sometimes caused results to be delayed. This is no longer the case. This bug fix also reduces the time to first result for pipelines with many operators.
<a href="https://github.com/tenzir/tenzir/pull/3743" target="_blank" rel="noopener noreferrer">#3743</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v464"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.6.4" target="_blank" rel="noopener noreferrer">v4.6.4</a><a href="#v464" class="hash-link" aria-label="Direct link to v464" title="Direct link to v464">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-29">Changes<a href="#changes-29" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>When selecting default paths, the <code>tenzir-node</code> will now respect the systemd-provided variables <code>STATE_DIRECTORY</code>, <code>CACHE_DIRECTORY</code> and <code>LOGS_DIRECTORY</code> before falling back to <code>$PWD/tenzir.db</code>.
<a href="https://github.com/tenzir/tenzir/pull/3714" target="_blank" rel="noopener noreferrer">#3714</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-43">Features<a href="#features-43" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The <code>tenzir.metrics.operator</code> metric now contains an additional <code>duration</code> field with the timespan over which the metric was collected.
<a href="https://github.com/tenzir/tenzir/pull/3713" target="_blank" rel="noopener noreferrer">#3713</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-68">Bug Fixes<a href="#bug-fixes-68" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The RFC 3164 syslog parser no longer requires a whitespace after the <code>PRI</code>-field (part in angle brackets in the beginning of a message).
<a href="https://github.com/tenzir/tenzir/pull/3718" target="_blank" rel="noopener noreferrer">#3718</a></p></li><li><p>The yaml printer no longer crashes when receiving enums.
<a href="https://github.com/tenzir/tenzir/pull/3719" target="_blank" rel="noopener noreferrer">#3719</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v463"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.6.3" target="_blank" rel="noopener noreferrer">v4.6.3</a><a href="#v463" class="hash-link" aria-label="Direct link to v463" title="Direct link to v463">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-69">Bug Fixes<a href="#bug-fixes-69" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The Debian package sometimes failed to install, and the bundled systemd unit failed to start with Tenzir v4.6.2. This issue no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/3705" target="_blank" rel="noopener noreferrer">#3705</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v460"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.6.0" target="_blank" rel="noopener noreferrer">v4.6.0</a><a href="#v460" class="hash-link" aria-label="Direct link to v460" title="Direct link to v460">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-30">Changes<a href="#changes-30" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>Ingress and egress metrics for pipelines now indicate whether the pipeline sent/received events to/from outside of the node with a new <code>internal</code> flag. For example, when using the <code>export</code> operator, data is entering the pipeline from within the node, so its ingress is considered internal.
<a href="https://github.com/tenzir/tenzir/pull/3658" target="_blank" rel="noopener noreferrer">#3658</a></p></li><li><p>We renamed the name of our python package from <code>pytenzir</code> to <code>tenzir</code>.
<a href="https://github.com/tenzir/tenzir/pull/3660" target="_blank" rel="noopener noreferrer">#3660</a></p></li><li><p>We renamed the <code>--bind</code> option of the <code>zmq</code> connector to <code>--listen</code>.
<a href="https://github.com/tenzir/tenzir/pull/3664" target="_blank" rel="noopener noreferrer">#3664</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-44">Features<a href="#features-44" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>python</code> operator adds the ability to perform arbitrary event to event transformations with the full power of Python 3.
<a href="https://github.com/tenzir/tenzir/pull/3592" target="_blank" rel="noopener noreferrer">#3592</a></p></li><li><p>The operators <code>from</code>, <code>to</code>, <code>load</code>, and <code>save</code> support using URLs and file paths directly as their argument. For example, <code>load https://example.com</code> means <code>load https https://example.com</code>, and <code>save local-file.json</code> means <code>save file local-file.json</code>.
<a href="https://github.com/tenzir/tenzir/pull/3608" target="_blank" rel="noopener noreferrer">#3608</a></p></li><li><p>The new <code>--internal</code> flag for the <code>export</code> operators returns internal events collected by the system, for example pipeline metrics.
<a href="https://github.com/tenzir/tenzir/pull/3619" target="_blank" rel="noopener noreferrer">#3619</a></p></li><li><p>The <code>syslog</code> parser allows reading both RFC 5424 and RFC 3164 syslog messages.
<a href="https://github.com/tenzir/tenzir/pull/3645" target="_blank" rel="noopener noreferrer">#3645</a></p></li><li><p>Use <code>show</code> without an aspect to return information about all aspects of a node.
<a href="https://github.com/tenzir/tenzir/pull/3650" target="_blank" rel="noopener noreferrer">#3650</a></p></li><li><p>The new <code>yield</code> operator extracts nested records with the ability to unfold lists.
<a href="https://github.com/tenzir/tenzir/pull/3651" target="_blank" rel="noopener noreferrer">#3651</a></p></li><li><p>When using <code>from &lt;URL&gt;</code> and <code>to &lt;URL&gt;</code> without specifying the format explicitly using a <code>read</code>/<code>write</code> argument, the default format is determined by the file extension for all loaders and savers, if possible. Previously, that was only done when using the <code>file</code> loader/saver. Additionally, if the file name would indicate some sort of compression (e.g. <code>.gz</code>), compression and decompression is performed automatically. For example, <code>from https://example.com/myfile.yml.gz</code> is expanded to <code>load https://example.com/myfile.yml.gz | decompress gzip | read yaml</code> automatically.
<a href="https://github.com/tenzir/tenzir/pull/3653" target="_blank" rel="noopener noreferrer">#3653</a></p></li><li><p>We added a new <code>tcp</code> connector that allows reading raw bytes from TCP or TLS connections.
<a href="https://github.com/tenzir/tenzir/pull/3664" target="_blank" rel="noopener noreferrer">#3664</a></p></li><li><p>The new, experimental <code>parse</code> operator applies a parser to the string stored in a given field.
<a href="https://github.com/tenzir/tenzir/pull/3665" target="_blank" rel="noopener noreferrer">#3665</a></p></li><li><p>We optimized the behavior of the &#x27;serve&#x27; operator to respond quicker and cause less system load for pipelines that take a long time to generate the first result. The new <code>min_events</code> parameter can be used to implement long-polling behavior for clients of <code>/serve</code>.
<a href="https://github.com/tenzir/tenzir/pull/3666" target="_blank" rel="noopener noreferrer">#3666</a></p></li><li><p>The new <code>apply</code> operator includes pipelines defined in other files.
<a href="https://github.com/tenzir/tenzir/pull/3677" target="_blank" rel="noopener noreferrer">#3677</a></p></li><li><p>Use <code>--allow-comments</code> with the <code>xsv</code> parser (incl. <code>csv</code>, <code>tsv</code>, and <code>ssv</code>) to treat lines beginning with <code>&#x27;#&#x27;</code> as comments.
<a href="https://github.com/tenzir/tenzir/pull/3681" target="_blank" rel="noopener noreferrer">#3681</a></p></li><li><p>The closed-source <code>context</code> plugin offers a backend functionality for finding matches between data sets.
<a href="https://github.com/tenzir/tenzir/pull/3684" target="_blank" rel="noopener noreferrer">#3684</a></p></li><li><p>The new <code>lookup-table</code> built-in is a hashtable-based contextualization algorithm that enriches events based on a unique value.
<a href="https://github.com/tenzir/tenzir/pull/3684" target="_blank" rel="noopener noreferrer">#3684</a></p></li><li><p>The JSON format has a new <code>--arrays-of-objects</code> parameter that allows for parsing a JSON array of JSON objects into an event for each object.
<a href="https://github.com/tenzir/tenzir/pull/3684" target="_blank" rel="noopener noreferrer">#3684</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-70">Bug Fixes<a href="#bug-fixes-70" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p><code>export --live</code> now respects a subsequent <code>where &lt;expr&gt;</code> instead of silently discarding the filter expression.
<a href="https://github.com/tenzir/tenzir/pull/3619" target="_blank" rel="noopener noreferrer">#3619</a></p></li><li><p>Using the <code>sort</code> operator with polymorphic inputs no longer leads to a failing assertion under some circumstances.
<a href="https://github.com/tenzir/tenzir/pull/3655" target="_blank" rel="noopener noreferrer">#3655</a></p></li><li><p>The <code>csv</code>, <code>ssv</code>, and <code>tsv</code> parsers now correctly support empty strings, lists, and null values.
<a href="https://github.com/tenzir/tenzir/pull/3687" target="_blank" rel="noopener noreferrer">#3687</a></p></li><li><p>The <code>tail</code> operator no longer hangs occasionally.
<a href="https://github.com/tenzir/tenzir/pull/3687" target="_blank" rel="noopener noreferrer">#3687</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v450"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.5.0" target="_blank" rel="noopener noreferrer">v4.5.0</a><a href="#v450" class="hash-link" aria-label="Direct link to v450" title="Direct link to v450">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-31">Changes<a href="#changes-31" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The operators <code>drop</code>, <code>pseudonymize</code>, <code>put</code>, <code>extend</code>, <code>replace</code>, <code>rename</code> and <code>select</code> were converted from suffix matching to prefix matching and can therefore address records now.
<a href="https://github.com/tenzir/tenzir/pull/3616" target="_blank" rel="noopener noreferrer">#3616</a></p></li><li><p>Sparse indexes for time and bool fields are now always enabled, accelerating lookups against them.
<a href="https://github.com/tenzir/tenzir/pull/3639" target="_blank" rel="noopener noreferrer">#3639</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-45">Features<a href="#features-45" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>api</code> source operator interacts with Tenzir&#x27;s REST API without needing to spin up a web server, making all APIs accessible from within pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3630" target="_blank" rel="noopener noreferrer">#3630</a></p></li><li><p>In <code>where &lt;expression&gt;</code>, the types of numeric literals and numeric fields in an equality or relational comparison must no longer match exactly. The literals <code>+42</code>, <code>42</code> or <code>42.0</code> now compare against fields of types <code>int64</code>, <code>uint64</code>, and <code>double</code> as expected.
<a href="https://github.com/tenzir/tenzir/pull/3634" target="_blank" rel="noopener noreferrer">#3634</a></p></li><li><p>The <code>import</code> operator now flushes events to disk automatically before returning, ensuring that they are available immediately for subsequent uses of the <code>export</code> operator.
<a href="https://github.com/tenzir/tenzir/pull/3638" target="_blank" rel="noopener noreferrer">#3638</a></p></li><li><p>Lookups against uint64, int64, double, and duration fields now always use sparse indexes, which improves the performance of <code>export | where &lt;expression&gt;</code> for some expressions.
<a href="https://github.com/tenzir/tenzir/pull/3639" target="_blank" rel="noopener noreferrer">#3639</a></p></li><li><p>If the <code>summarize</code> operator has no <code>by</code> clause, it now returns a result even if there is no input. For example, <code>summarize num=count(.)</code> returns an event with <code>{&quot;num&quot;: 0}</code>. Aggregation functions which do not have a single default value, for example because it would depend on the input type, return <code>null</code>.
<a href="https://github.com/tenzir/tenzir/pull/3640" target="_blank" rel="noopener noreferrer">#3640</a></p></li><li><p>The <code>tenzir.disable-plugins</code> option is a list of names of plugins and builtins to explicitly forbid from being used in Tenzir. For example, adding <code>shell</code> will prohibit use of the <code>shell</code> operator builtin, and adding <code>kafka</code> will prohibit use of the <code>kafka</code> connector plugin. This allows for a more fine-grained control than the <code>tenzir.allow-unsafe-pipelines</code> option.
<a href="https://github.com/tenzir/tenzir/pull/3642" target="_blank" rel="noopener noreferrer">#3642</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-71">Bug Fixes<a href="#bug-fixes-71" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The long option <code>--append</code> for the <code>file</code> and <code>directory</code> savers now works as documented. Previously, only the short option worked correctly.
<a href="https://github.com/tenzir/tenzir/pull/3629" target="_blank" rel="noopener noreferrer">#3629</a></p></li><li><p>The <code>exporter.*</code> metrics will now be emitted in case the exporter finishes early.
<a href="https://github.com/tenzir/tenzir/pull/3633" target="_blank" rel="noopener noreferrer">#3633</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v440"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.4.0" target="_blank" rel="noopener noreferrer">v4.4.0</a><a href="#v440" class="hash-link" aria-label="Direct link to v440" title="Direct link to v440">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-32">Changes<a href="#changes-32" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>string</code> type is now restricted to valid UTF-8 strings. Use <code>blob</code> for arbitrary binary data.
<a href="https://github.com/tenzir/tenzir/pull/3581" target="_blank" rel="noopener noreferrer">#3581</a></p></li><li><p>The new <code>autostart</code> and <code>autodelete</code> parameters for the pipeline manager supersede the <code>start_when_created</code> and <code>restart_with_node</code> parameters and extend restarting and deletion possibilities for pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3585" target="_blank" rel="noopener noreferrer">#3585</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-46">Features<a href="#features-46" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>amqp</code> connector enables interaction with an AMQP 0-9-1 exchange, supporting working with messages as producer (saver) and consumer (loader).
<a href="https://github.com/tenzir/tenzir/pull/3546" target="_blank" rel="noopener noreferrer">#3546</a></p></li><li><p>The new <code>completed</code> pipeline state in the pipeline manager shows when a pipeline has finished execution.
<a href="https://github.com/tenzir/tenzir/pull/3554" target="_blank" rel="noopener noreferrer">#3554</a></p></li><li><p>If the node with running pipelines crashes, they will be marked as <code>failed</code> upon restarting.
<a href="https://github.com/tenzir/tenzir/pull/3554" target="_blank" rel="noopener noreferrer">#3554</a></p></li><li><p>The new <code>velociraptor</code> source supports submitting VQL queries to a Velociraptor server. The operator communicates with the server via gRPC using a mutually authenticated and encrypted connection with client certificates. For example, <code>velociraptor -q &quot;select * from pslist()&quot;</code> lists processes and their running binaries.
<a href="https://github.com/tenzir/tenzir/pull/3556" target="_blank" rel="noopener noreferrer">#3556</a></p></li><li><p>The output of <code>show partitions</code> includes a new <code>events</code> field that shows the number of events kept in that partition. E.g., the pipeline <code>show partitions | summarize events=sum(events) by schema</code> shows the number of events per schema stored at the node.
<a href="https://github.com/tenzir/tenzir/pull/3580" target="_blank" rel="noopener noreferrer">#3580</a></p></li><li><p>The new <code>blob</code> type can be used to represent arbitrary binary data.
<a href="https://github.com/tenzir/tenzir/pull/3581" target="_blank" rel="noopener noreferrer">#3581</a></p></li><li><p>The new <code>ttl_expires_in_ns</code> shows the remaining time to live for a pipeline in the pipeline manager.
<a href="https://github.com/tenzir/tenzir/pull/3585" target="_blank" rel="noopener noreferrer">#3585</a></p></li><li><p>The new <code>yara</code> operator matches Yara rules on byte streams, producing structured events when rules match.
<a href="https://github.com/tenzir/tenzir/pull/3594" target="_blank" rel="noopener noreferrer">#3594</a></p></li><li><p><code>show serves</code> displays all currently active serve IDs in the <code>/serve</code> API endpoint, showing an overview of active pipelines with an on-demand API.
<a href="https://github.com/tenzir/tenzir/pull/3596" target="_blank" rel="noopener noreferrer">#3596</a></p></li><li><p>The <code>export</code> operator now has a <code>--live</code> option to continuously emit events as they are imported instead of those that already reside in the database.
<a href="https://github.com/tenzir/tenzir/pull/3612" target="_blank" rel="noopener noreferrer">#3612</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-72">Bug Fixes<a href="#bug-fixes-72" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Pipelines ending with the <code>serve</code> operator no longer incorrectly exit 60 seconds after transferring all events to the <code>/serve</code> endpoint, but rather wait until all events were fetched from the endpoint.
<a href="https://github.com/tenzir/tenzir/pull/3562" target="_blank" rel="noopener noreferrer">#3562</a></p></li><li><p>Shutting down a node immediately after starting it now no longer waits for all partitions to be loaded.
<a href="https://github.com/tenzir/tenzir/pull/3562" target="_blank" rel="noopener noreferrer">#3562</a></p></li><li><p>When using <code>read json</code>, incomplete objects (e.g., due to truncated files) are now reported as an error instead of silently discarded.
<a href="https://github.com/tenzir/tenzir/pull/3570" target="_blank" rel="noopener noreferrer">#3570</a></p></li><li><p>Having duplicate field names in <code>zeek-tsv</code> data no longer causes a crash, but rather errors out gracefully.
<a href="https://github.com/tenzir/tenzir/pull/3578" target="_blank" rel="noopener noreferrer">#3578</a></p></li><li><p>The <code>csv</code> parsed (or more generally, the <code>xsv</code> parser) now attempts to parse fields in order to infer their types.
<a href="https://github.com/tenzir/tenzir/pull/3582" target="_blank" rel="noopener noreferrer">#3582</a></p></li><li><p>A regression in Tenzir v4.3 caused exports to often consider all partitions as candidates. Pipelines of the form <code>export | where &lt;expr&gt;</code> now work as expected again and only load relevant partitions from disk.
<a href="https://github.com/tenzir/tenzir/pull/3599" target="_blank" rel="noopener noreferrer">#3599</a></p></li><li><p>The long option <code>--skip-empty</code> for <code>read lines</code> now works as documented.
<a href="https://github.com/tenzir/tenzir/pull/3599" target="_blank" rel="noopener noreferrer">#3599</a></p></li><li><p>The <code>zeek-tsv</code> parser is now able to handle fields of type <code>subnet</code> correctly.
<a href="https://github.com/tenzir/tenzir/pull/3606" target="_blank" rel="noopener noreferrer">#3606</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v430"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.3.0" target="_blank" rel="noopener noreferrer">v4.3.0</a><a href="#v430" class="hash-link" aria-label="Direct link to v430" title="Direct link to v430">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-33">Changes<a href="#changes-33" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>We made it easier to reuse the default <code>zmq</code> socket endpoint by disabling <em>socket lingering</em>, and thereby immediately relinquishing resources when terminating a ZeroMQ pipeline. Changing the linger period from infinite to 0 no longer buffers pending messages in memory after closing a ZeroMQ socket.
<a href="https://github.com/tenzir/tenzir/pull/3536" target="_blank" rel="noopener noreferrer">#3536</a></p></li><li><p>Tenzir no longer builds dense indexes for imported events. Dense indexes improved query performance at the cost of a higher memory usage. However, over time the performance improvement became smaller due to other improvements in the underlying storage engine.
<a href="https://github.com/tenzir/tenzir/pull/3552" target="_blank" rel="noopener noreferrer">#3552</a></p></li><li><p>Tenzir no longer supports models in taxonomies. Since Tenzir v4.0 they were only supported in the deprecated <code>tenzir-ctl export</code> and <code>tenzir-ctl count</code> commands. We plan to bring the functionality back in the future with more powerful expressions in TQL.
<a href="https://github.com/tenzir/tenzir/pull/3552" target="_blank" rel="noopener noreferrer">#3552</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-47">Features<a href="#features-47" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>yaml</code> format supports reading and writing YAML documents and streams.
<a href="https://github.com/tenzir/tenzir/pull/3456" target="_blank" rel="noopener noreferrer">#3456</a></p></li><li><p>The new <code>fluent-bit</code> source and sink operator provide and interface to the Fluent Bit ecosystem. The source operator maps to a Fluent Bit <em>input</em> and the sink operator to a Fluent Bit <em>output</em>.
<a href="https://github.com/tenzir/tenzir/pull/3461" target="_blank" rel="noopener noreferrer">#3461</a>
<a href="https://github.com/fluent" target="_blank" rel="noopener noreferrer">@fluent</a>
<a href="https://github.com/bit" target="_blank" rel="noopener noreferrer">@bit</a></p></li><li><p>The performance of the <code>json</code>, <code>suricata</code> and <code>zeek-json</code> parsers was improved.
<a href="https://github.com/tenzir/tenzir/pull/3503" target="_blank" rel="noopener noreferrer">#3503</a></p></li><li><p>The <code>json</code> parser has a new <code>--raw</code> flag, which uses the raw type of JSON values instead of trying to infer one. For example, strings with ip addresses are given the type <code>string</code> instead of <code>ip</code>.
<a href="https://github.com/tenzir/tenzir/pull/3503" target="_blank" rel="noopener noreferrer">#3503</a></p></li><li><p>A dedicated <code>null</code> type was added.
<a href="https://github.com/tenzir/tenzir/pull/3503" target="_blank" rel="noopener noreferrer">#3503</a></p></li><li><p>Empty records are now allowed. Operators that previously discarded empty records (for example, <code>drop</code>) now preserve them.
<a href="https://github.com/tenzir/tenzir/pull/3503" target="_blank" rel="noopener noreferrer">#3503</a></p></li><li><p>The pipeline manager now supports user-provided labels for pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3541" target="_blank" rel="noopener noreferrer">#3541</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-73">Bug Fixes<a href="#bug-fixes-73" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>json</code>, <code>suricata</code> and <code>zeek-json</code> parsers are now more stable and should now parse all inputs correctly.
<a href="https://github.com/tenzir/tenzir/pull/3503" target="_blank" rel="noopener noreferrer">#3503</a></p></li><li><p><code>null</code> records are no longer incorrectly transformed into records with <code>null</code> fields anymore.
<a href="https://github.com/tenzir/tenzir/pull/3503" target="_blank" rel="noopener noreferrer">#3503</a></p></li><li><p>The type of the <code>quic.version</code> field in the built-in <code>suricata.quic</code> schema was fixed. It now is a string instead of an integer.
<a href="https://github.com/tenzir/tenzir/pull/3533" target="_blank" rel="noopener noreferrer">#3533</a></p></li><li><p>The <code>http</code> loader no longer ignores the value user-provided custom headers.
<a href="https://github.com/tenzir/tenzir/pull/3535" target="_blank" rel="noopener noreferrer">#3535</a></p></li><li><p>The <code>parquet</code> and <code>feather</code> formats no longer throw assertions during normal usage anymore.
<a href="https://github.com/tenzir/tenzir/pull/3537" target="_blank" rel="noopener noreferrer">#3537</a></p></li><li><p>The <code>zeek.software</code> does not contain an incomplete <code>version</code> record type anymore.
<a href="https://github.com/tenzir/tenzir/pull/3538" target="_blank" rel="noopener noreferrer">#3538</a></p></li><li><p>The <code>version.minor</code> type in the <code>zeek.software</code> schema is now a <code>uint64</code> instead of a <code>double</code> to comply with Zeek&#x27;s version structure.
<a href="https://github.com/tenzir/tenzir/pull/3538" target="_blank" rel="noopener noreferrer">#3538</a></p></li><li><p>The web server will not crash when receiving requests during shutdown anymore.
<a href="https://github.com/tenzir/tenzir/pull/3553" target="_blank" rel="noopener noreferrer">#3553</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v420"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.2.0" target="_blank" rel="noopener noreferrer">v4.2.0</a><a href="#v420" class="hash-link" aria-label="Direct link to v420" title="Direct link to v420">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-34">Changes<a href="#changes-34" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The long option name <code>--emit-file-header</code> of the <code>pcap</code> parser is now called <code>--emit-file-headers</code> (plural) to streamline it with the <code>nic</code> loader and the new capability to process concatenated PCAP files.
<a href="https://github.com/tenzir/tenzir/pull/3513" target="_blank" rel="noopener noreferrer">#3513</a></p></li><li><p>The <code>decapsulate</code> operator no longer drops the PCAP packet data in incoming events.
<a href="https://github.com/tenzir/tenzir/pull/3515" target="_blank" rel="noopener noreferrer">#3515</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-48">Features<a href="#features-48" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>s3</code> connector enables the user to import/export file data from/to S3 buckets.
<a href="https://github.com/tenzir/tenzir/pull/3496" target="_blank" rel="noopener noreferrer">#3496</a></p></li><li><p>The new <code>zmq</code> connector ships with a saver and loader for interacting with ZeroMQ. The loader (source) implements a connecting <code>SUB</code> socket and the saver (sink) a binding <code>PUB</code> socket. The <code>--bind</code> or <code>--connect</code> flags make it possible to control the direction of connection establishment.
<a href="https://github.com/tenzir/tenzir/pull/3497" target="_blank" rel="noopener noreferrer">#3497</a></p></li><li><p>The new <code>gcs</code> connector enables the user to import/export file data from/to GCS buckets.
<a href="https://github.com/tenzir/tenzir/pull/3498" target="_blank" rel="noopener noreferrer">#3498</a></p></li><li><p>The new connectors <code>http</code>, <code>https</code>, <code>ftp</code>, and <code>ftps</code> simplify using remote files in pipelines via HTTP(S) and FTP(S).
<a href="https://github.com/tenzir/tenzir/pull/3499" target="_blank" rel="noopener noreferrer">#3499</a></p></li><li><p>The new <code>lines</code> parser splits its input at newline characters and produces events with a single field containing the line.
<a href="https://github.com/tenzir/tenzir/pull/3511" target="_blank" rel="noopener noreferrer">#3511</a></p></li><li><p>The <code>pcap</code> parser can now process a stream of concatenated PCAP files. On the command line, you can now parse traces with <code>cat *.pcap | tenzir &#x27;read pcap&#x27;</code>. When providing <code>--emit-file-headers</code>, each intermediate file header yields a separate event.
<a href="https://github.com/tenzir/tenzir/pull/3513" target="_blank" rel="noopener noreferrer">#3513</a></p></li><li><p>The <code>nic</code> loader has a new option <code>--emit-file-headers</code> that prepends a PCAP file header for every batch of bytes that the loader produces, yielding a stream of concatenated PCAP files.
<a href="https://github.com/tenzir/tenzir/pull/3513" target="_blank" rel="noopener noreferrer">#3513</a></p></li><li><p>You can now write <code>show nics</code> to get a list of network interfaces. Use <code>show nics | select name</code> to a get a list of possible interface names for <code>from nic</code>.
<a href="https://github.com/tenzir/tenzir/pull/3517" target="_blank" rel="noopener noreferrer">#3517</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-74">Bug Fixes<a href="#bug-fixes-74" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Pipelines now show up in the &quot;stopped&quot; instead of the &quot;created&quot; state after the node restarted.
<a href="https://github.com/tenzir/tenzir/pull/3487" target="_blank" rel="noopener noreferrer">#3487</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v410"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.1.0" target="_blank" rel="noopener noreferrer">v4.1.0</a><a href="#v410" class="hash-link" aria-label="Direct link to v410" title="Direct link to v410">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-35">Changes<a href="#changes-35" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>The <code>version</code> operator no longer exists. Use <code>show version</code> to get the Tenzir version instead. The additional information that <code>version</code> produced is now available as <code>show build</code>, <code>show dependencies</code>, and <code>show plugins</code>.
<a href="https://github.com/tenzir/tenzir/pull/3442" target="_blank" rel="noopener noreferrer">#3442</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-49">Features<a href="#features-49" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>sigma</code> operator filters its input with Sigma rules and outputs matching events alongside the matched rule.
<a href="https://github.com/tenzir/tenzir/pull/3138" target="_blank" rel="noopener noreferrer">#3138</a></p></li><li><p>The <code>compress [--level &lt;level&gt;] &lt;codec&gt;</code> and <code>decompress &lt;codec&gt;</code> operators enable streaming compression and decompression in pipelines for <code>brotli</code>, <code>bz2</code>, <code>gzip</code>, <code>lz4</code>, and <code>zstd</code>.
<a href="https://github.com/tenzir/tenzir/pull/3443" target="_blank" rel="noopener noreferrer">#3443</a></p></li><li><p>The <code>show config</code> aspect returns the configuration currently in use, combining options set in the configuration file, the command-line, environment options.
<a href="https://github.com/tenzir/tenzir/pull/3455" target="_blank" rel="noopener noreferrer">#3455</a></p></li><li><p>The new <code>show pipelines</code> aspect displays a list of all managed pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3457" target="_blank" rel="noopener noreferrer">#3457</a></p></li><li><p>The <code>pause</code> action in the <code>/pipeline/update</code> endpoint suspends a pipeline and sets its state to <code>paused</code>. Resume it with the <code>start</code> action.
<a href="https://github.com/tenzir/tenzir/pull/3471" target="_blank" rel="noopener noreferrer">#3471</a></p></li><li><p>Newly created pipelines are now in a new <code>created</code> rather than <code>stopped</code> state.
<a href="https://github.com/tenzir/tenzir/pull/3471" target="_blank" rel="noopener noreferrer">#3471</a></p></li><li><p>The <code>rendered</code> field in the pipeline manager diagnostics delivers a displayable version of the diagnostic&#x27;s error message.
<a href="https://github.com/tenzir/tenzir/pull/3479" target="_blank" rel="noopener noreferrer">#3479</a></p></li><li><p>Pipelines that encounter an error during execution are now in a new <code>failed</code> rather than <code>stopped</code> state.
<a href="https://github.com/tenzir/tenzir/pull/3479" target="_blank" rel="noopener noreferrer">#3479</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-75">Bug Fixes<a href="#bug-fixes-75" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Pipeline operators that create output independent of their input now emit their output instantly instead of waiting for receiving further input. This makes the <code>shell</code> operator more reliable.
<a href="https://github.com/tenzir/tenzir/pull/3470" target="_blank" rel="noopener noreferrer">#3470</a></p></li><li><p>The <code>show &lt;aspect&gt;</code> operator wrongfully required unsafe pipelines to be allowed for some aspects. This is now fixed.
<a href="https://github.com/tenzir/tenzir/pull/3470" target="_blank" rel="noopener noreferrer">#3470</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v401"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.0.1" target="_blank" rel="noopener noreferrer">v4.0.1</a><a href="#v401" class="hash-link" aria-label="Direct link to v401" title="Direct link to v401">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-50">Features<a href="#features-50" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>It is now possible to replace the schema name with <code>replace #schema=&quot;new_name&quot;</code>.
<a href="https://github.com/tenzir/tenzir/pull/3451" target="_blank" rel="noopener noreferrer">#3451</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v400"><a href="https://github.com/tenzir/tenzir/releases/tag/v4.0.0" target="_blank" rel="noopener noreferrer">v4.0.0</a><a href="#v400" class="hash-link" aria-label="Direct link to v400" title="Direct link to v400">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes">Breaking Changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>The <code>stop</code> command no longer exists. Shut down VAST nodes using CTRL-C instead.
<a href="https://github.com/tenzir/tenzir/pull/3166" target="_blank" rel="noopener noreferrer">#3166</a></p></li><li><p>The <code>version</code> command no longer exists. Use the more powerful <code>version</code> pipeline operator instead.
<a href="https://github.com/tenzir/tenzir/pull/3166" target="_blank" rel="noopener noreferrer">#3166</a></p></li><li><p>The <code>spawn source</code> and <code>spawn sink</code> commands no longer exist. To import data remotely, run a pipeline in the form of <code>remote from … | … | import</code>, and to export data remotely, run a pipeline in the form of <code>export | … | remote to …</code>.
<a href="https://github.com/tenzir/tenzir/pull/3166" target="_blank" rel="noopener noreferrer">#3166</a></p></li><li><p>The lower-level <code>peer</code>, <code>kill</code>, and <code>send</code> commands no longer exist.
<a href="https://github.com/tenzir/tenzir/pull/3166" target="_blank" rel="noopener noreferrer">#3166</a></p></li><li><p>The <code>#type</code> meta extractor was renamed to <code>#schema</code>.
<a href="https://github.com/tenzir/tenzir/pull/3183" target="_blank" rel="noopener noreferrer">#3183</a></p></li><li><p>VAST is now called Tenzir. The <code>tenzir</code> binary replaces <code>vast exec</code> to execute a pipeline. The <code>tenzird</code> binary replaces <code>vast start</code> to start a node. The <code>tenzirctl</code> binary continues to offer all functionality that <code>vast</code> previously offered until all commands have been migrated to pipeline operators.
<a href="https://github.com/tenzir/tenzir/pull/3187" target="_blank" rel="noopener noreferrer">#3187</a></p></li><li><p>The Debian package for Tenzir replaces previous VAST installations and attempts to migrate existing data from VAST to Tenzir in the process. You can opt-out of this migration by creating the file <code>/var/lib/vast/disable-migration</code>.
<a href="https://github.com/tenzir/tenzir/pull/3203" target="_blank" rel="noopener noreferrer">#3203</a></p></li><li><p>We removed the <code>rest_endpoint_plugin::prefix()</code> function from the public API of the <code>rest_endpoint_plugin</code> class. For a migration, existing users should prepend the prefix manually to all endpoints defined by their plugin.
<a href="https://github.com/tenzir/tenzir/pull/3221" target="_blank" rel="noopener noreferrer">#3221</a></p></li><li><p>We changed the default connector of <code>read &lt;format&gt;</code> and <code>write &lt;format&gt;</code> for all formats to <code>stdin</code> and <code>stdout</code>, respectively.
<a href="https://github.com/tenzir/tenzir/pull/3223" target="_blank" rel="noopener noreferrer">#3223</a></p></li><li><p>We removed language plugins in favor of operator-based integrations.
<a href="https://github.com/tenzir/tenzir/pull/3223" target="_blank" rel="noopener noreferrer">#3223</a></p></li><li><p>The interface of the operator, loader, parser, printer and saver plugins was changed.
<a href="https://github.com/tenzir/tenzir/pull/3223" target="_blank" rel="noopener noreferrer">#3223</a></p></li><li><p>The aggregation functions in a <code>summarize</code> operator can now receive only a single extractor instead of multiple ones.
<a href="https://github.com/tenzir/tenzir/pull/3250" target="_blank" rel="noopener noreferrer">#3250</a></p></li><li><p>The behavior for absent columns and aggregations across multiple schemas was changed.
<a href="https://github.com/tenzir/tenzir/pull/3250" target="_blank" rel="noopener noreferrer">#3250</a></p></li><li><p>We reimplemented the old <code>pcap</code> plugin as a format. The command <code>tenzir-ctl import pcap</code> no longer works. Instead, the new <code>pcap</code> plugin provides a parser that emits <code>pcap.packet</code> events, as well as a printer that generates a PCAP file when provided with these events.
<a href="https://github.com/tenzir/tenzir/pull/3263" target="_blank" rel="noopener noreferrer">#3263</a></p></li><li><p>The <code>delete_when_stopped</code> flag was removed from the pipeline manager REST API.
<a href="https://github.com/tenzir/tenzir/pull/3292" target="_blank" rel="noopener noreferrer">#3292</a></p></li><li><p>We removed the <code>--pretty</code> option from the <code>json</code> printer. This option is now the default. To switch to NDJSON, use <code>-c|--compact-output</code>.
<a href="https://github.com/tenzir/tenzir/pull/3343" target="_blank" rel="noopener noreferrer">#3343</a></p></li><li><p>The previously deprecated options <code>tenzir.pipelines</code> (replaced with <code>tenzir.operators</code>) and <code>tenzir.pipeline-triggers</code> (no replacement) no longer exist.
<a href="https://github.com/tenzir/tenzir/pull/3358" target="_blank" rel="noopener noreferrer">#3358</a></p></li><li><p>The previously deprecated deprecated types <code>addr</code>, <code>count</code>, <code>int</code>, and <code>real</code> (replaced with <code>ip</code>, <code>uint64</code>, <code>int64</code>, and <code>double</code>, respectively) no longer exist.
<a href="https://github.com/tenzir/tenzir/pull/3358" target="_blank" rel="noopener noreferrer">#3358</a></p></li><li><p>The <code>parse</code> and <code>print</code> operators have been renamed to <code>read</code> and <code>write</code>, respectively. The <code>read ... [from ...]</code> and <code>write ... [to ...]</code> operators are not available anymore. If you did not specify a connector, you can continue using <code>read ...</code> and <code>write ...</code> in many cases. Otherwise, use <code>from ... [read ...]</code> and <code>to ... [write ...]</code> instead.
<a href="https://github.com/tenzir/tenzir/pull/3365" target="_blank" rel="noopener noreferrer">#3365</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-36">Changes<a href="#changes-36" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The default port of the web plugin changed from 42001 to 5160. This change avoids collisions from dynamic port allocation on Linux systems.
<a href="https://github.com/tenzir/tenzir/pull/3180" target="_blank" rel="noopener noreferrer">#3180</a></p></li><li><p>The HTTP method of the status endpoint in the experimental REST API is now <code>POST</code>.
<a href="https://github.com/tenzir/tenzir/pull/3194" target="_blank" rel="noopener noreferrer">#3194</a></p></li><li><p>We now register extension types as <code>tenzir.ip</code>, <code>tenzir.subnet</code>, and <code>tenzir.enumeration</code> instead of <code>vast.address</code>, <code>vast.subnet</code>, and <code>vast.enumeration</code>, respectively. Arrow schema metadata now has a <code>TENZIR:</code> prefix instead of a <code>VAST:</code> prefix.
<a href="https://github.com/tenzir/tenzir/pull/3208" target="_blank" rel="noopener noreferrer">#3208</a></p></li><li><p>The debugging utility <code>lsvast</code> no longer exists. Pipelines replace most of its functionality.
<a href="https://github.com/tenzir/tenzir/pull/3211" target="_blank" rel="noopener noreferrer">#3211</a></p></li><li><p>The default database directory moved from <code>vast.db</code> to <code>tenzir.db</code>. Use the option <code>tenzir.db-directory</code> to manually set the database directory path.
<a href="https://github.com/tenzir/tenzir/pull/3212" target="_blank" rel="noopener noreferrer">#3212</a></p></li><li><p>We reduced the default <code>batch-timeout</code> from ten seconds to one second in to improve the user experience of interactive pipelines with data aquisition.
<a href="https://github.com/tenzir/tenzir/pull/3320" target="_blank" rel="noopener noreferrer">#3320</a></p></li><li><p>We reduced the default <code>active-partition-timeout</code> from 5 minutes to 30 seconds to reduce the time until data is persisted.
<a href="https://github.com/tenzir/tenzir/pull/3320" target="_blank" rel="noopener noreferrer">#3320</a></p></li><li><p>The default interval between two automatic rebuilds is now set to 2 hours and can be configured with the <code>rebuild-interval</code> option.
<a href="https://github.com/tenzir/tenzir/pull/3377" target="_blank" rel="noopener noreferrer">#3377</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-51">Features<a href="#features-51" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>flatten [&lt;separator&gt;]</code> operator flattens nested data structures by joining nested records with the specified separator (defaults to <code>.</code>) and merging lists.
<a href="https://github.com/tenzir/tenzir/pull/3018" target="_blank" rel="noopener noreferrer">#3018</a></p></li><li><p>The sink operator <code>import</code> persists events in a VAST node.
<a href="https://github.com/tenzir/tenzir/pull/3128" target="_blank" rel="noopener noreferrer">#3128</a>
<a href="https://github.com/tenzir/tenzir/pull/3173" target="_blank" rel="noopener noreferrer">#3173</a>
<a href="https://github.com/tenzir/tenzir/pull/3193" target="_blank" rel="noopener noreferrer">#3193</a></p></li><li><p>The source operator <code>export</code> retrieves events from a VAST node.
<a href="https://github.com/tenzir/tenzir/pull/3128" target="_blank" rel="noopener noreferrer">#3128</a>
<a href="https://github.com/tenzir/tenzir/pull/3173" target="_blank" rel="noopener noreferrer">#3173</a>
<a href="https://github.com/tenzir/tenzir/pull/3193" target="_blank" rel="noopener noreferrer">#3193</a></p></li><li><p>The <code>repeat</code> operator repeats its input a given number of times.
<a href="https://github.com/tenzir/tenzir/pull/3128" target="_blank" rel="noopener noreferrer">#3128</a>
<a href="https://github.com/tenzir/tenzir/pull/3173" target="_blank" rel="noopener noreferrer">#3173</a>
<a href="https://github.com/tenzir/tenzir/pull/3193" target="_blank" rel="noopener noreferrer">#3193</a></p></li><li><p>The new <code>enumerate</code> operator prepends a column with the row number of the input records.
<a href="https://github.com/tenzir/tenzir/pull/3142" target="_blank" rel="noopener noreferrer">#3142</a></p></li><li><p>The new <code>sort</code> operator allows for arranging events by field, in ascending and descending order. The current version is still &quot;beta&quot; and has known limitations.
<a href="https://github.com/tenzir/tenzir/pull/3155" target="_blank" rel="noopener noreferrer">#3155</a></p></li><li><p>The <code>measure</code> operator now returns running totals with the <code>--cumulative</code> option.
<a href="https://github.com/tenzir/tenzir/pull/3156" target="_blank" rel="noopener noreferrer">#3156</a></p></li><li><p>The <code>--timeout</code> option for the <code>vast status</code> command allows for defining how long VAST waits for components to report their status. The option defaults to 10 seconds.
<a href="https://github.com/tenzir/tenzir/pull/3162" target="_blank" rel="noopener noreferrer">#3162</a></p></li><li><p>The new <em>pipeline-manager</em> is a proprietary plugin that allows for creating, updating and persisting pipelines. The included RESTful interface allows for easy access and modification of these pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3164" target="_blank" rel="noopener noreferrer">#3164</a></p></li><li><p>The <code>top &lt;field&gt;</code> operator makes it easy to find the most common values for the given field. Likewise, <code>rare &lt;field&gt;</code> returns the least common values for the given field.
<a href="https://github.com/tenzir/tenzir/pull/3176" target="_blank" rel="noopener noreferrer">#3176</a></p></li><li><p>The <code>serve</code> operator and <code>/serve</code> endpoint supersede the experimental <code>/query</code> endpoint. The operator is a sink for events, and bridges a pipeline into a RESTful interface from which events can be pulled incrementally.
<a href="https://github.com/tenzir/tenzir/pull/3180" target="_blank" rel="noopener noreferrer">#3180</a></p></li><li><p>The new <code>#schema_id</code> meta extractor returns a unique fingerprint for the schema.
<a href="https://github.com/tenzir/tenzir/pull/3183" target="_blank" rel="noopener noreferrer">#3183</a></p></li><li><p>In addition to <code>tenzir &quot;&lt;pipeline&gt;&quot;</code>, there now is <code>tenzir -f &lt;file&gt;</code>, which loads and executes the pipeline defined in the given file.
<a href="https://github.com/tenzir/tenzir/pull/3223" target="_blank" rel="noopener noreferrer">#3223</a></p></li><li><p>The pipeline parser now emits helpful and visually pleasing diagnostics.
<a href="https://github.com/tenzir/tenzir/pull/3223" target="_blank" rel="noopener noreferrer">#3223</a></p></li><li><p>The <code>summarize</code> operator now works across multiple schemas and can combine events of different schemas into one group. It now also treats missing columns as having <code>null</code> values.
<a href="https://github.com/tenzir/tenzir/pull/3250" target="_blank" rel="noopener noreferrer">#3250</a></p></li><li><p>The <code>by</code> clause of <code>summarize</code> is now optional. If it is omitted, all events are assigned to the same group.
<a href="https://github.com/tenzir/tenzir/pull/3250" target="_blank" rel="noopener noreferrer">#3250</a></p></li><li><p>The new <code>nic</code> plugin provides a loader that acquires packets from a network interface card using libpcap. It emits chunks of data in the PCAP file format so that the <code>pcap</code> parser can process them as if packets come from a trace file.
<a href="https://github.com/tenzir/tenzir/pull/3263" target="_blank" rel="noopener noreferrer">#3263</a></p></li><li><p>The new <code>decapsulate</code> operator processes events of type <code>pcap.packet</code> and emits new events of type <code>tenzir.packet</code> that contain the decapsulated PCAP packet with packet header fields from the link, network, and transport layer. The operator also computes a Community ID.
<a href="https://github.com/tenzir/tenzir/pull/3263" target="_blank" rel="noopener noreferrer">#3263</a></p></li><li><p>The pipeline manager now accepts empty strings for the optional <code>name</code>. The <code>/create</code> endpoint returns a list of diagnostics if pipeline creation fails, and if <code>start_when_created</code> is set, the endpoint now returns only after the pipeline execution has been fully started. The <code>/list</code> endpoint now returns the diagnostics collected for every pipeline so far. The <code>/delete</code> endpoint now returns an empty object if the request is successful.
<a href="https://github.com/tenzir/tenzir/pull/3264" target="_blank" rel="noopener noreferrer">#3264</a></p></li><li><p>The <code>zeek-tsv</code> parser sometimes failed to parse Zeek TSV logs, wrongly reporting that the header ended too early. This bug no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/3291" target="_blank" rel="noopener noreferrer">#3291</a></p></li><li><p>The <code>--schema</code> option for the JSON parser allows for setting the target schema explicitly by name.
<a href="https://github.com/tenzir/tenzir/pull/3295" target="_blank" rel="noopener noreferrer">#3295</a></p></li><li><p>The <code>unflatten [&lt;separator&gt;]</code> operator unflattens data structures by creating nested records out of fields whose names contain a <code>&lt;separator&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/3304" target="_blank" rel="noopener noreferrer">#3304</a></p></li><li><p>Pipelines executed locally with <code>tenzir</code> now use <code>load -</code> and <code>read json</code> as implicit sources. This complements <code>save -</code> and <code>write json --pretty</code> as implicit sinks.
<a href="https://github.com/tenzir/tenzir/pull/3329" target="_blank" rel="noopener noreferrer">#3329</a></p></li><li><p>The <code>json</code> printer can now colorize its output by providing the <code>-C|--color-output</code> option, and explicitly disable coloring via <code>-M|--monochrome-output</code>.
<a href="https://github.com/tenzir/tenzir/pull/3343" target="_blank" rel="noopener noreferrer">#3343</a></p></li><li><p>Pipeline metrics (total ingress/egress amount and average rate per second) are now visible in the <code>pipeline-manager</code>, via the <code>metrics</code> field in the <code>/pipeline/list</code> endpoint result.
<a href="https://github.com/tenzir/tenzir/pull/3376" target="_blank" rel="noopener noreferrer">#3376</a></p></li><li><p>The <code>directory</code> saver now supports the two arguments <code>-a|--append</code> and <code>-r|--realtime</code> that have the same semantics as they have for the <code>file</code> saver: open files in the directory in append mode (instead of overwriting) and flush the output buffers on every update.
<a href="https://github.com/tenzir/tenzir/pull/3379" target="_blank" rel="noopener noreferrer">#3379</a></p></li><li><p>The <code>sort</code> operator now also works for <code>ip</code> and <code>enum</code> fields.
<a href="https://github.com/tenzir/tenzir/pull/3390" target="_blank" rel="noopener noreferrer">#3390</a></p></li><li><p><code>tenzir --dump-metrics &#x27;&lt;pipeline&gt;&#x27;</code> prints a performance overview of the executed pipeline on stderr at the end.
<a href="https://github.com/tenzir/tenzir/pull/3390" target="_blank" rel="noopener noreferrer">#3390</a></p></li><li><p>The <code>batch &lt;limit&gt;</code> operator allows expert users to control batch sizes in pipelines explicitly.
<a href="https://github.com/tenzir/tenzir/pull/3391" target="_blank" rel="noopener noreferrer">#3391</a></p></li><li><p>The new <code>show</code> source operator makes it possible to gather meta information about Tenzir. For example, the provided introspection capabilities allow for emitting existing formats, connectors, and operators.
<a href="https://github.com/tenzir/tenzir/pull/3414" target="_blank" rel="noopener noreferrer">#3414</a></p></li><li><p>The <code>json</code> parser now servers as a fallback parser for all files whose extension do not have any default parser in Tenzir.
<a href="https://github.com/tenzir/tenzir/pull/3422" target="_blank" rel="noopener noreferrer">#3422</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-76">Bug Fixes<a href="#bug-fixes-76" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Using transformation operators like <code>summarize</code>, <code>sort</code>, <code>put</code>, <code>extend</code>, or <code>replace</code> no longer sometimes crashes after a preceding <code>head</code> or <code>tail</code> operator when referencing a nested field.
<a href="https://github.com/tenzir/tenzir/pull/3171" target="_blank" rel="noopener noreferrer">#3171</a></p></li><li><p>The <code>tail</code> operator sometimes returned more events than specified. This no longer happens.
<a href="https://github.com/tenzir/tenzir/pull/3171" target="_blank" rel="noopener noreferrer">#3171</a></p></li><li><p>We fixed a bug in the compation plugin that prevented it from applying the configured weights when it was used for the first time on a database.
<a href="https://github.com/tenzir/tenzir/pull/3185" target="_blank" rel="noopener noreferrer">#3185</a></p></li><li><p>Starting a remote pipeline with <code>vast exec</code> failed when the node was not reachable yet. Like other commands, executing a pipeline now waits until the node is reachable before starting.
<a href="https://github.com/tenzir/tenzir/pull/3188" target="_blank" rel="noopener noreferrer">#3188</a></p></li><li><p>Import processes sometimes failed to shut down automatically when the node exited. They now shut down reliably.
<a href="https://github.com/tenzir/tenzir/pull/3207" target="_blank" rel="noopener noreferrer">#3207</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v310"><a href="https://github.com/tenzir/tenzir/releases/tag/v3.1.0" target="_blank" rel="noopener noreferrer">v3.1.0</a><a href="#v310" class="hash-link" aria-label="Direct link to v310" title="Direct link to v310">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-37">Changes<a href="#changes-37" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>/query</code> REST endpoint no longer accepts an expression at the start of the query. Instead, use <code>where &lt;expr&gt; | ...</code>.
<a href="https://github.com/tenzir/tenzir/pull/3015" target="_blank" rel="noopener noreferrer">#3015</a></p></li><li><p>As already announced with the VAST v3.0 release, the <code>vast.pipeline-triggers</code> option now no longer functions. The feature will be replaced with node ingress/egress pipelines that fit better into a multi-node model than the previous feature that was built under the assumption of a client/server model with a single server.
<a href="https://github.com/tenzir/tenzir/pull/3052" target="_blank" rel="noopener noreferrer">#3052</a></p></li><li><p>The bundled systemd service is now configured to restart VAST in case of a failure.
<a href="https://github.com/tenzir/tenzir/pull/3058" target="_blank" rel="noopener noreferrer">#3058</a></p></li><li><p>The <code>vast.operators</code> section in the configuration file supersedes the now deprecated <code>vast.pipelines</code> section and more generally enables user-defined operators. Defined operators now must use the new, textual format introduced with VAST v3.0, and are available for use in all places where pipelines are supported.
<a href="https://github.com/tenzir/tenzir/pull/3067" target="_blank" rel="noopener noreferrer">#3067</a></p></li><li><p>The <code>exporter.*</code> metrics no longer exist, and will return in a future release as a more generic instrumentation mechanism for all pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3076" target="_blank" rel="noopener noreferrer">#3076</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-52">Features<a href="#features-52" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>put</code> operator is the new companion to the existing <code>extend</code> and <code>replace</code> operators. It specifies the output fields exactly, referring either to input fields with an extractor, metadata with a selector, or a fixed value.
<a href="https://github.com/tenzir/tenzir/pull/3036" target="_blank" rel="noopener noreferrer">#3036</a>
<a href="https://github.com/tenzir/tenzir/pull/3039" target="_blank" rel="noopener noreferrer">#3039</a>
<a href="https://github.com/tenzir/tenzir/pull/3089" target="_blank" rel="noopener noreferrer">#3089</a></p></li><li><p>The <code>extend</code> and <code>replace</code> operators now support assigning extractors and selectors in addition to just fixed values.
<a href="https://github.com/tenzir/tenzir/pull/3036" target="_blank" rel="noopener noreferrer">#3036</a>
<a href="https://github.com/tenzir/tenzir/pull/3039" target="_blank" rel="noopener noreferrer">#3039</a>
<a href="https://github.com/tenzir/tenzir/pull/3089" target="_blank" rel="noopener noreferrer">#3089</a></p></li><li><p>The new <code>tail</code> pipeline operator limits all latest events to a specified number. The operator takes the limit as an optional argument, with the default value being 10.
<a href="https://github.com/tenzir/tenzir/pull/3050" target="_blank" rel="noopener noreferrer">#3050</a></p></li><li><p>The newly-added <code>unique</code> operator removes adjacent duplicates.
<a href="https://github.com/tenzir/tenzir/pull/3051" target="_blank" rel="noopener noreferrer">#3051</a></p></li><li><p>User-defined operator aliases make pipelines easier to use by enabling users to encapsulate a pipelinea into a new operator. To define a user-defined operator alias, add an entry to the <code>vast.operators</code> section of your configuration.
<a href="https://github.com/tenzir/tenzir/pull/3064" target="_blank" rel="noopener noreferrer">#3064</a></p></li><li><p>Compaction now makes use of the new pipeline operators, and allows pipelines to be defined inline instead in addition to the now deprecated <code>vast.pipelines</code> configuration section.
<a href="https://github.com/tenzir/tenzir/pull/3064" target="_blank" rel="noopener noreferrer">#3064</a></p></li><li><p>The <code>count_distinct</code> aggregation function returns the number of distinct, non-null values.
<a href="https://github.com/tenzir/tenzir/pull/3068" target="_blank" rel="noopener noreferrer">#3068</a></p></li><li><p>The <code>vast export</code> command now accepts the new pipelines as input. Furthermore, <code>vast export &lt;expr&gt;</code> is now deprecated in favor of <code>vast export &#x27;where &lt;expr&gt;&#x27;</code>.
<a href="https://github.com/tenzir/tenzir/pull/3076" target="_blank" rel="noopener noreferrer">#3076</a></p></li><li><p>The new <code>from &lt;connector&gt; [read &lt;format&gt;]</code>, <code>read &lt;format&gt; [from &lt;connector&gt;]</code>, <code>write &lt;format&gt; [to &lt;connector&gt;]</code>, and <code>to &lt;connector&gt; [write &lt;format&gt;]</code> operators bring together a connector and a format to prduce and consume events, respectively. Their lower-level building blocks <code>load &lt;connector&gt;</code>, <code>parse &lt;format&gt;</code>, <code>print &lt;format&gt;</code>, and <code>save &lt;connector&gt;</code> enable expert users to operate on raw byte streams directly.
<a href="https://github.com/tenzir/tenzir/pull/3079" target="_blank" rel="noopener noreferrer">#3079</a></p></li><li><p>The new <code>file</code> connector enables the user to process file input/output as data in a pipeline. This includes regular files, UDS files as well as <code>stdin/stdout</code>.
<a href="https://github.com/tenzir/tenzir/pull/3085" target="_blank" rel="noopener noreferrer">#3085</a>
<a href="https://github.com/tenzir/tenzir/pull/3088" target="_blank" rel="noopener noreferrer">#3088</a>
<a href="https://github.com/tenzir/tenzir/pull/3097" target="_blank" rel="noopener noreferrer">#3097</a></p></li><li><p>The <code>inspect</code> operator replaces the events or bytes it receives with incremental metrics describing the input.
<a href="https://github.com/tenzir/tenzir/pull/3093" target="_blank" rel="noopener noreferrer">#3093</a></p></li><li><p>The new <code>directory</code> sink creates a directory with a file for each schema in the specified format.
<a href="https://github.com/tenzir/tenzir/pull/3098" target="_blank" rel="noopener noreferrer">#3098</a></p></li><li><p>The <code>feather</code> and <code>parquet</code> formats allow for reading and writing events from and to the Apache Feather V2 and Apache Parquet files, respectively.
<a href="https://github.com/tenzir/tenzir/pull/3103" target="_blank" rel="noopener noreferrer">#3103</a></p></li><li><p>The <code>xsv</code> format enables the user to parse and print character-separated values, with the additional <code>csv</code>, <code>tsv</code> and <code>ssv</code> formats as sane defaults.
<a href="https://github.com/tenzir/tenzir/pull/3104" target="_blank" rel="noopener noreferrer">#3104</a></p></li><li><p>The <code>cef</code> parser allows for using the CEF format with the new pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3110" target="_blank" rel="noopener noreferrer">#3110</a></p></li><li><p>The <code>zeek-tsv</code> format parses and prints Zeek&#x27;s native tab-separated value (TSV) representation of logs.
<a href="https://github.com/tenzir/tenzir/pull/3114" target="_blank" rel="noopener noreferrer">#3114</a></p></li><li><p>Pipelines may now span across multiple processes. This will enable upcoming operators that do not just run locally in the <code>vast exec</code> process, but rather connect to a VAST node and partially run in that node. The new operator modifiers <code>remote</code> and <code>local</code> allow expert users to control where parts of their pipeline run explicitly, e.g., to offload compute to a more powerful node. Potentially unsafe use of these modifiers requires setting <code>vast.allow-unsafe-pipelines</code> to <code>true</code> in the configuration file.
<a href="https://github.com/tenzir/tenzir/pull/3119" target="_blank" rel="noopener noreferrer">#3119</a></p></li><li><p>The <code>vast exec</code> command now supports implicit sinks for pipelines that end in events or bytes: <code>write json --pretty</code> and <code>save file -</code>, respectively.
<a href="https://github.com/tenzir/tenzir/pull/3123" target="_blank" rel="noopener noreferrer">#3123</a></p></li><li><p>The <code>--pretty</code> option for the JSON printer enables multi-line output.
<a href="https://github.com/tenzir/tenzir/pull/3123" target="_blank" rel="noopener noreferrer">#3123</a></p></li><li><p>The new <code>version</code> source operator yields a single event containing VAST&#x27;s version and a list of enabled plugins.
<a href="https://github.com/tenzir/tenzir/pull/3123" target="_blank" rel="noopener noreferrer">#3123</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-77">Bug Fixes<a href="#bug-fixes-77" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST incorrectly handled subnets using IPv6 addresses for which an equivalent IPv4 address existed. This is now done correctly. For example, the query <code>where :ip !in ::ffff:0:0/96</code> now returns all events containing an IP address that cannot be represented as an IPv4 address. As an additional safeguard, the VAST language no longer allows for constructing subnets for IPv4 addresses with lengths greater than 32.
<a href="https://github.com/tenzir/tenzir/pull/3060" target="_blank" rel="noopener noreferrer">#3060</a></p></li><li><p>The <code>distinct</code> function silently performed a different operation on lists, returning the distinct non-null elements in the list rather than operating on the list itself. This special-casing no longer exists, and instead the function now operates on the lists itself. This feature will return in the future as unnesting on the extractor level via <code>distinct(field[])</code>, but for now it has to go to make the <code>distinct</code> aggregation function work consistently.
<a href="https://github.com/tenzir/tenzir/pull/3068" target="_blank" rel="noopener noreferrer">#3068</a></p></li><li><p>Tokens created with <code>vast web generate-token</code> now persist correctly, and work across restarts of VAST.
<a href="https://github.com/tenzir/tenzir/pull/3086" target="_blank" rel="noopener noreferrer">#3086</a></p></li><li><p>The matcher plugin no longer causes deadlocks through detached matcher clients.
<a href="https://github.com/tenzir/tenzir/pull/3115" target="_blank" rel="noopener noreferrer">#3115</a></p></li><li><p>The <code>tenzir/vast</code> image now listens on <code>0.0.0.0:5158</code> instead of <code>127.0.0.1:5158</code> by default, which aligns the behavior with the <code>tenzir/vast-slim</code> image.
<a href="https://github.com/tenzir/tenzir/pull/3137" target="_blank" rel="noopener noreferrer">#3137</a></p></li><li><p>Some pipelines in compaction caused transformed partitions to be treated as if they were older than they were supposed to be, causing them to be picked up again for deletion too early. This bug no longer exists, and compacted partitions are now considered at most as old as the oldest event before compaction.
<a href="https://github.com/tenzir/tenzir/pull/3141" target="_blank" rel="noopener noreferrer">#3141</a></p></li><li><p>The <code>rebuilder.partitions.remaining</code> metric sometimes reported wrong values when partitions for at least one schema did not need to be rebuilt. We aligned the metrics with the actual functionality.
<a href="https://github.com/tenzir/tenzir/pull/3147" target="_blank" rel="noopener noreferrer">#3147</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v304"><a href="https://github.com/tenzir/tenzir/releases/tag/v3.0.4" target="_blank" rel="noopener noreferrer">v3.0.4</a><a href="#v304" class="hash-link" aria-label="Direct link to v304" title="Direct link to v304">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-78">Bug Fixes<a href="#bug-fixes-78" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Automatic rebuilds now correctly consider only outdated or undersized partitions.
<a href="https://github.com/tenzir/tenzir/pull/3083" target="_blank" rel="noopener noreferrer">#3083</a></p></li><li><p>The <code>--all</code> flag for the <code>rebuild</code> command now consistently causes all partitions to be rebuilt, aligning its functionality with its documentation.
<a href="https://github.com/tenzir/tenzir/pull/3083" target="_blank" rel="noopener noreferrer">#3083</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v303"><a href="https://github.com/tenzir/tenzir/releases/tag/v3.0.3" target="_blank" rel="noopener noreferrer">v3.0.3</a><a href="#v303" class="hash-link" aria-label="Direct link to v303" title="Direct link to v303">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-38">Changes<a href="#changes-38" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST now depends on the Boost C++ libraries.
<a href="https://github.com/tenzir/tenzir/pull/3043" target="_blank" rel="noopener noreferrer">#3043</a></p></li><li><p>VAST&#x27;s rebuilding and compaction features now interfere less with queries. This patch was also backported as <a href="https://vast.io/changelog#v242" target="_blank" rel="noopener noreferrer">VAST v2.4.2</a> to enable a smoother upgrade from to VAST v3.x.
<a href="https://github.com/tenzir/tenzir/pull/3047" target="_blank" rel="noopener noreferrer">#3047</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-53">Features<a href="#features-53" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The new <code>vast exec</code> command executes a pipeline locally. It takes a single argument representing a closed pipeline, and immediately executes it. This is the foundation for a new, pipeline-first VAST, in which most operations are expressed as pipelines.
<a href="https://github.com/tenzir/tenzir/pull/3004" target="_blank" rel="noopener noreferrer">#3004</a><a href="https://github.com/tenzir/tenzir/pull/3010" target="_blank" rel="noopener noreferrer">#3010</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v302"><a href="https://github.com/tenzir/tenzir/releases/tag/v3.0.2" target="_blank" rel="noopener noreferrer">v3.0.2</a><a href="#v302" class="hash-link" aria-label="Direct link to v302" title="Direct link to v302">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-79">Bug Fixes<a href="#bug-fixes-79" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>VAST no longer miscalculates the <code>rebuild</code> metrics.
<a href="https://github.com/tenzir/tenzir/pull/3026" target="_blank" rel="noopener noreferrer">#3026</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v301"><a href="https://github.com/tenzir/tenzir/releases/tag/v3.0.1" target="_blank" rel="noopener noreferrer">v3.0.1</a><a href="#v301" class="hash-link" aria-label="Direct link to v301" title="Direct link to v301">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-54">Features<a href="#features-54" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>The VAST language now supports comments using the familiar <code>/* comment */</code> notation. This makes it easy to document multi-line pipelines inline.
<a href="https://github.com/tenzir/tenzir/pull/3011" target="_blank" rel="noopener noreferrer">#3011</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-80">Bug Fixes<a href="#bug-fixes-80" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST no longer crashes when reading an unsupported partition from VAST v1.x. Instead, the partition is ignored correctly. Since v2.2 VAST automatically rebuilds partitions in the background to ensure compatibility.
<a href="https://github.com/tenzir/tenzir/pull/3018" target="_blank" rel="noopener noreferrer">#3018</a></p></li><li><p>Automatic partition rebuilding both updates partitions with an outdated storage format and merges undersized partitions continuously in the background. This now also works as expected for outdated but not undersized partitions.
<a href="https://github.com/tenzir/tenzir/pull/3020" target="_blank" rel="noopener noreferrer">#3020</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v300"><a href="https://github.com/tenzir/tenzir/releases/tag/v3.0.0" target="_blank" rel="noopener noreferrer">v3.0.0</a><a href="#v300" class="hash-link" aria-label="Direct link to v300" title="Direct link to v300">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-1">Breaking Changes<a href="#breaking-changes-1" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>The match operator <code>~</code>, its negation <code>!~</code>, and the <code>pattern</code> type no longer exist. Use queries of the forms <code>lhs == /rhs/</code> and <code>lhs != /rhs/</code> instead for queries using regular expressions.
<a href="https://github.com/tenzir/tenzir/pull/2769" target="_blank" rel="noopener noreferrer">#2769</a>
<a href="https://github.com/tenzir/tenzir/pull/2873" target="_blank" rel="noopener noreferrer">#2873</a></p></li><li><p><code>vast status</code> does not work anymore with an embedded node (i.e., spawned with the <code>-N</code> parameter).
<a href="https://github.com/tenzir/tenzir/pull/2771" target="_blank" rel="noopener noreferrer">#2771</a></p></li><li><p>The <code>#field</code> meta extractor no longer exists. Use <code>X != null</code> over <code>#field == &quot;X&quot;</code> to check for existence for the field <code>X</code>.
<a href="https://github.com/tenzir/tenzir/pull/2776" target="_blank" rel="noopener noreferrer">#2776</a></p></li><li><p>VAST no longer supports reading partitions created with VAST versions older than VAST v2.2. Since VAST v2.2, VAST continuously upgrades old partitions to the most recent internal format while running.
<a href="https://github.com/tenzir/tenzir/pull/2778" target="_blank" rel="noopener noreferrer">#2778</a>
<a href="https://github.com/tenzir/tenzir/pull/2797" target="_blank" rel="noopener noreferrer">#2797</a>
<a href="https://github.com/tenzir/tenzir/pull/2798" target="_blank" rel="noopener noreferrer">#2798</a></p></li><li><p>We removed the broker plugin that enabled direct Zeek 3.x log transfer to VAST. The plugin will return in the future rewritten for Zeek 5+.
<a href="https://github.com/tenzir/tenzir/pull/2796" target="_blank" rel="noopener noreferrer">#2796</a></p></li><li><p>VAST now ignores the previously deprecated options <code>vast.meta-index-fp-rate</code>, <code>vast.catalog-fp-rate</code>, <code>vast.transforms</code> and <code>vast.transform-triggers</code>. Similarly, setting <code>vast.store-backend</code> to <code>segment-store</code> now results in an error rather than a graceful fallback to the default store.
<a href="https://github.com/tenzir/tenzir/pull/2832" target="_blank" rel="noopener noreferrer">#2832</a></p></li><li><p>Boolean literals in expressions have a new syntax: <code>true</code> and <code>false</code> replace the old representations <code>T</code> and <code>F</code>. For example, the query <code>suricata.alert.alerted == T</code> is no longer valid; use <code>suricata.alert.alerted == true</code> instead.
<a href="https://github.com/tenzir/tenzir/pull/2844" target="_blank" rel="noopener noreferrer">#2844</a></p></li><li><p>The builtin types <code>count</code>, <code>int</code>, <code>real</code>, and <code>addr</code> were renamed to <code>uint64</code>, <code>int64</code>, <code>double</code>, and <code>ip</code> respectively. For backwards-compatibility, VAST still supports parsing the old type tokens in schema files.
<a href="https://github.com/tenzir/tenzir/pull/2864" target="_blank" rel="noopener noreferrer">#2864</a></p></li><li><p>The <code>explore</code> and <code>pivot</code> commands are now unavailable. They will be reintroduced as pipeline operators in the future.
<a href="https://github.com/tenzir/tenzir/pull/2898" target="_blank" rel="noopener noreferrer">#2898</a></p></li><li><p>For the experimental REST API, the result format of the <code>/export</code> endpoint was modified: The <code>num_events</code> key was renamed to <code>num-events</code>, and the <code>version</code> key was removed.
<a href="https://github.com/tenzir/tenzir/pull/2899" target="_blank" rel="noopener noreferrer">#2899</a></p></li><li><p>The <code>map</code> type no longer exists: instead of <code>map&lt;T, U&gt;</code>, use the equivalent <code>list&lt;record{ key: T, value: U }&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/2976" target="_blank" rel="noopener noreferrer">#2976</a></p></li><li><p>We renamed the <code>identity</code> operator to <code>pass</code>.
<a href="https://github.com/tenzir/tenzir/pull/2980" target="_blank" rel="noopener noreferrer">#2980</a></p></li><li><p>The REST API does not contain the <code>/export</code> and <code>/export/with-schemas</code> endpoints anymore. Any previous queries using those endpoints have to be sent to the <code>/query</code> endpoint now.
<a href="https://github.com/tenzir/tenzir/pull/2990" target="_blank" rel="noopener noreferrer">#2990</a></p></li><li><p>From now on VAST will use TCP port 5158 for its native inter process communication. This change avoids collisions from dynamic port allocation on Linux systems.
<a href="https://github.com/tenzir/tenzir/pull/2998" target="_blank" rel="noopener noreferrer">#2998</a></p></li><li><p>The non-value literal in expressions has a new syntax: <code>null</code> replaces its old representation <code>nil</code>. For example, the query <code>x != nil</code> is no longer valid; use <code>x != null</code> instead.
<a href="https://github.com/tenzir/tenzir/pull/2999" target="_blank" rel="noopener noreferrer">#2999</a></p></li><li><p>The <code>vast.pipeline-triggers</code> option is deprecated; while it continues to work as-is, support for it will be removed in the next release. Use the new inline import and export pipelines instead. They will return as more generally applicable node ingress and egress pipelines in the future.
<a href="https://github.com/tenzir/tenzir/pull/3008" target="_blank" rel="noopener noreferrer">#3008</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-39">Changes<a href="#changes-39" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST now comes with a role definition for Ansible. You can find it directly in the <code>ansible</code> subdirectory.
<a href="https://github.com/tenzir/tenzir/pull/2604" target="_blank" rel="noopener noreferrer">#2604</a></p></li><li><p>Building VAST now requires CAF 0.18.7. VAST supports setting advanced options for CAF directly in its configuration file under the <code>caf</code> section. If you were using any of these, compare them against the bundled <code>vast.yaml.example</code> file to see if you need to make any changes. The change has (mostly positive) <a href="https://www.actor-framework.org/blog/2021-01/benchmarking-0.18/" target="_blank" rel="noopener noreferrer">performance and stability implications</a> throughout VAST, especially in high-load scenarios.
<a href="https://github.com/tenzir/tenzir/pull/2693" target="_blank" rel="noopener noreferrer">#2693</a>
<a href="https://github.com/tenzir/tenzir/pull/2923" target="_blank" rel="noopener noreferrer">#2923</a></p></li><li><p>OpenSSL is now a required dependency.
<a href="https://github.com/tenzir/tenzir/pull/2719" target="_blank" rel="noopener noreferrer">#2719</a></p></li><li><p><code>vast status</code> no longer shows type registry-related information. Instead, refer to <code>vast show</code> for detailed type metadata information.
<a href="https://github.com/tenzir/tenzir/pull/2745" target="_blank" rel="noopener noreferrer">#2745</a></p></li><li><p>Blocking imports now imply that ingested data gets persisted to disk before the the <code>vast import</code> process exits.
<a href="https://github.com/tenzir/tenzir/pull/2807" target="_blank" rel="noopener noreferrer">#2807</a>
<a href="https://github.com/tenzir/tenzir/pull/2848" target="_blank" rel="noopener noreferrer">#2848</a></p></li><li><p>Plugin names are now case-insensitive.
<a href="https://github.com/tenzir/tenzir/pull/2832" target="_blank" rel="noopener noreferrer">#2832</a></p></li><li><p>The per-schema event distribution moved from <code>index.statistics.layouts</code> to <code>catalog.schemas</code>, and additionally includes information about the import time range and the number of partitions VAST knows for the schema. The number of events per schema no longer includes events that are yet unpersisted.
<a href="https://github.com/tenzir/tenzir/pull/2852" target="_blank" rel="noopener noreferrer">#2852</a></p></li><li><p>The bundled Zeek schema no longer includes the <code>_path</code> field included in Zeek JSON. Use <code>#type == &quot;zeek.foo&quot;</code> over <code>_path == &quot;foo&quot;</code> for querying data ingested using <code>vast import zeek-json</code>.
<a href="https://github.com/tenzir/tenzir/pull/2887" target="_blank" rel="noopener noreferrer">#2887</a></p></li><li><p>We removed the frontend prototype bundled with the web plugin Some parts of the frontend that we have in development are designed to be closed-source, and it is easier to develop at the current development stage in a single repository that is not bound to the release process of VAST itself. An open-source version of the frontend may return in the future.
<a href="https://github.com/tenzir/tenzir/pull/2922" target="_blank" rel="noopener noreferrer">#2922</a>
<a href="https://github.com/tenzir/tenzir/pull/2927" target="_blank" rel="noopener noreferrer">#2927</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-55">Features<a href="#features-55" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>cef</code> import format allows for reading events in the Common Event Format (CEF) via <code>vast import cef &lt; cef.log</code>.
<a href="https://github.com/tenzir/tenzir/pull/2216" target="_blank" rel="noopener noreferrer">#2216</a></p></li><li><p>VAST installations and packages now include Python bindings in a site-package under <code>&lt;install-prefix&gt;/lib/python*/site-packages/vast</code>.
<a href="https://github.com/tenzir/tenzir/pull/2636" target="_blank" rel="noopener noreferrer">#2636</a></p></li><li><p>VAST now imports Arrow IPC data, which is the same format it already supports for export.
<a href="https://github.com/tenzir/tenzir/pull/2707" target="_blank" rel="noopener noreferrer">#2707</a></p></li><li><p>The new <code>pseudonymize</code> pipeline operator pseudonymizes IP addresses in user-specified fields.
<a href="https://github.com/tenzir/tenzir/pull/2719" target="_blank" rel="noopener noreferrer">#2719</a></p></li><li><p>We now offer a <code>tenzir/vast-slim</code> image as an alternative to the <code>tenzir/vast</code> image. The image is minimal in size and supports the same features as the regular image, but does not support building additional plugins against it and mounting in additional plugins.
<a href="https://github.com/tenzir/tenzir/pull/2742" target="_blank" rel="noopener noreferrer">#2742</a></p></li><li><p>The new <code>/query</code> endpoint for the experimental REST API allows users to receive query data in multiple steps, as opposed to a oneshot export.
<a href="https://github.com/tenzir/tenzir/pull/2766" target="_blank" rel="noopener noreferrer">#2766</a></p></li><li><p>Queries of the forms <code>:string == /pattern/</code>, <code>field == /pattern/</code>, <code>#type == /pattern/</code>, and their respective negations now work as expected.
<a href="https://github.com/tenzir/tenzir/pull/2769" target="_blank" rel="noopener noreferrer">#2769</a></p></li><li><p>The <code>/export</code> family of endpoints now accepts an optional <code>pipeline</code> parameter to specify an ad-hoc pipeline that should be applied to the exported data.
<a href="https://github.com/tenzir/tenzir/pull/2773" target="_blank" rel="noopener noreferrer">#2773</a></p></li><li><p>We changed VAST client processes to attempt connecting to a VAST server multiple times until the configured connection timeout (<code>vast.connection-timeout</code>, defaults to 5 minutes) runs out. A fixed delay between connection attempts (<code>vast.connection-retry-delay</code>, defaults to 3 seconds) ensures that clients to not stress the server too much. Set the connection timeout to zero to let VAST client attempt connecting indefinitely, and the delay to zero to disable the retry mechanism.
<a href="https://github.com/tenzir/tenzir/pull/2835" target="_blank" rel="noopener noreferrer">#2835</a></p></li><li><p>The JSON export format gained the options <code>--omit-empty-records</code>, <code>--omit-empty-lists</code>, and <code>--omit-empty-maps</code>, which cause empty records, lists, and maps not to be rendered respectively. The options may be combined together with the existing <code>--omit-nulls</code> option. Use <code>--omit-empty</code> to set all four flags at once.
<a href="https://github.com/tenzir/tenzir/pull/2856" target="_blank" rel="noopener noreferrer">#2856</a></p></li><li><p>The <code>export</code> and <code>import</code> commands now support an optional pipeline string that allows for chaining pipeline operators together and executing such a pipeline on outgoing and incoming data. This feature is experimental and the syntax is subject to change without notice. New operators are only available in the new pipeline syntax, and the old YAML syntax is deprecated.
<a href="https://github.com/tenzir/tenzir/pull/2877" target="_blank" rel="noopener noreferrer">#2877</a>
<a href="https://github.com/tenzir/tenzir/pull/2904" target="_blank" rel="noopener noreferrer">#2904</a>
<a href="https://github.com/tenzir/tenzir/pull/2907" target="_blank" rel="noopener noreferrer">#2907</a></p></li><li><p>The new <code>head</code> and <code>taste</code> operators limit results to the specified number of events. The <code>head</code> operator applies this limit for all events, and the <code>taste</code> operator applies it per schema. Both operators take the limit as an optional argument, with the default value being 10.
<a href="https://github.com/tenzir/tenzir/pull/2891" target="_blank" rel="noopener noreferrer">#2891</a></p></li><li><p>The experimental web frontend now correctly responds to CORS preflight requests. To configure CORS behavior, the new <code>vast.web.cors-allowed-origin</code> config option can be used.
<a href="https://github.com/tenzir/tenzir/pull/2944" target="_blank" rel="noopener noreferrer">#2944</a></p></li><li><p>Patterns now support case insensitivity by adding <code>i</code> to the pattern string, e.g. <code>/^\w{3}$/i</code>.
<a href="https://github.com/tenzir/tenzir/pull/2951" target="_blank" rel="noopener noreferrer">#2951</a></p></li><li><p>The <code>sigma</code> plugin now treats Sigma strings as case-insensitive patterns during the transpilation process.
<a href="https://github.com/tenzir/tenzir/pull/2974" target="_blank" rel="noopener noreferrer">#2974</a></p></li><li><p>The experimental web plugin now serves its own API specification at the new &#x27;/openapi.json&#x27; endpoint.
<a href="https://github.com/tenzir/tenzir/pull/2981" target="_blank" rel="noopener noreferrer">#2981</a></p></li><li><p>Extractors such as <code>x</code> and <code>:T</code> can now expand to the predicates <code>x != null</code> and <code>:T != null</code>, respectively.
<a href="https://github.com/tenzir/tenzir/pull/2984" target="_blank" rel="noopener noreferrer">#2984</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-81">Bug Fixes<a href="#bug-fixes-81" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Attempting to connect with thousands of clients around the same time sometimes crashed the VAST server. This no longer occurs.
<a href="https://github.com/tenzir/tenzir/pull/2693" target="_blank" rel="noopener noreferrer">#2693</a></p></li><li><p>The <code>replace</code> and <code>extend</code> pipeline operators wrongly inferred IP address, subnet, pattern, and map values as strings. They are now inferred correctly. To force a value to be inferred as a string, wrap it inside double quotes.
<a href="https://github.com/tenzir/tenzir/pull/2768" target="_blank" rel="noopener noreferrer">#2768</a></p></li><li><p>VAST now shuts down instantly when metrics are enabled instead of being held alive for up to the duration of the telemetry interval (10 seconds).
<a href="https://github.com/tenzir/tenzir/pull/2832" target="_blank" rel="noopener noreferrer">#2832</a></p></li><li><p>The web plugin now reacts correctly to CTRL-C by stopping itself.
<a href="https://github.com/tenzir/tenzir/pull/2860" target="_blank" rel="noopener noreferrer">#2860</a></p></li><li><p>VAST no longer ignores existing PID lock files on Linux.
<a href="https://github.com/tenzir/tenzir/pull/2861" target="_blank" rel="noopener noreferrer">#2861</a></p></li><li><p>The start commands specified with the <code>vast.start.commands</code> option are now run aynchronously. This means that commands that block indefinitely will no longer prevent execution of subsequent commands, and allow for correct signal handling.
<a href="https://github.com/tenzir/tenzir/pull/2868" target="_blank" rel="noopener noreferrer">#2868</a></p></li><li><p>The Zeek TSV reader now respects the schema files in the bundled <code>zeek.schema</code> file, and produces data of the same schema as the Zeek JSON reader. E.g., instead of producing a top-level ip field <code>id.orig_h</code>, the reader now produces a top-level record field <code>id</code> that contains the ip field <code>orig_h</code>, effectively unflattening the data.
<a href="https://github.com/tenzir/tenzir/pull/2887" target="_blank" rel="noopener noreferrer">#2887</a></p></li><li><p>Pipelines that reduce the number of events do not prevent <code>vast export</code> processes that have a <code>max-events</code> limit from terminating any more.
<a href="https://github.com/tenzir/tenzir/pull/2896" target="_blank" rel="noopener noreferrer">#2896</a></p></li><li><p>We fixed incorrect printing of human-readable durations in some edge cases. E.g., the value 1.999s was rendered as 1.1s instead of the expected 2.0s. This bug affected the JSON and CSV export formats, and all durations printed in log messages or the status command.
<a href="https://github.com/tenzir/tenzir/pull/2906" target="_blank" rel="noopener noreferrer">#2906</a></p></li><li><p>Options passed in the <code>caf.openssl</code> section in the configuration file or as <code>VAST_CAF__OPENSSL__*</code> environment variables are no longer ignored.
<a href="https://github.com/tenzir/tenzir/pull/2908" target="_blank" rel="noopener noreferrer">#2908</a></p></li><li><p>The VAST client will now terminate properly when using the <code>count</code> command with a query which delivers zero results.
<a href="https://github.com/tenzir/tenzir/pull/2924" target="_blank" rel="noopener noreferrer">#2924</a></p></li><li><p>VAST no longer crashes when it encounters an invalid type expression in a schema.
<a href="https://github.com/tenzir/tenzir/pull/2977" target="_blank" rel="noopener noreferrer">#2977</a></p></li><li><p>Compaction now retries immediately on failure instead of waiting for the configured scan interval to expire again.
<a href="https://github.com/tenzir/tenzir/pull/3006" target="_blank" rel="noopener noreferrer">#3006</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v242"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.4.2" target="_blank" rel="noopener noreferrer">v2.4.2</a><a href="#v242" class="hash-link" aria-label="Direct link to v242" title="Direct link to v242">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-40">Changes<a href="#changes-40" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>VAST&#x27;s rebuilding and compaction features now interfere less with queries.
<a href="https://github.com/tenzir/tenzir/pull/3047" target="_blank" rel="noopener noreferrer">#3047</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v241"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.4.1" target="_blank" rel="noopener noreferrer">v2.4.1</a><a href="#v241" class="hash-link" aria-label="Direct link to v241" title="Direct link to v241">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-56">Features<a href="#features-56" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>VAST&#x27;s Feather store now yields initial results much faster and performs better when running queries affecting a large number of partitions by doing smaller incremental disk reads as needed rather than one large disk read upfront.
<a href="https://github.com/tenzir/tenzir/pull/2805" target="_blank" rel="noopener noreferrer">#2805</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v240"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.4.0" target="_blank" rel="noopener noreferrer">v2.4.0</a><a href="#v240" class="hash-link" aria-label="Direct link to v240" title="Direct link to v240">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-41">Changes<a href="#changes-41" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST now emits per-component memory usage metrics under the keys <code>index.memory-usage</code> and <code>catalog.memory-usage</code>.
<a href="https://github.com/tenzir/tenzir/pull/2471" target="_blank" rel="noopener noreferrer">#2471</a></p></li><li><p>We changed the default VAST endpoint from <code>localhost</code> to <code>127.0.0.1</code>. This ensures the listening address is deterministic and not dependent on the host-specific IPv4 and IPv6 resolution. For example, resolving <code>localhost</code> yields a list of addresses, and if VAST fails to bind on the first (e.g., to due to a lingering socket) it would silently go to the next. Taking name resolution out of the equation fixes such issues. Set the option <code>vast.endpoint</code> to override the default endpoint.
<a href="https://github.com/tenzir/tenzir/pull/2512" target="_blank" rel="noopener noreferrer">#2512</a></p></li><li><p>Building VAST from source now requires CMake 3.19 or greater.
<a href="https://github.com/tenzir/tenzir/pull/2582" target="_blank" rel="noopener noreferrer">#2582</a></p></li><li><p>The default store backend of VAST is now <code>feather</code>. Reading from VAST&#x27;s custom <code>segment-store</code> backend is still transparently supported, but new partitions automatically write to the Apache Feather V2 backend instead.
<a href="https://github.com/tenzir/tenzir/pull/2587" target="_blank" rel="noopener noreferrer">#2587</a></p></li><li><p>We removed PyVAST from the code base in favor of the new Python bindings. PyVAST continues to work as a thin wrapper around the VAST binary, but will no longer be released alongside VAST.
<a href="https://github.com/tenzir/tenzir/pull/2674" target="_blank" rel="noopener noreferrer">#2674</a></p></li><li><p>Building VAST from source now requires <a href="https://arrow.apache.org/blog/2022/10/31/10.0.0-release/" target="_blank" rel="noopener noreferrer">Apache Arrow 10.0</a> or newer.
<a href="https://github.com/tenzir/tenzir/pull/2685" target="_blank" rel="noopener noreferrer">#2685</a></p></li><li><p>The <code>vast dump</code> command is now called <code>vast show</code>.
<a href="https://github.com/tenzir/tenzir/pull/2686" target="_blank" rel="noopener noreferrer">#2686</a></p></li><li><p>VAST now loads all plugins by default. To revert to the old behavior, explicitly set the <code>vast.plugins</code> option to have no value.
<a href="https://github.com/tenzir/tenzir/pull/2689" target="_blank" rel="noopener noreferrer">#2689</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-57">Features<a href="#features-57" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>We now distribute VAST also as Debian Package with every new release. The Debian package automatically installs a systemd service and creates a <code>vast</code> user for the VAST process.
<a href="https://github.com/tenzir/tenzir/pull/2513" target="_blank" rel="noopener noreferrer">#2513</a>
<a href="https://github.com/tenzir/tenzir/pull/2738" target="_blank" rel="noopener noreferrer">#2738</a></p></li><li><p>VAST Cloud has now a MISP plugin that enables to add a MISP instance to the cloud stack.
<a href="https://github.com/tenzir/tenzir/pull/2548" target="_blank" rel="noopener noreferrer">#2548</a></p></li><li><p>The new experimental web plugin offers a RESTful API to VAST and a bundled web user interface in Svelte.
<a href="https://github.com/tenzir/tenzir/pull/2567" target="_blank" rel="noopener noreferrer">#2567</a>
<a href="https://github.com/tenzir/tenzir/pull/2614" target="_blank" rel="noopener noreferrer">#2614</a>
<a href="https://github.com/tenzir/tenzir/pull/2638" target="_blank" rel="noopener noreferrer">#2638</a>
<a href="https://github.com/tenzir/tenzir/pull/3681" target="_blank" rel="noopener noreferrer">#3681</a></p></li><li><p>VAST now emits metrics for filesystem access under the keys <code>posix-filesystem.{checks,writes,reads,mmaps,erases,moves}.{successful,failed,bytes}</code>.
<a href="https://github.com/tenzir/tenzir/pull/2572" target="_blank" rel="noopener noreferrer">#2572</a></p></li><li><p>VAST now ships a Docker Compose file. In particular, the Docker Compose stack now has a TheHive integration that can run VAST queries as a Cortex Analyzer.
<a href="https://github.com/tenzir/tenzir/pull/2574" target="_blank" rel="noopener noreferrer">#2574</a>
<a href="https://github.com/tenzir/tenzir/pull/2652" target="_blank" rel="noopener noreferrer">#2652</a></p></li><li><p>VAST Cloud can now expose HTTP services using Cloudflare Access.
<a href="https://github.com/tenzir/tenzir/pull/2578" target="_blank" rel="noopener noreferrer">#2578</a></p></li><li><p>Rebuilding partitions now additionally rebatches the contained events to <code>vast.import.batch-size</code> events per batch, which accelerates queries against partitions that previously had undersized batches.
<a href="https://github.com/tenzir/tenzir/pull/2583" target="_blank" rel="noopener noreferrer">#2583</a></p></li><li><p>VAST has a new configuration setting, <code>vast.zstd-compression-level</code>, to control the compression level of the Zstd algorithm used in both the Feather and Parquet store backends. The default level is set by the Apache Arrow library, and for Parquet is no longer explicitly defaulted to <code>9</code>.
<a href="https://github.com/tenzir/tenzir/pull/2623" target="_blank" rel="noopener noreferrer">#2623</a></p></li><li><p>VAST has three new metrics: <code>catalog.num-partitions-total</code>, <code>catalog.num-events-total</code>, and <code>ingest-total</code> that sum up all schema-based metrics by their respective schema-based metric counterparts.
<a href="https://github.com/tenzir/tenzir/pull/2682" target="_blank" rel="noopener noreferrer">#2682</a></p></li><li><p>Queries without acceleration from a dense index run significantly faster, e.g., initial tests show a 2x performance improvement for substring queries.
<a href="https://github.com/tenzir/tenzir/pull/2730" target="_blank" rel="noopener noreferrer">#2730</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-82">Bug Fixes<a href="#bug-fixes-82" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST now skips unreadable partitions while starting up, instead of aborting the initialization routine.
<a href="https://github.com/tenzir/tenzir/pull/2515" target="_blank" rel="noopener noreferrer">#2515</a></p></li><li><p>Rebuilding of heterogeneous partition no longer freezes the entire rebuilder on pipeline failures.
<a href="https://github.com/tenzir/tenzir/pull/2530" target="_blank" rel="noopener noreferrer">#2530</a></p></li><li><p>VAST no longer attempts to hard-kill itself if the shutdown did not finish within the configured grace period. The option <code>vast.shutdown-grace-period</code> no longer exists. We recommend setting <code>TimeoutStopSec=180</code> in the VAST systemd service definition to restore the previous behavior.
<a href="https://github.com/tenzir/tenzir/pull/2568" target="_blank" rel="noopener noreferrer">#2568</a></p></li><li><p>The error message on connection failure now contains a correctly formatted target endpoint.
<a href="https://github.com/tenzir/tenzir/pull/2609" target="_blank" rel="noopener noreferrer">#2609</a></p></li><li><p>The UDS metrics sink no longer deadlocks due to suspended listeners.
<a href="https://github.com/tenzir/tenzir/pull/2635" target="_blank" rel="noopener noreferrer">#2635</a></p></li><li><p>VAST now ejects partitions from the LRU cache if they fail to load with an I/O error.
<a href="https://github.com/tenzir/tenzir/pull/2642" target="_blank" rel="noopener noreferrer">#2642</a></p></li><li><p>The systemd service no longer fails if the home directory of the vast user is not in <code>/var/lib/vast</code>.
<a href="https://github.com/tenzir/tenzir/pull/2734" target="_blank" rel="noopener noreferrer">#2734</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v231"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.3.1" target="_blank" rel="noopener noreferrer">v2.3.1</a><a href="#v231" class="hash-link" aria-label="Direct link to v231" title="Direct link to v231">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-83">Bug Fixes<a href="#bug-fixes-83" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>We fixed an indefinite hang that occurred when attempting to apply a pipeline to a partition that is not a valid flatbuffer.
<a href="https://github.com/tenzir/tenzir/pull/2624" target="_blank" rel="noopener noreferrer">#2624</a></p></li><li><p>VAST now properly regenerates any corrupted, oversized partitions it encounters during startup, provided that the corresponding store files are available. These files could be produced by versions up to and including VAST v2.2, when using configurations with an increased maximum partition size.
<a href="https://github.com/tenzir/tenzir/pull/2631" target="_blank" rel="noopener noreferrer">#2631</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v230"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.3.0" target="_blank" rel="noopener noreferrer">v2.3.0</a><a href="#v230" class="hash-link" aria-label="Direct link to v230" title="Direct link to v230">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-42">Changes<a href="#changes-42" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>We improved the operability of VAST servers under high load from automated low-priority queries. VAST now considers queries issued with <code>--low-priority</code>, such as automated retro-match queries, with even less priority compared to regular queries (down from 33.3% to 4%) and internal high-priority queries used for rebuilding and compaction (down from 12.5% to 1%).
<a href="https://github.com/tenzir/tenzir/pull/2484" target="_blank" rel="noopener noreferrer">#2484</a></p></li><li><p>The default value for <code>vast.active-partition-timeout</code> is now 5 minutes (down from 1 hour), causing VAST to persist underful partitions earlier.
<a href="https://github.com/tenzir/tenzir/pull/2493" target="_blank" rel="noopener noreferrer">#2493</a></p></li><li><p>We split the <code>vast rebuild</code> command into two: <code>vast rebuild start</code> and <code>vast rebuild stop</code>. Rebuild orchestration now runs server-side, and only a single rebuild may run at a given time. We also made it more intuitive to use: <code>--undersized</code> now implies <code>--all</code>, and a new <code>--detached</code> option allows for running rebuilds in the background.
<a href="https://github.com/tenzir/tenzir/pull/2493" target="_blank" rel="noopener noreferrer">#2493</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-58">Features<a href="#features-58" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>VAST&#x27;s partition indexes are now optional, allowing operators to control the trade-off between disk-usage and query performance for every field.
<a href="https://github.com/tenzir/tenzir/pull/2430" target="_blank" rel="noopener noreferrer">#2430</a></p></li><li><p>We can now use matchers in AWS using the vast-cloud CLI matcher plugin.
<a href="https://github.com/tenzir/tenzir/pull/2473" target="_blank" rel="noopener noreferrer">#2473</a></p></li><li><p>VAST now continuously rebuilds outdated and merges undersized partitions in the background. The new option <code>vast.automatic-rebuild</code> controls how many resources to spend on this. To disable this behavior, set the option to 0; the default is 1.
<a href="https://github.com/tenzir/tenzir/pull/2493" target="_blank" rel="noopener noreferrer">#2493</a></p></li><li><p>Rebuilding now emits metrics under the keys <code>rebuilder.partitions.{remaining,rebuilding,completed}</code>. The <code>vast status rebuild</code> command additionally shows information about the ongoing rebuild.
<a href="https://github.com/tenzir/tenzir/pull/2493" target="_blank" rel="noopener noreferrer">#2493</a></p></li><li><p>The new <code>vast.connection-timeout</code> option allows for configuring the timeout VAST clients use when connecting to a VAST server. The value defaults to 10s; setting it to a zero duration causes produces an infinite timeout.
<a href="https://github.com/tenzir/tenzir/pull/2499" target="_blank" rel="noopener noreferrer">#2499</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-84">Bug Fixes<a href="#bug-fixes-84" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST properly processes queries for fields with <code>skip</code> attribute.
<a href="https://github.com/tenzir/tenzir/pull/2430" target="_blank" rel="noopener noreferrer">#2430</a></p></li><li><p>VAST can now store data in segments bigger than 2GiB in size each.
<a href="https://github.com/tenzir/tenzir/pull/2449" target="_blank" rel="noopener noreferrer">#2449</a></p></li><li><p>VAST can now store column indexes that are bigger than 2GiB.
<a href="https://github.com/tenzir/tenzir/pull/2449" target="_blank" rel="noopener noreferrer">#2449</a></p></li><li><p>VAST no longer occasionally prints warnings about no longer available partitions when queries run concurrently to imports.
<a href="https://github.com/tenzir/tenzir/pull/2500" target="_blank" rel="noopener noreferrer">#2500</a></p></li><li><p>Configuration options representing durations with an associated command-line option like <code>vast.connection-timeout</code> and <code>--connection-timeout</code> were not picked up from configuration files or environment variables. This now works as expected.
<a href="https://github.com/tenzir/tenzir/pull/2503" target="_blank" rel="noopener noreferrer">#2503</a></p></li><li><p>Partitions now fail early when their stores fail to load from disk, detailing what went wrong in an error message.
<a href="https://github.com/tenzir/tenzir/pull/2507" target="_blank" rel="noopener noreferrer">#2507</a></p></li><li><p>We changed the way <code>vast-cloud</code> is loading its cloud plugins to make it more explicit. This avoids inconsitent defaults assigned to variables when using core commands on specific plugins.
<a href="https://github.com/tenzir/tenzir/pull/2510" target="_blank" rel="noopener noreferrer">#2510</a></p></li><li><p>The <code>rebuild</code> command, automatic rebuilds, and compaction are now much faster, and match the performance of the <code>import</code> command for building indexes.
<a href="https://github.com/tenzir/tenzir/pull/2515" target="_blank" rel="noopener noreferrer">#2515</a></p></li><li><p>Fixed a race condition where the output of a partition transform could be reused before it was fully written to disk, for example when running <code>vast rebuild</code>.
<a href="https://github.com/tenzir/tenzir/pull/2543" target="_blank" rel="noopener noreferrer">#2543</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v220"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.2.0" target="_blank" rel="noopener noreferrer">v2.2.0</a><a href="#v220" class="hash-link" aria-label="Direct link to v220" title="Direct link to v220">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-43">Changes<a href="#changes-43" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>Metrics for VAST&#x27;s store lookups now use the keys <code>{active,passive}-store.lookup.{runtime,hits}</code>. The store type metadata field now distinguishes between the various supported store types, e.g., <code>parquet</code>, <code>feather</code>, or <code>segment-store</code>, rather than containing <code>active</code> or <code>passive</code>.
<a href="https://github.com/tenzir/tenzir/pull/2413" target="_blank" rel="noopener noreferrer">#2413</a></p></li><li><p>The <code>summarize</code> pipeline operator is now a builtin; the previously bundled <code>summarize</code> plugin no longer exists. Aggregation functions in the <code>summarize</code> operator are now plugins, which makes them easily extensible. The syntax of <code>summarize</code> now supports specification of output field names, similar to SQL&#x27;s <code>AS</code> in <code>SELECT f(x) AS name</code>.
<a href="https://github.com/tenzir/tenzir/pull/2417" target="_blank" rel="noopener noreferrer">#2417</a></p></li><li><p>The undocumented <code>count</code> pipeline operator no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/2417" target="_blank" rel="noopener noreferrer">#2417</a></p></li><li><p>The <code>put</code> pipeline operator is now called <code>select</code>, as we&#x27;ve abandoned plans to integrate the functionality of <code>replace</code> into it.
<a href="https://github.com/tenzir/tenzir/pull/2423" target="_blank" rel="noopener noreferrer">#2423</a></p></li><li><p>The <code>replace</code> pipeline operator now supports multiple replacements in one configuration, which aligns the behavior with other operators.
<a href="https://github.com/tenzir/tenzir/pull/2423" target="_blank" rel="noopener noreferrer">#2423</a></p></li><li><p>Transforms are now called pipelines. In your configuration, replace <code>transform</code> with <code>pipeline</code> in all keys.
<a href="https://github.com/tenzir/tenzir/pull/2429" target="_blank" rel="noopener noreferrer">#2429</a></p></li><li><p>An <code>init</code> command was added to <code>vast-cloud</code> to help getting out of inconsistent Terraform states.
<a href="https://github.com/tenzir/tenzir/pull/2435" target="_blank" rel="noopener noreferrer">#2435</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-59">Features<a href="#features-59" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>flush</code> command causes VAST to decommission all currently active partitions, i.e., write all active partitions to disk immediately regardless of their size or the active partition timeout. This is particularly useful for testing, or when needing to guarantee in automated scripts that input is available for operations that only work on persisted passive partitions. The <code>flush</code> command returns only after all active partitions were flushed to disk.
<a href="https://github.com/tenzir/tenzir/pull/2396" target="_blank" rel="noopener noreferrer">#2396</a></p></li><li><p>The <code>summarize</code> operator supports three new aggregation functions: <code>sample</code> takes the first value in every group, <code>distinct</code> filters out duplicate values, and <code>count</code> yields the number of values.
<a href="https://github.com/tenzir/tenzir/pull/2417" target="_blank" rel="noopener noreferrer">#2417</a></p></li><li><p>The <code>drop</code> pipeline operator now drops entire schemas spcefied by name in the <code>schemas</code> configuration key in addition to dropping fields by extractors in the <code>fields</code> configuration key.
<a href="https://github.com/tenzir/tenzir/pull/2419" target="_blank" rel="noopener noreferrer">#2419</a></p></li><li><p>The new <code>extend</code> pipeline operator allows for adding new fields with fixed values to data.
<a href="https://github.com/tenzir/tenzir/pull/2423" target="_blank" rel="noopener noreferrer">#2423</a></p></li><li><p>The cloud execution commands (<code>run-lambda</code> and <code>execute-command</code>) now accept scripts from file-like handles. To improve the usability of this feature, the whole host file system is now mounted into the CLI container.
<a href="https://github.com/tenzir/tenzir/pull/2446" target="_blank" rel="noopener noreferrer">#2446</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-85">Bug Fixes<a href="#bug-fixes-85" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST will export <code>real</code> values in JSON consistently with at least one decimal place.
<a href="https://github.com/tenzir/tenzir/pull/2393" target="_blank" rel="noopener noreferrer">#2393</a></p></li><li><p>VAST is now able to detect corrupt index files and will attempt to repair them on startup.
<a href="https://github.com/tenzir/tenzir/pull/2431" target="_blank" rel="noopener noreferrer">#2431</a></p></li><li><p>The JSON export with <code>--omit-nulls</code> now correctly handles nested records whose first field is <code>null</code> instead of dropping them entirely.
<a href="https://github.com/tenzir/tenzir/pull/2447" target="_blank" rel="noopener noreferrer">#2447</a></p></li><li><p>We fixed a race condition when VAST crashed while applying a partition transform, leading to data duplication.
<a href="https://github.com/tenzir/tenzir/pull/2465" target="_blank" rel="noopener noreferrer">#2465</a></p></li><li><p>The rebuild command no longer crashes on failure, and displays the encountered error instead.
<a href="https://github.com/tenzir/tenzir/pull/2466" target="_blank" rel="noopener noreferrer">#2466</a></p></li><li><p>Missing arguments for the <code>--plugins</code>, <code>--plugin-dirs</code>, and <code>--schema-dirs</code> command line options no longer cause VAST to crash occasionally.
<a href="https://github.com/tenzir/tenzir/pull/2470" target="_blank" rel="noopener noreferrer">#2470</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v210"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.1.0" target="_blank" rel="noopener noreferrer">v2.1.0</a><a href="#v210" class="hash-link" aria-label="Direct link to v210" title="Direct link to v210">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-44">Changes<a href="#changes-44" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>mdx-regenerate</code> tool is no longer part of VAST binary releases.
<a href="https://github.com/tenzir/tenzir/pull/2260" target="_blank" rel="noopener noreferrer">#2260</a></p></li><li><p>Partition transforms now always emit homogenous partitions, i.e., one schema per partition. This makes compaction and aging more efficient.
<a href="https://github.com/tenzir/tenzir/pull/2277" target="_blank" rel="noopener noreferrer">#2277</a></p></li><li><p>VAST now requires Arrow &gt;= v8.0.0.
<a href="https://github.com/tenzir/tenzir/pull/2284" target="_blank" rel="noopener noreferrer">#2284</a></p></li><li><p>The <code>vast.store-backend</code> configuration option no longer supports <code>archive</code>, and instead always uses the superior <code>segment-store</code> instead. Events stored in the archive will continue to be available in queries.
<a href="https://github.com/tenzir/tenzir/pull/2290" target="_blank" rel="noopener noreferrer">#2290</a></p></li><li><p>The <code>vast.use-legacy-query-scheduler</code> option is now ignored because the legacy query scheduler has been removed.
<a href="https://github.com/tenzir/tenzir/pull/2312" target="_blank" rel="noopener noreferrer">#2312</a></p></li><li><p>VAST will from now on always format <code>time</code> and <code>timestamp</code> values with six decimal places (microsecond precision). The old behavior used a precision that depended on the actual value. This may require action for downstream tooling like metrics collectors that expect nanosecond granularity.
<a href="https://github.com/tenzir/tenzir/pull/2380" target="_blank" rel="noopener noreferrer">#2380</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-60">Features<a href="#features-60" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>lsvast</code> tool can now print contents of individual <code>.mdx</code> files. It now has an option to print raw Bloom filter contents of string and IP address synopses.
<a href="https://github.com/tenzir/tenzir/pull/2260" target="_blank" rel="noopener noreferrer">#2260</a></p></li><li><p>The <code>mdx-regenerate</code> tool was renamed to <code>vast-regenerate</code> and can now also regenerate an index file from a list of partition UUIDs.
<a href="https://github.com/tenzir/tenzir/pull/2260" target="_blank" rel="noopener noreferrer">#2260</a></p></li><li><p>VAST now compresses data with Zstd. When persisting data to the segment store, the default configuration achieves over 2x space savings. When transferring data between client and server processes, compression reduces the amount of transferred data by up to 5x. This allowed us to increase the default partition size from 1,048,576 to 4,194,304 events, and the default number of events in a single batch from 1,024 to 65,536. The performance increase comes at the cost of a ~20% memory footprint increase at peak load. Use the option <code>vast.max-partition-size</code> to tune this space-time tradeoff.
<a href="https://github.com/tenzir/tenzir/pull/2268" target="_blank" rel="noopener noreferrer">#2268</a></p></li><li><p>VAST now produces additional metrics under the keys <code>ingest.events</code>, <code>ingest.duration</code> and <code>ingest.rate</code>. Each of those gets issued once for every schema that VAST ingested during the measurement period. Use the <code>metadata_schema</code> key to disambiguate the metrics.
<a href="https://github.com/tenzir/tenzir/pull/2274" target="_blank" rel="noopener noreferrer">#2274</a></p></li><li><p>A new parquet store plugin allows VAST to store its data as parquet files, increasing storage efficiency at the expense of higher deserialization costs. Storage requirements for the VAST database is reduced by another 15-20% compared to the existing segment store with Zstd compression enabled. CPU usage for suricata import is up ~ 10%,  mostly related to the more expensive serialization. Deserialization (reading) of a partition is significantly more expensive, increasing CPU utilization by about 100%, and should be carefully considered and compared to the potential reduction in storage cost and I/O operations.
<a href="https://github.com/tenzir/tenzir/pull/2284" target="_blank" rel="noopener noreferrer">#2284</a></p></li><li><p>The <code>status</code> command now supports filtering by component name. E.g., <code>vast status importer index</code> only shows the status of the importer and index components.
<a href="https://github.com/tenzir/tenzir/pull/2288" target="_blank" rel="noopener noreferrer">#2288</a></p></li><li><p>VAST emits the new metric <code>partition.events-written</code> when writing a partition to disk. The metric&#x27;s value is the number of events written, and the <code>metadata_schema</code> field contains the name of the partition&#x27;s schema.
<a href="https://github.com/tenzir/tenzir/pull/2302" target="_blank" rel="noopener noreferrer">#2302</a></p></li><li><p>The new <code>rebuild</code> command rebuilds old partitions to take advantage of improvements in newer VAST versions. Rebuilding takes place in the VAST server in the background. This process merges partitions up to the configured <code>max-partition-size</code>, turns VAST v1.x&#x27;s heterogeneous into VAST v2.x&#x27;s homogenous partitions, migrates all data to the currently configured <code>store-backend</code>, and upgrades to the most recent internal batch encoding and indexes.
<a href="https://github.com/tenzir/tenzir/pull/2321" target="_blank" rel="noopener noreferrer">#2321</a></p></li><li><p>PyVAST now supports running client commands for VAST servers running in a container environment, if no local VAST binary is available. Specify the <code>container</code> keyword to customize this behavior. It defaults to <code>{&quot;runtime&quot;: &quot;docker&quot;, &quot;name&quot;: &quot;vast&quot;}</code>.
<a href="https://github.com/tenzir/tenzir/pull/2334" target="_blank" rel="noopener noreferrer">#2334</a>
<a href="https://github.com/KaanSK" target="_blank" rel="noopener noreferrer">@KaanSK</a></p></li><li><p>The <code>csv</code> import gained a new <code>--seperator=&#x27;x&#x27;</code> option that defaults to <code>&#x27;,&#x27;</code>. Set it to <code>&#x27;\t&#x27;</code> to import tab-separated values, or <code>&#x27; &#x27;</code> to import space-separated values.
<a href="https://github.com/tenzir/tenzir/pull/2336" target="_blank" rel="noopener noreferrer">#2336</a></p></li><li><p>VAST now compresses on-disk indexes with Zstd, resulting in a 50-80% size reduction depending on the type of indexes used, and reducing the overall index size to below the raw data size. This improves retention spans significantly. For example, using the default configuration, the indexes for <code>suricata.ftp</code> events now use 75% less disk space, and <code>suricata.flow</code> 30% less.
<a href="https://github.com/tenzir/tenzir/pull/2346" target="_blank" rel="noopener noreferrer">#2346</a></p></li><li><p>The index statistics in <code>vast status --detailed</code> now show the event distribution per schema as a percentage of the total number of events in addition to the per-schema number, e.g., for <code>suricata.flow</code> events under the key <code>index.statistics.layouts.suricata.flow.percentage</code>.
<a href="https://github.com/tenzir/tenzir/pull/2351" target="_blank" rel="noopener noreferrer">#2351</a></p></li><li><p>The output <code>vast status --detailed</code> now shows metadata from all partitions under the key <code>.catalog.partitions</code>. Additionally, the catalog emits metrics under the key <code>catalog.num-events</code> and <code>catalog.num-partitions</code> containing the number of events and partitions respectively. The metrics contain the schema name in the field <code>metadata_schema</code> and the (internal) partition version in the field <code>metadata_partition-version</code>.
<a href="https://github.com/tenzir/tenzir/pull/2360" target="_blank" rel="noopener noreferrer">#2360</a>
<a href="https://github.com/tenzir/tenzir/pull/2363" target="_blank" rel="noopener noreferrer">#2363</a></p></li><li><p>The VAST Cloud CLI can now authenticate to the Tenzir private registry and download the vast-pro image (including plugins such as Matcher). The deployment script can now be configured to use a specific image and can thus be set to use vast-pro.
<a href="https://github.com/tenzir/tenzir/pull/2415" target="_blank" rel="noopener noreferrer">#2415</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-86">Bug Fixes<a href="#bug-fixes-86" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST no longer crashes when importing <code>map</code> or <code>pattern</code> data annotated with the <code>#skip</code> attribute.
<a href="https://github.com/tenzir/tenzir/pull/2286" target="_blank" rel="noopener noreferrer">#2286</a></p></li><li><p>The command-line options <code>--plugins</code>, <code>--plugin-dirs</code>, and <code>--schema-dirs</code> now correctly overwrite their corresponding configuration options.
<a href="https://github.com/tenzir/tenzir/pull/2289" target="_blank" rel="noopener noreferrer">#2289</a></p></li><li><p>VAST no longer crashes when a query arrives at a newly created active partition in the time window between the partition creation and the first event arriving at the partition.
<a href="https://github.com/tenzir/tenzir/pull/2295" target="_blank" rel="noopener noreferrer">#2295</a></p></li><li><p>Setting the environment variable <code>VAST_ENDPOINT</code> to <code>host:port</code> pair no longer fails on startup with a parse error.
<a href="https://github.com/tenzir/tenzir/pull/2305" target="_blank" rel="noopener noreferrer">#2305</a></p></li><li><p>VAST no longer hangs when it is shut down while still importing events.
<a href="https://github.com/tenzir/tenzir/pull/2324" target="_blank" rel="noopener noreferrer">#2324</a></p></li><li><p>VAST now reads the default false-positive rate for sketches correctly. This broke accidentally with the v2.0 release. The option moved from <code>vast.catalog-fp-rate</code> to <code>vast.index.default-fp-rate</code>.
<a href="https://github.com/tenzir/tenzir/pull/2325" target="_blank" rel="noopener noreferrer">#2325</a></p></li><li><p>The parser for <code>real</code> values now understands scientific notation, e.g., <code>1.23e+42</code>.
<a href="https://github.com/tenzir/tenzir/pull/2332" target="_blank" rel="noopener noreferrer">#2332</a></p></li><li><p>The <code>csv</code> import no longer crashes when the CSV file contains columns not present in the selected schema. Instead, it imports these columns as strings.
<a href="https://github.com/tenzir/tenzir/pull/2336" target="_blank" rel="noopener noreferrer">#2336</a></p></li><li><p><code>vast export csv</code> now renders enum columns in their string representation instead of their internal numerical representation.
<a href="https://github.com/tenzir/tenzir/pull/2336" target="_blank" rel="noopener noreferrer">#2336</a></p></li><li><p>The JSON import now treats <code>time</code> and <code>duration</code> fields correctly for JSON strings containing a number, i.e., the JSON string <code>&quot;1654735756&quot;</code> now behaves just like the JSON number <code>1654735756</code> and for a <code>time</code> field results in the value <code>2022-06-09T00:49:16.000Z</code>.
<a href="https://github.com/tenzir/tenzir/pull/2340" target="_blank" rel="noopener noreferrer">#2340</a></p></li><li><p>VAST will no longer terminate when it can&#x27;t write any more data to disk. Incoming data will still be accepted but discarded. We encourage all users to enable the disk-monitor or compaction features as a proper solution to this problem.
<a href="https://github.com/tenzir/tenzir/pull/2376" target="_blank" rel="noopener noreferrer">#2376</a></p></li><li><p>VAST no longer ignores environment variables for plugin-specific options. E.g., the environment variable <code>VAST_PLUGINS__FOO__BAR</code> now correctly refers to the <code>bar</code> option of the <code>foo</code> plugin, i.e., <code>plugins.foo.bar</code>.
<a href="https://github.com/tenzir/tenzir/pull/2390" target="_blank" rel="noopener noreferrer">#2390</a></p></li><li><p>We improved the mechanism to recover the database state after an unclean shutdown.
<a href="https://github.com/tenzir/tenzir/pull/2394" target="_blank" rel="noopener noreferrer">#2394</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v200"><a href="https://github.com/tenzir/tenzir/releases/tag/v2.0.0" target="_blank" rel="noopener noreferrer">v2.0.0</a><a href="#v200" class="hash-link" aria-label="Direct link to v200" title="Direct link to v200">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-2">Breaking Changes<a href="#breaking-changes-2" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>We removed the experimental <code>vast get</code> command. It relied on an internal unique event ID that was only exposed to the user in debug messages. This removal is a preparatory step towards a simplification of some of the internal workings of VAST.
<a href="https://github.com/tenzir/tenzir/pull/2121" target="_blank" rel="noopener noreferrer">#2121</a></p></li><li><p>The <code>meta-index</code> is now called the <code>catalog</code>. This affects multiple metrics and entries in the output of <code>vast status</code>, and the configuration option <code>vast.meta-index-fp-rate</code>, which is now called <code>vast.catalog-fp-rate</code>.
<a href="https://github.com/tenzir/tenzir/pull/2128" target="_blank" rel="noopener noreferrer">#2128</a></p></li><li><p>The command line option <code>--verbosity</code> has the new name <code>--console-verbosity</code>. This synchronizes the CLI interface with the configuration file that solely understands the option <code>vast.console-verbosity</code>.
<a href="https://github.com/tenzir/tenzir/pull/2178" target="_blank" rel="noopener noreferrer">#2178</a></p></li><li><p>Multiple transform steps now have new names: <code>select</code> is now called <code>where</code>, <code>delete</code> is now called <code>drop</code>, <code>project</code> is now called <code>put</code>, and <code>aggregate</code> is now called <code>summarize</code>. This breaking change is in preparation for an upcoming feature that improves the capability of VAST&#x27;s query language.
<a href="https://github.com/tenzir/tenzir/pull/2228" target="_blank" rel="noopener noreferrer">#2228</a></p></li><li><p>The <code>layout-names</code> option of the <code>rename</code> transform step was renamed <code>schemas</code>. The step now additonally supports renaming <code>fields</code>.
<a href="https://github.com/tenzir/tenzir/pull/2228" target="_blank" rel="noopener noreferrer">#2228</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-45">Changes<a href="#changes-45" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST ships experimental Terraform scripts to deploy on AWS Lambda and Fargate.
<a href="https://github.com/tenzir/tenzir/pull/2108" target="_blank" rel="noopener noreferrer">#2108</a></p></li><li><p>We revised the query scheduling logic to exploit synergies when multiple queries run at the same time. In that vein, we updated the related metrics with more accurate names to reflect the new mechanism. The new keys <code>scheduler.partition.materializations</code>, <code>scheduler.partition.scheduled</code>, and <code>scheduler.partition.lookups</code> provide periodic counts of partitions loaded from disk and scheduled for lookup, and the overall number of queries issued to partitions, respectively. The keys <code>query.workers.idle</code>, and <code>query.workers.busy</code> were renamed to <code>scheduler.partition.remaining-capacity</code>, and <code>scheduler.partition.current-lookups</code>. Finally, the key <code>scheduler.partition.pending</code> counts the number of currently pending partitions. It is still possible to opt-out of the new scheduling algorithm with the (deprecated) option <code>--use-legacy-query-scheduler</code>.
<a href="https://github.com/tenzir/tenzir/pull/2117" target="_blank" rel="noopener noreferrer">#2117</a></p></li><li><p>VAST now requires Apache Arrow &gt;= v7.0.0.
<a href="https://github.com/tenzir/tenzir/pull/2122" target="_blank" rel="noopener noreferrer">#2122</a></p></li><li><p>VAST&#x27;s internal data model now completely preserves the nesting of the stored data when using the <code>arrow</code> encoding, and maps the pattern, address, subnet, and enumeration types onto Arrow extension types rather than using the underlying representation directly. This change enables use of the <code>export arrow</code> command without needing information about VAST&#x27;s type system.
<a href="https://github.com/tenzir/tenzir/pull/2159" target="_blank" rel="noopener noreferrer">#2159</a></p></li><li><p>Transform steps that add or modify columns now transform the columns in-place rather than at the end, preserving the nesting structure of the original data.
<a href="https://github.com/tenzir/tenzir/pull/2159" target="_blank" rel="noopener noreferrer">#2159</a></p></li><li><p>The deprecated <code>msgpack</code> encoding no longer exists. Data imported using the <code>msgpack</code> encoding can still be accessed, but new data will always use the <code>arrow</code> encoding.
<a href="https://github.com/tenzir/tenzir/pull/2159" target="_blank" rel="noopener noreferrer">#2159</a></p></li><li><p>Client commands such as <code>vast export</code> or <code>vast status</code> now create less threads at runtime, reducing the risk of hitting system resource limits.
<a href="https://github.com/tenzir/tenzir/pull/2193" target="_blank" rel="noopener noreferrer">#2193</a></p></li><li><p>The <code>index</code> section in the status output no longer contains the <code>catalog</code> and <code>catalog-bytes</code> keys. The information is already present in the top-level <code>catalog</code> section.
<a href="https://github.com/tenzir/tenzir/pull/2233" target="_blank" rel="noopener noreferrer">#2233</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-61">Features<a href="#features-61" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>vast.index</code> section in the configuration supports adjusting the false-positive rate of first-stage lookups for individual fields, allowing users to optimize the time/space trade-off for expensive queries.
<a href="https://github.com/tenzir/tenzir/pull/2065" target="_blank" rel="noopener noreferrer">#2065</a></p></li><li><p>VAST now creates one active partition per layout, rather than having a single active partition for all layouts.
<a href="https://github.com/tenzir/tenzir/pull/2096" target="_blank" rel="noopener noreferrer">#2096</a></p></li><li><p>The new option <code>vast.active-partition-timeout</code> controls the time after which an active partition is flushed to disk. The timeout may hit before the partition size reaches <code>vast.max-partition-size</code>, allowing for an additional temporal control for data freshness. The active partition timeout defaults to 1 hour.
<a href="https://github.com/tenzir/tenzir/pull/2096" target="_blank" rel="noopener noreferrer">#2096</a></p></li><li><p>The output of <code>vast status</code> now displays the total number of events stored under the key <code>index.statistics.events.total</code>.
<a href="https://github.com/tenzir/tenzir/pull/2133" target="_blank" rel="noopener noreferrer">#2133</a></p></li><li><p>The disk monitor has new status entries <code>blacklist</code> and <code>blacklist   - size</code> containing information about partitions failed to be erased.
<a href="https://github.com/tenzir/tenzir/pull/2160" target="_blank" rel="noopener noreferrer">#2160</a></p></li><li><p>VAST has now complete support for passing environment variables as alternate path to configuration files. Environment variables have <em>lower</em> precedence than CLI arguments and <em>higher</em> precedence than config files. Variable names of the form <code>VAST_FOO__BAR_BAZ</code> map to <code>vast.foo.bar-baz</code>, i.e., <code>__</code> is a record separator and <code>_</code> translates to <code>-</code>. This does not apply to the prefix <code>VAST_</code>, which is considered the application identifier. Only variables with non-empty values are considered.
<a href="https://github.com/tenzir/tenzir/pull/2162" target="_blank" rel="noopener noreferrer">#2162</a></p></li><li><p>VAST v1.0 deprecated the experimental aging feature. Given popular demand we&#x27;ve decided to un-deprecate it, and to actually implement it on top of the same building blocks the compaction mechanism uses. This means that it is now fully working and no longer considered experimental.
<a href="https://github.com/tenzir/tenzir/pull/2186" target="_blank" rel="noopener noreferrer">#2186</a></p></li><li><p>The <code>replace</code> transform step now allows for setting values of complex types, e.g., lists or records.
<a href="https://github.com/tenzir/tenzir/pull/2228" target="_blank" rel="noopener noreferrer">#2228</a></p></li><li><p>The <code>lsvast</code> tool now prints the whole store contents when given a store file as an argument.
<a href="https://github.com/tenzir/tenzir/pull/2247" target="_blank" rel="noopener noreferrer">#2247</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-87">Bug Fixes<a href="#bug-fixes-87" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The <code>explore</code> command now properly terminates after the requested number of results are delivered.
<a href="https://github.com/tenzir/tenzir/pull/2120" target="_blank" rel="noopener noreferrer">#2120</a></p></li><li><p>The <code>count --estimate</code> erroneously materialized store files from disk, resulting in an unneeded performance penalty. VAST now answers approximate count queries by solely consulting the relevant index files.
<a href="https://github.com/tenzir/tenzir/pull/2146" target="_blank" rel="noopener noreferrer">#2146</a></p></li><li><p>The <code>import zeek</code> command now correctly marks the event timestamp using the <code>timestamp</code> type alias for all inferred schemas.
<a href="https://github.com/tenzir/tenzir/pull/2155" target="_blank" rel="noopener noreferrer">#2155</a></p></li><li><p>Some queries could get stuck when an importer would time out during the meta index lookup. This race condition no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/2167" target="_blank" rel="noopener noreferrer">#2167</a></p></li><li><p>We optimized the queue size of the logger for commands other than <code>vast start</code>. Client commands now show a significant reduction in memory usage and startup time.
<a href="https://github.com/tenzir/tenzir/pull/2176" target="_blank" rel="noopener noreferrer">#2176</a></p></li><li><p>The CSV parser no longer fails when encountering integers when floating point values were expected.
<a href="https://github.com/tenzir/tenzir/pull/2184" target="_blank" rel="noopener noreferrer">#2184</a></p></li><li><p>The <code>vast(1)</code> man-page is no longer empty for VAST distributions with static binaries.
<a href="https://github.com/tenzir/tenzir/pull/2190" target="_blank" rel="noopener noreferrer">#2190</a></p></li><li><p>VAST servers no longer accept queries after initiating shutdown. This fixes a potential infinite hang if new queries were coming in faster than VAST was able to process them.
<a href="https://github.com/tenzir/tenzir/pull/2215" target="_blank" rel="noopener noreferrer">#2215</a></p></li><li><p>VAST no longer sometimes crashes when aging or compaction erase whole partitions.
<a href="https://github.com/tenzir/tenzir/pull/2227" target="_blank" rel="noopener noreferrer">#2227</a></p></li><li><p>Environment variables for options that specify lists now consistently use comma-separators and respect escaping with backslashes.
<a href="https://github.com/tenzir/tenzir/pull/2236" target="_blank" rel="noopener noreferrer">#2236</a></p></li><li><p>The JSON import no longer rejects non-string selector fields. Instead, it always uses the textual JSON representation as a selector. E.g., the JSON object <code>{id:1,...}</code> imported via <code>vast import json --selector=id:mymodule</code> now matches the schema named <code>mymodule.1</code> rather than erroring because the <code>id</code> field is not a string.
<a href="https://github.com/tenzir/tenzir/pull/2255" target="_blank" rel="noopener noreferrer">#2255</a></p></li><li><p>Transform steps removing all nested fields from a record leaving only empty nested records no longer cause VAST to crash.
<a href="https://github.com/tenzir/tenzir/pull/2258" target="_blank" rel="noopener noreferrer">#2258</a></p></li><li><p>The query optimizer incorrectly transformed queries with conjunctions or disjunctions with several operands testing against the same string value, leading to missing result. This was rarely an issue in practice before the introduction of homogenous partitions with the v2.0 release.
<a href="https://github.com/tenzir/tenzir/pull/2264" target="_blank" rel="noopener noreferrer">#2264</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v112"><a href="https://github.com/tenzir/tenzir/releases/tag/v1.1.2" target="_blank" rel="noopener noreferrer">v1.1.2</a><a href="#v112" class="hash-link" aria-label="Direct link to v112" title="Direct link to v112">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-88">Bug Fixes<a href="#bug-fixes-88" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Terminating or timing out exports during the catalog lookup no longer causes query workers to become stuck indefinitely.
<a href="https://github.com/tenzir/tenzir/pull/2165" target="_blank" rel="noopener noreferrer">#2165</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v111"><a href="https://github.com/tenzir/tenzir/releases/tag/v1.1.1" target="_blank" rel="noopener noreferrer">v1.1.1</a><a href="#v111" class="hash-link" aria-label="Direct link to v111" title="Direct link to v111">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-89">Bug Fixes<a href="#bug-fixes-89" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The disk monitor now correctly continues deleting until below the low water mark after a partition failed to delete.
<a href="https://github.com/tenzir/tenzir/pull/2160" target="_blank" rel="noopener noreferrer">#2160</a></p></li><li><p>We fixed a rarely occurring race condition caused query workers to become stuck after delivering all results until the corresponding client process terminated.
<a href="https://github.com/tenzir/tenzir/pull/2160" target="_blank" rel="noopener noreferrer">#2160</a></p></li><li><p>Queries that timed out or were externally terminated while in the query backlog and with more than five unhandled candidate partitions no longer permanently get stuck.
<a href="https://github.com/tenzir/tenzir/pull/2160" target="_blank" rel="noopener noreferrer">#2160</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v110"><a href="https://github.com/tenzir/tenzir/releases/tag/v1.1.0" target="_blank" rel="noopener noreferrer">v1.1.0</a><a href="#v110" class="hash-link" aria-label="Direct link to v110" title="Direct link to v110">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-46">Changes<a href="#changes-46" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST no longer attempts to intepret query expressions as Sigma rules automatically. Instead, this functionality moved to a dedicated <code>sigma</code> query language plugin that must explicitly be enabled at build time.
<a href="https://github.com/tenzir/tenzir/pull/2074" target="_blank" rel="noopener noreferrer">#2074</a></p></li><li><p>The <code>msgpack</code> encoding option is now deprecated. VAST issues a warning on startup and automatically uses the <code>arrow</code> encoding instead. A future version of VAST will remove this option entirely.
<a href="https://github.com/tenzir/tenzir/pull/2087" target="_blank" rel="noopener noreferrer">#2087</a></p></li><li><p>The experimental aging feature is now deprecated. The <a href="https://vast.io/docs/about/use-cases/data-aging" target="_blank" rel="noopener noreferrer">compaction plugin</a> offers a superset of the aging functionality.
<a href="https://github.com/tenzir/tenzir/pull/2087" target="_blank" rel="noopener noreferrer">#2087</a></p></li><li><p>Actor names in log messages now have an <code>-ID</code> suffix to make it easier to tell multiple instances of the same actor apart, e.g., <code>exporter-42</code>.
<a href="https://github.com/tenzir/tenzir/pull/2119" target="_blank" rel="noopener noreferrer">#2119</a></p></li><li><p>We fixed an issue where partition transforms that erase complete partitions trigger an internal assertion failure.
<a href="https://github.com/tenzir/tenzir/pull/2123" target="_blank" rel="noopener noreferrer">#2123</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-62">Features<a href="#features-62" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The built-in <code>select</code> and <code>project</code> transform steps now correctly handle dropping all rows and columns respectively, effectively deleting the input data.
<a href="https://github.com/tenzir/tenzir/pull/2064" target="_blank" rel="noopener noreferrer">#2064</a>
<a href="https://github.com/tenzir/tenzir/pull/2082" target="_blank" rel="noopener noreferrer">#2082</a></p></li><li><p>VAST has a new <em>query language</em> plugin type that allows for adding additional query language frontends. The plugin performs one function: compile user input into a VAST expression. The new <code>sigma</code> plugin demonstrates usage of this plugin type.
<a href="https://github.com/tenzir/tenzir/pull/2074" target="_blank" rel="noopener noreferrer">#2074</a></p></li><li><p>The new built-in <code>rename</code> transform step allows for renaming event types during a transformation. This is useful when you want to ensure that a repeatedly triggered transformation does not affect already transformed events.
<a href="https://github.com/tenzir/tenzir/pull/2076" target="_blank" rel="noopener noreferrer">#2076</a></p></li><li><p>The new <code>aggregate</code> transform plugin allows for flexibly grouping and aggregating events. We recommend using it alongside the <a href="https://vast.io/docs/about/use-cases/data-aging" target="_blank" rel="noopener noreferrer"><code>compaction</code> plugin</a>, e.g., for rolling up events into a more space-efficient representation after a certain amount of time.
<a href="https://github.com/tenzir/tenzir/pull/2076" target="_blank" rel="noopener noreferrer">#2076</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-90">Bug Fixes<a href="#bug-fixes-90" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>A performance bug in the first stage of query evaluation caused VAST to return too many candidate partitions when querying for a field suffix. For example, a query for the <code>ts</code> field commonly used in Zeek logs also included partitions for <code>netflow.pkts</code> from <code>suricata.netflow</code> events. This bug no longer exists, resulting in a considerable speedup of affected queries.
<a href="https://github.com/tenzir/tenzir/pull/2086" target="_blank" rel="noopener noreferrer">#2086</a></p></li><li><p>VAST does not lose query capacity when backlogged queries are cancelled any more.
<a href="https://github.com/tenzir/tenzir/pull/2092" target="_blank" rel="noopener noreferrer">#2092</a></p></li><li><p>VAST now correctly adjusts the index statistics when applying partition transforms.
<a href="https://github.com/tenzir/tenzir/pull/2097" target="_blank" rel="noopener noreferrer">#2097</a></p></li><li><p>We fixed a bug that potentially resulted in the wrong subset of partitions to be considered during query evaluation.
<a href="https://github.com/tenzir/tenzir/pull/2103" target="_blank" rel="noopener noreferrer">#2103</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="v100"><a href="https://github.com/tenzir/tenzir/releases/tag/v1.0.0" target="_blank" rel="noopener noreferrer">v1.0.0</a><a href="#v100" class="hash-link" aria-label="Direct link to v100" title="Direct link to v100">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-47">Changes<a href="#changes-47" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>Building VAST now requires Arrow &gt;= 6.0.
<a href="https://github.com/tenzir/tenzir/pull/2033" target="_blank" rel="noopener noreferrer">#2033</a></p></li><li><p>VAST no longer uses calendar-based versioning. Instead, it uses a semantic versioning scheme. A new VERSIONING.md document installed alongside VAST explores the semantics in-depth.
<a href="https://github.com/tenzir/tenzir/pull/2035" target="_blank" rel="noopener noreferrer">#2035</a></p></li><li><p>Plugins now have a separate version. The build scaffolding installs README.md and CHANGELOG.md files in the plugin source tree root automatically.
<a href="https://github.com/tenzir/tenzir/pull/2035" target="_blank" rel="noopener noreferrer">#2035</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-63">Features<a href="#features-63" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>VAST has a new transform step: <code>project</code>, which keeps the fields with configured key suffixes and removes the rest from the input. At the same time, the <code>delete</code> transform step can remove not only one but multiple fields from the input based on the configured key suffixes.
<a href="https://github.com/tenzir/tenzir/pull/2000" target="_blank" rel="noopener noreferrer">#2000</a></p></li><li><p>The new <code>--omit-nulls</code> option to the <code>vast export json</code> command causes VAST to skip over fields in JSON objects whose value is <code>null</code> when rendering them.
<a href="https://github.com/tenzir/tenzir/pull/2004" target="_blank" rel="noopener noreferrer">#2004</a></p></li><li><p>VAST has a new transform step: <code>select</code>, which keeps rows matching the configured expression and removes the rest from the input.
<a href="https://github.com/tenzir/tenzir/pull/2014" target="_blank" rel="noopener noreferrer">#2014</a></p></li><li><p>The <code>#import_time</code> meta extractor allows for querying events based on the time they arrived at the VAST server process. It may only be used for comparisons with <a href="https://vast.io/docs/understand/query-language/expressions#values" target="_blank" rel="noopener noreferrer">time value literals</a>, e.g., <code>vast export json &#x27;#import_time &gt; 1 hour ago&#x27;</code> exports all events that were imported within the last hour as NDJSON.
<a href="https://github.com/tenzir/tenzir/pull/2019" target="_blank" rel="noopener noreferrer">#2019</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-91">Bug Fixes<a href="#bug-fixes-91" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The index now emits the metrics <code>query.backlog.{low,normal}</code> and <code>query.workers.{idle,busy}</code> reliably.
<a href="https://github.com/tenzir/tenzir/pull/2032" target="_blank" rel="noopener noreferrer">#2032</a></p></li><li><p>VAST no longer ignores the <code>--schema-dirs</code> option when using <code>--bare-mode</code>.
<a href="https://github.com/tenzir/tenzir/pull/2046" target="_blank" rel="noopener noreferrer">#2046</a></p></li><li><p>Starting VAST no longer fails if creating the database directory requires creating intermediate directories.
<a href="https://github.com/tenzir/tenzir/pull/2046" target="_blank" rel="noopener noreferrer">#2046</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20211216"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.12.16" target="_blank" rel="noopener noreferrer">2021.12.16</a><a href="#20211216" class="hash-link" aria-label="Direct link to 20211216" title="Direct link to 20211216">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-48">Changes<a href="#changes-48" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>VAST&#x27;s internal type system has a new on-disk data representation. While we still support reading older databases, reverting to an older version of VAST will not be possible after this change. Alongside this change, we&#x27;ve implemented numerous fixes and streamlined handling of field name lookups, which now more consistently handles the dot-separator. E.g., the query <code>#field == &quot;ip&quot;</code> still matches the field <code>source.ip</code>, but no longer the field <code>source_ip</code>. The change is also performance-relevant in the long-term: For data persisted from previous versions of VAST we convert to the new type system on the fly, and for newly ingested data we now have near zero-cost deserialization for types, which should result in an overall speedup once the old data is rotated out by the disk monitor.
<a href="https://github.com/tenzir/tenzir/pull/1888" target="_blank" rel="noopener noreferrer">#1888</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-64">Features<a href="#features-64" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>All metrics events now contain the version of VAST. Additionally, VAST now emits startup and shutdown metrics at the start and stop of the VAST server.
<a href="https://github.com/tenzir/tenzir/pull/1973" target="_blank" rel="noopener noreferrer">#1973</a></p></li><li><p>JSON field selectors are now configurable instead of being hard-coded for Suricata Eve JSON and Zeek Streaming JSON. E.g., <code>vast import json --selector=event_type:suricata</code> is now equivalent to <code>vast import suricata</code>. This allows for easier integration of JSONL data containing a field that indicates its type.
<a href="https://github.com/tenzir/tenzir/pull/1974" target="_blank" rel="noopener noreferrer">#1974</a></p></li><li><p>Metrics events now optionally contain a metadata field that is a key-value mapping of string to string, allowing for finer-grained introspection. For now this enables correlation of metrics events and individual queries. A set of new metrics for query lookup use this feature to include the query ID.
<a href="https://github.com/tenzir/tenzir/pull/1987" target="_blank" rel="noopener noreferrer">#1987</a>
<a href="https://github.com/tenzir/tenzir/pull/1992" target="_blank" rel="noopener noreferrer">#1992</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-92">Bug Fixes<a href="#bug-fixes-92" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The field-based default selector of the JSON import now correctly matches types with nested record types.
<a href="https://github.com/tenzir/tenzir/pull/1988" target="_blank" rel="noopener noreferrer">#1988</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20211118"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.11.18" target="_blank" rel="noopener noreferrer">2021.11.18</a><a href="#20211118" class="hash-link" aria-label="Direct link to 20211118" title="Direct link to 20211118">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-49">Changes<a href="#changes-49" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>max-queries</code> configuration option now works at a coarser granularity. It used to limit the number of queries that could simultaneously retrieve data, but it now sets the number of queries that can be processed at the same time.
<a href="https://github.com/tenzir/tenzir/pull/1896" target="_blank" rel="noopener noreferrer">#1896</a></p></li><li><p>VAST no longer vendors <a href="https://github.com/Cyan4973/xxHash" target="_blank" rel="noopener noreferrer">xxHash</a>, which is now a regular required dependency. Internally, VAST switched its default hash function to XXH3, providing a speedup of up to 3x.
<a href="https://github.com/tenzir/tenzir/pull/1905" target="_blank" rel="noopener noreferrer">#1905</a></p></li><li><p>Building VAST from source now requires CMake 3.18+.
<a href="https://github.com/tenzir/tenzir/pull/1914" target="_blank" rel="noopener noreferrer">#1914</a></p></li><li><p>A recently added features allows for exporting everything when no query is provided. We&#x27;ve restricted this to prefer reading a query from stdin if available. Additionally, conflicting ways to read the query now trigger errors.
<a href="https://github.com/tenzir/tenzir/pull/1917" target="_blank" rel="noopener noreferrer">#1917</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-65">Features<a href="#features-65" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>A new &#x27;apply&#x27; handler in the index gives plugin authors the ability to apply transforms over entire partitions. Previously, transforms were limited to streams of table slice during import or export.
<a href="https://github.com/tenzir/tenzir/pull/1887" target="_blank" rel="noopener noreferrer">#1887</a></p></li><li><p>The export command now has a <code>--low-priority</code> option to reduce the priority of the request while query backlogs are being worked down.
<a href="https://github.com/tenzir/tenzir/pull/1929" target="_blank" rel="noopener noreferrer">#1929</a>
<a href="https://github.com/tenzir/tenzir/pull/1947" target="_blank" rel="noopener noreferrer">#1947</a></p></li><li><p>The keys <code>query.backlog.normal</code> and <code>query.backlog.low</code> have been added to the metrics output. The values indicate the number of quries that are currently in the backlog.
<a href="https://github.com/tenzir/tenzir/pull/1942" target="_blank" rel="noopener noreferrer">#1942</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-93">Bug Fixes<a href="#bug-fixes-93" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The timeout duration to delete partitions has been increased to one minute, reducing the frequency of warnings for hitting this timeout significantly.
<a href="https://github.com/tenzir/tenzir/pull/1897" target="_blank" rel="noopener noreferrer">#1897</a></p></li><li><p>When reading IPv6 addresses from PCAP data, only the first 4 bytes have been considered. VAST now stores all 16 bytes.
<a href="https://github.com/tenzir/tenzir/pull/1905" target="_blank" rel="noopener noreferrer">#1905</a></p></li><li><p>Store files now get deleted correctly if the database directory differs from the working directory.
<a href="https://github.com/tenzir/tenzir/pull/1912" target="_blank" rel="noopener noreferrer">#1912</a></p></li><li><p>Debug builds of VAST no longer segfault on a status request with the <code>--debug</code> option.
<a href="https://github.com/tenzir/tenzir/pull/1915" target="_blank" rel="noopener noreferrer">#1915</a></p></li><li><p>The <code>suricata.dns</code> schema has been updated to match the currently used EVE-JSON structure output by recent Suricata versions.
<a href="https://github.com/tenzir/tenzir/pull/1919" target="_blank" rel="noopener noreferrer">#1919</a></p></li><li><p>VAST no longer tries to create indexes for fields of type <code>list&lt;record{...}&gt;</code> as that wasn&#x27;t supported in the first place.
<a href="https://github.com/tenzir/tenzir/pull/1933" target="_blank" rel="noopener noreferrer">#1933</a></p></li><li><p>Static plugins are no longer always loaded, but rather need to be explicitly enabled as documented. To restore the behavior from before this bug fix, set <code>vast.plugins: [bundled]</code> in your configuration file.
<a href="https://github.com/tenzir/tenzir/pull/1959" target="_blank" rel="noopener noreferrer">#1959</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210930"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.09.30" target="_blank" rel="noopener noreferrer">2021.09.30</a><a href="#20210930" class="hash-link" aria-label="Direct link to 20210930" title="Direct link to 20210930">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-50">Changes<a href="#changes-50" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The default store backend now is <code>segment-store</code> in order to enable the use of partition transforms in the future. To continue using the (now deprecated) legacy store backend, set <code>vast.store-backend</code> to archive.
<a href="https://github.com/tenzir/tenzir/pull/1876" target="_blank" rel="noopener noreferrer">#1876</a></p></li><li><p>Example configuration files are now installed to the datarootdir as opposed to the sysconfdir in order to avoid overriding previously installed configuration files.
<a href="https://github.com/tenzir/tenzir/pull/1880" target="_blank" rel="noopener noreferrer">#1880</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-66">Features<a href="#features-66" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>If present in the plugin source directory, the build scaffolding now automatically installs <code>&lt;plugin&gt;.yaml.example</code> files, commenting out every line so the file has no effect. This serves as documentation for operators that can modify the installed file in-place.
<a href="https://github.com/tenzir/tenzir/pull/1860" target="_blank" rel="noopener noreferrer">#1860</a></p></li><li><p>The <code>broker</code> plugin is now a also <em>writer</em> plugin on top of being already a <em>reader</em> plugin. The new plugin enables exporting query results directly into a a Zeek process, e.g., to write Zeek scripts that incorporate context from the past. Run <code>vast export broker &lt;expr&gt;</code> to ship events via Broker that Zeek dispatches under the event <code>VAST::data(layout: string, data: any)</code>.
<a href="https://github.com/tenzir/tenzir/pull/1863" target="_blank" rel="noopener noreferrer">#1863</a></p></li><li><p>The new tool <code>mdx-regenerate</code> allows operators to re-create all <code>.mdx</code> files in a database directory to the latest file format version while VAST is running. This is useful for advanced users in preparation for version upgrades that bump the format version.
<a href="https://github.com/tenzir/tenzir/pull/1866" target="_blank" rel="noopener noreferrer">#1866</a></p></li><li><p>Running <code>vat status --detailed</code> now lists all loaded configuration files under <code>system.config-files</code>.
<a href="https://github.com/tenzir/tenzir/pull/1871" target="_blank" rel="noopener noreferrer">#1871</a></p></li><li><p>The query argument to the export and count commands may now be omitted, which causes the commands to operate on all data. Note that this may be a very expensive operation, so use with caution.
<a href="https://github.com/tenzir/tenzir/pull/1879" target="_blank" rel="noopener noreferrer">#1879</a></p></li><li><p>The output of <code>vast status --detailed</code> now contains information about queries   that are currently processed in the index.
<a href="https://github.com/tenzir/tenzir/pull/1881" target="_blank" rel="noopener noreferrer">#1881</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-94">Bug Fixes<a href="#bug-fixes-94" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The status command no longer occasionally contains garbage keys when the VAST server is under high load.
<a href="https://github.com/tenzir/tenzir/pull/1872" target="_blank" rel="noopener noreferrer">#1872</a></p></li><li><p>Remote sources and sinks are no longer erroneously included in the output of VAST status.
<a href="https://github.com/tenzir/tenzir/pull/1873" target="_blank" rel="noopener noreferrer">#1873</a></p></li><li><p>The index now correctly cancels pending queries when the requester dies.
<a href="https://github.com/tenzir/tenzir/pull/1884" target="_blank" rel="noopener noreferrer">#1884</a></p></li><li><p>Import filter expressions now work correctly with queries using field extractors, e.g., <code>vast import suricata &#x27;event_type == &quot;alert&quot;&#x27; &lt; path/to/eve.json</code>.
<a href="https://github.com/tenzir/tenzir/pull/1885" target="_blank" rel="noopener noreferrer">#1885</a></p></li><li><p>Expression predicates of the <code>#field</code> type now produce error messages instead of empty result sets for operations that are not supported.
<a href="https://github.com/tenzir/tenzir/pull/1886" target="_blank" rel="noopener noreferrer">#1886</a></p></li><li><p>The disk monitor no longer fails to delete segments of particularly busy partitions with the <code>segment-store</code> store backend.
<a href="https://github.com/tenzir/tenzir/pull/1892" target="_blank" rel="noopener noreferrer">#1892</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210826"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.08.26" target="_blank" rel="noopener noreferrer">2021.08.26</a><a href="#20210826" class="hash-link" aria-label="Direct link to 20210826" title="Direct link to 20210826">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-51">Changes<a href="#changes-51" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST no longer strips link-layer framing when ingesting PCAPs. The stored payload is the raw PCAP packet. Similarly, <code>vast export pcap</code> now includes a Ethernet link-layer framing, per libpcap&#x27;s <code>DLT_EN10MB</code> link type.
<a href="https://github.com/tenzir/tenzir/pull/1797" target="_blank" rel="noopener noreferrer">#1797</a></p></li><li><p>Strings in error or warning log messages are no longer escaped, greatly improving readability of messages containing nested error contexts.
<a href="https://github.com/tenzir/tenzir/pull/1842" target="_blank" rel="noopener noreferrer">#1842</a></p></li><li><p>VAST now supports building against {fmt} 8 and spdlog 1.9.2, and now requires at least {fmt} 7.1.3.
<a href="https://github.com/tenzir/tenzir/pull/1846" target="_blank" rel="noopener noreferrer">#1846</a></p></li><li><p>VAST now ships with an updated schema type for the <code>suricata.dhcp</code> event, covering all fields of the extended output.
<a href="https://github.com/tenzir/tenzir/pull/1854" target="_blank" rel="noopener noreferrer">#1854</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-67">Features<a href="#features-67" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The <code>segment-store</code> store backend works correctly with <code>vast get</code> and <code>vast explore</code>.
<a href="https://github.com/tenzir/tenzir/pull/1805" target="_blank" rel="noopener noreferrer">#1805</a></p></li><li><p>VAST can now process Eve JSON events of type <code>suricata.packet</code> that Suricata emits when the config option <code>tagged-packets</code> is set and a rule tags a packet using, e.g., <code>tag:session,5,packets;</code>.
<a href="https://github.com/tenzir/tenzir/pull/1819" target="_blank" rel="noopener noreferrer">#1819</a>
<a href="https://github.com/tenzir/tenzir/pull/1833" target="_blank" rel="noopener noreferrer">#1833</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-95">Bug Fixes<a href="#bug-fixes-95" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Previously missing fields of suricata event types are now part of the concept definitions of <code>net.src.ip</code>, <code>net.src.port</code>, <code>net.dst.ip</code>, <code>net.dst.port</code>, <code>net.app</code>, <code>net.proto</code>, <code>net.community_id</code>, <code>net.vlan</code>, and <code>net.packets</code>.
<a href="https://github.com/tenzir/tenzir/pull/1798" target="_blank" rel="noopener noreferrer">#1798</a></p></li><li><p>Invalid segment files will no longer crash VAST at startup.
<a href="https://github.com/tenzir/tenzir/pull/1820" target="_blank" rel="noopener noreferrer">#1820</a></p></li><li><p>Plugins in the prebuilt Docker images no longer show <code>unspecified</code> as their version.
<a href="https://github.com/tenzir/tenzir/pull/1828" target="_blank" rel="noopener noreferrer">#1828</a></p></li><li><p>The configuration options <code>vast.metrics.{file,uds}-sink.path</code> now correctly specify paths relative to the database directory of VAST, rather than the current working directory of the VAST server.
<a href="https://github.com/tenzir/tenzir/pull/1848" target="_blank" rel="noopener noreferrer">#1848</a></p></li><li><p>The <code>segment-store</code> store backend and built-in transform steps (<code>hash</code>, <code>replace</code>, and <code>delete</code>) now function correctly in static VAST binaries.
<a href="https://github.com/tenzir/tenzir/pull/1850" target="_blank" rel="noopener noreferrer">#1850</a></p></li><li><p>The output of VAST status now includes status information for sources and sinks spawned in the VAST node, i.e., via <code>vast spawn source|sink &lt;format&gt;</code> rather than <code>vast import|export &lt;format&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/1852" target="_blank" rel="noopener noreferrer">#1852</a></p></li><li><p>In order to align with the <a href="https://www.gnu.org/prep/standards/html_node/Directory-Variables.html" target="_blank" rel="noopener noreferrer">GNU Coding Standards</a>, the static binary (and other relocatable binaries) now uses <code>/etc</code> as sysconfdir for installations to <code>/usr/bin/vast</code>.
<a href="https://github.com/tenzir/tenzir/pull/1856" target="_blank" rel="noopener noreferrer">#1856</a></p></li><li><p>VAST now only switches to journald style logging by default when it is actually supported.
<a href="https://github.com/tenzir/tenzir/pull/1857" target="_blank" rel="noopener noreferrer">#1857</a></p></li><li><p>The CSV parser now correctly parses quoted fields in non-string types. E.g., <code>&quot;127.0.0.1&quot;</code> in CSV now successfully parsers when a matching schema contains an <code>address</code> type field.
<a href="https://github.com/tenzir/tenzir/pull/1858" target="_blank" rel="noopener noreferrer">#1858</a></p></li><li><p>The memory counts in the output of <code>vast status</code> now represent bytes consistently, as opposed to a mix of bytes and kilobytes.
<a href="https://github.com/tenzir/tenzir/pull/1862" target="_blank" rel="noopener noreferrer">#1862</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210729"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.07.29" target="_blank" rel="noopener noreferrer">2021.07.29</a><a href="#20210729" class="hash-link" aria-label="Direct link to 20210729" title="Direct link to 20210729">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-52">Changes<a href="#changes-52" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST no longer officially supports Debian Buster with GCC-8. In CI, VAST now runs on Debian Bullseye with GCC-10. The provided Docker images now use <code>debian:bullseye-slim</code> as base image. Users that require Debian Buster support should use the provided static builds instead.
<a href="https://github.com/tenzir/tenzir/pull/1765" target="_blank" rel="noopener noreferrer">#1765</a></p></li><li><p>From now on VAST is compiled with the C++20 language standard. Minimum compiler versions have increased to GCC 10, Clang 11, and AppleClang 12.0.5.
<a href="https://github.com/tenzir/tenzir/pull/1768" target="_blank" rel="noopener noreferrer">#1768</a></p></li><li><p>The <code>vast</code> binaries in our <a href="http://hub.docker.com/r/tenzir/vast" target="_blank" rel="noopener noreferrer">prebuilt Docker images</a> no longer contain AVX instructions for increased portability. Building the image locally continues to add supported auto-vectorization flags automatically.
<a href="https://github.com/tenzir/tenzir/pull/1778" target="_blank" rel="noopener noreferrer">#1778</a></p></li><li><p>The following new build options exist: <code>VAST_ENABLE_AUTO_VECTORIZATION</code> enables/disables all auto-vectorization flags, and <code>VAST_ENABLE_SSE_INSTRUCTIONS</code> enables <code>-msse</code>; similar options exist for SSE2, SSE3, SSSE3, SSE4.1, SSE4.2, AVX, and AVX2.
<a href="https://github.com/tenzir/tenzir/pull/1778" target="_blank" rel="noopener noreferrer">#1778</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-68">Features<a href="#features-68" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>VAST has new a <code>store_plugin</code> type for custom store backends that hold the raw data of a partition. The new setting <code>vast.store-backend</code> controls the selection of the store implementation, which has a default value is <code>segment-store</code>. This is still an opt-in feature: unless the configuration value is set, VAST defaults to the old implementation.
<a href="https://github.com/tenzir/tenzir/pull/1720" target="_blank" rel="noopener noreferrer">#1720</a>
<a href="https://github.com/tenzir/tenzir/pull/1762" target="_blank" rel="noopener noreferrer">#1762</a>
<a href="https://github.com/tenzir/tenzir/pull/1802" target="_blank" rel="noopener noreferrer">#1802</a></p></li><li><p>VAST now supports import filter expressions. They act as the dual to export query expressions: <code>vast import suricata &#x27;#type == &quot;suricata.alert&quot;&#x27; &lt; eve.json</code> will import only <code>suricata.alert</code> events, discarding all other events.
<a href="https://github.com/tenzir/tenzir/pull/1742" target="_blank" rel="noopener noreferrer">#1742</a></p></li><li><p>VAST now comes with a <a href="https://hub.docker.com/r/tenzir/vast-dev" target="_blank" rel="noopener noreferrer"><code>tenzir/vast-dev</code></a> Docker image in addition to the regular <a href="https://hub.docker.com/r/tenzir/vast" target="_blank" rel="noopener noreferrer"><code>tenzir/vast</code></a>. The <code>vast-dev</code> image targets development contexts, e.g., when building additional plugins. The image contains all build-time dependencies of VAST and runs as <code>root</code> rather than the <code>vast</code> user.
<a href="https://github.com/tenzir/tenzir/pull/1749" target="_blank" rel="noopener noreferrer">#1749</a></p></li><li><p><code>lsvast</code> now prints extended information for hash indexes.
<a href="https://github.com/tenzir/tenzir/pull/1755" target="_blank" rel="noopener noreferrer">#1755</a></p></li><li><p>The new <a href="https://github.com/zeek/broker" target="_blank" rel="noopener noreferrer">Broker</a> plugin enables seamless log ingestion from <a href="https://github.com/zeek/zeek" target="_blank" rel="noopener noreferrer">Zeek</a> to VAST via a TCP socket. Broker is Zeek&#x27;s messaging library and the plugin turns VAST into a Zeek <a href="https://docs.zeek.org/en/master/frameworks/cluster.html#logger" target="_blank" rel="noopener noreferrer">logger node</a>. Use <code>vast import broker</code> to establish a connection to a Zeek node and acquire logs.
<a href="https://github.com/tenzir/tenzir/pull/1758" target="_blank" rel="noopener noreferrer">#1758</a></p></li><li><p>Plugin versions are now unique to facilitate debugging. They consist of three optional parts: (1) the CMake project version of the plugin, (2) the Git revision of the last commit that touched the plugin, and (3) a <code>dirty</code> suffix for uncommited changes to the plugin. Plugin developers no longer need to specify the version manually in the plugin entrypoint.
<a href="https://github.com/tenzir/tenzir/pull/1764" target="_blank" rel="noopener noreferrer">#1764</a></p></li><li><p>VAST now supports the <em>arm64</em> architecture.
<a href="https://github.com/tenzir/tenzir/pull/1773" target="_blank" rel="noopener noreferrer">#1773</a></p></li><li><p>Installing VAST now includes a <code>vast.yaml.example</code> configuration file listing all available options.
<a href="https://github.com/tenzir/tenzir/pull/1777" target="_blank" rel="noopener noreferrer">#1777</a></p></li><li><p>VAST now exports per-layout import metrics under the key <code>&lt;reader&gt;.events.&lt;layout-name&gt;</code> in addition to the regular <code>&lt;reader&gt;.events</code>. This makes it easier to understand the event type distribution.
<a href="https://github.com/tenzir/tenzir/pull/1781" target="_blank" rel="noopener noreferrer">#1781</a></p></li><li><p>The static binary now bundles the Broker plugin.
<a href="https://github.com/tenzir/tenzir/pull/1789" target="_blank" rel="noopener noreferrer">#1789</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-96">Bug Fixes<a href="#bug-fixes-96" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Configuring VAST to use CAF&#x27;s built-in OpenSSL module via the <code>caf.openssl.*</code> options now works again as expected.
<a href="https://github.com/tenzir/tenzir/pull/1740" target="_blank" rel="noopener noreferrer">#1740</a></p></li><li><p>The the <code>status</code> command now prints information about input and output transformations.
<a href="https://github.com/tenzir/tenzir/pull/1748" target="_blank" rel="noopener noreferrer">#1748</a></p></li><li><p>A <code>[*** LOG ERROR #0001 ***]</code> error message on startup under Linux no longer occurs.
<a href="https://github.com/tenzir/tenzir/pull/1754" target="_blank" rel="noopener noreferrer">#1754</a></p></li><li><p>Queries against fields using a <code>#index=hash</code> attribute could have missed some results. Fixing a bug in the offset calculation during bitmap processing resolved the issue.
<a href="https://github.com/tenzir/tenzir/pull/1755" target="_blank" rel="noopener noreferrer">#1755</a></p></li><li><p>A regression caused VAST&#x27;s plugins to be loaded in random order, which printed a warning about mismatching plugins between client and server. The order is now deterministic.
<a href="https://github.com/tenzir/tenzir/pull/1756" target="_blank" rel="noopener noreferrer">#1756</a></p></li><li><p>VAST does not abort JSON imports anymore when encountering something other than a JSON object, e.g., a number or a string. Instead, VAST skips the offending line.
<a href="https://github.com/tenzir/tenzir/pull/1759" target="_blank" rel="noopener noreferrer">#1759</a></p></li><li><p>Import processes now respond quicker. Shutdown requests are no longer delayed when the server process has busy imports, and metrics reports are now written in a timely manner.
<a href="https://github.com/tenzir/tenzir/pull/1771" target="_blank" rel="noopener noreferrer">#1771</a></p></li><li><p>Particularly busy imports caused the shutdown of the server process to hang, if import processes were still running or had not yet flushed all data. The server now shuts down correctly in these cases.
<a href="https://github.com/tenzir/tenzir/pull/1771" target="_blank" rel="noopener noreferrer">#1771</a></p></li><li><p>The static binary no longer behaves differently than the regular build with regards to its configuration directories: system-wide configuration files now reside in <code>&lt;prefix&gt;/etc/vast/vast.yaml</code> rather than <code>/etc/vast/vast.yaml</code>.
<a href="https://github.com/tenzir/tenzir/pull/1777" target="_blank" rel="noopener noreferrer">#1777</a></p></li><li><p>The <code>VAST_ENABLE_JOURNALD_LOGGING</code> CMake option is no longer ignored.
<a href="https://github.com/tenzir/tenzir/pull/1780" target="_blank" rel="noopener noreferrer">#1780</a></p></li><li><p>Plugins built against an external libvast no longer require the <code>CMAKE_INSTALL_LIBDIR</code> to be specified as a path relative to the configured <code>CMAKE_INSTALL_PREFIX</code>. This fixes an issue with plugins in separate packages for some package managers, e.g., Nix.
<a href="https://github.com/tenzir/tenzir/pull/1786" target="_blank" rel="noopener noreferrer">#1786</a></p></li><li><p>The official Docker image and static binary distribution of VAST now produce the correct version output for plugins from the <code>vast version</code> command.
<a href="https://github.com/tenzir/tenzir/pull/1799" target="_blank" rel="noopener noreferrer">#1799</a></p></li><li><p>The disk budget feature no longer triggers a rare segfault while deleting partitions.
<a href="https://github.com/tenzir/tenzir/pull/1804" target="_blank" rel="noopener noreferrer">#1804</a>
<a href="https://github.com/tenzir/tenzir/pull/1809" target="_blank" rel="noopener noreferrer">#1809</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210624"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.06.24" target="_blank" rel="noopener noreferrer">2021.06.24</a><a href="#20210624" class="hash-link" aria-label="Direct link to 20210624" title="Direct link to 20210624">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-3">Breaking Changes<a href="#breaking-changes-3" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>Apache Arrow is now a required dependency. The previously deprecated build  option <code>-DVAST_ENABLE_ARROW=OFF</code> no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/1683" target="_blank" rel="noopener noreferrer">#1683</a></p></li><li><p>VAST no longer loads static plugins by default. Generally, VAST now treats static plugins and bundled dynamic plugins equally, allowing users to enable or disable static plugins as needed for their deployments.
<a href="https://github.com/tenzir/tenzir/pull/1703" target="_blank" rel="noopener noreferrer">#1703</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-53">Changes<a href="#changes-53" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The VAST community chat moved from Gitter to Slack. <a href="http://slack.tenzir.com" target="_blank" rel="noopener noreferrer">Join us</a> in the <code>#vast</code> channel for vibrant discussions.
<a href="https://github.com/tenzir/tenzir/pull/1696" target="_blank" rel="noopener noreferrer">#1696</a></p></li><li><p>The <a href="https://hub.docker.com/r/tenzir/vast" target="_blank" rel="noopener noreferrer">tenzir/vast</a> Docker image bundles the PCAP plugin.
<a href="https://github.com/tenzir/tenzir/pull/1705" target="_blank" rel="noopener noreferrer">#1705</a></p></li><li><p>VAST merges lists from configuration files. E.g., running VAST with <code>--plugins=some-plugin</code> and <code>vast.plugins: [other-plugin]</code> in the configuration now results in both <code>some-plugin</code> and <code>other-plugin</code> being loaded (sorted by the usual precedence), instead of just <code>some-plugin</code>.
<a href="https://github.com/tenzir/tenzir/pull/1721" target="_blank" rel="noopener noreferrer">#1721</a>
<a href="https://github.com/tenzir/tenzir/pull/1734" target="_blank" rel="noopener noreferrer">#1734</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-69">Features<a href="#features-69" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new option <code>vast.start.commands</code> allows for specifying an ordered list of VAST commands that run after successful startup. The effect is the same as first starting a node, and then using another VAST client to issue commands.  This is useful for commands that have side effects that cannot be expressed through the config file, e.g., starting a source inside the VAST server that listens on a socket or reads packets from a network interface.
<a href="https://github.com/tenzir/tenzir/pull/1699" target="_blank" rel="noopener noreferrer">#1699</a></p></li><li><p>The options <code>vast.plugins</code> and <code>vast.plugin-dirs</code> may now be specified on the command line as well as the configuration. Use the options <code>--plugins</code> and <code>--plugin-dirs</code> respectively.
<a href="https://github.com/tenzir/tenzir/pull/1703" target="_blank" rel="noopener noreferrer">#1703</a></p></li><li><p>Add the reserved plugin name <code>bundled</code> to <code>vast.plugins</code> to enable load all bundled plugins, i.e., static or dynamic plugins built alongside VAST, or use <code>--plugins=bundled</code> on the command line. The reserved plugin name <code>all</code> causes all bundled and external plugins to be loaded, i.e., all shared libraries matching <code>libvast-plugin-*</code> from the configured <code>vast.plugin-dirs</code>.
<a href="https://github.com/tenzir/tenzir/pull/1703" target="_blank" rel="noopener noreferrer">#1703</a></p></li><li><p>It&#x27;s now possible to configure the VAST endpoint as an environment variable by setting <code>VAST_ENDPOINT</code>. This has higher precedence than setting <code>vast.endpoint</code> in configuration files, but lower precedence than passing <code>--endpoint=</code> on the command-line.
<a href="https://github.com/tenzir/tenzir/pull/1714" target="_blank" rel="noopener noreferrer">#1714</a></p></li><li><p>Plugins load their respective configuration from <code>&lt;configdir&gt;/vast/plugin/&lt;plugin-name&gt;.yaml</code> in addition to the regular configuration file at <code>&lt;configdir&gt;/vast/vast.yaml</code>. The new plugin-specific file does not require putting configuration under the key <code>plugins.&lt;plugin-name&gt;</code>. This allows for deploying plugins without needing to touch the <code>&lt;configdir&gt;/vast/vast.yaml</code> configuration file.
<a href="https://github.com/tenzir/tenzir/pull/1724" target="_blank" rel="noopener noreferrer">#1724</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-97">Bug Fixes<a href="#bug-fixes-97" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST no longer crashes when querying for string fields with non-string values. Instead, an error message warns the user about an invalid query.
<a href="https://github.com/tenzir/tenzir/pull/1685" target="_blank" rel="noopener noreferrer">#1685</a></p></li><li><p>Building plugins against an installed VAST no longer requires manually specifying <code>-DBUILD_SHARED_LIBS=ON</code>. The option is now correctly enabled by default for external plugins.
<a href="https://github.com/tenzir/tenzir/pull/1697" target="_blank" rel="noopener noreferrer">#1697</a></p></li><li><p>The UDS metrics sink continues to send data when the receiving socket is recreated.
<a href="https://github.com/tenzir/tenzir/pull/1702" target="_blank" rel="noopener noreferrer">#1702</a></p></li><li><p>The <code>vast.log-rotation-threshold</code> option was silently ignored, causing VAST to always use the default log rotation threshold of 10 MiB. The option works as expected now.
<a href="https://github.com/tenzir/tenzir/pull/1709" target="_blank" rel="noopener noreferrer">#1709</a></p></li><li><p>Additional tags for the <a href="https://hub.docker.com/r/tenzir/vast" target="_blank" rel="noopener noreferrer">tenzir/vast</a> Docker image for the release versions exist, e.g., <code>tenzir/vast:2021.05.27</code>.
<a href="https://github.com/tenzir/tenzir/pull/1711" target="_blank" rel="noopener noreferrer">#1711</a></p></li><li><p>The <code>import csv</code> command handles quoted fields correctly. Previously, the quotes were part of the parsed value, and field separators in quoted strings caused the parser to fail.
<a href="https://github.com/tenzir/tenzir/pull/1712" target="_blank" rel="noopener noreferrer">#1712</a></p></li><li><p>Import processes no longer hang on receiving SIGINT or SIGKILL. Instead, they shut down properly after flushing yet to be processed data.
<a href="https://github.com/tenzir/tenzir/pull/1718" target="_blank" rel="noopener noreferrer">#1718</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210527"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.05.27" target="_blank" rel="noopener noreferrer">2021.05.27</a><a href="#20210527" class="hash-link" aria-label="Direct link to 20210527" title="Direct link to 20210527">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-4">Breaking Changes<a href="#breaking-changes-4" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>Schemas are no longer implicitly shared between sources, i.e., an <code>import</code> process importing data with a custom schema will no longer affect other sources started at a later point in time. Schemas known to the VAST server process are still available to all <code>import</code> processes. We do not expect this change to have a real-world impact, but it could break setups where some sources have been installed on hosts without their own schema files, the VAST server did not have up-to-date schema files, and other sources were (ab)used to provide the latest type information.
<a href="https://github.com/tenzir/tenzir/pull/1656" target="_blank" rel="noopener noreferrer">#1656</a></p></li><li><p>The <code>configure</code> script was removed. This was a custom script that mimicked the functionality of an autotools-based <code>configure</code> script by writing directly to the cmake cache. Instead, users now must use the <code>cmake</code> and/or <code>ccmake</code> binaries directly to configure VAST.
<a href="https://github.com/tenzir/tenzir/pull/1657" target="_blank" rel="noopener noreferrer">#1657</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-54">Changes<a href="#changes-54" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li>Building VAST without Apache Arrow via <code>-DVAST_ENABLE_ARROW=OFF</code> is now deprecated, and support for the option will be removed in a future release. As the Arrow ecosystem and libraries matured, we feel confident in making it a required dependency and plan to build upon it more in the future.
<a href="https://github.com/tenzir/tenzir/pull/1682" target="_blank" rel="noopener noreferrer">#1682</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-70">Features<a href="#features-70" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <em>transforms</em> feature allows VAST to apply transformations to incoming and outgoing data. A transform consists of a sequence of steps that execute sequentially, e.g., to remove, overwrite, hash, encrypt data. A new plugin type makes it easy to write custom transforms.
<a href="https://github.com/tenzir/tenzir/pull/1517" target="_blank" rel="noopener noreferrer">#1517</a>
<a href="https://github.com/tenzir/tenzir/pull/1656" target="_blank" rel="noopener noreferrer">#1656</a></p></li><li><p>Plugin schemas are now installed to <code>&lt;datadir&gt;/vast/plugin/&lt;plugin&gt;/schema</code>, while VAST&#x27;s built-in schemas reside in <code>&lt;datadir&gt;/vast/schema</code>. The load order guarantees that plugins are able to reliably override the schemas bundled with VAST.
<a href="https://github.com/tenzir/tenzir/pull/1608" target="_blank" rel="noopener noreferrer">#1608</a></p></li><li><p>The new option <code>vast export --timeout=&lt;duration&gt;</code> allows for setting a timeout for VAST queries. Cancelled exports result in a non-zero exit code.
<a href="https://github.com/tenzir/tenzir/pull/1611" target="_blank" rel="noopener noreferrer">#1611</a></p></li><li><p>To enable easier post-processing, the new option <code>vast.export.json.numeric-durations</code> switches JSON output of <code>duration</code> types from human-readable strings (e.g., <code>&quot;4.2m&quot;</code>) to numeric (e.g., <code>252.15</code>) in fractional seconds.
<a href="https://github.com/tenzir/tenzir/pull/1628" target="_blank" rel="noopener noreferrer">#1628</a></p></li><li><p>The <code>status</code> command now prints the VAST server version information under the <code>version</code> key.
<a href="https://github.com/tenzir/tenzir/pull/1652" target="_blank" rel="noopener noreferrer">#1652</a></p></li><li><p>The new setting <code>vast.disk-monitor-step-size</code> enables the disk monitor to remove <em>N</em> partitions at once before re-checking if the new size of the database directory is now small enough. This is useful when checking the size of a directory is an expensive operation itself, e.g., on compressed filesystems.
<a href="https://github.com/tenzir/tenzir/pull/1655" target="_blank" rel="noopener noreferrer">#1655</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-98">Bug Fixes<a href="#bug-fixes-98" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST now correctly refuses to run when loaded plugins fail their initialization, i.e., are in a state that cannot be reasoned about.
<a href="https://github.com/tenzir/tenzir/pull/1618" target="_blank" rel="noopener noreferrer">#1618</a></p></li><li><p>A recent change caused imports over UDP not to forward its events to the VAST server process. Running <code>vast import -l :&lt;port&gt;/udp &lt;format&gt;</code> now works as expected again.
<a href="https://github.com/tenzir/tenzir/pull/1622" target="_blank" rel="noopener noreferrer">#1622</a></p></li><li><p>Non-relocatable VAST binaries no longer look for configuration, schemas, and plugins in directories relative to the binary location. Vice versa, relocatable VAST binaries no longer look for configuration, schemas, and plugins in their original install directory, and instead always use paths relative to their binary location. On macOS, we now always build relocatable binaries. Relocatable binaries now work correctly on systems where the libary install directory is <code>lib64</code> instead of <code>lib</code>.
<a href="https://github.com/tenzir/tenzir/pull/1624" target="_blank" rel="noopener noreferrer">#1624</a></p></li><li><p>VAST no longer erroneously skips the version mismatch detection between client and server. The check now additionally compares running plugins.
<a href="https://github.com/tenzir/tenzir/pull/1652" target="_blank" rel="noopener noreferrer">#1652</a></p></li><li><p>Executing VAST&#x27;s unit test suite in parallel no longer fails.
<a href="https://github.com/tenzir/tenzir/pull/1659" target="_blank" rel="noopener noreferrer">#1659</a></p></li><li><p>VAST and transform plugins now build without Arrow support again.
<a href="https://github.com/tenzir/tenzir/pull/1673" target="_blank" rel="noopener noreferrer">#1673</a></p></li><li><p>The <code>delete</code> transform step correctly deletes fields from the layout when running VAST with Arrow disabled.
<a href="https://github.com/tenzir/tenzir/pull/1673" target="_blank" rel="noopener noreferrer">#1673</a></p></li><li><p>VAST no longer erroneously warns about a version mismatch between client and server when their plugin load order differs.
<a href="https://github.com/tenzir/tenzir/pull/1679" target="_blank" rel="noopener noreferrer">#1679</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210429"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.04.29" target="_blank" rel="noopener noreferrer">2021.04.29</a><a href="#20210429" class="hash-link" aria-label="Direct link to 20210429" title="Direct link to 20210429">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-5">Breaking Changes<a href="#breaking-changes-5" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>The previously deprecated (<a href="https://github.com/tenzir/vast/pull/1409" target="_blank" rel="noopener noreferrer">#1409</a>) option <code>vast.no-default-schema</code> no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/1507" target="_blank" rel="noopener noreferrer">#1507</a></p></li><li><p>Plugins configured via <code>vast.plugins</code> in the configuration file can now be specified using either the plugin name or the full path to the shared plugin library. We no longer allow omitting the extension from specified plugin files, and recommend using the plugin name as a more portable solution, e.g., <code>example</code> over <code>libexample</code> and <code>/path/to/libexample.so</code> over <code>/path/to/libexample</code>.
<a href="https://github.com/tenzir/tenzir/pull/1527" target="_blank" rel="noopener noreferrer">#1527</a></p></li><li><p>The previously deprecated usage (<a href="https://github.com/tenzir/vast/pull/1354" target="_blank" rel="noopener noreferrer">#1354</a>) of format-independent options after the format in commands is now no longer possible. This affects the options <code>listen</code>, <code>read</code>, <code>schema</code>, <code>schema-file</code>, <code>type</code>, and <code>uds</code> for import commands and the <code>write</code> and <code>uds</code> options for export commands.
<a href="https://github.com/tenzir/tenzir/pull/1529" target="_blank" rel="noopener noreferrer">#1529</a></p></li><li><p>Plugins must define a separate entrypoint in their build scaffolding using the argument <code>ENTRYPOINT</code> to the CMake function <code>VASTRegisterPlugin</code>. If only a single value is given to the argument <code>SOURCES</code>, it is interpreted as the <code>ENTRYPOINT</code> automatically.
<a href="https://github.com/tenzir/tenzir/pull/1549" target="_blank" rel="noopener noreferrer">#1549</a></p></li><li><p>To avoid confusion between the PCAP plugin and libpcap, which both have a library file named <code>libpcap.so</code>, we now generally prefix the plugin library output names with <code>vast-plugin-</code>. E.g., The PCAP plugin library file is now named <code>libvast-plugin-pcap.so</code>. Plugins specified with a full path in the configuration under <code>vast.plugins</code> must be adapted accordingly.
<a href="https://github.com/tenzir/tenzir/pull/1593" target="_blank" rel="noopener noreferrer">#1593</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-55">Changes<a href="#changes-55" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The metrics for Suricata Eve JSON and Zeek Streaming JSON imports are now under the categories <code>suricata-reader</code> and <code>zeek-reader</code> respectively so they can be distinguished from the regular JSON import, which is still under <code>json-reader</code>.
<a href="https://github.com/tenzir/tenzir/pull/1498" target="_blank" rel="noopener noreferrer">#1498</a></p></li><li><p>VAST now ships with a schema record type for Suricata&#x27;s <code>rfb</code> event type.
<a href="https://github.com/tenzir/tenzir/pull/1499" target="_blank" rel="noopener noreferrer">#1499</a>
<a href="https://github.com/satta" target="_blank" rel="noopener noreferrer">@satta</a></p></li><li><p>The <code>exporter.hits</code> metric has been removed.
<a href="https://github.com/tenzir/tenzir/pull/1514" target="_blank" rel="noopener noreferrer">#1514</a>
<a href="https://github.com/tenzir/tenzir/pull/1574" target="_blank" rel="noopener noreferrer">#1574</a></p></li><li><p>We upstreamed the Debian patches provided by <a href="https://github.com/satta" target="_blank" rel="noopener noreferrer">@satta</a>. VAST now prefers an installed <code>tsl-robin-map&gt;=0.6.2</code> to the bundled one unless configured with <code>--with-bundled-robin-map</code>, and we provide a manpage for <code>lsvast</code> if <code>pandoc</code> is installed.
<a href="https://github.com/tenzir/tenzir/pull/1515" target="_blank" rel="noopener noreferrer">#1515</a></p></li><li><p>The Suricata <code>dns</code> schema type now defines the <code>dns.grouped.A</code> field containing a list of all returned addresses.
<a href="https://github.com/tenzir/tenzir/pull/1531" target="_blank" rel="noopener noreferrer">#1531</a></p></li><li><p>The status output of <em>Analyzer Plugins</em> moved from the <code>importer.analyzers</code> key into the top-level record.
<a href="https://github.com/tenzir/tenzir/pull/1544" target="_blank" rel="noopener noreferrer">#1544</a></p></li><li><p>The new option <code>--disable-default-config-dirs</code> disables the loading of user and system configuration, schema, and plugin directories. We use this option internally when running integration tests.
<a href="https://github.com/tenzir/tenzir/pull/1557" target="_blank" rel="noopener noreferrer">#1557</a></p></li><li><p>Building VAST now requires CMake &gt;= 3.15.
<a href="https://github.com/tenzir/tenzir/pull/1559" target="_blank" rel="noopener noreferrer">#1559</a></p></li><li><p>The VAST community chat moved from Element to Gitter. Join us at <a href="https://gitter.im/tenzir/vast" target="_blank" rel="noopener noreferrer">gitter.im/tenzir/vast</a> or via Matrix at <code>#tenzir_vast:gitter.im</code>.
<a href="https://github.com/tenzir/tenzir/pull/1591" target="_blank" rel="noopener noreferrer">#1591</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-71">Features<a href="#features-71" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The disk monitor gained a new <code>vast.start.disk-budget-check-binary</code> option that can be used to specify an external binary to determine the size of the database directory. This can be useful in cases where <code>stat()</code> does not give the correct answer, e.g. on compressed filesystems.
<a href="https://github.com/tenzir/tenzir/pull/1453" target="_blank" rel="noopener noreferrer">#1453</a></p></li><li><p>The <code>VAST_PLUGIN_DIRS</code> and <code>VAST_SCHEMA_DIRS</code> environment variables allow for setting additional plugin and schema directories separated with <code>:</code> with higher precedence than other plugin and schema directories.
<a href="https://github.com/tenzir/tenzir/pull/1532" target="_blank" rel="noopener noreferrer">#1532</a>
<a href="https://github.com/tenzir/tenzir/pull/1541" target="_blank" rel="noopener noreferrer">#1541</a></p></li><li><p>It is now possible to build plugins against an installed VAST. This requires a slight adaptation to every plugin&#x27;s build scaffolding. The example plugin was updated accordingly.
<a href="https://github.com/tenzir/tenzir/pull/1532" target="_blank" rel="noopener noreferrer">#1532</a></p></li><li><p><em>Component Plugins</em> are a new category of plugins that execute code within the VAST server process. <em>Analyzer Plugins</em> are now a specialization of <em>Component Plugins</em>, and their API remains unchanged.
<a href="https://github.com/tenzir/tenzir/pull/1544" target="_blank" rel="noopener noreferrer">#1544</a>
<a href="https://github.com/tenzir/tenzir/pull/1547" target="_blank" rel="noopener noreferrer">#1547</a>
<a href="https://github.com/tenzir/tenzir/pull/1588" target="_blank" rel="noopener noreferrer">#1588</a></p></li><li><p><em>Reader Plugins</em> and <em>Writer Plugins</em> are a new family of plugins that add import/export formats. The previously optional PCAP format moved into a dedicated plugin. Configure with <code>--with-pcap-plugin</code> and add <code>pcap</code> to <code>vast.plugins</code> to enable the PCAP plugin.
<a href="https://github.com/tenzir/tenzir/pull/1549" target="_blank" rel="noopener noreferrer">#1549</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-99">Bug Fixes<a href="#bug-fixes-99" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>VAST no longer erroneously tries to load explicitly specified plugins dynamically that are linked statically.
<a href="https://github.com/tenzir/tenzir/pull/1528" target="_blank" rel="noopener noreferrer">#1528</a></p></li><li><p>Custom commands from plugins ending in <code>start</code> no longer try to write to the server instead of the client log file.
<a href="https://github.com/tenzir/tenzir/pull/1530" target="_blank" rel="noopener noreferrer">#1530</a></p></li><li><p>Linking against an installed VAST via CMake now correctly resolves VAST&#x27;s dependencies.
<a href="https://github.com/tenzir/tenzir/pull/1532" target="_blank" rel="noopener noreferrer">#1532</a></p></li><li><p>VAST no longer refuses to start when any of the configuration file directories is unreadable, e.g., because VAST is running in a sandbox.
<a href="https://github.com/tenzir/tenzir/pull/1533" target="_blank" rel="noopener noreferrer">#1533</a></p></li><li><p>The CSV reader no longer crashes when encountering nested type aliases.
<a href="https://github.com/tenzir/tenzir/pull/1534" target="_blank" rel="noopener noreferrer">#1534</a></p></li><li><p>The command-line parser no longer crashes when encountering a flag with missing value in the last position of a command invocation.
<a href="https://github.com/tenzir/tenzir/pull/1536" target="_blank" rel="noopener noreferrer">#1536</a></p></li><li><p>A bug in the parsing of ISO8601 formatted dates that incorrectly adjusted the time to the UTC timezone has been fixed.
<a href="https://github.com/tenzir/tenzir/pull/1537" target="_blank" rel="noopener noreferrer">#1537</a></p></li><li><p>Plugin unit tests now correctly load and initialize their respective plugins.
<a href="https://github.com/tenzir/tenzir/pull/1549" target="_blank" rel="noopener noreferrer">#1549</a></p></li><li><p>The shutdown logic contained a bug that would make the node fail to terminate in case a plugin actor is registered at said node.
<a href="https://github.com/tenzir/tenzir/pull/1563" target="_blank" rel="noopener noreferrer">#1563</a></p></li><li><p>A race condition in the shutdown logic that caused an assertion was fixed.
<a href="https://github.com/tenzir/tenzir/pull/1563" target="_blank" rel="noopener noreferrer">#1563</a></p></li><li><p>VAST now correctly builds within shallow clones of the repository. If the build system is unable to determine the correct version from <code>git-describe</code>, it now always falls back to the version of the last release.
<a href="https://github.com/tenzir/tenzir/pull/1570" target="_blank" rel="noopener noreferrer">#1570</a></p></li><li><p>We fixed a regression that made it impossible to build static binaries from outside of the repository root directory.
<a href="https://github.com/tenzir/tenzir/pull/1573" target="_blank" rel="noopener noreferrer">#1573</a></p></li><li><p>The <code>VASTRegisterPlugin</code> CMake function now correctly removes the <code>ENTRYPOINT</code> from the given <code>SOURCES</code>, allowing for plugin developers to easily glob for sources again.
<a href="https://github.com/tenzir/tenzir/pull/1573" target="_blank" rel="noopener noreferrer">#1573</a></p></li><li><p>The <code>exporter.selectivity</code> metric is now 1.0 instead of NaN for idle periods.
<a href="https://github.com/tenzir/tenzir/pull/1574" target="_blank" rel="noopener noreferrer">#1574</a></p></li><li><p>VAST no longer renders JSON numbers with non-finite numbers as <code>NaN</code>, <code>-NaN</code>, <code>inf</code>, or <code>-inf</code>, resulting in invalid JSON output. Instead, such numbers are now rendered as <code>null</code>.
<a href="https://github.com/tenzir/tenzir/pull/1574" target="_blank" rel="noopener noreferrer">#1574</a></p></li><li><p>Specifying relative <code>CMAKE_INSTALL_*DIR</code> in the build configuration no longer causes VAST not to pick up system-wide installed configuration files, schemas, and plugins. The configured install prefix is now used correctly. The defunct <code>VAST_SYSCONFDIR</code>, <code>VAST_DATADIR</code>, and <code>VAST_LIBDIR</code> CMake options no longer exist. Use a combination of <code>CMAKE_INSTALL_PREFIX</code> and <code>CMAKE_INSTALL_*DIR</code> instead.
<a href="https://github.com/tenzir/tenzir/pull/1580" target="_blank" rel="noopener noreferrer">#1580</a></p></li><li><p>Spaces before SI prefixes in command line arguments and configuration options are now generally ignored, e.g., it is now possible to set the disk monitor budgets to <code>2 GiB</code> rather than <code>2GiB</code>.
<a href="https://github.com/tenzir/tenzir/pull/1590" target="_blank" rel="noopener noreferrer">#1590</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210325"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.03.25" target="_blank" rel="noopener noreferrer">2021.03.25</a><a href="#20210325" class="hash-link" aria-label="Direct link to 20210325" title="Direct link to 20210325">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-6">Breaking Changes<a href="#breaking-changes-6" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>The previously deprecated <code>#timestamp</code> extractor has been removed from the query language entirely. Use <code>:timestamp</code> instead.
<a href="https://github.com/tenzir/tenzir/pull/1399" target="_blank" rel="noopener noreferrer">#1399</a></p></li><li><p>Plugins can now be linked statically against VAST. A new <code>VASTRegisterPlugin</code> CMake function enables easy setup of the build scaffolding required for plugins. Configure with <code>--with-static-plugins</code> or build a static binary to link all plugins built alongside VAST statically. All plugin build scaffoldings must be adapted, older plugins do no longer work.
<a href="https://github.com/tenzir/tenzir/pull/1445" target="_blank" rel="noopener noreferrer">#1445</a>
<a href="https://github.com/tenzir/tenzir/pull/1452" target="_blank" rel="noopener noreferrer">#1452</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-56">Changes<a href="#changes-56" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The default size of table slices (event batches) that is created from <code>vast import</code> processes has been changed from 1,000 to 1,024.
<a href="https://github.com/tenzir/tenzir/pull/1396" target="_blank" rel="noopener noreferrer">#1396</a></p></li><li><p>VAST now ships with schema record types for Suricata&#x27;s <code>mqtt</code> and <code>anomaly</code> event types.
<a href="https://github.com/tenzir/tenzir/pull/1408" target="_blank" rel="noopener noreferrer">#1408</a>
<a href="https://github.com/satta" target="_blank" rel="noopener noreferrer">@satta</a></p></li><li><p>The option <code>vast.no-default-schema</code> is deprecated, as it is no longer needed to override types from bundled schemas.
<a href="https://github.com/tenzir/tenzir/pull/1409" target="_blank" rel="noopener noreferrer">#1409</a></p></li><li><p>Query latency for expressions that contain concept names has improved substantially. For DB sizes in the TB region, and with a large variety of event types, queries with a high selectivity experience speedups of up to 5x.
<a href="https://github.com/tenzir/tenzir/pull/1433" target="_blank" rel="noopener noreferrer">#1433</a></p></li><li><p>The zeek-to-vast utility was moved to the <a href="https://github.com/tenzir/zeek-vast" target="_blank" rel="noopener noreferrer">tenzir/zeek-vast</a> repository. All options related to zeek-to-vast and the bundled Broker submodule were removed.
<a href="https://github.com/tenzir/tenzir/pull/1435" target="_blank" rel="noopener noreferrer">#1435</a></p></li><li><p>The type extractor in the expression language now works with type aliases. For example, given the type definition for port from the base schema <code>type port = count</code>, a search for <code>:count</code> will also consider fields of type <code>port</code>.
<a href="https://github.com/tenzir/tenzir/pull/1446" target="_blank" rel="noopener noreferrer">#1446</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-72">Features<a href="#features-72" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The schema language now supports 4 operations on record types: <code>+</code> combines the fields of 2 records into a new record. <code>&lt;+</code> and <code>+&gt;</code> are variations of <code>+</code> that give precedence to the left and right operand respectively. <code>-</code> creates a record with the field specified as its right operand removed.
<a href="https://github.com/tenzir/tenzir/pull/1407" target="_blank" rel="noopener noreferrer">#1407</a>
<a href="https://github.com/tenzir/tenzir/pull/1487" target="_blank" rel="noopener noreferrer">#1487</a>
<a href="https://github.com/tenzir/tenzir/pull/1490" target="_blank" rel="noopener noreferrer">#1490</a></p></li><li><p>VAST now supports nested records in Arrow table slices and in the JSON import, e.g., data of type <code>list&lt;record&lt;name: string, age: count&gt;</code>. While nested record fields are not yet queryable, ingesting such data will no longer cause VAST to crash. MessagePack table slices don&#x27;t support records in lists yet.
<a href="https://github.com/tenzir/tenzir/pull/1429" target="_blank" rel="noopener noreferrer">#1429</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-100">Bug Fixes<a href="#bug-fixes-100" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Some non-null pointers were incorrectly rendered as <code>*nullptr</code> in log messages.
<a href="https://github.com/tenzir/tenzir/pull/1430" target="_blank" rel="noopener noreferrer">#1430</a></p></li><li><p>Data that was ingested before the deprecation of the <code>#timestamp</code> attribute wasn&#x27;t exported correctly with newer versions. This is now corrected.
<a href="https://github.com/tenzir/tenzir/pull/1432" target="_blank" rel="noopener noreferrer">#1432</a></p></li><li><p>The JSON parser now accepts data with numerical or boolean values in fields that expect strings according to the schema. VAST converts these values into string representations.
<a href="https://github.com/tenzir/tenzir/pull/1439" target="_blank" rel="noopener noreferrer">#1439</a></p></li><li><p>A query for a field or field name suffix that matches multiple fields of different types would erroneously return no results.
<a href="https://github.com/tenzir/tenzir/pull/1447" target="_blank" rel="noopener noreferrer">#1447</a></p></li><li><p>The disk monitor now correctly erases partition synopses from the meta index.
<a href="https://github.com/tenzir/tenzir/pull/1450" target="_blank" rel="noopener noreferrer">#1450</a></p></li><li><p>The archive, index, source, and sink components now report metrics when idle instead of omitting them entirely. This allows for distinguishing between idle and not running components from the metrics.
<a href="https://github.com/tenzir/tenzir/pull/1451" target="_blank" rel="noopener noreferrer">#1451</a></p></li><li><p>VAST no longer crashes when the disk monitor tries to calculate the size of the database while files are being deleted. Instead, it will retry after the configured scan interval.
<a href="https://github.com/tenzir/tenzir/pull/1458" target="_blank" rel="noopener noreferrer">#1458</a></p></li><li><p>Insufficient permissions for one of the paths in the <code>schema-dirs</code> option would lead to a crash in <code>vast start</code>.
<a href="https://github.com/tenzir/tenzir/pull/1472" target="_blank" rel="noopener noreferrer">#1472</a></p></li><li><p>A race condition during server shutdown could lead to an invariant violation, resulting in a firing assertion. Streamlining the shutdown logic resolved the issue.
<a href="https://github.com/tenzir/tenzir/pull/1473" target="_blank" rel="noopener noreferrer">#1473</a>
<a href="https://github.com/tenzir/tenzir/pull/1485" target="_blank" rel="noopener noreferrer">#1485</a></p></li><li><p>Enabling the disk budget feature no longer prevents the server process from exiting after it was stopped.
<a href="https://github.com/tenzir/tenzir/pull/1495" target="_blank" rel="noopener noreferrer">#1495</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210224"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.02.24" target="_blank" rel="noopener noreferrer">2021.02.24</a><a href="#20210224" class="hash-link" aria-label="Direct link to 20210224" title="Direct link to 20210224">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-7">Breaking Changes<a href="#breaking-changes-7" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>VAST switched to <a href="https://github.com/gabime/spdlog" target="_blank" rel="noopener noreferrer">spdlog &gt;= 1.5.0</a> for logging. For users, this means: The <code>vast.console-format</code> and <code>vast.file-format</code> now must be specified using the spdlog pattern syntax as described <a href="https://github.com/gabime/spdlog/wiki/3.-Custom-formatting#pattern-flags" target="_blank" rel="noopener noreferrer">here</a>. All settings under <code>caf.logger.*</code> are now ignored by VAST, and only the <code>vast.*</code> counterparts are used for logger configuration.
<a href="https://github.com/tenzir/tenzir/pull/1223" target="_blank" rel="noopener noreferrer">#1223</a>
<a href="https://github.com/tenzir/tenzir/pull/1328" target="_blank" rel="noopener noreferrer">#1328</a>
<a href="https://github.com/tenzir/tenzir/pull/1334" target="_blank" rel="noopener noreferrer">#1334</a>
<a href="https://github.com/tenzir/tenzir/pull/1390" target="_blank" rel="noopener noreferrer">#1390</a>
<a href="https://github.com/a4z" target="_blank" rel="noopener noreferrer">@a4z</a></p></li><li><p>VAST now requires <a href="https://fmt.dev" target="_blank" rel="noopener noreferrer">{fmt} &gt;= 5.2.1</a> to be installed.
<a href="https://github.com/tenzir/tenzir/pull/1330" target="_blank" rel="noopener noreferrer">#1330</a></p></li><li><p>All options in <code>vast.metrics.*</code> had underscores in their names replaced with dashes to align with other options. For example, <code>vast.metrics.file_sink</code> is now <code>vast.metrics.file-sink</code>. The old options no longer work.
<a href="https://github.com/tenzir/tenzir/pull/1368" target="_blank" rel="noopener noreferrer">#1368</a></p></li><li><p>User-supplied schema files are now picked up from <code>&lt;SYSCONFDIR&gt;/vast/schema</code> and <code>&lt;XDG_CONFIG_HOME&gt;/vast/schema</code> instead of <code>&lt;XDG_DATA_HOME&gt;/vast/schema</code>.
<a href="https://github.com/tenzir/tenzir/pull/1372" target="_blank" rel="noopener noreferrer">#1372</a></p></li><li><p>The previously deprecated options <code>vast.spawn.importer.ids</code> and <code>vast.schema-paths</code> no longer work. Furthermore, queries spread over multiple arguments are now disallowed instead of triggering a deprecation warning.
<a href="https://github.com/tenzir/tenzir/pull/1374" target="_blank" rel="noopener noreferrer">#1374</a></p></li><li><p>The special meaning of the <code>#timestamp</code> attribute has been removed from the schema language. Timestamps can from now on be marked as such by using the <code>timestamp</code> type instead. Queries of the form <code>#timestamp &lt;op&gt; value</code> remain operational but are deprecated in favor of <code>:timestamp</code>. Note that this change also affects <code>:time</code> queries, which aren&#x27;t supersets of <code>#timestamp</code> queries any longer.
<a href="https://github.com/tenzir/tenzir/pull/1388" target="_blank" rel="noopener noreferrer">#1388</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-57">Changes<a href="#changes-57" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>Schema parsing now uses a 2-pass loading phase so that type aliases can reference other types that are later defined in the same directory. Additionally, type definitions from already parsed schema dirs can be referenced from schema types that are parsed later. Types can also be redefined in later directories, but a type can not be defined twice in the same directory.
<a href="https://github.com/tenzir/tenzir/pull/1331" target="_blank" rel="noopener noreferrer">#1331</a></p></li><li><p>The <code>infer</code> command has an improved heuristic for the number types <code>int</code>, <code>count</code>, and <code>real</code>.
<a href="https://github.com/tenzir/tenzir/pull/1343" target="_blank" rel="noopener noreferrer">#1343</a>
<a href="https://github.com/tenzir/tenzir/pull/1356" target="_blank" rel="noopener noreferrer">#1356</a>
<a href="https://github.com/ngrodzitski" target="_blank" rel="noopener noreferrer">@ngrodzitski</a></p></li><li><p>The options <code>listen</code>, <code>read</code>, <code>schema</code>, <code>schema-file</code>, <code>type</code>, and <code>uds</code> can from now on be supplied to the <code>import</code> command directly. Similarly, the options <code>write</code> and <code>uds</code> can be supplied to the <code>export</code> command. All options can still be used after the format subcommand, but that usage is deprecated.
<a href="https://github.com/tenzir/tenzir/pull/1354" target="_blank" rel="noopener noreferrer">#1354</a></p></li><li><p>The query normalizer interprets value predicates of type <code>subnet</code> more broadly: given a subnet <code>S</code>, the parser expands this to the expression <code>:subnet == S || :addr in S</code>. This change makes it easier to search for IP addresses belonging to a specific subnet.
<a href="https://github.com/tenzir/tenzir/pull/1373" target="_blank" rel="noopener noreferrer">#1373</a></p></li><li><p>The output of <code>vast help</code> and <code>vast documentation</code> now goes to <em>stdout</em> instead of to stderr. Erroneous invocations of <code>vast</code> also print the helptext, but in this case the output still goes to stderr to avoid interference with downstream tooling.
<a href="https://github.com/tenzir/tenzir/pull/1385" target="_blank" rel="noopener noreferrer">#1385</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-features">Experimental Features<a href="#experimental-features" class="hash-link" aria-label="Direct link to Experimental Features" title="Direct link to Experimental Features">​</a></h3><ul><li><a href="https://github.com/Neo23x0/sigma" target="_blank" rel="noopener noreferrer">Sigma</a> rules are now a valid format to represent query expression. VAST parses the <code>detection</code> attribute of a rule and translates it into a native query expression. To run a query using a Sigma rule, pass it on standard input, e.g., <code>vast export json &lt; rule.yaml</code>.
<a href="https://github.com/tenzir/tenzir/pull/1379" target="_blank" rel="noopener noreferrer">#1379</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-73">Features<a href="#features-73" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>VAST rotates server logs by default. The new config options <code>vast.disable-log-rotation</code> and <code>vast.log-rotation-threshold</code> can be used to control this behaviour.
<a href="https://github.com/tenzir/tenzir/pull/1223" target="_blank" rel="noopener noreferrer">#1223</a>
<a href="https://github.com/tenzir/tenzir/pull/1362" target="_blank" rel="noopener noreferrer">#1362</a></p></li><li><p>The meta index now stores partition synopses in separate files. This will decrease restart times for systems with large databases, slow disks and aggressive <code>readahead</code> settings. A new config setting <code>vast.meta-index-dir</code> allows storing the meta index information in a separate directory.
<a href="https://github.com/tenzir/tenzir/pull/1330" target="_blank" rel="noopener noreferrer">#1330</a>
<a href="https://github.com/tenzir/tenzir/pull/1376" target="_blank" rel="noopener noreferrer">#1376</a></p></li><li><p>The JSON import now always relies upon <a href="https://simdjson.org" target="_blank" rel="noopener noreferrer">simdjson</a>. The previously experimental <code>--simdjson</code> option to the <code>vast import json|suricata|zeek-json</code> commands no longer exist as the feature is considered stable.
<a href="https://github.com/tenzir/tenzir/pull/1343" target="_blank" rel="noopener noreferrer">#1343</a>
<a href="https://github.com/tenzir/tenzir/pull/1356" target="_blank" rel="noopener noreferrer">#1356</a>
<a href="https://github.com/ngrodzitski" target="_blank" rel="noopener noreferrer">@ngrodzitski</a></p></li><li><p>The new options <code>vast.metrics.file-sink.real-time</code> and <code>vast.metrics.uds-sink.real-time</code> enable real-time metrics reporting for the file sink and UDS sink respectively.
<a href="https://github.com/tenzir/tenzir/pull/1368" target="_blank" rel="noopener noreferrer">#1368</a></p></li><li><p>The type extractor in the expression language now works with user defined types. For example the type <code>port</code> is defined as <code>type port = count</code> in the base schema. This type can now be queried with an expression like <code>:port == 80</code>.
<a href="https://github.com/tenzir/tenzir/pull/1382" target="_blank" rel="noopener noreferrer">#1382</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-101">Bug Fixes<a href="#bug-fixes-101" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>An ordering issue introduced in <a href="https://github.com/tenzir/vast/pull/1295" target="_blank" rel="noopener noreferrer">#1295</a> that could lead to a segfault with long-running queries was reverted.
<a href="https://github.com/tenzir/tenzir/pull/1381" target="_blank" rel="noopener noreferrer">#1381</a></p></li><li><p>A bug in the new simdjson based JSON reader introduced in <a href="https://github.com/tenzir/vast/pull/1356" target="_blank" rel="noopener noreferrer">#1356</a> could trigger an assertion in the <code>vast import</code> process if an input field could not be converted to the field type in the target layout. This is no longer the case.
<a href="https://github.com/tenzir/tenzir/pull/1386" target="_blank" rel="noopener noreferrer">#1386</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20210128"><a href="https://github.com/tenzir/tenzir/releases/tag/2021.01.28" target="_blank" rel="noopener noreferrer">2021.01.28</a><a href="#20210128" class="hash-link" aria-label="Direct link to 20210128" title="Direct link to 20210128">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-8">Breaking Changes<a href="#breaking-changes-8" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>The new short options <code>-v</code>, <code>-vv</code>, <code>-vvv</code>, <code>-q</code>, <code>-qq</code>, and <code>-qqq</code> map onto the existing verbosity levels. The existing short syntax, e.g., <code>-v debug</code>, no longer works.
<a href="https://github.com/tenzir/tenzir/pull/1244" target="_blank" rel="noopener noreferrer">#1244</a></p></li><li><p>The GitHub CI changed to Debian Buster and produces Debian artifacts instead of Ubuntu artifacts. Similarly, the Docker images we provide on <a href="https://hub.docker.com/r/tenzir/vast" target="_blank" rel="noopener noreferrer">Docker Hub</a> use Debian Buster as base image. To build Docker images locally, users must set <code>DOCKER_BUILDKIT=1</code> in the build environment.
<a href="https://github.com/tenzir/tenzir/pull/1294" target="_blank" rel="noopener noreferrer">#1294</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-58">Changes<a href="#changes-58" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST preserves nested JSON objects in events instead of formatting them in a flattened form when exporting data with <code>vast export json</code>. The old behavior can be enabled with <code>vast export json --flatten</code>.
<a href="https://github.com/tenzir/tenzir/pull/1257" target="_blank" rel="noopener noreferrer">#1257</a>
<a href="https://github.com/tenzir/tenzir/pull/1289" target="_blank" rel="noopener noreferrer">#1289</a></p></li><li><p><code>vast start</code> prints the endpoint it is listening on when providing the option <code>--print-endpoint</code>.
<a href="https://github.com/tenzir/tenzir/pull/1271" target="_blank" rel="noopener noreferrer">#1271</a></p></li><li><p>The option <code>vast.schema-paths</code> is renamed to <code>vast.schema-dirs</code>. The old option is deprecated and will be removed in a future release.
<a href="https://github.com/tenzir/tenzir/pull/1287" target="_blank" rel="noopener noreferrer">#1287</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-features-1">Experimental Features<a href="#experimental-features-1" class="hash-link" aria-label="Direct link to Experimental Features" title="Direct link to Experimental Features">​</a></h3><ul><li><p>VAST features a new plugin framework to support efficient customization points at various places of the data processing pipeline. There exist several base classes that define an interface, e.g., for adding new commands or spawning a new actor that processes the incoming stream of data. The directory <code>examples/plugins/example</code> contains an example plugin.
<a href="https://github.com/tenzir/tenzir/pull/1208" target="_blank" rel="noopener noreferrer">#1208</a>
<a href="https://github.com/tenzir/tenzir/pull/1264" target="_blank" rel="noopener noreferrer">#1264</a>
<a href="https://github.com/tenzir/tenzir/pull/1275" target="_blank" rel="noopener noreferrer">#1275</a>
<a href="https://github.com/tenzir/tenzir/pull/1282" target="_blank" rel="noopener noreferrer">#1282</a>
<a href="https://github.com/tenzir/tenzir/pull/1285" target="_blank" rel="noopener noreferrer">#1285</a>
<a href="https://github.com/tenzir/tenzir/pull/1287" target="_blank" rel="noopener noreferrer">#1287</a>
<a href="https://github.com/tenzir/tenzir/pull/1302" target="_blank" rel="noopener noreferrer">#1302</a>
<a href="https://github.com/tenzir/tenzir/pull/1307" target="_blank" rel="noopener noreferrer">#1307</a>
<a href="https://github.com/tenzir/tenzir/pull/1316" target="_blank" rel="noopener noreferrer">#1316</a></p></li><li><p>VAST relies on <a href="https://github.com/simdjson/simdjson" target="_blank" rel="noopener noreferrer">simdjson</a> for JSON parsing. The substantial gains in throughput shift the bottleneck of the ingest path from parsing input to indexing at the node. To use the (yet experimental) feature, use <code>vast import json|suricata|zeek-json --simdjson</code>.
<a href="https://github.com/tenzir/tenzir/pull/1230" target="_blank" rel="noopener noreferrer">#1230</a>
<a href="https://github.com/tenzir/tenzir/pull/1246" target="_blank" rel="noopener noreferrer">#1246</a>
<a href="https://github.com/tenzir/tenzir/pull/1281" target="_blank" rel="noopener noreferrer">#1281</a>
<a href="https://github.com/tenzir/tenzir/pull/1314" target="_blank" rel="noopener noreferrer">#1314</a>
<a href="https://github.com/tenzir/tenzir/pull/1315" target="_blank" rel="noopener noreferrer">#1315</a>
<a href="https://github.com/ngrodzitski" target="_blank" rel="noopener noreferrer">@ngrodzitski</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-74">Features<a href="#features-74" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>import zeek-json</code> command allows for importing line-delimited Zeek JSON logs as produced by the <a href="https://github.com/corelight/json-streaming-logs" target="_blank" rel="noopener noreferrer">json-streaming-logs</a> package. Unlike stock Zeek JSON logs, where one file contains exactly one log type, the streaming format contains different log event types in a single stream and uses an additional <code>_path</code> field to disambiguate the log type. For stock Zeek JSON logs, use the existing <code>import json</code> with the <code>-t</code> flag to specify the log type.
<a href="https://github.com/tenzir/tenzir/pull/1259" target="_blank" rel="noopener noreferrer">#1259</a></p></li><li><p>VAST queries also accept <code>nanoseconds</code>, <code>microseconds</code>, <code>milliseconds</code> <code>seconds</code> and <code>minutes</code> as units for a duration.
<a href="https://github.com/tenzir/tenzir/pull/1265" target="_blank" rel="noopener noreferrer">#1265</a></p></li><li><p>The output of <code>vast status</code> contains detailed memory usage information about active and cached partitions.
<a href="https://github.com/tenzir/tenzir/pull/1297" target="_blank" rel="noopener noreferrer">#1297</a></p></li><li><p>VAST installations bundle a LICENSE.3rdparty file alongside the regular LICENSE file that lists all embedded code that is under a separate license.
<a href="https://github.com/tenzir/tenzir/pull/1306" target="_blank" rel="noopener noreferrer">#1306</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-102">Bug Fixes<a href="#bug-fixes-102" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Invalid Arrow table slices read from disk no longer trigger a segmentation fault. Instead, the invalid on-disk state is ignored.
<a href="https://github.com/tenzir/tenzir/pull/1247" target="_blank" rel="noopener noreferrer">#1247</a></p></li><li><p>Manually specified configuration files may reside in the default location directories. Configuration files can be symlinked.
<a href="https://github.com/tenzir/tenzir/pull/1248" target="_blank" rel="noopener noreferrer">#1248</a></p></li><li><p>For relocatable installations, the list of schema loading paths does not include a build-time configured path any more.
<a href="https://github.com/tenzir/tenzir/pull/1249" target="_blank" rel="noopener noreferrer">#1249</a></p></li><li><p>Values in JSON fields that can&#x27;t be converted to the type that is specified in the schema won&#x27;t cause the containing event to be dropped any longer.
<a href="https://github.com/tenzir/tenzir/pull/1250" target="_blank" rel="noopener noreferrer">#1250</a></p></li><li><p>Line based imports correctly handle read timeouts that occur in the middle of a line.
<a href="https://github.com/tenzir/tenzir/pull/1276" target="_blank" rel="noopener noreferrer">#1276</a></p></li><li><p>Disk monitor quota settings not ending in a &#x27;B&#x27; are no longer silently discarded.
<a href="https://github.com/tenzir/tenzir/pull/1278" target="_blank" rel="noopener noreferrer">#1278</a></p></li><li><p>A potential race condition that could lead to a hanging export if a partition was persisted just as it was scanned no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/1295" target="_blank" rel="noopener noreferrer">#1295</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20201216"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.12.16" target="_blank" rel="noopener noreferrer">2020.12.16</a><a href="#20201216" class="hash-link" aria-label="Direct link to 20201216" title="Direct link to 20201216">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-9">Breaking Changes<a href="#breaking-changes-9" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>The <code>splunk-to-vast</code> script has a new name: <code>taxonomize</code>. The script now also generates taxonomy declarations for Azure Sentinel.
<a href="https://github.com/tenzir/tenzir/pull/1134" target="_blank" rel="noopener noreferrer">#1134</a></p></li><li><p>CAF-encoded table slices no longer exist. As such, the option <code>vast.import.batch-encoding</code> now only supports <code>arrow</code> and <code>msgpack</code> as arguments.
<a href="https://github.com/tenzir/tenzir/pull/1142" target="_blank" rel="noopener noreferrer">#1142</a></p></li><li><p>The on-disk format for table slices now supports versioning of table slice encodings. This breaking change makes it so that adding further encodings or adding new versions of existing encodings is possible without breaking again in the future.
<a href="https://github.com/tenzir/tenzir/pull/1143" target="_blank" rel="noopener noreferrer">#1143</a>
<a href="https://github.com/tenzir/tenzir/pull/1157" target="_blank" rel="noopener noreferrer">#1157</a>
<a href="https://github.com/tenzir/tenzir/pull/1160" target="_blank" rel="noopener noreferrer">#1160</a>
<a href="https://github.com/tenzir/tenzir/pull/1165" target="_blank" rel="noopener noreferrer">#1165</a></p></li><li><p>Archive segments no longer include an additional, unnecessary version identifier. We took the opportunity to clean this up bundled with the other recent breaking changes.
<a href="https://github.com/tenzir/tenzir/pull/1168" target="_blank" rel="noopener noreferrer">#1168</a></p></li><li><p>The build configuration of VAST received a major overhaul. Inclusion of libvast in other procects via <code>add_subdirectory(path/to/vast)</code> is now easily possible. The names of all build options were aligned, and the new build summary shows all available options.
<a href="https://github.com/tenzir/tenzir/pull/1175" target="_blank" rel="noopener noreferrer">#1175</a></p></li><li><p>The <code>port</code> type is no longer a first-class type. The new way to represent transport-layer ports relies on <code>count</code> instead. In the schema, VAST ships with a new alias <code>type port = count</code> to keep existing schema definitions in tact. However, this is a breaking change because the on-disk format and Arrow data representation changed. Queries with <code>:port</code> type extractors no longer work. Similarly, the syntax <code>53/udp</code> no longer exists; use <code>count</code> syntax <code>53</code> instead. Since most <code>port</code> occurrences do not carry a known transport-layer type, and the type information exists typically in a separate field, removing <code>port</code> as native type streamlines the data model.
<a href="https://github.com/tenzir/tenzir/pull/1187" target="_blank" rel="noopener noreferrer">#1187</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-59">Changes<a href="#changes-59" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>VAST no longer requires you to manually remove a stale PID file from a no-longer running <code>vast</code> process. Instead, VAST prints a warning and overwrites the old PID file.
<a href="https://github.com/tenzir/tenzir/pull/1128" target="_blank" rel="noopener noreferrer">#1128</a></p></li><li><p>VAST does not produce metrics by default any more. The option <code>--disable-metrics</code> has been renamed to <code>--enable-metrics</code> accordingly.
<a href="https://github.com/tenzir/tenzir/pull/1137" target="_blank" rel="noopener noreferrer">#1137</a></p></li><li><p>VAST now processes the schema directory recursively, as opposed to stopping at nested directories.
<a href="https://github.com/tenzir/tenzir/pull/1154" target="_blank" rel="noopener noreferrer">#1154</a></p></li><li><p>The default segment size in the archive is now 1 GiB. This reduces fragmentation of the archive meta data and speeds up VAST startup time.
<a href="https://github.com/tenzir/tenzir/pull/1166" target="_blank" rel="noopener noreferrer">#1166</a></p></li><li><p>VAST now listens on port 42000 instead of letting the operating system choose the port if the option <code>vast.endpoint</code> specifies an endpoint without a port. To restore the old behavior, set the port to 0 explicitly.
<a href="https://github.com/tenzir/tenzir/pull/1170" target="_blank" rel="noopener noreferrer">#1170</a></p></li><li><p>The Suricata schemas received an overhaul: there now exist <code>vlan</code> and <code>in_iface</code> fields in all types. In addition, VAST ships with new types for <code>ikev2</code>, <code>nfs</code>, <code>snmp</code>, <code>tftp</code>, <code>rdp</code>, <code>sip</code> and <code>dcerpc</code>. The <code>tls</code> type gets support for the additional <code>sni</code> and <code>session_resumed</code> fields.
<a href="https://github.com/tenzir/tenzir/pull/1176" target="_blank" rel="noopener noreferrer">#1176</a>
<a href="https://github.com/tenzir/tenzir/pull/1180" target="_blank" rel="noopener noreferrer">#1180</a>
<a href="https://github.com/tenzir/tenzir/pull/1186" target="_blank" rel="noopener noreferrer">#1186</a>
<a href="https://github.com/tenzir/tenzir/pull/1237" target="_blank" rel="noopener noreferrer">#1237</a>
<a href="https://github.com/satta" target="_blank" rel="noopener noreferrer">@satta</a></p></li><li><p>Installed schema definitions now reside in <code>&lt;datadir&gt;/vast/schema/types</code>, taxonomy definitions in <code>&lt;datadir&gt;/vast/schema/taxonomy</code>, and concept definitions in <code>&lt;datadir/vast/schema/concepts</code>, as opposed to them all being in the schema directory directly. When overriding an existing installation, you <em>may</em> have to delete the old schema definitions by hand.
<a href="https://github.com/tenzir/tenzir/pull/1194" target="_blank" rel="noopener noreferrer">#1194</a></p></li><li><p>The <code>zeek</code> export format now strips off the prefix <code>zeek.</code> to ensure full compatibility with regular Zeek output. For all non-Zeek types, the prefix remains intact.
<a href="https://github.com/tenzir/tenzir/pull/1205" target="_blank" rel="noopener noreferrer">#1205</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-features-2">Experimental Features<a href="#experimental-features-2" class="hash-link" aria-label="Direct link to Experimental Features" title="Direct link to Experimental Features">​</a></h3><ul><li><p>VAST now ships with its own taxonomy and basic concept definitions for Suricata, Zeek, and Sysmon.
<a href="https://github.com/tenzir/tenzir/pull/1135" target="_blank" rel="noopener noreferrer">#1135</a>
<a href="https://github.com/tenzir/tenzir/pull/1150" target="_blank" rel="noopener noreferrer">#1150</a></p></li><li><p>The query language now supports models. Models combine a list of concepts into a semantic unit that can be fulfiled by an event. If the type of an event contains a field for every concept in a model. Turn to <a href="https://vast.io/docs/understand/data-model/taxonomies#models" target="_blank" rel="noopener noreferrer">the documentation</a> for more information.
<a href="https://github.com/tenzir/tenzir/pull/1185" target="_blank" rel="noopener noreferrer">#1185</a>
<a href="https://github.com/tenzir/tenzir/pull/1228" target="_blank" rel="noopener noreferrer">#1228</a></p></li><li><p>The expression language gained support for the <code>#field</code> meta extractor. It is the complement for <code>#type</code> and uses suffix matching for field names at the layout level.
<a href="https://github.com/tenzir/tenzir/pull/1228" target="_blank" rel="noopener noreferrer">#1228</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-75">Features<a href="#features-75" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new option <code>vast.client-log-file</code> enables client-side logging. By default, VAST only writes log files for the server process.
<a href="https://github.com/tenzir/tenzir/pull/1132" target="_blank" rel="noopener noreferrer">#1132</a></p></li><li><p>The new option <code>--print-bytesizes</code> of <code>lsvast</code> prints information about the size of certain fields of the flatbuffers inside a VAST database directory.
<a href="https://github.com/tenzir/tenzir/pull/1149" target="_blank" rel="noopener noreferrer">#1149</a></p></li><li><p>The storage required for index IP addresses has been optimized. This should  result in significantly reduced memory usage over time, as well as faster  restart times and reduced disk space requirements.
<a href="https://github.com/tenzir/tenzir/pull/1172" target="_blank" rel="noopener noreferrer">#1172</a>
<a href="https://github.com/tenzir/tenzir/pull/1200" target="_blank" rel="noopener noreferrer">#1200</a>
<a href="https://github.com/tenzir/tenzir/pull/1216" target="_blank" rel="noopener noreferrer">#1216</a></p></li><li><p>A new key &#x27;meta-index-bytes&#x27; appears in the status output generated by <code>vast status --detailed</code>.
<a href="https://github.com/tenzir/tenzir/pull/1193" target="_blank" rel="noopener noreferrer">#1193</a></p></li><li><p>The new <code>dump</code> command prints configuration and schema-related information. The implementation allows for printing all registered concepts and models, via <code>vast dump concepts</code> and <code>vast dump models</code>. The flag to <code>--yaml</code> to <code>dump</code> switches from JSON to YAML output, such that it confirms to the taxonomy configuration syntax.
<a href="https://github.com/tenzir/tenzir/pull/1196" target="_blank" rel="noopener noreferrer">#1196</a>
<a href="https://github.com/tenzir/tenzir/pull/1233" target="_blank" rel="noopener noreferrer">#1233</a></p></li><li><p>On Linux, VAST now contains a set of built-in USDT tracepoints that can be used by tools like <code>perf</code> or <code>bpftrace</code> when debugging. Initially, we provide the two tracepoints <code>chunk_make</code> and <code>chunk_destroy</code>, which trigger every time a <code>vast::chunk</code> is created or destroyed.
<a href="https://github.com/tenzir/tenzir/pull/1206" target="_blank" rel="noopener noreferrer">#1206</a></p></li><li><p>Low-selectivity queries of string (in)equality queries now run up to 30x faster, thanks to more intelligent selection of relevant index partitions.
<a href="https://github.com/tenzir/tenzir/pull/1214" target="_blank" rel="noopener noreferrer">#1214</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-103">Bug Fixes<a href="#bug-fixes-103" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p><code>vast import</code> no longer stalls when it doesn&#x27;t receive any data for more than 10 seconds.
<a href="https://github.com/tenzir/tenzir/pull/1136" target="_blank" rel="noopener noreferrer">#1136</a></p></li><li><p>The <code>vast.yaml.example</code> contained syntax errors. The example config file now works again.
<a href="https://github.com/tenzir/tenzir/pull/1145" target="_blank" rel="noopener noreferrer">#1145</a></p></li><li><p>VAST no longer starts if the specified config file does not exist.
<a href="https://github.com/tenzir/tenzir/pull/1147" target="_blank" rel="noopener noreferrer">#1147</a></p></li><li><p>The output of <code>vast status --detailed</code> now contains informations about runnings sinks, e.g., <code>vast export &lt;format&gt; &lt;query&gt;</code> processes.
<a href="https://github.com/tenzir/tenzir/pull/1155" target="_blank" rel="noopener noreferrer">#1155</a></p></li><li><p>VAST no longer blocks when an invalid query operation is issued.
<a href="https://github.com/tenzir/tenzir/pull/1189" target="_blank" rel="noopener noreferrer">#1189</a></p></li><li><p>The type registry now detects and handles breaking changes in schemas, e.g., when a field type changes or a field is dropped from record.
<a href="https://github.com/tenzir/tenzir/pull/1195" target="_blank" rel="noopener noreferrer">#1195</a></p></li><li><p>The index now correctly drops further results when queries finish early, thus improving the performance of queries for a limited number of events.
<a href="https://github.com/tenzir/tenzir/pull/1209" target="_blank" rel="noopener noreferrer">#1209</a></p></li><li><p>The index no longer crashes when too many parallel queries are running.
<a href="https://github.com/tenzir/tenzir/pull/1210" target="_blank" rel="noopener noreferrer">#1210</a></p></li><li><p>The index no longer causes exporters to deadlock when the meta index produces false positives.
<a href="https://github.com/tenzir/tenzir/pull/1225" target="_blank" rel="noopener noreferrer">#1225</a></p></li><li><p>The summary log message of <code>vast export</code> now contains the correct number of candidate events.
<a href="https://github.com/tenzir/tenzir/pull/1228" target="_blank" rel="noopener noreferrer">#1228</a></p></li><li><p>The <code>vast status</code> command does not collect status information from sources and sinks any longer. They were often too busy to respond, leading to a long delay before the command completed.
<a href="https://github.com/tenzir/tenzir/pull/1234" target="_blank" rel="noopener noreferrer">#1234</a></p></li><li><p>Concepts that reference other concepts are now loaded correctly from their definition.
<a href="https://github.com/tenzir/tenzir/pull/1236" target="_blank" rel="noopener noreferrer">#1236</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20201029"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.10.29" target="_blank" rel="noopener noreferrer">2020.10.29</a><a href="#20201029" class="hash-link" aria-label="Direct link to 20201029" title="Direct link to 20201029">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-60">Changes<a href="#changes-60" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The new option <code>import.read-timeout</code> allows for setting an input timeout for low volume sources. Reaching the timeout causes the current batch to be forwarded immediately. This behavior was previously controlled by <code>import.batch-timeout</code>, which now only controls the maximum buffer time before the source forwards batches to the server.
<a href="https://github.com/tenzir/tenzir/pull/1096" target="_blank" rel="noopener noreferrer">#1096</a></p></li><li><p>VAST will now warn if a client command connects to a server that runs on a different version of the vast binary.
<a href="https://github.com/tenzir/tenzir/pull/1098" target="_blank" rel="noopener noreferrer">#1098</a></p></li><li><p>Log files are now less verbose because class and function names are not printed on every line.
<a href="https://github.com/tenzir/tenzir/pull/1107" target="_blank" rel="noopener noreferrer">#1107</a></p></li><li><p>The default database directory moved to <code>/var/lib/vast</code> for Linux deployments.
<a href="https://github.com/tenzir/tenzir/pull/1116" target="_blank" rel="noopener noreferrer">#1116</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-features-3">Experimental Features<a href="#experimental-features-3" class="hash-link" aria-label="Direct link to Experimental Features" title="Direct link to Experimental Features">​</a></h3><ul><li><p>The query language now comes with support for concepts, the first part of taxonomies. Concepts is a mechanism to unify the various naming schemes of different data formats into a single, coherent nomenclature.
<a href="https://github.com/tenzir/tenzir/pull/1102" target="_blank" rel="noopener noreferrer">#1102</a></p></li><li><p>A new <em>disk monitor</em> component can now monitor the database size and delete data that exceeds a specified threshold. Once VAST reaches the maximum amount of disk space, the disk monitor deletes the oldest data. The command-line options <code>--disk-quota-high</code>, <code>--disk-quota-low</code>, and <code>--disk-quota-check-interval</code> control the rotation behavior.
<a href="https://github.com/tenzir/tenzir/pull/1103" target="_blank" rel="noopener noreferrer">#1103</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-76">Features<a href="#features-76" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>When running VAST under systemd supervision, it is now possible to use the <code>Type=notify</code> directive in the unit file to let VAST notify the service manager when it becomes ready.
<a href="https://github.com/tenzir/tenzir/pull/1091" target="_blank" rel="noopener noreferrer">#1091</a></p></li><li><p>The new options <code>vast.segments</code> and <code>vast.max-segment-size</code> control how the archive generates segments.
<a href="https://github.com/tenzir/tenzir/pull/1103" target="_blank" rel="noopener noreferrer">#1103</a></p></li><li><p>The new script <code>splunk-to-vast</code> converts a splunk CIM model file in JSON to a VAST taxonomy. For example, <code>splunk-to-vast &lt; Network_Traffic.json</code> renders the concept definitions for the <em>Network Traffic</em> datamodel. The generated taxonomy does not include field definitions, which users should add separately according to their data formats.
<a href="https://github.com/tenzir/tenzir/pull/1121" target="_blank" rel="noopener noreferrer">#1121</a></p></li><li><p>The expression language now accepts records without field names. For example,<code>id == &lt;192.168.0.1, 41824, 143.51.53.13, 25, &quot;tcp&quot;&gt;</code> is now valid syntax and instantiates a record with 5 fields. Note: expressions with records currently do not execute.
<a href="https://github.com/tenzir/tenzir/pull/1129" target="_blank" rel="noopener noreferrer">#1129</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-104">Bug Fixes<a href="#bug-fixes-104" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The lookup for schema directories now happens in a fixed order.
<a href="https://github.com/tenzir/tenzir/pull/1086" target="_blank" rel="noopener noreferrer">#1086</a></p></li><li><p>Sources that receive no or very little input do not block <code>vast status</code> any longer.
<a href="https://github.com/tenzir/tenzir/pull/1096" target="_blank" rel="noopener noreferrer">#1096</a></p></li><li><p>The <code>vast status --detailed</code> command now correctly shows the status of all sources, i.e., <code>vast import</code> or <code>vast spawn source</code> commands.
<a href="https://github.com/tenzir/tenzir/pull/1109" target="_blank" rel="noopener noreferrer">#1109</a></p></li><li><p>VAST no longer opens a random public port, which used to be enabled in the experimental VAST cluster mode in order to transparently establish a full mesh.
<a href="https://github.com/tenzir/tenzir/pull/1110" target="_blank" rel="noopener noreferrer">#1110</a></p></li><li><p>The <code>lsvast</code> tool failed to print FlatBuffers schemas correctly. The output now renders correctly.
<a href="https://github.com/tenzir/tenzir/pull/1123" target="_blank" rel="noopener noreferrer">#1123</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200930"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.09.30" target="_blank" rel="noopener noreferrer">2020.09.30</a><a href="#20200930" class="hash-link" aria-label="Direct link to 20200930" title="Direct link to 20200930">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-10">Breaking Changes<a href="#breaking-changes-10" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><p>Data exported in the Apache Arrow format now contains the name of the payload record type in the metadata section of the schema.
<a href="https://github.com/tenzir/tenzir/pull/1072" target="_blank" rel="noopener noreferrer">#1072</a></p></li><li><p>The persistent storage format of the index now uses FlatBuffers.
<a href="https://github.com/tenzir/tenzir/pull/863" target="_blank" rel="noopener noreferrer">#863</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-61">Changes<a href="#changes-61" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The JSON export format now renders <code>duration</code> and <code>port</code> fields using strings as opposed to numbers. This avoids a possible loss of information and enables users to re-use the output in follow-up queries directly.
<a href="https://github.com/tenzir/tenzir/pull/1034" target="_blank" rel="noopener noreferrer">#1034</a></p></li><li><p>The delay between the periodic log messages for reporting the current event rates has been increased to 10 seconds.
<a href="https://github.com/tenzir/tenzir/pull/1035" target="_blank" rel="noopener noreferrer">#1035</a></p></li><li><p>The global VAST configuration now always resides in <code>&lt;sysconfdir&gt;/vast/vast.conf</code>, and bundled schemas always in <code>&lt;datadir&gt;/vast/schema/</code>. VAST no longer supports reading a <code>vast.conf</code> file in the current working directory.
<a href="https://github.com/tenzir/tenzir/pull/1036" target="_blank" rel="noopener noreferrer">#1036</a></p></li><li><p>The proprietary VAST configuration file has changed to the more ops-friendly industry standard YAML. This change introduced also a new dependency: <a href="https://github.com/jbeder/yaml-cpp" target="_blank" rel="noopener noreferrer">yaml-cpp</a> version 0.6.2 or greater. The top-level <code>vast.yaml.example</code> illustrates how the new YAML config looks like. Please rename existing configuration files from <code>vast.conf</code> to <code>vast.yaml</code>. VAST still reads <code>vast.conf</code> but will soon only look for <code>vast.yaml</code> or <code>vast.yml</code> files in available configuration file paths.
<a href="https://github.com/tenzir/tenzir/pull/1045" target="_blank" rel="noopener noreferrer">#1045</a>
<a href="https://github.com/tenzir/tenzir/pull/1055" target="_blank" rel="noopener noreferrer">#1055</a>
<a href="https://github.com/tenzir/tenzir/pull/1059" target="_blank" rel="noopener noreferrer">#1059</a>
<a href="https://github.com/tenzir/tenzir/pull/1062" target="_blank" rel="noopener noreferrer">#1062</a></p></li><li><p>The options that affect batches in the <code>import</code> command received new, more user-facing names: <code>import.table-slice-type</code>, <code>import.table-slice-size</code>, and <code>import.read-timeout</code> are now called <code>import.batch-encoding</code>, <code>import.batch-size</code>, and <code>import.read-timeout</code> respectively.
<a href="https://github.com/tenzir/tenzir/pull/1058" target="_blank" rel="noopener noreferrer">#1058</a></p></li><li><p>All configuration options are now grouped into <code>vast</code> and <code>caf</code> sections, depending on whether they affect VAST itself or are handed through to the underlying actor framework CAF directly. Take a look at the bundled <code>vast.yaml.example</code> file for an explanation of the new layout.
<a href="https://github.com/tenzir/tenzir/pull/1073" target="_blank" rel="noopener noreferrer">#1073</a></p></li><li><p>We refactored the index architecture to improve stability and responsiveness. This includes fixes for several shutdown issues.
<a href="https://github.com/tenzir/tenzir/pull/863" target="_blank" rel="noopener noreferrer">#863</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-features-4">Experimental Features<a href="#experimental-features-4" class="hash-link" aria-label="Direct link to Experimental Features" title="Direct link to Experimental Features">​</a></h3><ul><li>The <code>vast get</code> command has been added. It retrieves events from the database directly by their ids.
<a href="https://github.com/tenzir/tenzir/pull/938" target="_blank" rel="noopener noreferrer">#938</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-77">Features<a href="#features-77" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>VAST now supports the XDG base directory specification: The <code>vast.conf</code> is now found at <code>${XDG_CONFIG_HOME:-${HOME}/.config}/vast/vast.conf</code>, and schema files at <code>${XDG_DATA_HOME:-${HOME}/.local/share}/vast/schema/</code>. The user-specific configuration file takes precedence over the global configuration file in <code>&lt;sysconfdir&gt;/vast/vast.conf</code>.
<a href="https://github.com/tenzir/tenzir/pull/1036" target="_blank" rel="noopener noreferrer">#1036</a></p></li><li><p>VAST now merges the contents of all used configuration files instead of using only the most user-specific file. The file specified using <code>--config</code> takes the highest precedence, followed by the user-specific path <code>${XDG_CONFIG_HOME:-${HOME}/.config}/vast/vast.conf</code>, and the compile-time path <code>&lt;sysconfdir&gt;/vast/vast.conf</code>.
<a href="https://github.com/tenzir/tenzir/pull/1040" target="_blank" rel="noopener noreferrer">#1040</a></p></li><li><p>VAST now ships with a new tool <code>lsvast</code> to display information about the contents of a VAST database directory. See <code>lsvast --help</code> for usage instructions.
<a href="https://github.com/tenzir/tenzir/pull/863" target="_blank" rel="noopener noreferrer">#863</a></p></li><li><p>The output of the <code>status</code> command was restructured with a strong focus on usability. The new flags <code>--detailed</code> and <code>--debug</code> add additional content to the output.
<a href="https://github.com/tenzir/tenzir/pull/995" target="_blank" rel="noopener noreferrer">#995</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-105">Bug Fixes<a href="#bug-fixes-105" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Stalled sources that were unable to generate new events no longer stop import processes from shutting down under rare circumstances.
<a href="https://github.com/tenzir/tenzir/pull/1058" target="_blank" rel="noopener noreferrer">#1058</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200828"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.08.28" target="_blank" rel="noopener noreferrer">2020.08.28</a><a href="#20200828" class="hash-link" aria-label="Direct link to 20200828" title="Direct link to 20200828">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-11">Breaking Changes<a href="#breaking-changes-11" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li>We now bundle a patched version of CAF, with a changed ABI. This means that if you&#x27;re linking against the bundled CAF library, you also need to distribute that library so that VAST can use it at runtime. The versions are API compatible so linking against a system version of CAF is still possible and supported.
<a href="https://github.com/tenzir/tenzir/pull/1020" target="_blank" rel="noopener noreferrer">#1020</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-62">Changes<a href="#changes-62" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>set</code> type has been removed. Experience with the data model showed that there is no strong use case to separate sets from vectors in the core. While this may be useful in programming languages, VAST deals with immutable data where set constraints have been enforced upstream. This change requires updating existing schemas by changing <code>set&lt;T&gt;</code> to <code>vector&lt;T&gt;</code>. In the query language, the new symbol for the empty <code>map</code> changed from <code>{-}</code> to <code>{}</code>, as it now unambiguously identifies <code>map</code> instances.
<a href="https://github.com/tenzir/tenzir/pull/1010" target="_blank" rel="noopener noreferrer">#1010</a></p></li><li><p>The <code>vector</code> type has been renamed to <code>list</code>. In an effort to streamline the type system vocabulary, we favor <code>list</code> over <code>vector</code> because it&#x27;s closer to existing terminology (e.g., Apache Arrow). This change requires updating existing schemas by changing <code>vector&lt;T&gt;</code> to <code>list&lt;T&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/1016" target="_blank" rel="noopener noreferrer">#1016</a></p></li><li><p>The expression field parser now allows the &#x27;-&#x27; character.
<a href="https://github.com/tenzir/tenzir/pull/999" target="_blank" rel="noopener noreferrer">#999</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-78">Features<a href="#features-78" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>VAST now writes a PID lock file on startup to prevent multiple server processes from accessing the same persistent state. The <code>pid.lock</code> file resides in the <code>vast.db</code> directory.
<a href="https://github.com/tenzir/tenzir/pull/1001" target="_blank" rel="noopener noreferrer">#1001</a></p></li><li><p>The default schema for Suricata has been updated to support the <code>suricata.ftp</code> and <code>suricata.ftp_data</code> event types.
<a href="https://github.com/tenzir/tenzir/pull/1009" target="_blank" rel="noopener noreferrer">#1009</a></p></li><li><p>VAST now prints the location of the configuration file that is used.
<a href="https://github.com/tenzir/tenzir/pull/1009" target="_blank" rel="noopener noreferrer">#1009</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-106">Bug Fixes<a href="#bug-fixes-106" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The shutdown process of the server process could potentially hang forever. VAST now uses a 2-step procedure that first attempts to terminate all components cleanly. If that fails, it will attempt a hard kill afterwards, and if that fails after another timeout, the process will call <code>abort(3)</code>.
<a href="https://github.com/tenzir/tenzir/pull/1005" target="_blank" rel="noopener noreferrer">#1005</a></p></li><li><p>When continuous query in a client process terminated, the node did not clean up the corresponding server-side state. This memory leak no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/1006" target="_blank" rel="noopener noreferrer">#1006</a></p></li><li><p>The port encoding for Arrow-encoded table slices is now host-independent and  always uses network-byte order.
<a href="https://github.com/tenzir/tenzir/pull/1007" target="_blank" rel="noopener noreferrer">#1007</a></p></li><li><p>Importing JSON no longer fails for JSON fields containing <code>null</code> when the corresponding VAST type in the schema is a non-trivial type like <code>vector&lt;string&gt;</code>.
<a href="https://github.com/tenzir/tenzir/pull/1009" target="_blank" rel="noopener noreferrer">#1009</a></p></li><li><p>Some file descriptors remained open when they weren&#x27;t needed any more. This descriptor leak has been fixed.
<a href="https://github.com/tenzir/tenzir/pull/1018" target="_blank" rel="noopener noreferrer">#1018</a></p></li><li><p>When running VAST under heavy load, CAF stream slot ids could wrap around after a few days and deadlock the system. As a workaround, we extended the slot id bit width to make the time until this happens unrealistically large.
<a href="https://github.com/tenzir/tenzir/pull/1020" target="_blank" rel="noopener noreferrer">#1020</a></p></li><li><p>Incomplete reads have not been handled properly, which manifested for files larger than 2GB. On macOS, writing files larger than 2GB may have failed previously. VAST now respects OS-specific constraints on the maximum block size.
<a href="https://github.com/tenzir/tenzir/pull/1025" target="_blank" rel="noopener noreferrer">#1025</a></p></li><li><p>VAST would overwrite existing on-disk state data when encountering a partial read during startup. This state-corrupting behavior no longer exists.
<a href="https://github.com/tenzir/tenzir/pull/1026" target="_blank" rel="noopener noreferrer">#1026</a></p></li><li><p>VAST did not terminate when a critical component failed during startup. VAST now binds the lifetime of the node to all critical components.
<a href="https://github.com/tenzir/tenzir/pull/1028" target="_blank" rel="noopener noreferrer">#1028</a></p></li><li><p>MessagePack-encoded table slices now work correctly for nested container types.
<a href="https://github.com/tenzir/tenzir/pull/984" target="_blank" rel="noopener noreferrer">#984</a></p></li><li><p>A bug in the expression parser prevented the correct parsing of fields starting with either &#x27;F&#x27; or &#x27;T&#x27;.
<a href="https://github.com/tenzir/tenzir/pull/999" target="_blank" rel="noopener noreferrer">#999</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200728"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.07.28" target="_blank" rel="noopener noreferrer">2020.07.28</a><a href="#20200728" class="hash-link" aria-label="Direct link to 20200728" title="Direct link to 20200728">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-changes-12">Breaking Changes<a href="#breaking-changes-12" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">​</a></h3><ul><li><a href="https://google.github.io/flatbuffers/" target="_blank" rel="noopener noreferrer">FlatBuffers</a> is now a required  dependency for VAST. The archive and the segment store use FlatBuffers to store  and version their on-disk persistent state.
<a href="https://github.com/tenzir/tenzir/pull/972" target="_blank" rel="noopener noreferrer">#972</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-63">Changes<a href="#changes-63" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The suricata schema file contains new type definitions for the stats, krb5, smb, and ssh events.
<a href="https://github.com/tenzir/tenzir/pull/954" target="_blank" rel="noopener noreferrer">#954</a>
<a href="https://github.com/tenzir/tenzir/pull/986" target="_blank" rel="noopener noreferrer">#986</a></p></li><li><p>VAST now recognizes <code>/etc/vast/schema</code> as an additional default directory for schema files.
<a href="https://github.com/tenzir/tenzir/pull/980" target="_blank" rel="noopener noreferrer">#980</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-79">Features<a href="#features-79" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>Starting with this release, installing VAST on any Linux becomes significantly easier: A static binary will be provided with each release on the GitHub releases page.
<a href="https://github.com/tenzir/tenzir/pull/966" target="_blank" rel="noopener noreferrer">#966</a></p></li><li><p>We open-sourced our <a href="http://msgpack.org" target="_blank" rel="noopener noreferrer">MessagePack</a>-based table slice implementation, which provides a compact row-oriented encoding of data. This encoding works well for binary formats (e.g., PCAP) and access patterns that involve materializing entire rows. The MessagePack table slice is the new default when Apache Arrow is unavailable. To enable parsing into MessagePack, you can pass <code>--table-slice-type=msgpack</code> to the <code>import</code> command, or set the configuration option <code>import.table-slice-type</code> to <code>&#x27;msgpack&#x27;</code>.
<a href="https://github.com/tenzir/tenzir/pull/975" target="_blank" rel="noopener noreferrer">#975</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-107">Bug Fixes<a href="#bug-fixes-107" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>The PCAP reader now correctly shows the amount of generated events.
<a href="https://github.com/tenzir/tenzir/pull/954" target="_blank" rel="noopener noreferrer">#954</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200625"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.06.25" target="_blank" rel="noopener noreferrer">2020.06.25</a><a href="#20200625" class="hash-link" aria-label="Direct link to 20200625" title="Direct link to 20200625">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-64">Changes<a href="#changes-64" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The options <code>system.table-slice-type</code> and <code>system.table-slice-size</code> have been removed, as they duplicated <code>import.table-slice-type</code> and <code>import.table-slice-size</code> respectively.
<a href="https://github.com/tenzir/tenzir/pull/908" target="_blank" rel="noopener noreferrer">#908</a>
<a href="https://github.com/tenzir/tenzir/pull/951" target="_blank" rel="noopener noreferrer">#951</a></p></li><li><p>The JSON export format now renders timestamps using strings instead of numbers in order to avoid possible loss of precision.
<a href="https://github.com/tenzir/tenzir/pull/909" target="_blank" rel="noopener noreferrer">#909</a></p></li><li><p>The <code>default</code> table slice type has been renamed to <code>caf</code>. It has not been the default when built with Apache Arrow support for a while now, and the new name more accurately reflects what it is doing.
<a href="https://github.com/tenzir/tenzir/pull/948" target="_blank" rel="noopener noreferrer">#948</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-features-5">Experimental Features<a href="#experimental-features-5" class="hash-link" aria-label="Direct link to Experimental Features" title="Direct link to Experimental Features">​</a></h3><ul><li>VAST now supports aging out existing data. This feature currently only concerns data in the archive. The options <code>system.aging-frequency</code> and <code>system.aging-query</code> configure a query that runs on a regular schedule to determine which events to delete. It is also possible to trigger an aging cycle manually.
<a href="https://github.com/tenzir/tenzir/pull/929" target="_blank" rel="noopener noreferrer">#929</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-80">Features<a href="#features-80" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>VAST now has options to limit the amount of results produced by an invocation of <code>vast explore</code>.
<a href="https://github.com/tenzir/tenzir/pull/882" target="_blank" rel="noopener noreferrer">#882</a></p></li><li><p>The <code>import json</code> command&#x27;s type restrictions are more relaxed now, and can additionally convert from JSON strings to VAST internal data types.
<a href="https://github.com/tenzir/tenzir/pull/891" target="_blank" rel="noopener noreferrer">#891</a></p></li><li><p>VAST now supports <code>/etc/vast/vast.conf</code> as an additional fallback for the configuration file. The following file locations are looked at in order: Path specified on the command line via <code>--config=path/to/vast.conf</code>, <code>vast.conf</code> in current working directory, <code>${INSTALL_PREFIX}/etc/vast/vast.conf</code>, and <code>/etc/vast/vast.conf</code>.
<a href="https://github.com/tenzir/tenzir/pull/898" target="_blank" rel="noopener noreferrer">#898</a></p></li><li><p>The <code>import</code> command gained a new <code>--read-timeout</code> option that forces data to be forwarded to the importer regardless of the internal batching parameters and table slices being unfinished. This allows for reducing the latency between the <code>import</code> command and the node. The default timeout is 10 seconds.
<a href="https://github.com/tenzir/tenzir/pull/916" target="_blank" rel="noopener noreferrer">#916</a></p></li><li><p>The output format for the <code>explore</code> and <code>pivot</code> commands can now be set using the <code>explore.format</code> and <code>pivot.format</code> options respectively. Both default to JSON.
<a href="https://github.com/tenzir/tenzir/pull/921" target="_blank" rel="noopener noreferrer">#921</a></p></li><li><p>The meta index now uses Bloom filters for equality queries involving IP addresses. This especially accelerates queries where the user wants to know whether a certain IP address exists in the entire database.
<a href="https://github.com/tenzir/tenzir/pull/931" target="_blank" rel="noopener noreferrer">#931</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-108">Bug Fixes<a href="#bug-fixes-108" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>A use after free bug would sometimes crash the node while it was shutting down.
<a href="https://github.com/tenzir/tenzir/pull/896" target="_blank" rel="noopener noreferrer">#896</a></p></li><li><p>A bogus import process that assembled table slices with a greater number of events than expected by the node was able to lead to wrong query results.
<a href="https://github.com/tenzir/tenzir/pull/908" target="_blank" rel="noopener noreferrer">#908</a></p></li><li><p>The <code>export json</code> command now correctly unescapes its output.
<a href="https://github.com/tenzir/tenzir/pull/910" target="_blank" rel="noopener noreferrer">#910</a></p></li><li><p>VAST now correctly checks for control characters in inputs.
<a href="https://github.com/tenzir/tenzir/pull/910" target="_blank" rel="noopener noreferrer">#910</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200528"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.05.28" target="_blank" rel="noopener noreferrer">2020.05.28</a><a href="#20200528" class="hash-link" aria-label="Direct link to 20200528" title="Direct link to 20200528">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-65">Changes<a href="#changes-65" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The command line flag for disabling the accountant has been renamed to <code>--disable-metrics</code> to more accurately reflect its intended purpose. The internal <code>vast.statistics</code> event has been renamed to <code>vast.metrics</code>.
<a href="https://github.com/tenzir/tenzir/pull/870" target="_blank" rel="noopener noreferrer">#870</a></p></li><li><p>Spreading a query over multiple command line arguments in commands like explore/export/pivot/etc. has been deprecated.
<a href="https://github.com/tenzir/tenzir/pull/878" target="_blank" rel="noopener noreferrer">#878</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-features-6">Experimental Features<a href="#experimental-features-6" class="hash-link" aria-label="Direct link to Experimental Features" title="Direct link to Experimental Features">​</a></h3><ul><li>Added a new <code>explore</code> command to VAST that can be used to show data records within a certain time from the results of a query.
<a href="https://github.com/tenzir/tenzir/pull/873" target="_blank" rel="noopener noreferrer">#873</a><a href="https://github.com/tenzir/tenzir/pull/877" target="_blank" rel="noopener noreferrer">#877</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-81">Features<a href="#features-81" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>All input parsers now support mixed <code>\n</code> and <code>\r\n</code> line endings.
<a href="https://github.com/tenzir/tenzir/pull/865" target="_blank" rel="noopener noreferrer">#865</a></p></li><li><p>When importing events of a new or updated type, VAST now only requires the type to be specified once (e.g., in a schema file). For consecutive imports, the event type does not need to be specified again. A list of registered types can now be viewed using <code>vast status</code> under the key <code>node.type-registry.types</code>.
<a href="https://github.com/tenzir/tenzir/pull/875" target="_blank" rel="noopener noreferrer">#875</a></p></li><li><p>When importing JSON data without knowing the type of the imported events a priori, VAST now supports automatic event type deduction based on the JSON object keys in the data. VAST selects a type <em>iff</em> the set of fields match a known type. The <code>--type</code> / <code>-t</code> option to the <code>import</code> command restricts the matching to the set of types that share the provided prefix. Omitting <code>-t</code> attempts to match JSON against all known types. If only a single variant of a type is matched, the import falls back to the old behavior and fills in <code>nil</code> for mismatched keys.
<a href="https://github.com/tenzir/tenzir/pull/875" target="_blank" rel="noopener noreferrer">#875</a></p></li><li><p>VAST now prints a message when it is waiting for user input to read a query from a terminal.
<a href="https://github.com/tenzir/tenzir/pull/878" target="_blank" rel="noopener noreferrer">#878</a></p></li><li><p>VAST now ships with a schema suitable for Sysmon import.
<a href="https://github.com/tenzir/tenzir/pull/886" target="_blank" rel="noopener noreferrer">#886</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-109">Bug Fixes<a href="#bug-fixes-109" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The parser for Zeek tsv data used to ignore attributes that were defined for the Zeek-specific types in the schema files. It has been modified to respect and prefer the specified attributes for the fields that are present in the input data.
<a href="https://github.com/tenzir/tenzir/pull/847" target="_blank" rel="noopener noreferrer">#847</a></p></li><li><p>Fixed a bug that caused <code>vast import</code> processes to produce <code>&#x27;default&#x27;</code> table slices, despite having the <code>&#x27;arrow&#x27;</code> type as the default.
<a href="https://github.com/tenzir/tenzir/pull/866" target="_blank" rel="noopener noreferrer">#866</a></p></li><li><p>Fixed a bug where setting the <code>logger.file-verbosity</code> in the config file would not have an effect.
<a href="https://github.com/tenzir/tenzir/pull/866" target="_blank" rel="noopener noreferrer">#866</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200429"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.04.29" target="_blank" rel="noopener noreferrer">2020.04.29</a><a href="#20200429" class="hash-link" aria-label="Direct link to 20200429" title="Direct link to 20200429">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-66">Changes<a href="#changes-66" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The index specific options <code>max-partition-size</code>, <code>max-resident-partitions</code>, <code>max-taste-partitions</code>, and <code>max-queries</code> can now be specified on the command line when starting a node.
<a href="https://github.com/tenzir/tenzir/pull/728" target="_blank" rel="noopener noreferrer">#728</a></p></li><li><p>The default bind address has been changed from <code>::</code> to <code>localhost</code>.
<a href="https://github.com/tenzir/tenzir/pull/828" target="_blank" rel="noopener noreferrer">#828</a></p></li><li><p>The option <code>--skip-candidate-checks</code> / <code>-s</code> for the <code>count</code> command was renamed to <code>--estimate</code> / <code>-e</code>.
<a href="https://github.com/tenzir/tenzir/pull/843" target="_blank" rel="noopener noreferrer">#843</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-82">Features<a href="#features-82" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>Packet drop and discard statistics are now reported to the accountant for PCAP import, and are available using the keys <code>pcap-reader.recv</code>, <code>pcap-reader.drop</code>, <code>pcap-reader.ifdrop</code>, <code>pcap-reader.discard</code>, and <code>pcap-reader.discard-rate</code> in the <code>vast.statistics</code> event. If the number of dropped packets exceeds a configurable threshold, VAST additionally warns about packet drops on the command line.
<a href="https://github.com/tenzir/tenzir/pull/827" target="_blank" rel="noopener noreferrer">#827</a>
<a href="https://github.com/tenzir/tenzir/pull/844" target="_blank" rel="noopener noreferrer">#844</a></p></li><li><p>Bash autocompletion for <code>vast</code> is now available via the autocomplete script located at <code>scripts/vast-completions.bash</code> in the VAST source tree.
<a href="https://github.com/tenzir/tenzir/pull/833" target="_blank" rel="noopener noreferrer">#833</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-110">Bug Fixes<a href="#bug-fixes-110" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>Archive lookups are now interruptible. This change fixes an issue that caused consecutive exports to slow down the node, which improves the overall performance for larger databases considerably.
<a href="https://github.com/tenzir/tenzir/pull/825" target="_blank" rel="noopener noreferrer">#825</a></p></li><li><p>Fixed a crash when importing data while a continuous export was running for unrelated events.
<a href="https://github.com/tenzir/tenzir/pull/830" target="_blank" rel="noopener noreferrer">#830</a></p></li><li><p>Queries of the form <code>x != 80/tcp</code> were falsely evaluated as <code>x != 80/? &amp;&amp; x != ?/tcp</code>. (The syntax in the second predicate does not yet exist; it only illustrates the bug.) Port inequality queries now correctly evaluate <code>x != 80/? || x != ?/tcp</code>. E.g., the result now contains values like <code>80/udp</code> and <code>80/?</code>, but also <code>8080/tcp</code>.
<a href="https://github.com/tenzir/tenzir/pull/834" target="_blank" rel="noopener noreferrer">#834</a></p></li><li><p>Fixed a bug that could cause stalled input streams not to forward events to the index and archive components for the JSON, CSV, and Syslog readers, when the input stopped arriving but no EOF was sent. This is a follow-up to <a href="https://github.com/tenzir/vast/pull/750" target="_blank" rel="noopener noreferrer">#750</a>. A timeout now ensures that that the readers continue when some events were already handled, but the input appears to be stalled.
<a href="https://github.com/tenzir/tenzir/pull/835" target="_blank" rel="noopener noreferrer">#835</a></p></li><li><p>For some queries, the index evaluated only a subset of all relevant partitions in a non-deterministic manner. Fixing a violated evaluation invariant now guarantees deterministic execution.
<a href="https://github.com/tenzir/tenzir/pull/842" target="_blank" rel="noopener noreferrer">#842</a></p></li><li><p>The <code>stop</code> command always returned immediately, regardless of whether it succeeded. It now blocks until the remote node shut down properly or returns an error exit code upon failure.
<a href="https://github.com/tenzir/tenzir/pull/849" target="_blank" rel="noopener noreferrer">#849</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200326"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.03.26" target="_blank" rel="noopener noreferrer">2020.03.26</a><a href="#20200326" class="hash-link" aria-label="Direct link to 20200326" title="Direct link to 20200326">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-67">Changes<a href="#changes-67" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The VERBOSE log level has been added between INFO and DEBUG. This level is enabled at build time for all build types, making it possible to get more detailed logging output from release builds.
<a href="https://github.com/tenzir/tenzir/pull/787" target="_blank" rel="noopener noreferrer">#787</a></p></li><li><p>The internal statistics event type <code>vast.account</code> has been renamed to <code>vast.statistics</code> for clarity.
<a href="https://github.com/tenzir/tenzir/pull/789" target="_blank" rel="noopener noreferrer">#789</a></p></li><li><p>The command line options prefix for changing CAF options was changed from <code>--caf#</code> to <code>--caf.</code>.
<a href="https://github.com/tenzir/tenzir/pull/797" target="_blank" rel="noopener noreferrer">#797</a></p></li><li><p>The log folder <code>vast.log/</code> in the current directory will not be created by  default any more. Users must explicitly set the <code>system.file-verbosity</code> option  if they wish to keep the old behavior.
<a href="https://github.com/tenzir/tenzir/pull/803" target="_blank" rel="noopener noreferrer">#803</a></p></li><li><p>The config option <code>system.log-directory</code> was deprecated and replaced by the new  option <code>system.log-file</code>. All logs will now be written to a single file.
<a href="https://github.com/tenzir/tenzir/pull/806" target="_blank" rel="noopener noreferrer">#806</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-83">Features<a href="#features-83" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The new <code>vast import syslog</code> command allows importing Syslog messages as defined in <a href="https://tools.ietf.org/html/rfc5424" target="_blank" rel="noopener noreferrer">RFC5424</a>.
<a href="https://github.com/tenzir/tenzir/pull/770" target="_blank" rel="noopener noreferrer">#770</a></p></li><li><p>The option <code>--disable-community-id</code> has been added to the <code>vast import pcap</code> command for disabling the automatic computation of Community IDs.
<a href="https://github.com/tenzir/tenzir/pull/777" target="_blank" rel="noopener noreferrer">#777</a></p></li><li><p>Continuous export processes can now be stopped correctly. Before this change, the node showed an error message and the exporting process exited with a non-zero exit code.
<a href="https://github.com/tenzir/tenzir/pull/779" target="_blank" rel="noopener noreferrer">#779</a></p></li><li><p>The short option <code>-c</code> for setting the configuration file has been removed. The long option <code>--config</code> must now be used instead. This fixed a bug that did not allow for <code>-c</code> to be used for continuous exports.
<a href="https://github.com/tenzir/tenzir/pull/781" target="_blank" rel="noopener noreferrer">#781</a></p></li><li><p>Expressions must now be parsed to the end of input. This fixes a bug that caused malformed queries to be evaluated until the parser failed. For example, the query <code>#type == &quot;suricata.http&quot; &amp;&amp; .dest_port == 80</code> was erroneously evaluated as <code>#type == &quot;suricata.http&quot;</code> instead.
<a href="https://github.com/tenzir/tenzir/pull/791" target="_blank" rel="noopener noreferrer">#791</a></p></li><li><p>The hash index has been re-enabled after it was outfitted with a new <a href="https://github.com/Tessil/robin-map/" target="_blank" rel="noopener noreferrer">high-performance hash map</a> implementation that increased performance to the point where it is on par with the regular index.
<a href="https://github.com/tenzir/tenzir/pull/796" target="_blank" rel="noopener noreferrer">#796</a></p></li><li><p>An under-the-hood change to our parser-combinator framework makes sure that we do not discard possibly invalid input data up the the end of input. This uncovered a bug in our MRT/bgpdump integrations, which have thus been disabled (for now), and will be fixed at a later point in time.
<a href="https://github.com/tenzir/tenzir/pull/808" target="_blank" rel="noopener noreferrer">#808</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200227"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.02.27" target="_blank" rel="noopener noreferrer">2020.02.27</a><a href="#20200227" class="hash-link" aria-label="Direct link to 20200227" title="Direct link to 20200227">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-68">Changes<a href="#changes-68" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The build system will from now on try use the CAF library from the system, if one is provided. If it is not found, the CAF submodule will be used as a fallback.
<a href="https://github.com/tenzir/tenzir/pull/740" target="_blank" rel="noopener noreferrer">#740</a></p></li><li><p>VAST now supports (and requires) Apache Arrow &gt;= 0.16.
<a href="https://github.com/tenzir/tenzir/pull/751" target="_blank" rel="noopener noreferrer">#751</a></p></li><li><p>The option <code>--historical</code> for export commands has been removed, as it was the  default already.
<a href="https://github.com/tenzir/tenzir/pull/754" target="_blank" rel="noopener noreferrer">#754</a></p></li><li><p>The option <code>--directory</code> has been replaced by <code>--db-directory</code> and <code>log-directory</code>, which set directories for persistent state and log files respectively. The default log file path has changed from <code>vast.db/log</code> to <code>vast.log</code>.
<a href="https://github.com/tenzir/tenzir/pull/758" target="_blank" rel="noopener noreferrer">#758</a></p></li><li><p>Hash indices have been disabled again due to a performance regression.
<a href="https://github.com/tenzir/tenzir/pull/765" target="_blank" rel="noopener noreferrer">#765</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-84">Features<a href="#features-84" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li>For users of the <a href="https://nixos.org/nix/" target="_blank" rel="noopener noreferrer">Nix</a> package manager, expressions have been added to generate reproducible development environments with <code>nix-shell</code>.
<a href="https://github.com/tenzir/tenzir/pull/740" target="_blank" rel="noopener noreferrer">#740</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-111">Bug Fixes<a href="#bug-fixes-111" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li>Continuously importing events from a Zeek process with a low rate of emitted events resulted in a long delay until the data would be included in the result set of queries. This is because the import process would buffer up to 10,000 events before sending them to the server as a batch. The algorithm has been tuned to flush its buffers if no data is available for more than 500 milliseconds.
<a href="https://github.com/tenzir/tenzir/pull/750" target="_blank" rel="noopener noreferrer">#750</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="20200131"><a href="https://github.com/tenzir/tenzir/releases/tag/2020.01.31" target="_blank" rel="noopener noreferrer">2020.01.31</a><a href="#20200131" class="hash-link" aria-label="Direct link to 20200131" title="Direct link to 20200131">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-69">Changes<a href="#changes-69" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The <code>import pcap</code> command no longer takes interface names via <code>--read,-r</code>, but instead from a separate option named <code>--interface,-i</code>. This change has been made for consistency with other tools.
<a href="https://github.com/tenzir/tenzir/pull/641" target="_blank" rel="noopener noreferrer">#641</a></p></li><li><p>Record field names can now be entered as quoted strings in the schema and expression languages. This lifts a restriction where JSON fields with whitespaces or special characters could not be ingested.
<a href="https://github.com/tenzir/tenzir/pull/685" target="_blank" rel="noopener noreferrer">#685</a></p></li><li><p>Build configuration defaults have been adapated for a better user experience. Installations are now relocatable by default, which can be reverted by configuring with <code>--without-relocatable</code>. Additionally, new sets of defaults named <code>--release</code> and <code>--debug</code> (renamed from <code>--dev-mode</code>) have been added.
<a href="https://github.com/tenzir/tenzir/pull/695" target="_blank" rel="noopener noreferrer">#695</a></p></li><li><p>Two minor modifications were done in the parsing framework: (i) the parsers for enums and records now allow trailing separators, and (ii) the dash (<code>-</code>) was removed from the allowed characters of schema type names.
<a href="https://github.com/tenzir/tenzir/pull/706" target="_blank" rel="noopener noreferrer">#706</a></p></li><li><p>VAST is switching to a calendar-based versioning scheme starting with this release.
<a href="https://github.com/tenzir/tenzir/pull/739" target="_blank" rel="noopener noreferrer">#739</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-85">Features<a href="#features-85" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>When a record field has the <code>#index=hash</code> attribute, VAST will choose an optimized index implementation. This new index type only supports (in)equality queries and is therefore intended to be used with opaque types, such as unique identifiers or random strings.
<a href="https://github.com/tenzir/tenzir/pull/632" target="_blank" rel="noopener noreferrer">#632</a>
<a href="https://github.com/tenzir/tenzir/pull/726" target="_blank" rel="noopener noreferrer">#726</a></p></li><li><p>Added <em>Apache Arrow</em> as new export format. This allows users to export query results as Apache Arrow record batches for processing the results downstream, e.g., in Python or Spark.
<a href="https://github.com/tenzir/tenzir/pull/633" target="_blank" rel="noopener noreferrer">#633</a></p></li><li><p>The <code>import pcap</code> command now takes an optional snapshot length via <code>--snaplen</code>. If the snapshot length is set to snaplen, and snaplen is less than the size of a packet that is captured, only the first snaplen bytes of that packet will be captured and provided as packet data.
<a href="https://github.com/tenzir/tenzir/pull/642" target="_blank" rel="noopener noreferrer">#642</a></p></li><li><p>An experimental new Python module enables querying VAST and processing results as <a href="https://arrow.apache.org/docs/python/" target="_blank" rel="noopener noreferrer">pyarrow</a> tables.
<a href="https://github.com/tenzir/tenzir/pull/685" target="_blank" rel="noopener noreferrer">#685</a></p></li><li><p>The long option <code>--config</code>, which sets an explicit path to the VAST configuration file, now also has the short option <code>-c</code>.
<a href="https://github.com/tenzir/tenzir/pull/689" target="_blank" rel="noopener noreferrer">#689</a></p></li><li><p>On FreeBSD, a VAST installation now includes an rc.d script that simpliefies spinning up a VAST node. CMake installs the script at <code>PREFIX/etc/rc.d/vast</code>.
<a href="https://github.com/tenzir/tenzir/pull/693" target="_blank" rel="noopener noreferrer">#693</a></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-112">Bug Fixes<a href="#bug-fixes-112" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>In some cases it was possible that a source would connect to a node before it was fully initialized, resulting in a hanging <code>vast import</code> process.
<a href="https://github.com/tenzir/tenzir/pull/647" target="_blank" rel="noopener noreferrer">#647</a></p></li><li><p>PCAP ingestion failed for traces containing VLAN tags. VAST now strips <a href="https://en.wikipedia.org/wiki/IEEE_802.1Q" target="_blank" rel="noopener noreferrer">IEEE 802.1Q</a> headers instead of skipping VLAN-tagged packets.
<a href="https://github.com/tenzir/tenzir/pull/650" target="_blank" rel="noopener noreferrer">#650</a></p></li><li><p>Importing events over UDP with <code>vast import &lt;format&gt; --listen :&lt;port&gt;/udp</code> failed to register the accountant component. This caused an unexpected message warning to be printed on startup and resulted in losing import statistics. VAST now correctly registers the accountant.
<a href="https://github.com/tenzir/tenzir/pull/655" target="_blank" rel="noopener noreferrer">#655</a></p></li><li><p>The import process did not print statistics when importing events over UDP. Additionally, warnings about dropped UDP packets are no longer shown per packet, but rather periodically reported in a readable format.
<a href="https://github.com/tenzir/tenzir/pull/662" target="_blank" rel="noopener noreferrer">#662</a></p></li><li><p>A bug in the quoted string parser caused a parsing failure if an escape character occurred in the last position.
<a href="https://github.com/tenzir/tenzir/pull/685" target="_blank" rel="noopener noreferrer">#685</a></p></li><li><p>A race condition in the index logic was able to lead to incomplete or empty result sets for <code>vast export</code>.
<a href="https://github.com/tenzir/tenzir/pull/703" target="_blank" rel="noopener noreferrer">#703</a></p></li><li><p>The example configuration file contained an invalid section <code>vast</code>. This has been changed to the correct name <code>system</code>.
<a href="https://github.com/tenzir/tenzir/pull/705" target="_blank" rel="noopener noreferrer">#705</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="02---20191030"><a href="https://github.com/tenzir/vast/releases/tag/0.2" target="_blank" rel="noopener noreferrer">0.2</a> - 2019.10.30<a href="#02---20191030" class="hash-link" aria-label="Direct link to 02---20191030" title="Direct link to 02---20191030">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-70">Changes<a href="#changes-70" class="hash-link" aria-label="Direct link to Changes" title="Direct link to Changes">​</a></h3><ul><li><p>The query language has been extended to support expression of the form <code>X == /pattern/</code>, where <code>X</code> is a compatible LHS extractor. Previously, patterns only supports the match operator <code>~</code>. The two operators have the same semantics when one operand is a pattern.</p></li><li><p>CAF and Broker are no longer required to be installed prior to building VAST. These dependencies are now tracked as git submodules to ensure version compatibility. Specifying a custom build is still possible via the CMake variables <code>CAF_ROOT_DIR</code> and <code>BROKER_ROOT_DIR</code>.</p></li><li><p>When exporting data in <code>pcap</code> format, it is no longer necessary to manually restrict the query by adding the predicate <code>#type == &quot;pcap.packet&quot;</code> to the expression. This now happens automatically because only this type contains the raw packet data.</p></li><li><p>When defining schema attributes in key-value pair form, the value no longer requires double-quotes. For example, <code>#foo=x</code> is now the same as <code>#foo=&quot;x&quot;</code>. The form without double-quotes consumes the input until the next space and does not support escaping. In case an attribute value contains whitespace, double-quotes must be provided, e.g., <code>#foo=&quot;x y z&quot;</code>.</p></li><li><p>The PCAP packet type gained the additional field <code>community_id</code> that contains the <a href="https://github.com/corelight/community-id-spec" target="_blank" rel="noopener noreferrer">Community ID</a> flow hash. This identifier facilitates pivoting to a specific flow from data sources with connnection-level information, such Zeek or Suricata logs.</p></li><li><p>Log files generally have some notion of timestamp for recorded events. To make the query language more intuitive, the syntax for querying time points thus changed from <code>#time</code> to <code>#timestamp</code>. For example, <code>#time &gt; 2019-07-02+12:00:00</code> now reads <code>#timestamp &gt; 2019-07-02+12:00:00</code>.</p></li><li><p>Default schema definitions for certain <code>import</code> formats changed from hard-coded to runtime-evaluated. The default location of the schema definition files is <code>$(dirname vast-executable)</code>/../share/vast/schema. Currently this is used for the Suricata JSON log reader.</p></li><li><p>The default directory name for persistent state changed from <code>vast</code> to <code>vast.db</code>. This makes it possible to run <code>./vast</code> in the current directory without having to specify a different state directory on the command line.</p></li><li><p>Nested types are from now on accessed by the <code>.</code>-syntax. This means VAST now has a unified syntax to select nested types and fields. For example, what used to be <code>zeek::http</code> is now just <code>zeek.http</code>.</p></li><li><p>The (internal) option <code>--node</code> for the <code>import</code> and <code>export</code> commands has been renamed from <code>-n</code> to <code>-N</code>, to allow usage of <code>-n</code> for <code>--max-events</code>.</p></li><li><p>To make the export option to limit the number of events to be exported more idiomatic, it has been renamed from <code>--events,e</code> to <code>--max-events,n</code>. Now <code>vast export -n 42</code> generates at most 42 events.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="features-86">Features<a href="#features-86" class="hash-link" aria-label="Direct link to Features" title="Direct link to Features">​</a></h3><ul><li><p>The default schema for Suricata has been updated to support the new <code>suricata.smtp</code> event type in Suricata 5.</p></li><li><p>The <code>export null</code> command retrieves data, but never prints anything. Its main purpose is to make benchmarking VAST easier and faster.</p></li><li><p>The new <code>pivot</code> command retrieves data of a related type. It inspects each event in a query result to find an event of the requested type. If a common field exists in the schema definition of the requested type, VAST will dynamically create a new query to fetch the contextual data according to the type relationship. For example, if two records <code>T</code> and <code>U</code> share the same field <code>x</code>, and the user requests to pivot via <code>T.x == 42</code>, then VAST will fetch all data for <code>U.x == 42</code>. An example use case would be to pivot from a Zeek or Suricata log entry to the corresponding PCAP packets. VAST uses the field <code>community_id</code> to pivot between the logs and the packets. Pivoting is currently implemented for Suricata, Zeek (with <a href="https://github.com/corelight/bro-community-id" target="_blank" rel="noopener noreferrer">community ID computation</a> enabled), and PCAP.</p></li><li><p>The new <code>infer</code> command performs schema inference of input data. The command can deduce the input format and creates a schema definition that is sutable to use with the supplied data. Supported input types include Zeek TSV and JSONLD.</p></li><li><p>The newly added <code>count</code> comman allows counting hits for a query without exporting data.</p></li><li><p>Commands now support a <code>--documentation</code> option, which returns Markdown-formatted documentation text.</p></li><li><p>A new schema for Argus CSV output has been added. It parses the output of <code>ra(1)</code>, which produces CSV output when invoked with <code>-L 0 -c ,</code>.</p></li><li><p>The schema language now supports comments. A double-slash (<code>//</code>) begins a comment. Comments last until the end of the line, i.e., until a newline character (<code>\n</code>).</p></li><li><p>The <code>import</code> command now supports CSV formatted data. The type for each column is automatically derived by matching the column names from the CSV header in the input with the available types from the schema definitions.</p></li><li><p>Configuring how much status information gets printed to STDERR previously required obscure config settings. From now on, users can simply use <code>--verbosity=&lt;level&gt;,-v &lt;level&gt;</code>, where <code>&lt;level&gt;</code> is one of <code>quiet</code>, <code>error</code>, <code>warn</code>, <code>info</code>, <code>debug</code>, or <code>trace</code>. However, <code>debug</code> and <code>trace</code> are only available for debug builds (otherwise they fall back to log level <code>info</code>).</p></li><li><p>The query expression language now supports <em>data predicates</em>, which are a shorthand for a type extractor in combination with an equality operator. For example, the data predicate <code>6.6.6.6</code> is the same as <code>:addr == 6.6.6.6</code>.</p></li><li><p>The <code>index</code> object in the output from <code>vast status</code> has a new field <code>statistics</code> for a high-level summary of the indexed data. Currently, there exists a nested <code>layouts</code> objects with per-layout statistics about the number of events indexed.</p></li><li><p>The <code>accountant</code> object in the output from <code>vast status</code> has a new field <code>log-file</code> that points to the filesystem path of the accountant log file.</p></li><li><p>Data extractors in the query language can now contain a type prefix. This enables an easier way to extract data from a specific type. For example, a query to look for Zeek conn log entries with responder IP address 1.2.3.4 had to be written with two terms, <code>#type == zeek.conn &amp;&amp; id.resp_h == 1.2.3.4</code>, because the nested id record can occur in other types as well. Such queries can now written more tersely as <code>zeek.conn.id.resp_h == 1.2.3.4</code>.</p></li><li><p>VAST gained support for importing Suricata JSON logs. The import command has a new suricata format that can ingest EVE JSON output.</p></li><li><p>The data parser now supports <code>count</code> and <code>integer</code> values according to the <em>International System for Units (SI)</em>. For example, <code>1k</code> is equal to <code>1000</code> and <code>1Ki</code> equal to <code>1024</code>.</p></li><li><p>VAST can now ingest JSON data. The <code>import</code> command gained the <code>json</code> format, which allows for parsing line-delimited JSON (LDJSON) according to a user-selected type with <code>--type</code>. The <code>--schema</code> or <code>--schema-file</code> options can be used in conjunction to supply custom types. The JSON objects in the input must match the selected type, that is, the keys of the JSON object must be equal to the record field names and the object values must be convertible to the record field types.</p></li><li><p>For symmetry to the <code>export</code> command, the <code>import</code> command gained the <code>--max-events,n</code> option to limit the number of events that will be imported.</p></li><li><p>The <code>import</code> command gained the <code>--listen,l</code> option to receive input from the network. Currently only UDP is supported. Previously, one had to use a clever netcat pipe with enough receive buffer to achieve the same effect, e.g., <code>nc -I 1500 -p 4200 | vast import pcap</code>. Now this pipe degenerates to <code>vast import pcap -l</code>.</p></li><li><p>The new <code>--disable-accounting</code> option shuts off periodic gathering of system telemetry in the accountant actor. This also disables output in the <code>accounting.log</code>.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-113">Bug Fixes<a href="#bug-fixes-113" class="hash-link" aria-label="Direct link to Bug Fixes" title="Direct link to Bug Fixes">​</a></h3><ul><li><p>The user environments <code>LDFLAGS</code> were erroneously passed to <code>ar</code>. Instead, the user environments <code>ARFLAGS</code> are now used.</p></li><li><p>Exporting data with <code>export -n &lt;count&gt;</code> crashed when <code>count</code> was a multiple of the table slice size. The command now works as expected.</p></li><li><p>Queries of the form <code>#type ~ /pattern/</code> used to be rejected erroneously. The validation code has been corrected and such queries are now working as expected.</p></li><li><p>When specifying <code>enum</code> types in the schema, ingestion failed because there did not exist an implementation for such types. It is now possible to use define enumerations in schema as expected and query them as strings.</p></li><li><p>Queries with the less <code>&lt;</code> or greater <code>&gt;</code> operators produced off-by-one results for the <code>duration</code> when the query contained a finer resolution than the index. The operator now works as expected.</p></li><li><p>Timestamps were always printed in millisecond resolution, which lead to loss of precision when the internal representation had a higher resolution. Timestamps are now rendered up to nanosecond resolution - the maximum resolution supported.</p></li><li><p>All query expressions in the form <code>#type != X</code> were falsely evaluated as <code>#type == X</code> and consequently produced wrong results. These expressions now behave as expected.</p></li><li><p>Parsers for reading log input that relied on recursive rules leaked memory by creating cycling references. All recursive parsers have been updated to break such cycles and thus no longer leak memory.</p></li><li><p>The Zeek reader failed upon encountering logs with a <code>double</code> column, as it occurs in <code>capture_loss.log</code>. The Zeek parser generator has been fixed to handle such types correctly.</p></li><li><p>Some queries returned duplicate events because the archive did not filter the result set properly. This no longer occurs after fixing the table slice filtering logic.</p></li><li><p>The <code>map</code> data parser did not parse negative values correctly. It was not possible to parse strings of the form <code>&quot;{-42 -&gt; T}&quot;</code> because the parser attempted to parse the token for the empty map <code>&quot;{-}&quot;</code> instead.</p></li><li><p>The CSV printer of the <code>export</code> command used to insert 2 superfluous fields when formatting an event: The internal event ID and a deprecated internal timestamp value. Both fields have been removed from the output, bringing it into line with the other output formats.</p></li><li><p>When a node terminates during an import, the client process remained unaffected and kept processing input. Now the client terminates when a remote node terminates.</p></li><li><p>Evaluation of predicates with negations return incorrect results. For example, the expression <code>:addr !in 10.0.0.0/8</code> created a disjunction of all fields to which <code>:addr</code> resolved, without properly applying De-Morgan. The same bug also existed for key extractors. De-Morgan is now applied properly for the operations <code>!in</code> and <code>!~</code>.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="01---20190228"><a href="https://github.com/tenzir/vast/releases/tag/0.1" target="_blank" rel="noopener noreferrer">0.1</a> - 2019.02.28<a href="#01---20190228" class="hash-link" aria-label="Direct link to 01---20190228" title="Direct link to 01---20190228">​</a></h2><p>This is the first official release.</p></article></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#next" class="table-of-contents__link toc-highlight">Next</a><ul><li><a href="#changes" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#v4321" class="table-of-contents__link toc-highlight">v4.32.1</a><ul><li><a href="#features-1" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4320" class="table-of-contents__link toc-highlight">v4.32.0</a><ul><li><a href="#features-2" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-1" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4312" class="table-of-contents__link toc-highlight">v4.31.2</a><ul><li><a href="#features-3" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-2" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4310" class="table-of-contents__link toc-highlight">v4.31.0</a><ul><li><a href="#features-4" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-3" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4303" class="table-of-contents__link toc-highlight">v4.30.3</a><ul><li><a href="#features-5" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-4" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4302" class="table-of-contents__link toc-highlight">v4.30.2</a><ul><li><a href="#bug-fixes-5" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4301" class="table-of-contents__link toc-highlight">v4.30.1</a><ul><li><a href="#changes-1" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-6" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#v4300" class="table-of-contents__link toc-highlight">v4.30.0</a><ul><li><a href="#changes-2" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-7" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-6" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4292" class="table-of-contents__link toc-highlight">v4.29.2</a><ul><li><a href="#changes-3" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-8" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-7" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4291" class="table-of-contents__link toc-highlight">v4.29.1</a><ul><li><a href="#features-9" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-8" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4290" class="table-of-contents__link toc-highlight">v4.29.0</a><ul><li><a href="#changes-4" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-10" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-9" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4282" class="table-of-contents__link toc-highlight">v4.28.2</a><ul><li><a href="#features-11" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-10" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4280" class="table-of-contents__link toc-highlight">v4.28.0</a><ul><li><a href="#changes-5" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-12" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-11" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4270" class="table-of-contents__link toc-highlight">v4.27.0</a><ul><li><a href="#changes-6" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-13" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-12" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4260" class="table-of-contents__link toc-highlight">v4.26.0</a><ul><li><a href="#changes-7" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-14" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-13" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4250" class="table-of-contents__link toc-highlight">v4.25.0</a><ul><li><a href="#changes-8" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-15" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-14" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4241" class="table-of-contents__link toc-highlight">v4.24.1</a><ul><li><a href="#bug-fixes-15" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4240" class="table-of-contents__link toc-highlight">v4.24.0</a><ul><li><a href="#changes-9" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-16" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-16" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4231" class="table-of-contents__link toc-highlight">v4.23.1</a><ul><li><a href="#bug-fixes-17" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4230" class="table-of-contents__link toc-highlight">v4.23.0</a><ul><li><a href="#changes-10" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-17" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-18" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4222" class="table-of-contents__link toc-highlight">v4.22.2</a><ul><li><a href="#features-18" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-19" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4221" class="table-of-contents__link toc-highlight">v4.22.1</a><ul><li><a href="#features-19" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-20" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4220" class="table-of-contents__link toc-highlight">v4.22.0</a><ul><li><a href="#features-20" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-21" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4211" class="table-of-contents__link toc-highlight">v4.21.1</a><ul><li><a href="#features-21" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-22" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4210" class="table-of-contents__link toc-highlight">v4.21.0</a><ul><li><a href="#changes-11" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-22" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-23" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4203" class="table-of-contents__link toc-highlight">v4.20.3</a><ul><li><a href="#bug-fixes-24" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4202" class="table-of-contents__link toc-highlight">v4.20.2</a><ul><li><a href="#bug-fixes-25" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4201" class="table-of-contents__link toc-highlight">v4.20.1</a><ul><li><a href="#bug-fixes-26" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4200" class="table-of-contents__link toc-highlight">v4.20.0</a><ul><li><a href="#changes-12" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-23" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-27" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4196" class="table-of-contents__link toc-highlight">v4.19.6</a><ul><li><a href="#features-24" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-28" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4195" class="table-of-contents__link toc-highlight">v4.19.5</a><ul><li><a href="#bug-fixes-29" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4194" class="table-of-contents__link toc-highlight">v4.19.4</a><ul><li><a href="#bug-fixes-30" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4193" class="table-of-contents__link toc-highlight">v4.19.3</a><ul><li><a href="#bug-fixes-31" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4192" class="table-of-contents__link toc-highlight">v4.19.2</a><ul><li><a href="#changes-13" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-25" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-32" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4191" class="table-of-contents__link toc-highlight">v4.19.1</a><ul><li><a href="#bug-fixes-33" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4190" class="table-of-contents__link toc-highlight">v4.19.0</a><ul><li><a href="#changes-14" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-26" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-34" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4185" class="table-of-contents__link toc-highlight">v4.18.5</a><ul><li><a href="#bug-fixes-35" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4184" class="table-of-contents__link toc-highlight">v4.18.4</a><ul><li><a href="#bug-fixes-36" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4183" class="table-of-contents__link toc-highlight">v4.18.3</a><ul><li><a href="#changes-15" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#bug-fixes-37" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4182" class="table-of-contents__link toc-highlight">v4.18.2</a><ul><li><a href="#bug-fixes-38" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4181" class="table-of-contents__link toc-highlight">v4.18.1</a><ul><li><a href="#features-27" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-39" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4180" class="table-of-contents__link toc-highlight">v4.18.0</a><ul><li><a href="#changes-16" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-28" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-40" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4174" class="table-of-contents__link toc-highlight">v4.17.4</a><ul><li><a href="#bug-fixes-41" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4173" class="table-of-contents__link toc-highlight">v4.17.3</a><ul><li><a href="#features-29" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-42" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4172" class="table-of-contents__link toc-highlight">v4.17.2</a><ul><li><a href="#bug-fixes-43" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4171" class="table-of-contents__link toc-highlight">v4.17.1</a><ul><li><a href="#bug-fixes-44" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4170" class="table-of-contents__link toc-highlight">v4.17.0</a><ul><li><a href="#changes-17" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-30" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-45" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4160" class="table-of-contents__link toc-highlight">v4.16.0</a><ul><li><a href="#changes-18" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-31" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-46" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4152" class="table-of-contents__link toc-highlight">v4.15.2</a><ul><li><a href="#bug-fixes-47" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4151" class="table-of-contents__link toc-highlight">v4.15.1</a><ul><li><a href="#bug-fixes-48" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4150" class="table-of-contents__link toc-highlight">v4.15.0</a><ul><li><a href="#features-32" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-49" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4140" class="table-of-contents__link toc-highlight">v4.14.0</a><ul><li><a href="#changes-19" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-33" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-50" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4131" class="table-of-contents__link toc-highlight">v4.13.1</a><ul><li><a href="#bug-fixes-51" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4130" class="table-of-contents__link toc-highlight">v4.13.0</a><ul><li><a href="#changes-20" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-34" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-52" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4122" class="table-of-contents__link toc-highlight">v4.12.2</a><ul><li><a href="#features-35" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-53" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4121" class="table-of-contents__link toc-highlight">v4.12.1</a><ul><li><a href="#bug-fixes-54" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4120" class="table-of-contents__link toc-highlight">v4.12.0</a><ul><li><a href="#changes-21" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-36" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-55" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4112" class="table-of-contents__link toc-highlight">v4.11.2</a><ul><li><a href="#changes-22" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#bug-fixes-56" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4110" class="table-of-contents__link toc-highlight">v4.11.0</a><ul><li><a href="#changes-23" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-37" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-57" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4104" class="table-of-contents__link toc-highlight">v4.10.4</a><ul><li><a href="#bug-fixes-58" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4103" class="table-of-contents__link toc-highlight">v4.10.3</a><ul><li><a href="#changes-24" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#bug-fixes-59" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4101" class="table-of-contents__link toc-highlight">v4.10.1</a><ul><li><a href="#bug-fixes-60" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v4100" class="table-of-contents__link toc-highlight">v4.10.0</a><ul><li><a href="#changes-25" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-38" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-61" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v490" class="table-of-contents__link toc-highlight">v4.9.0</a><ul><li><a href="#changes-26" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-39" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-62" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v482" class="table-of-contents__link toc-highlight">v4.8.2</a><ul><li><a href="#bug-fixes-63" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v481" class="table-of-contents__link toc-highlight">v4.8.1</a><ul><li><a href="#features-40" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-64" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v480" class="table-of-contents__link toc-highlight">v4.8.0</a><ul><li><a href="#changes-27" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-41" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-65" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v471" class="table-of-contents__link toc-highlight">v4.7.1</a><ul><li><a href="#bug-fixes-66" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v470" class="table-of-contents__link toc-highlight">v4.7.0</a><ul><li><a href="#changes-28" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-42" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-67" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v464" class="table-of-contents__link toc-highlight">v4.6.4</a><ul><li><a href="#changes-29" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-43" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-68" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v463" class="table-of-contents__link toc-highlight">v4.6.3</a><ul><li><a href="#bug-fixes-69" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v460" class="table-of-contents__link toc-highlight">v4.6.0</a><ul><li><a href="#changes-30" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-44" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-70" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v450" class="table-of-contents__link toc-highlight">v4.5.0</a><ul><li><a href="#changes-31" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-45" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-71" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v440" class="table-of-contents__link toc-highlight">v4.4.0</a><ul><li><a href="#changes-32" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-46" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-72" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v430" class="table-of-contents__link toc-highlight">v4.3.0</a><ul><li><a href="#changes-33" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-47" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-73" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v420" class="table-of-contents__link toc-highlight">v4.2.0</a><ul><li><a href="#changes-34" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-48" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-74" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v410" class="table-of-contents__link toc-highlight">v4.1.0</a><ul><li><a href="#changes-35" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-49" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-75" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v401" class="table-of-contents__link toc-highlight">v4.0.1</a><ul><li><a href="#features-50" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#v400" class="table-of-contents__link toc-highlight">v4.0.0</a><ul><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-36" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-51" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-76" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v310" class="table-of-contents__link toc-highlight">v3.1.0</a><ul><li><a href="#changes-37" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-52" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-77" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v304" class="table-of-contents__link toc-highlight">v3.0.4</a><ul><li><a href="#bug-fixes-78" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v303" class="table-of-contents__link toc-highlight">v3.0.3</a><ul><li><a href="#changes-38" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-53" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#v302" class="table-of-contents__link toc-highlight">v3.0.2</a><ul><li><a href="#bug-fixes-79" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v301" class="table-of-contents__link toc-highlight">v3.0.1</a><ul><li><a href="#features-54" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-80" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v300" class="table-of-contents__link toc-highlight">v3.0.0</a><ul><li><a href="#breaking-changes-1" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-39" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-55" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-81" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v242" class="table-of-contents__link toc-highlight">v2.4.2</a><ul><li><a href="#changes-40" class="table-of-contents__link toc-highlight">Changes</a></li></ul></li><li><a href="#v241" class="table-of-contents__link toc-highlight">v2.4.1</a><ul><li><a href="#features-56" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#v240" class="table-of-contents__link toc-highlight">v2.4.0</a><ul><li><a href="#changes-41" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-57" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-82" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v231" class="table-of-contents__link toc-highlight">v2.3.1</a><ul><li><a href="#bug-fixes-83" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v230" class="table-of-contents__link toc-highlight">v2.3.0</a><ul><li><a href="#changes-42" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-58" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-84" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v220" class="table-of-contents__link toc-highlight">v2.2.0</a><ul><li><a href="#changes-43" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-59" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-85" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v210" class="table-of-contents__link toc-highlight">v2.1.0</a><ul><li><a href="#changes-44" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-60" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-86" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v200" class="table-of-contents__link toc-highlight">v2.0.0</a><ul><li><a href="#breaking-changes-2" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-45" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-61" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-87" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v112" class="table-of-contents__link toc-highlight">v1.1.2</a><ul><li><a href="#bug-fixes-88" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v111" class="table-of-contents__link toc-highlight">v1.1.1</a><ul><li><a href="#bug-fixes-89" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v110" class="table-of-contents__link toc-highlight">v1.1.0</a><ul><li><a href="#changes-46" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-62" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-90" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#v100" class="table-of-contents__link toc-highlight">v1.0.0</a><ul><li><a href="#changes-47" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-63" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-91" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20211216" class="table-of-contents__link toc-highlight">2021.12.16</a><ul><li><a href="#changes-48" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-64" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-92" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20211118" class="table-of-contents__link toc-highlight">2021.11.18</a><ul><li><a href="#changes-49" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-65" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-93" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210930" class="table-of-contents__link toc-highlight">2021.09.30</a><ul><li><a href="#changes-50" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-66" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-94" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210826" class="table-of-contents__link toc-highlight">2021.08.26</a><ul><li><a href="#changes-51" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-67" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-95" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210729" class="table-of-contents__link toc-highlight">2021.07.29</a><ul><li><a href="#changes-52" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-68" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-96" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210624" class="table-of-contents__link toc-highlight">2021.06.24</a><ul><li><a href="#breaking-changes-3" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-53" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-69" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-97" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210527" class="table-of-contents__link toc-highlight">2021.05.27</a><ul><li><a href="#breaking-changes-4" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-54" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-70" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-98" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210429" class="table-of-contents__link toc-highlight">2021.04.29</a><ul><li><a href="#breaking-changes-5" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-55" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-71" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-99" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210325" class="table-of-contents__link toc-highlight">2021.03.25</a><ul><li><a href="#breaking-changes-6" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-56" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-72" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-100" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210224" class="table-of-contents__link toc-highlight">2021.02.24</a><ul><li><a href="#breaking-changes-7" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-57" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#experimental-features" class="table-of-contents__link toc-highlight">Experimental Features</a></li><li><a href="#features-73" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-101" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20210128" class="table-of-contents__link toc-highlight">2021.01.28</a><ul><li><a href="#breaking-changes-8" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-58" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#experimental-features-1" class="table-of-contents__link toc-highlight">Experimental Features</a></li><li><a href="#features-74" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-102" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20201216" class="table-of-contents__link toc-highlight">2020.12.16</a><ul><li><a href="#breaking-changes-9" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-59" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#experimental-features-2" class="table-of-contents__link toc-highlight">Experimental Features</a></li><li><a href="#features-75" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-103" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20201029" class="table-of-contents__link toc-highlight">2020.10.29</a><ul><li><a href="#changes-60" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#experimental-features-3" class="table-of-contents__link toc-highlight">Experimental Features</a></li><li><a href="#features-76" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-104" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200930" class="table-of-contents__link toc-highlight">2020.09.30</a><ul><li><a href="#breaking-changes-10" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-61" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#experimental-features-4" class="table-of-contents__link toc-highlight">Experimental Features</a></li><li><a href="#features-77" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-105" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200828" class="table-of-contents__link toc-highlight">2020.08.28</a><ul><li><a href="#breaking-changes-11" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-62" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-78" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-106" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200728" class="table-of-contents__link toc-highlight">2020.07.28</a><ul><li><a href="#breaking-changes-12" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#changes-63" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-79" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-107" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200625" class="table-of-contents__link toc-highlight">2020.06.25</a><ul><li><a href="#changes-64" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#experimental-features-5" class="table-of-contents__link toc-highlight">Experimental Features</a></li><li><a href="#features-80" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-108" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200528" class="table-of-contents__link toc-highlight">2020.05.28</a><ul><li><a href="#changes-65" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#experimental-features-6" class="table-of-contents__link toc-highlight">Experimental Features</a></li><li><a href="#features-81" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-109" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200429" class="table-of-contents__link toc-highlight">2020.04.29</a><ul><li><a href="#changes-66" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-82" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-110" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200326" class="table-of-contents__link toc-highlight">2020.03.26</a><ul><li><a href="#changes-67" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-83" class="table-of-contents__link toc-highlight">Features</a></li></ul></li><li><a href="#20200227" class="table-of-contents__link toc-highlight">2020.02.27</a><ul><li><a href="#changes-68" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-84" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-111" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#20200131" class="table-of-contents__link toc-highlight">2020.01.31</a><ul><li><a href="#changes-69" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-85" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-112" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#02---20191030" class="table-of-contents__link toc-highlight">0.2 - 2019.10.30</a><ul><li><a href="#changes-70" class="table-of-contents__link toc-highlight">Changes</a></li><li><a href="#features-86" class="table-of-contents__link toc-highlight">Features</a></li><li><a href="#bug-fixes-113" class="table-of-contents__link toc-highlight">Bug Fixes</a></li></ul></li><li><a href="#01---20190228" class="table-of-contents__link toc-highlight">0.1 - 2019.02.28</a></li></ul></div></div></div></main></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li><li class="footer__item"><a href="https://docs.google.com/presentation/d/1R59T2nuGJg43g6PVKogZbb6DjcJXRYBx3Bih8W-A-oM/present" target="_blank" rel="noopener noreferrer" class="footer__link-item">Release Slides<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/tenzir-vs-cribl">Tenzir vs. Cribl</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/discord">Discord</a></li><li class="footer__item"><a href="https://github.com/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/tenzir_company" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/tenzir" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tenzir</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tenzir.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tenzir.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Blog Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/newsletter">Newsletter</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy-statement">Privacy Statement</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Tenzir GmbH.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.68a47143.js"></script>
<script src="/assets/js/main.31fd0d6f.js"></script>
</body>
</html>