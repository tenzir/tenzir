// Test saving to S3 with role assumption.
// Uses explicit credentials to assume a role, then saves to S3.
from {data: "test content from save_s3 with assumed role"}
write_json
save_s3 "s3://" + env("LOCALSTACK_S3_BUCKET") + "/output-role.json", aws_iam={
  access_key_id: "test",
  secret_access_key: "test",
  region: "us-east-1",
  assume_role: env("LOCALSTACK_ROLE_ARN"),
  external_id: env("LOCALSTACK_EXTERNAL_ID")
}
